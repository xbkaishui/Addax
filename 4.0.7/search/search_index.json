{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Addax \u4ecb\u7ecd \u00b6 \u6982\u89c8 \u00b6 Addax \u662f\u4e00\u4e2a\u5f02\u6784\u6570\u636e\u6e90\u79bb\u7ebf\u540c\u6b65\u5de5\u5177\uff0c\u6700\u521d\u6765\u6e90\u4e8e\u963f\u91cc\u7684 DataX \uff0c\u81f4\u529b\u4e8e\u5b9e\u73b0\u5305\u62ec\u5173\u7cfb\u578b\u6570\u636e\u5e93(MySQL\u3001Oracle\u7b49)\u3001HDFS\u3001Hive\u3001HBase\u3001FTP\u7b49\u5404\u79cd\u5f02\u6784\u6570\u636e\u6e90\u4e4b\u95f4\u7a33\u5b9a\u9ad8\u6548\u7684\u6570\u636e\u540c\u6b65\u529f\u80fd\u3002 \u4e3a\u4e86\u89e3\u51b3\u5f02\u6784\u6570\u636e\u6e90\u540c\u6b65\u95ee\u9898\uff0cAddax\u5c06\u590d\u6742\u7684\u7f51\u72b6\u7684\u540c\u6b65\u94fe\u8def\u53d8\u6210\u4e86\u661f\u578b\u6570\u636e\u94fe\u8def\uff0cAddax\u4f5c\u4e3a\u4e2d\u95f4\u4f20\u8f93\u8f7d\u4f53\u8d1f\u8d23\u8fde\u63a5\u5404\u79cd\u6570\u636e\u6e90\u3002\u5f53\u9700\u8981\u63a5\u5165\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u6e90\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u5c06\u6b64\u6570\u636e\u6e90\u5bf9\u63a5\u5230Addax\uff0c\u4fbf\u80fd\u8ddf\u5df2\u6709\u7684\u6570\u636e\u6e90\u505a\u5230\u65e0\u7f1d\u6570\u636e\u540c\u6b65\u3002 \u6846\u67b6\u8bbe\u8ba1 \u00b6 Addax\u672c\u8eab\u4f5c\u4e3a\u79bb\u7ebf\u6570\u636e\u540c\u6b65\u6846\u67b6\uff0c\u91c7\u7528 Framework + plugin \u67b6\u6784\u6784\u5efa\u3002\u5c06\u6570\u636e\u6e90\u8bfb\u53d6\u548c\u5199\u5165\u62bd\u8c61\u6210\u4e3a Reader/Writer \u63d2\u4ef6\uff0c\u7eb3\u5165\u5230\u6574\u4e2a\u540c\u6b65\u6846\u67b6\u4e2d\u3002 Reader\uff1aReader \u4e3a\u6570\u636e\u91c7\u96c6\u6a21\u5757\uff0c\u8d1f\u8d23\u91c7\u96c6\u6570\u636e\u6e90\u7684\u6570\u636e\uff0c\u5c06\u6570\u636e\u53d1\u9001\u7ed9Framework\u3002 Writer\uff1a Writer \u4e3a\u6570\u636e\u5199\u5165\u6a21\u5757\uff0c\u8d1f\u8d23\u4e0d\u65ad\u5411Framework\u53d6\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u5199\u5165\u5230\u76ee\u7684\u7aef\u3002 Framework\uff1aFramework\u7528\u4e8e\u8fde\u63a5reader\u548cwriter\uff0c\u4f5c\u4e3a\u4e24\u8005\u7684\u6570\u636e\u4f20\u8f93\u901a\u9053\uff0c\u5e76\u5904\u7406\u7f13\u51b2\uff0c\u6d41\u63a7\uff0c\u5e76\u53d1\uff0c\u6570\u636e\u8f6c\u6362\u7b49\u6838\u5fc3\u6280\u672f\u95ee\u9898\u3002 Addax Framework\u63d0\u4f9b\u4e86\u7b80\u5355\u7684\u63a5\u53e3\u4e0e\u63d2\u4ef6\u4ea4\u4e92\uff0c\u63d0\u4f9b\u7b80\u5355\u7684\u63d2\u4ef6\u63a5\u5165\u673a\u5236\uff0c\u53ea\u9700\u8981\u4efb\u610f\u52a0\u4e0a\u4e00\u79cd\u63d2\u4ef6\uff0c\u5c31\u80fd\u65e0\u7f1d\u5bf9\u63a5\u5176\u4ed6\u6570\u636e\u6e90\u3002 \u6838\u5fc3\u67b6\u6784 \u00b6 \u672c\u5c0f\u8282\u6309\u4e00\u4e2aAddax\u4f5c\u4e1a\u751f\u547d\u5468\u671f\u7684\u65f6\u5e8f\u56fe\uff0c\u4ece\u6574\u4f53\u67b6\u6784\u8bbe\u8ba1\u975e\u5e38\u7b80\u8981\u8bf4\u660e\u5404\u4e2a\u6a21\u5757\u76f8\u4e92\u5173\u7cfb\u3002 \u6838\u5fc3\u6a21\u5757\u4ecb\u7ecd \u00b6 Addax \u5b8c\u6210\u5355\u4e2a\u6570\u636e\u540c\u6b65\u7684\u4f5c\u4e1a\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3aJob\uff0cAdda x\u63a5\u53d7\u5230\u4e00\u4e2a Job \u4e4b\u540e\uff0c\u5c06\u542f\u52a8\u4e00\u4e2a\u8fdb\u7a0b\u6765\u5b8c\u6210\u6574\u4e2a\u4f5c\u4e1a\u540c\u6b65\u8fc7\u7a0b\u3002Addax Job\u6a21\u5757\u662f\u5355\u4e2a\u4f5c\u4e1a\u7684\u4e2d\u67a2\u7ba1\u7406\u8282\u70b9\uff0c\u627f\u62c5\u4e86\u6570\u636e\u6e05\u7406\u3001\u5b50\u4efb\u52a1\u5207\u5206(\u5c06\u5355\u4e00\u4f5c\u4e1a\u8ba1\u7b97\u8f6c\u5316\u4e3a\u591a\u4e2a\u5b50 Task)\u3001TaskGroup \u7ba1\u7406\u7b49\u529f\u80fd\u3002 Addax Job \u542f\u52a8\u540e\uff0c\u4f1a\u6839\u636e\u4e0d\u540c\u7684\u6e90\u7aef\u5207\u5206\u7b56\u7565\uff0c\u5c06 Job \u5207\u5206\u6210\u591a\u4e2a\u5c0f\u7684 Task (\u5b50\u4efb\u52a1)\uff0c\u4ee5\u4fbf\u4e8e\u5e76\u53d1\u6267\u884c\u3002Task \u4fbf\u662f Addax \u4f5c\u4e1a\u7684\u6700\u5c0f\u5355\u5143\uff0c\u6bcf\u4e00\u4e2a Task \u90fd\u4f1a\u8d1f\u8d23\u4e00\u90e8\u5206\u6570\u636e\u7684\u540c\u6b65\u5de5\u4f5c\u3002 \u5207\u5206\u591a\u4e2a Task \u4e4b\u540e\uff0cAddax Job \u4f1a\u8c03\u7528 Scheduler \u6a21\u5757\uff0c\u6839\u636e\u914d\u7f6e\u7684\u5e76\u53d1\u6570\u636e\u91cf\uff0c\u5c06\u62c6\u5206\u6210\u7684 Task \u91cd\u65b0\u7ec4\u5408\uff0c\u7ec4\u88c5\u6210 TaskGroup(\u4efb\u52a1\u7ec4)\u3002\u6bcf\u4e00\u4e2a TaskGroup \u8d1f\u8d23\u4ee5\u4e00\u5b9a\u7684\u5e76\u53d1\u8fd0\u884c\u5b8c\u6bd5\u5206\u914d\u597d\u7684\u6240\u6709 Task\uff0c\u9ed8\u8ba4\u5355\u4e2a\u4efb\u52a1\u7ec4\u7684\u5e76\u53d1\u6570\u91cf\u4e3a5\u3002 \u6bcf\u4e00\u4e2a Task \u90fd\u7531 TaskGroup \u8d1f\u8d23\u542f\u52a8\uff0cTask \u542f\u52a8\u540e\uff0c\u4f1a\u56fa\u5b9a\u542f\u52a8 Reader\u2014>Channel\u2014>Writer \u7684\u7ebf\u7a0b\u6765\u5b8c\u6210\u4efb\u52a1\u540c\u6b65\u5de5\u4f5c\u3002 Addax \u4f5c\u4e1a\u8fd0\u884c\u8d77\u6765\u4e4b\u540e\uff0c Job \u76d1\u63a7\u5e76\u7b49\u5f85\u591a\u4e2a TaskGroup \u6a21\u5757\u4efb\u52a1\u5b8c\u6210\uff0c\u7b49\u5f85\u6240\u6709 TaskGroup \u4efb\u52a1\u5b8c\u6210\u540e Job \u6210\u529f\u9000\u51fa\u3002\u5426\u5219\uff0c\u5f02\u5e38\u9000\u51fa\uff0c\u8fdb\u7a0b\u9000\u51fa\u503c\u975e0 \u8c03\u5ea6\u6d41\u7a0b \u00b6 \u4e3e\u4f8b\u6765\u8bf4\uff0c\u7528\u6237\u63d0\u4ea4\u4e86\u4e00\u4e2a\u4f5c\u4e1a\uff0c\u5e76\u4e14\u914d\u7f6e\u4e86 20 \u4e2a\u5e76\u53d1\uff0c\u76ee\u7684\u662f\u5c06\u4e00\u4e2a100\u5f20\u5206\u8868\u7684mysql\u6570\u636e\u540c\u6b65\u5230oracle\u91cc\u9762\u3002 \u8c03\u5ea6\u51b3\u7b56\u601d\u8def\u662f\uff1a Addax Job \u6839\u636e\u5206\u5e93\u5206\u8868\u5207\u5206\u6210\u4e86 100 \u4e2a Task\u3002 \u6839\u636e 20 \u4e2a\u5e76\u53d1\uff0c\u8ba1\u7b97\u5171\u9700\u8981\u5206\u914d 20/5 = 4 \u4e2a TaskGroup\u3002 4 \u4e2a TaskGroup \u5e73\u5206\u5207\u5206\u597d\u7684 100 \u4e2a Task\uff0c\u6bcf\u4e00\u4e2a TaskGroup \u8d1f\u8d23\u4ee55\u4e2a\u5e76\u53d1\u5171\u8ba1\u8fd0\u884c25\u4e2a Task\u3002 \u6838\u5fc3\u4f18\u52bf \u00b6 \u53ef\u9760\u7684\u6570\u636e\u8d28\u91cf\u76d1\u63a7 \u00b6 \u5b8c\u7f8e\u89e3\u51b3\u6570\u636e\u4f20\u8f93\u4e2a\u522b\u7c7b\u578b\u5931\u771f\u95ee\u9898 \u652f\u6301\u6240\u6709\u7684\u5f3a\u6570\u636e\u7c7b\u578b\uff0c\u6bcf\u4e00\u79cd\u63d2\u4ef6\u90fd\u6709\u81ea\u5df1\u7684\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u7b56\u7565\uff0c\u8ba9\u6570\u636e\u53ef\u4ee5\u5b8c\u6574\u65e0\u635f\u7684\u4f20\u8f93\u5230\u76ee\u7684\u7aef\u3002 \u63d0\u4f9b\u4f5c\u4e1a\u5168\u94fe\u8def\u7684\u6d41\u91cf\u3001\u6570\u636e\u91cf\u8fd0\u884c\u65f6\u76d1\u63a7 \u8fd0\u884c\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u5c06\u4f5c\u4e1a\u672c\u8eab\u72b6\u6001\u3001\u6570\u636e\u6d41\u91cf\u3001\u6570\u636e\u901f\u5ea6\u3001\u6267\u884c\u8fdb\u5ea6\u7b49\u4fe1\u606f\u8fdb\u884c\u5168\u9762\u7684\u5c55\u793a\uff0c\u8ba9\u7528\u6237\u53ef\u4ee5\u5b9e\u65f6\u4e86\u89e3\u4f5c\u4e1a\u72b6\u6001\u3002\u5e76\u53ef\u5728\u4f5c\u4e1a\u6267\u884c\u8fc7\u7a0b\u4e2d\u667a\u80fd\u5224\u65ad\u6e90\u7aef\u548c\u76ee\u7684\u7aef\u7684\u901f\u5ea6\u5bf9\u6bd4\u60c5\u51b5\uff0c\u7ed9\u4e88\u7528\u6237\u66f4\u591a\u6027\u80fd\u6392\u67e5\u4fe1\u606f\u3002 \u63d0\u4f9b\u810f\u6570\u636e\u63a2\u6d4b \u5728\u5927\u91cf\u6570\u636e\u7684\u4f20\u8f93\u8fc7\u7a0b\u4e2d\uff0c\u5fc5\u5b9a\u4f1a\u7531\u4e8e\u5404\u79cd\u539f\u56e0\u5bfc\u81f4\u5f88\u591a\u6570\u636e\u4f20\u8f93\u62a5\u9519(\u6bd4\u5982\u7c7b\u578b\u8f6c\u6362\u9519\u8bef)\uff0c\u8fd9\u79cd\u6570\u636e Addax \u8ba4\u4e3a\u5c31\u662f\u810f\u6570\u636e\u3002Addax \u76ee\u524d\u53ef\u4ee5\u5b9e\u73b0\u810f\u6570\u636e\u7cbe\u786e\u8fc7\u6ee4\u3001\u8bc6\u522b\u3001\u91c7\u96c6\u3001\u5c55\u793a\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u591a\u79cd\u7684\u810f\u6570\u636e\u5904\u7406\u6a21\u5f0f\uff0c\u8ba9\u7528\u6237\u51c6\u786e\u628a\u63a7\u6570\u636e\u8d28\u91cf\u5927\u5173\uff01 \u4e30\u5bcc\u7684\u6570\u636e\u8f6c\u6362\u529f\u80fd \u00b6 \u4f5c\u4e3a\u4e00\u4e2a\u670d\u52a1\u4e8e\u5927\u6570\u636e\u7684 ETL \u5de5\u5177\uff0c\u9664\u4e86\u63d0\u4f9b\u6570\u636e\u5feb\u7167\u642c\u8fc1\u529f\u80fd\u4e4b\u5916\uff0c\u8fd8\u63d0\u4f9b\u4e86\u4e30\u5bcc\u6570\u636e\u8f6c\u6362\u7684\u529f\u80fd\uff0c\u8ba9\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u8f7b\u677e\u5b8c\u6210\u6570\u636e\u8131\u654f\uff0c\u8865\u5168\uff0c\u8fc7\u6ee4\u7b49\u6570\u636e\u8f6c\u6362\u529f\u80fd\uff0c\u53e6\u5916\u8fd8\u63d0\u4f9b\u4e86\u81ea\u52a8 groovy \u51fd\u6570\uff0c\u8ba9\u7528\u6237\u81ea\u5b9a\u4e49\u8f6c\u6362\u51fd\u6570\u3002\u8be6\u60c5\u8bf7\u770b transformer \u8be6\u7ec6\u4ecb\u7ecd\u3002 \u7cbe\u51c6\u7684\u901f\u5ea6\u63a7\u5236 \u00b6 \u63d0\u4f9b\u4e86\u5305\u62ec\u901a\u9053(\u5e76\u53d1)\u3001\u8bb0\u5f55\u6d41\u3001\u5b57\u8282\u6d41\u4e09\u79cd\u6d41\u63a7\u6a21\u5f0f\uff0c\u53ef\u4ee5\u968f\u610f\u63a7\u5236\u4f60\u7684\u4f5c\u4e1a\u901f\u5ea6\uff0c\u8ba9\u4f60\u7684\u4f5c\u4e1a\u5728\u5e93\u53ef\u4ee5\u627f\u53d7\u7684\u8303\u56f4\u5185\u8fbe\u5230\u6700\u4f73\u7684\u540c\u6b65\u901f\u5ea6\u3002 { \"speed\" : { \"channel\" : 5 , \"byte\" : 1048576 , \"record\" : 10000 } } \u5f3a\u52b2\u5730\u540c\u6b65\u6027\u80fd \u00b6 \u6bcf\u4e00\u79cd\u8bfb\u63d2\u4ef6\u90fd\u6709\u4e00\u79cd\u6216\u591a\u79cd\u5207\u5206\u7b56\u7565\uff0c\u90fd\u80fd\u5c06\u4f5c\u4e1a\u5408\u7406\u5207\u5206\u6210\u591a\u4e2aTask\u5e76\u884c\u6267\u884c\uff0c\u5355\u673a\u591a\u7ebf\u7a0b\u6267\u884c\u6a21\u578b\u53ef\u4ee5\u8ba9\u901f\u5ea6\u968f\u5e76\u53d1\u6210\u7ebf\u6027\u589e\u957f\u3002 \u5728\u6e90\u7aef\u548c\u76ee\u7684\u7aef\u6027\u80fd\u90fd\u8db3\u591f\u7684\u60c5\u51b5\u4e0b\uff0c\u5355\u4e2a\u4f5c\u4e1a\u4e00\u5b9a\u53ef\u4ee5\u6253\u6ee1\u7f51\u5361\u3002 \u5065\u58ee\u7684\u5bb9\u9519\u673a\u5236 \u00b6 \u4f5c\u4e1a\u662f\u6781\u6613\u53d7\u5916\u90e8\u56e0\u7d20\u7684\u5e72\u6270\uff0c\u7f51\u7edc\u95ea\u65ad\u3001\u6570\u636e\u6e90\u4e0d\u7a33\u5b9a\u7b49\u56e0\u7d20\u5f88\u5bb9\u6613\u8ba9\u540c\u6b65\u5230\u4e00\u534a\u7684\u4f5c\u4e1a\u62a5\u9519\u505c\u6b62\u3002\u56e0\u6b64\u7a33\u5b9a\u6027\u662f Addax \u7684\u57fa\u672c\u8981\u6c42\uff0c\u5728 Addax \u7684\u8bbe\u8ba1\u4e2d\uff0c\u91cd\u70b9\u5b8c\u5584\u4e86\u6846\u67b6\u548c\u63d2\u4ef6\u7684\u7a33\u5b9a\u6027\u3002 \u76ee\u524d Addax \u53ef\u4ee5\u505a\u5230\u7ebf\u7a0b\u7ea7\u522b\u3001\u4f5c\u4e1a\u7ea7\u522b\u591a\u5c42\u6b21\u5c40\u90e8/\u5168\u5c40\u7684\u91cd\u8bd5\uff0c\u4fdd\u8bc1\u7528\u6237\u7684\u4f5c\u4e1a\u7a33\u5b9a\u8fd0\u884c\u3002","title":"Addax \u4ecb\u7ecd"},{"location":"#addax","text":"","title":"Addax \u4ecb\u7ecd"},{"location":"#_1","text":"Addax \u662f\u4e00\u4e2a\u5f02\u6784\u6570\u636e\u6e90\u79bb\u7ebf\u540c\u6b65\u5de5\u5177\uff0c\u6700\u521d\u6765\u6e90\u4e8e\u963f\u91cc\u7684 DataX \uff0c\u81f4\u529b\u4e8e\u5b9e\u73b0\u5305\u62ec\u5173\u7cfb\u578b\u6570\u636e\u5e93(MySQL\u3001Oracle\u7b49)\u3001HDFS\u3001Hive\u3001HBase\u3001FTP\u7b49\u5404\u79cd\u5f02\u6784\u6570\u636e\u6e90\u4e4b\u95f4\u7a33\u5b9a\u9ad8\u6548\u7684\u6570\u636e\u540c\u6b65\u529f\u80fd\u3002 \u4e3a\u4e86\u89e3\u51b3\u5f02\u6784\u6570\u636e\u6e90\u540c\u6b65\u95ee\u9898\uff0cAddax\u5c06\u590d\u6742\u7684\u7f51\u72b6\u7684\u540c\u6b65\u94fe\u8def\u53d8\u6210\u4e86\u661f\u578b\u6570\u636e\u94fe\u8def\uff0cAddax\u4f5c\u4e3a\u4e2d\u95f4\u4f20\u8f93\u8f7d\u4f53\u8d1f\u8d23\u8fde\u63a5\u5404\u79cd\u6570\u636e\u6e90\u3002\u5f53\u9700\u8981\u63a5\u5165\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u6e90\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u5c06\u6b64\u6570\u636e\u6e90\u5bf9\u63a5\u5230Addax\uff0c\u4fbf\u80fd\u8ddf\u5df2\u6709\u7684\u6570\u636e\u6e90\u505a\u5230\u65e0\u7f1d\u6570\u636e\u540c\u6b65\u3002","title":"\u6982\u89c8"},{"location":"#_2","text":"Addax\u672c\u8eab\u4f5c\u4e3a\u79bb\u7ebf\u6570\u636e\u540c\u6b65\u6846\u67b6\uff0c\u91c7\u7528 Framework + plugin \u67b6\u6784\u6784\u5efa\u3002\u5c06\u6570\u636e\u6e90\u8bfb\u53d6\u548c\u5199\u5165\u62bd\u8c61\u6210\u4e3a Reader/Writer \u63d2\u4ef6\uff0c\u7eb3\u5165\u5230\u6574\u4e2a\u540c\u6b65\u6846\u67b6\u4e2d\u3002 Reader\uff1aReader \u4e3a\u6570\u636e\u91c7\u96c6\u6a21\u5757\uff0c\u8d1f\u8d23\u91c7\u96c6\u6570\u636e\u6e90\u7684\u6570\u636e\uff0c\u5c06\u6570\u636e\u53d1\u9001\u7ed9Framework\u3002 Writer\uff1a Writer \u4e3a\u6570\u636e\u5199\u5165\u6a21\u5757\uff0c\u8d1f\u8d23\u4e0d\u65ad\u5411Framework\u53d6\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u5199\u5165\u5230\u76ee\u7684\u7aef\u3002 Framework\uff1aFramework\u7528\u4e8e\u8fde\u63a5reader\u548cwriter\uff0c\u4f5c\u4e3a\u4e24\u8005\u7684\u6570\u636e\u4f20\u8f93\u901a\u9053\uff0c\u5e76\u5904\u7406\u7f13\u51b2\uff0c\u6d41\u63a7\uff0c\u5e76\u53d1\uff0c\u6570\u636e\u8f6c\u6362\u7b49\u6838\u5fc3\u6280\u672f\u95ee\u9898\u3002 Addax Framework\u63d0\u4f9b\u4e86\u7b80\u5355\u7684\u63a5\u53e3\u4e0e\u63d2\u4ef6\u4ea4\u4e92\uff0c\u63d0\u4f9b\u7b80\u5355\u7684\u63d2\u4ef6\u63a5\u5165\u673a\u5236\uff0c\u53ea\u9700\u8981\u4efb\u610f\u52a0\u4e0a\u4e00\u79cd\u63d2\u4ef6\uff0c\u5c31\u80fd\u65e0\u7f1d\u5bf9\u63a5\u5176\u4ed6\u6570\u636e\u6e90\u3002","title":"\u6846\u67b6\u8bbe\u8ba1"},{"location":"#_3","text":"\u672c\u5c0f\u8282\u6309\u4e00\u4e2aAddax\u4f5c\u4e1a\u751f\u547d\u5468\u671f\u7684\u65f6\u5e8f\u56fe\uff0c\u4ece\u6574\u4f53\u67b6\u6784\u8bbe\u8ba1\u975e\u5e38\u7b80\u8981\u8bf4\u660e\u5404\u4e2a\u6a21\u5757\u76f8\u4e92\u5173\u7cfb\u3002","title":"\u6838\u5fc3\u67b6\u6784"},{"location":"#_4","text":"Addax \u5b8c\u6210\u5355\u4e2a\u6570\u636e\u540c\u6b65\u7684\u4f5c\u4e1a\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3aJob\uff0cAdda x\u63a5\u53d7\u5230\u4e00\u4e2a Job \u4e4b\u540e\uff0c\u5c06\u542f\u52a8\u4e00\u4e2a\u8fdb\u7a0b\u6765\u5b8c\u6210\u6574\u4e2a\u4f5c\u4e1a\u540c\u6b65\u8fc7\u7a0b\u3002Addax Job\u6a21\u5757\u662f\u5355\u4e2a\u4f5c\u4e1a\u7684\u4e2d\u67a2\u7ba1\u7406\u8282\u70b9\uff0c\u627f\u62c5\u4e86\u6570\u636e\u6e05\u7406\u3001\u5b50\u4efb\u52a1\u5207\u5206(\u5c06\u5355\u4e00\u4f5c\u4e1a\u8ba1\u7b97\u8f6c\u5316\u4e3a\u591a\u4e2a\u5b50 Task)\u3001TaskGroup \u7ba1\u7406\u7b49\u529f\u80fd\u3002 Addax Job \u542f\u52a8\u540e\uff0c\u4f1a\u6839\u636e\u4e0d\u540c\u7684\u6e90\u7aef\u5207\u5206\u7b56\u7565\uff0c\u5c06 Job \u5207\u5206\u6210\u591a\u4e2a\u5c0f\u7684 Task (\u5b50\u4efb\u52a1)\uff0c\u4ee5\u4fbf\u4e8e\u5e76\u53d1\u6267\u884c\u3002Task \u4fbf\u662f Addax \u4f5c\u4e1a\u7684\u6700\u5c0f\u5355\u5143\uff0c\u6bcf\u4e00\u4e2a Task \u90fd\u4f1a\u8d1f\u8d23\u4e00\u90e8\u5206\u6570\u636e\u7684\u540c\u6b65\u5de5\u4f5c\u3002 \u5207\u5206\u591a\u4e2a Task \u4e4b\u540e\uff0cAddax Job \u4f1a\u8c03\u7528 Scheduler \u6a21\u5757\uff0c\u6839\u636e\u914d\u7f6e\u7684\u5e76\u53d1\u6570\u636e\u91cf\uff0c\u5c06\u62c6\u5206\u6210\u7684 Task \u91cd\u65b0\u7ec4\u5408\uff0c\u7ec4\u88c5\u6210 TaskGroup(\u4efb\u52a1\u7ec4)\u3002\u6bcf\u4e00\u4e2a TaskGroup \u8d1f\u8d23\u4ee5\u4e00\u5b9a\u7684\u5e76\u53d1\u8fd0\u884c\u5b8c\u6bd5\u5206\u914d\u597d\u7684\u6240\u6709 Task\uff0c\u9ed8\u8ba4\u5355\u4e2a\u4efb\u52a1\u7ec4\u7684\u5e76\u53d1\u6570\u91cf\u4e3a5\u3002 \u6bcf\u4e00\u4e2a Task \u90fd\u7531 TaskGroup \u8d1f\u8d23\u542f\u52a8\uff0cTask \u542f\u52a8\u540e\uff0c\u4f1a\u56fa\u5b9a\u542f\u52a8 Reader\u2014>Channel\u2014>Writer \u7684\u7ebf\u7a0b\u6765\u5b8c\u6210\u4efb\u52a1\u540c\u6b65\u5de5\u4f5c\u3002 Addax \u4f5c\u4e1a\u8fd0\u884c\u8d77\u6765\u4e4b\u540e\uff0c Job \u76d1\u63a7\u5e76\u7b49\u5f85\u591a\u4e2a TaskGroup \u6a21\u5757\u4efb\u52a1\u5b8c\u6210\uff0c\u7b49\u5f85\u6240\u6709 TaskGroup \u4efb\u52a1\u5b8c\u6210\u540e Job \u6210\u529f\u9000\u51fa\u3002\u5426\u5219\uff0c\u5f02\u5e38\u9000\u51fa\uff0c\u8fdb\u7a0b\u9000\u51fa\u503c\u975e0","title":"\u6838\u5fc3\u6a21\u5757\u4ecb\u7ecd"},{"location":"#_5","text":"\u4e3e\u4f8b\u6765\u8bf4\uff0c\u7528\u6237\u63d0\u4ea4\u4e86\u4e00\u4e2a\u4f5c\u4e1a\uff0c\u5e76\u4e14\u914d\u7f6e\u4e86 20 \u4e2a\u5e76\u53d1\uff0c\u76ee\u7684\u662f\u5c06\u4e00\u4e2a100\u5f20\u5206\u8868\u7684mysql\u6570\u636e\u540c\u6b65\u5230oracle\u91cc\u9762\u3002 \u8c03\u5ea6\u51b3\u7b56\u601d\u8def\u662f\uff1a Addax Job \u6839\u636e\u5206\u5e93\u5206\u8868\u5207\u5206\u6210\u4e86 100 \u4e2a Task\u3002 \u6839\u636e 20 \u4e2a\u5e76\u53d1\uff0c\u8ba1\u7b97\u5171\u9700\u8981\u5206\u914d 20/5 = 4 \u4e2a TaskGroup\u3002 4 \u4e2a TaskGroup \u5e73\u5206\u5207\u5206\u597d\u7684 100 \u4e2a Task\uff0c\u6bcf\u4e00\u4e2a TaskGroup \u8d1f\u8d23\u4ee55\u4e2a\u5e76\u53d1\u5171\u8ba1\u8fd0\u884c25\u4e2a Task\u3002","title":"\u8c03\u5ea6\u6d41\u7a0b"},{"location":"#_6","text":"","title":"\u6838\u5fc3\u4f18\u52bf"},{"location":"#_7","text":"\u5b8c\u7f8e\u89e3\u51b3\u6570\u636e\u4f20\u8f93\u4e2a\u522b\u7c7b\u578b\u5931\u771f\u95ee\u9898 \u652f\u6301\u6240\u6709\u7684\u5f3a\u6570\u636e\u7c7b\u578b\uff0c\u6bcf\u4e00\u79cd\u63d2\u4ef6\u90fd\u6709\u81ea\u5df1\u7684\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u7b56\u7565\uff0c\u8ba9\u6570\u636e\u53ef\u4ee5\u5b8c\u6574\u65e0\u635f\u7684\u4f20\u8f93\u5230\u76ee\u7684\u7aef\u3002 \u63d0\u4f9b\u4f5c\u4e1a\u5168\u94fe\u8def\u7684\u6d41\u91cf\u3001\u6570\u636e\u91cf\u8fd0\u884c\u65f6\u76d1\u63a7 \u8fd0\u884c\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u5c06\u4f5c\u4e1a\u672c\u8eab\u72b6\u6001\u3001\u6570\u636e\u6d41\u91cf\u3001\u6570\u636e\u901f\u5ea6\u3001\u6267\u884c\u8fdb\u5ea6\u7b49\u4fe1\u606f\u8fdb\u884c\u5168\u9762\u7684\u5c55\u793a\uff0c\u8ba9\u7528\u6237\u53ef\u4ee5\u5b9e\u65f6\u4e86\u89e3\u4f5c\u4e1a\u72b6\u6001\u3002\u5e76\u53ef\u5728\u4f5c\u4e1a\u6267\u884c\u8fc7\u7a0b\u4e2d\u667a\u80fd\u5224\u65ad\u6e90\u7aef\u548c\u76ee\u7684\u7aef\u7684\u901f\u5ea6\u5bf9\u6bd4\u60c5\u51b5\uff0c\u7ed9\u4e88\u7528\u6237\u66f4\u591a\u6027\u80fd\u6392\u67e5\u4fe1\u606f\u3002 \u63d0\u4f9b\u810f\u6570\u636e\u63a2\u6d4b \u5728\u5927\u91cf\u6570\u636e\u7684\u4f20\u8f93\u8fc7\u7a0b\u4e2d\uff0c\u5fc5\u5b9a\u4f1a\u7531\u4e8e\u5404\u79cd\u539f\u56e0\u5bfc\u81f4\u5f88\u591a\u6570\u636e\u4f20\u8f93\u62a5\u9519(\u6bd4\u5982\u7c7b\u578b\u8f6c\u6362\u9519\u8bef)\uff0c\u8fd9\u79cd\u6570\u636e Addax \u8ba4\u4e3a\u5c31\u662f\u810f\u6570\u636e\u3002Addax \u76ee\u524d\u53ef\u4ee5\u5b9e\u73b0\u810f\u6570\u636e\u7cbe\u786e\u8fc7\u6ee4\u3001\u8bc6\u522b\u3001\u91c7\u96c6\u3001\u5c55\u793a\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u591a\u79cd\u7684\u810f\u6570\u636e\u5904\u7406\u6a21\u5f0f\uff0c\u8ba9\u7528\u6237\u51c6\u786e\u628a\u63a7\u6570\u636e\u8d28\u91cf\u5927\u5173\uff01","title":"\u53ef\u9760\u7684\u6570\u636e\u8d28\u91cf\u76d1\u63a7"},{"location":"#_8","text":"\u4f5c\u4e3a\u4e00\u4e2a\u670d\u52a1\u4e8e\u5927\u6570\u636e\u7684 ETL \u5de5\u5177\uff0c\u9664\u4e86\u63d0\u4f9b\u6570\u636e\u5feb\u7167\u642c\u8fc1\u529f\u80fd\u4e4b\u5916\uff0c\u8fd8\u63d0\u4f9b\u4e86\u4e30\u5bcc\u6570\u636e\u8f6c\u6362\u7684\u529f\u80fd\uff0c\u8ba9\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u8f7b\u677e\u5b8c\u6210\u6570\u636e\u8131\u654f\uff0c\u8865\u5168\uff0c\u8fc7\u6ee4\u7b49\u6570\u636e\u8f6c\u6362\u529f\u80fd\uff0c\u53e6\u5916\u8fd8\u63d0\u4f9b\u4e86\u81ea\u52a8 groovy \u51fd\u6570\uff0c\u8ba9\u7528\u6237\u81ea\u5b9a\u4e49\u8f6c\u6362\u51fd\u6570\u3002\u8be6\u60c5\u8bf7\u770b transformer \u8be6\u7ec6\u4ecb\u7ecd\u3002","title":"\u4e30\u5bcc\u7684\u6570\u636e\u8f6c\u6362\u529f\u80fd"},{"location":"#_9","text":"\u63d0\u4f9b\u4e86\u5305\u62ec\u901a\u9053(\u5e76\u53d1)\u3001\u8bb0\u5f55\u6d41\u3001\u5b57\u8282\u6d41\u4e09\u79cd\u6d41\u63a7\u6a21\u5f0f\uff0c\u53ef\u4ee5\u968f\u610f\u63a7\u5236\u4f60\u7684\u4f5c\u4e1a\u901f\u5ea6\uff0c\u8ba9\u4f60\u7684\u4f5c\u4e1a\u5728\u5e93\u53ef\u4ee5\u627f\u53d7\u7684\u8303\u56f4\u5185\u8fbe\u5230\u6700\u4f73\u7684\u540c\u6b65\u901f\u5ea6\u3002 { \"speed\" : { \"channel\" : 5 , \"byte\" : 1048576 , \"record\" : 10000 } }","title":"\u7cbe\u51c6\u7684\u901f\u5ea6\u63a7\u5236"},{"location":"#_10","text":"\u6bcf\u4e00\u79cd\u8bfb\u63d2\u4ef6\u90fd\u6709\u4e00\u79cd\u6216\u591a\u79cd\u5207\u5206\u7b56\u7565\uff0c\u90fd\u80fd\u5c06\u4f5c\u4e1a\u5408\u7406\u5207\u5206\u6210\u591a\u4e2aTask\u5e76\u884c\u6267\u884c\uff0c\u5355\u673a\u591a\u7ebf\u7a0b\u6267\u884c\u6a21\u578b\u53ef\u4ee5\u8ba9\u901f\u5ea6\u968f\u5e76\u53d1\u6210\u7ebf\u6027\u589e\u957f\u3002 \u5728\u6e90\u7aef\u548c\u76ee\u7684\u7aef\u6027\u80fd\u90fd\u8db3\u591f\u7684\u60c5\u51b5\u4e0b\uff0c\u5355\u4e2a\u4f5c\u4e1a\u4e00\u5b9a\u53ef\u4ee5\u6253\u6ee1\u7f51\u5361\u3002","title":"\u5f3a\u52b2\u5730\u540c\u6b65\u6027\u80fd"},{"location":"#_11","text":"\u4f5c\u4e1a\u662f\u6781\u6613\u53d7\u5916\u90e8\u56e0\u7d20\u7684\u5e72\u6270\uff0c\u7f51\u7edc\u95ea\u65ad\u3001\u6570\u636e\u6e90\u4e0d\u7a33\u5b9a\u7b49\u56e0\u7d20\u5f88\u5bb9\u6613\u8ba9\u540c\u6b65\u5230\u4e00\u534a\u7684\u4f5c\u4e1a\u62a5\u9519\u505c\u6b62\u3002\u56e0\u6b64\u7a33\u5b9a\u6027\u662f Addax \u7684\u57fa\u672c\u8981\u6c42\uff0c\u5728 Addax \u7684\u8bbe\u8ba1\u4e2d\uff0c\u91cd\u70b9\u5b8c\u5584\u4e86\u6846\u67b6\u548c\u63d2\u4ef6\u7684\u7a33\u5b9a\u6027\u3002 \u76ee\u524d Addax \u53ef\u4ee5\u505a\u5230\u7ebf\u7a0b\u7ea7\u522b\u3001\u4f5c\u4e1a\u7ea7\u522b\u591a\u5c42\u6b21\u5c40\u90e8/\u5168\u5c40\u7684\u91cd\u8bd5\uff0c\u4fdd\u8bc1\u7528\u6237\u7684\u4f5c\u4e1a\u7a33\u5b9a\u8fd0\u884c\u3002","title":"\u5065\u58ee\u7684\u5bb9\u9519\u673a\u5236"},{"location":"debug/","text":"\u5982\u4f55\u8c03\u8bd5\u9879\u76ee \u00b6 \u5982\u679c\u4f60\u60f3\u5728\u672c\u5730\u4fee\u6539\u6216\u8005\u8c03\u8bd5\u4ee3\u7801\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f\uff0c\u4ee5\u4e0b\u7684\u64cd\u4f5c\u5747\u4ee5 Intellij IDEA \u5f00\u53d1\u5de5\u5177\u4e3a\u4f8b\u3002 \u8c03\u8bd5\u53ef\u4ee5\u5206\u6210\u4e24\u65b9\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u4ee3\u7801\u548c\u4e8c\u8fdb\u5236\u5305\u90fd\u5728\u672c\u5730\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u672c\u5730\u8c03\u8bd5\uff1b\u53e6\u5916\u4e00\u79cd\u6e90\u4ee3\u7801\u5728\u672c\u5730\uff0c\u4f46\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u5df2\u7ecf\u90e8\u7f72\u5728\u8fdc\u7a0b\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6211\u4eec\u79f0\u4e4b\u4e3a\u8fdc\u7a0b\u8c03\u8bd5\u3002 \u4e0b\u9762\u5206\u522b\u63cf\u8ff0 \u672c\u5730\u8c03\u8bd5 \u00b6 \u4e00\u4e9b\u8bbe\u5b9a \u00b6 \u6211\u4eec\u5047\u5b9a\u672c\u5730\u90e8\u7f72\u7684 Addax \u5728 /opt/app/addax/4.0.3 \u6587\u4ef6\u5939\u4e0b\u3002\u5176 job \u76ee\u5f55\u4e0b\u6709\u8fd9\u6837\u7684\u4e00\u4e2a job.json \u914d\u7f6e\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/job.json { \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"addax\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 00:00:00\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } \u4e0a\u8ff0 job \u6587\u4ef6\u8fd0\u884c\u6ca1\u6709\u7b26\u5408\u6211\u4eec\u7684\u9884\u671f\uff0c\u731c\u6d4b\u662f streamreader \u8fd9\u4e2a\u63d2\u4ef6\u7684 parseMixupFunctions \u51fd\u6570\u6709\u95ee\u9898\uff0c\u6211\u60f3\u8c03\u8bd5\u770b\u5177\u4f53\u95ee\u9898\u5728\u54ea\u91cc\u3002 \u914d\u7f6e IDEA \u00b6 \u6253\u5f00 IDEA\u5de5\u5177\uff0c\u5e76\u6253\u5f00 addax \u9879\u76ee\u6e90\u4ee3\u7801\uff0c\u6253\u5f00 plugin/reader/streamreader/StreamReader.java \u6587\u4ef6\uff0c\u627e\u5230 parseMixupFunctions \u51fd\u6570\uff0c\u5e76\u5728\u51fd\u6570\u7533\u660e\u5904\u7684\u70b9\u51fb\u5de6\u4fa7\u8fb9\u7f18\u5904\u589e\u52a0\u65ad\u70b9\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb IDEA \u7684 Run->Edit Configurations... \u83dc\u5355\uff0c\u5728\u5f39\u51fa\u7684 Run/Debug Configurations \u7a97\u53e3\uff0c\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684 + \u6309\u94ae\uff0c\u7136\u540e\u9009\u62e9 \u9009\u62e9 Application \uff0c\u5728\u53f3\u4fa7\u914d\u7f6e\u6846\u4e2d\uff0c\u586b\u5199\u76f8\u5173\u4fe1\u606f\u5982\u4e0b\uff1a Name: \u8c03\u8bd5\u63cf\u8ff0\u540d\u79f0\uff0c\u8fd9\u91cc\u53ef\u4ee5\u6309\u7167\u81ea\u5df1\u559c\u597d\u586b\u5199 Run on: \u9009\u62e9 Local machine Build and run: \u7b2c\u4e00\u4e2a\u6846: \u9009\u62e9 JDK \u7248\u672c\uff0c\u76ee\u524d\u4ec5\u57281.8\b\u7248\u672c\u4e0a\u4e25\u683c\u6d4b\u8bd5\uff0c\u5efa\u8bae\u9009\u62e91.8\u7248\u672c \u7b2c\u4e8c\u4e2a\u6846: \u9009\u62e9 addax-core \u6a21\u5757 Main class : \u586b\u5199 com.wgzhao.addax.core.Engine \u70b9\u51fb Modify options \uff0c\u5728\u5f39\u51fa\u7684\u4e0b\u62c9\u6846\u4e2d\uff0c\u9009\u62e9 Add VM Options \uff0c\u5728\u589e\u52a0\u7684 VM Options \u4e2d\uff0c\u586b\u5199 -Daddax.home=/opt/app/addax/4.0.3 Program arguments : \u586b\u5199 -job job/job.json Working directory \uff1a \u586b\u5199 /opt/app/addax/4.0.3 \u5176\u4ed6\u4fdd\u6301\u4e0d\u53d8\uff0c\u70b9\u51fb Apply \u6309\u94ae\u3002\u5f97\u5230\u7c7b\u4f3c\u4e0b\u56fe\u914d\u7f6e\u5185\u5bb9 \u70b9\u51fb OK \u6309\u94ae\u4fdd\u5b58\u4e0a\u8ff0\u914d\u7f6e\uff0c\u56de\u5230 IDEA \u4e3b\u7a97\u53e3\uff0c\u5728\u7a97\u53e3\u83dc\u5355\u680f\u6709\u7eff\u8272 \ud83d\udd28 \u7684\u53f3\u4fa7\uff0c\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\u521a\u624d\u914d\u7f6e\u7684\u63cf\u8ff0\u6587\u4ef6\uff0c\u7c7b\u4f3c\u4e0b\u56fe\uff1a \u70b9\u51fb\u4e0a\u8ff0\u622a\u56fe\u4e2d\u7684\u7eff\u8272 DEBUG \u5c0f\u866b\u6309\u94ae\uff0c\u8fdb\u5165\u8c03\u8bd5\uff0c\u5f97\u5230\u7c7b\u4f3c\u4e0b\u56fe\u7684\u8c03\u8bd5\u7a97\u53e3\uff1a \u8fdc\u7a0b\u8c03\u8bd5 \u00b6 \u4e00\u4e9b\u5047\u5b9a \u00b6 \u5047\u5b9a\u7a0b\u5e8f\u90e8\u7f72\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\uff0c\u9700\u8981\u76f4\u63a5\u8c03\u8bd5\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u7684\u7a0b\u5e8f\uff0c\u5047\u5b9a\u8fdc\u7a0b\u670d\u52a1\u5668IP\u5730\u5740\u4e3a 192.168.1.100 \uff0c\b Addax \u90e8\u7f72\u5728 /opt/addax/4.0.3 \u76ee\u5f55\u4e0b\uff0c\u5176 job \u6587\u4ef6\u5939\u4e0b\uff0c\u4e5f\u6709\u4e00\u4e2a\u548c\u672c\u5730\u8c03\u8bd5\u4e2d\u63cf\u8ff0\u7684 job.json \u6587\u4ef6\u3002 \u540c\u6837\u7684\uff0c\u4e0a\u8ff0 job \u6587\u4ef6\u8fd0\u884c\u6ca1\u6709\u7b26\u5408\u6211\u4eec\u7684\u9884\u671f\uff0c\u731c\u6d4b\u662f streamreader \u8fd9\u4e2a\u63d2\u4ef6\u7684 parseMixupFunctions \u51fd\u6570\u6709\u95ee\u9898\uff0c\u6211\u60f3\u8c03\u8bd5\u770b\u5177\u4f53\u95ee\u9898\u5728\u54ea\u91cc\u3002 \u6ce8\u610f\uff1a\u8fdc\u7a0b\u8c03\u8bd5\u9700\u8981\u5728\u670d\u52a1\u5668\u6253\u5f00 9999 \u7aef\u53e3\uff0c\u56e0\u6b64\u8981\u4fdd\u8bc1\u670d\u52a1\u5668\u4e0a\u7684 9999 \u7aef\u53e3\u6ca1\u6709\u88ab\u5360\u7528\uff0c\u5982\u679c\u88ab\u5360\u7528\uff0c\u5219\u9700\u8981\u4fee\u6539\u6b64\u7aef\u53e3\u3002 \u4fee\u6539\u65b9\u5f0f\u5982\u4e0b\uff1a \u6253\u5f00 bin/addax.sh \u811a\u672c \u5b9a\u4f4d\u5230\u5927\u7ea624\u884c\u5904\uff0c\u627e\u5230 address=0.0.0.0:9999 \u5b57\u7b26\u4e32 \u5c06 9999 \u4fee\u6539\u6210\u5176\u4ed6\u672a\u88ab\u5360\u7528\u7684\u7aef\u53e3 \u4fdd\u5b58\u9000\u51fa \u914d\u7f6e IDEA \u00b6 \u6253\u5f00 IDEA\u5de5\u5177\uff0c\u5e76\u6253\u5f00 addax \u9879\u76ee\u6e90\u4ee3\u7801\uff0c\u6253\u5f00 plugin/reader/streamreader/StreamReader.java \u6587\u4ef6\uff0c\u627e\u5230 parseMixupFunctions \u51fd\u6570\uff0c\u5e76\u5728\u51fd\u6570\u7533\u660e\u5904\u7684\u70b9\u51fb\u5de6\u4fa7\u8fb9\u7f18\u5904\u589e\u52a0\u65ad\u70b9\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb IDEA \u7684 Run->Edit Configurations... \u83dc\u5355\uff0c\u5728\u5f39\u51fa\u7684 Run/Debug Configurations \u7a97\u53e3\uff0c\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684 + \u6309\u94ae\uff0c\u7136\u540e\u9009\u62e9 \u9009\u62e9 Remove JVM Debug \uff0c\u5728\u53f3\u4fa7\u914d\u7f6e\u6846\u4e2d\uff0c\u586b\u5199\u76f8\u5173\u4fe1\u606f\u5982\u4e0b\uff1a Name: \u8c03\u8bd5\u63cf\u8ff0\u540d\u79f0\uff0c\u8fd9\u91cc\u53ef\u4ee5\u6309\u7167\u81ea\u5df1\u559c\u597d\u586b\u5199 Configuration: Host: \u586b\u5199\u8fdc\u7a0b\u670d\u52a1\u5668IP\u5730\u5740\uff0c\u8fd9\u91cc\u586b\u5199 192.168.1.100 Port: \u586b\u5199\u8c03\u8bd5\u7aef\u53e3\uff0c\u8fd9\u91cc\u586b\u5199 9999 \u6216\u8005\u4f60\u4fee\u6539\u8fc7\u7684\u7aef\u53e3 \u5176\u4ed6\u4fdd\u6301\u4e0d\u53d8\uff0c\u70b9\u51fb Apply \u6309\u94ae\uff0c\u5f97\u5230\u5982\u4e0b\u914d\u7f6e\u4fe1\u606f\uff1a \u70b9\u51fb OK \u6309\u94ae\u4fdd\u5b58\u5e76\u8fd4\u56de\u5230 IDEA \u4e3b\u7a97\u53e3 \u786e\u4fdd\u5728\u7a97\u53e3\u5de5\u5177\u680f\u6709\u7eff\u8272 \ud83d\udd28 \u7684\u53f3\u4fa7\u9009\u62e9\u7684\u662f\u4e0a\u8ff0\u586b\u5199 Name \u7684\u63cf\u8ff0\u914d\u7f6e\uff0c\u5426\u5219\u5728\u4e0b\u62c9\u6846\u4e2d\u9009\u62e9\u521a\u624d\u7684\u914d\u7f6e\u3002 \u8fd0\u884c\u8c03\u8bd5 \u00b6 \u8fd0\u884c\u8fdc\u7a0b\u8c03\u8bd5\u5206\u6210\u4e24\u4e2a\u6b65\u9aa4\uff0c\u4e00\u662f\u542f\u52a8\u7a0b\u5e8f\uff0c\u4e8c\u662f\u8c03\u8bd5\u5de5\u5177\u8054\u63a5\u5230\u8fd0\u884c\u7684\u7a0b\u5e8f\u4e0a\u3002 \u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a bin/addax.sh -d job/job.json \u5982\u679c\u8fd0\u884c\u6b63\u5e38\uff0c\u4f1a\u5f97\u5230\u5982\u4e0b\u4fe1\u606f\uff1a bin/addax.sh -d job/job.json Listening for transport dt_socket at address: 9999 \u8868\u793a\u7a0b\u5e8f\u76d1\u542c\u5728 9999 \u7aef\u53e3\u4e0a\uff0c\u7b49\u5f85\u8054\u63a5\u3002 \u8fd4\u56de IDEA \u7a97\u53e3\uff0c\u70b9\u51fb\u5de5\u5177\u680f\u4e0a\u7eff\u8272 DEBUG \u5c0f\u866b\u6309\u94ae\uff0c\u5f00\u59cb\u8c03\u8bd5\uff0c\u5982\u679c\u8fd0\u884c\u6b63\u5e38\uff0c\u4f1a\u5f97\u5230\u7c7b\u4f3c\u4e0b\u56fe\u7684\u8c03\u8bd5\u7a97\u53e3\uff1a","title":"\u5982\u4f55\u8c03\u8bd5\u9879\u76ee"},{"location":"debug/#_1","text":"\u5982\u679c\u4f60\u60f3\u5728\u672c\u5730\u4fee\u6539\u6216\u8005\u8c03\u8bd5\u4ee3\u7801\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f\uff0c\u4ee5\u4e0b\u7684\u64cd\u4f5c\u5747\u4ee5 Intellij IDEA \u5f00\u53d1\u5de5\u5177\u4e3a\u4f8b\u3002 \u8c03\u8bd5\u53ef\u4ee5\u5206\u6210\u4e24\u65b9\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u4ee3\u7801\u548c\u4e8c\u8fdb\u5236\u5305\u90fd\u5728\u672c\u5730\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u672c\u5730\u8c03\u8bd5\uff1b\u53e6\u5916\u4e00\u79cd\u6e90\u4ee3\u7801\u5728\u672c\u5730\uff0c\u4f46\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u5df2\u7ecf\u90e8\u7f72\u5728\u8fdc\u7a0b\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6211\u4eec\u79f0\u4e4b\u4e3a\u8fdc\u7a0b\u8c03\u8bd5\u3002 \u4e0b\u9762\u5206\u522b\u63cf\u8ff0","title":"\u5982\u4f55\u8c03\u8bd5\u9879\u76ee"},{"location":"debug/#_2","text":"","title":"\u672c\u5730\u8c03\u8bd5"},{"location":"debug/#_3","text":"\u6211\u4eec\u5047\u5b9a\u672c\u5730\u90e8\u7f72\u7684 Addax \u5728 /opt/app/addax/4.0.3 \u6587\u4ef6\u5939\u4e0b\u3002\u5176 job \u76ee\u5f55\u4e0b\u6709\u8fd9\u6837\u7684\u4e00\u4e2a job.json \u914d\u7f6e\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/job.json { \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"addax\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 00:00:00\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } \u4e0a\u8ff0 job \u6587\u4ef6\u8fd0\u884c\u6ca1\u6709\u7b26\u5408\u6211\u4eec\u7684\u9884\u671f\uff0c\u731c\u6d4b\u662f streamreader \u8fd9\u4e2a\u63d2\u4ef6\u7684 parseMixupFunctions \u51fd\u6570\u6709\u95ee\u9898\uff0c\u6211\u60f3\u8c03\u8bd5\u770b\u5177\u4f53\u95ee\u9898\u5728\u54ea\u91cc\u3002","title":"\u4e00\u4e9b\u8bbe\u5b9a"},{"location":"debug/#idea","text":"\u6253\u5f00 IDEA\u5de5\u5177\uff0c\u5e76\u6253\u5f00 addax \u9879\u76ee\u6e90\u4ee3\u7801\uff0c\u6253\u5f00 plugin/reader/streamreader/StreamReader.java \u6587\u4ef6\uff0c\u627e\u5230 parseMixupFunctions \u51fd\u6570\uff0c\u5e76\u5728\u51fd\u6570\u7533\u660e\u5904\u7684\u70b9\u51fb\u5de6\u4fa7\u8fb9\u7f18\u5904\u589e\u52a0\u65ad\u70b9\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb IDEA \u7684 Run->Edit Configurations... \u83dc\u5355\uff0c\u5728\u5f39\u51fa\u7684 Run/Debug Configurations \u7a97\u53e3\uff0c\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684 + \u6309\u94ae\uff0c\u7136\u540e\u9009\u62e9 \u9009\u62e9 Application \uff0c\u5728\u53f3\u4fa7\u914d\u7f6e\u6846\u4e2d\uff0c\u586b\u5199\u76f8\u5173\u4fe1\u606f\u5982\u4e0b\uff1a Name: \u8c03\u8bd5\u63cf\u8ff0\u540d\u79f0\uff0c\u8fd9\u91cc\u53ef\u4ee5\u6309\u7167\u81ea\u5df1\u559c\u597d\u586b\u5199 Run on: \u9009\u62e9 Local machine Build and run: \u7b2c\u4e00\u4e2a\u6846: \u9009\u62e9 JDK \u7248\u672c\uff0c\u76ee\u524d\u4ec5\u57281.8\b\u7248\u672c\u4e0a\u4e25\u683c\u6d4b\u8bd5\uff0c\u5efa\u8bae\u9009\u62e91.8\u7248\u672c \u7b2c\u4e8c\u4e2a\u6846: \u9009\u62e9 addax-core \u6a21\u5757 Main class : \u586b\u5199 com.wgzhao.addax.core.Engine \u70b9\u51fb Modify options \uff0c\u5728\u5f39\u51fa\u7684\u4e0b\u62c9\u6846\u4e2d\uff0c\u9009\u62e9 Add VM Options \uff0c\u5728\u589e\u52a0\u7684 VM Options \u4e2d\uff0c\u586b\u5199 -Daddax.home=/opt/app/addax/4.0.3 Program arguments : \u586b\u5199 -job job/job.json Working directory \uff1a \u586b\u5199 /opt/app/addax/4.0.3 \u5176\u4ed6\u4fdd\u6301\u4e0d\u53d8\uff0c\u70b9\u51fb Apply \u6309\u94ae\u3002\u5f97\u5230\u7c7b\u4f3c\u4e0b\u56fe\u914d\u7f6e\u5185\u5bb9 \u70b9\u51fb OK \u6309\u94ae\u4fdd\u5b58\u4e0a\u8ff0\u914d\u7f6e\uff0c\u56de\u5230 IDEA \u4e3b\u7a97\u53e3\uff0c\u5728\u7a97\u53e3\u83dc\u5355\u680f\u6709\u7eff\u8272 \ud83d\udd28 \u7684\u53f3\u4fa7\uff0c\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\u521a\u624d\u914d\u7f6e\u7684\u63cf\u8ff0\u6587\u4ef6\uff0c\u7c7b\u4f3c\u4e0b\u56fe\uff1a \u70b9\u51fb\u4e0a\u8ff0\u622a\u56fe\u4e2d\u7684\u7eff\u8272 DEBUG \u5c0f\u866b\u6309\u94ae\uff0c\u8fdb\u5165\u8c03\u8bd5\uff0c\u5f97\u5230\u7c7b\u4f3c\u4e0b\u56fe\u7684\u8c03\u8bd5\u7a97\u53e3\uff1a","title":"\u914d\u7f6e IDEA"},{"location":"debug/#_4","text":"","title":"\u8fdc\u7a0b\u8c03\u8bd5"},{"location":"debug/#_5","text":"\u5047\u5b9a\u7a0b\u5e8f\u90e8\u7f72\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\uff0c\u9700\u8981\u76f4\u63a5\u8c03\u8bd5\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u7684\u7a0b\u5e8f\uff0c\u5047\u5b9a\u8fdc\u7a0b\u670d\u52a1\u5668IP\u5730\u5740\u4e3a 192.168.1.100 \uff0c\b Addax \u90e8\u7f72\u5728 /opt/addax/4.0.3 \u76ee\u5f55\u4e0b\uff0c\u5176 job \u6587\u4ef6\u5939\u4e0b\uff0c\u4e5f\u6709\u4e00\u4e2a\u548c\u672c\u5730\u8c03\u8bd5\u4e2d\u63cf\u8ff0\u7684 job.json \u6587\u4ef6\u3002 \u540c\u6837\u7684\uff0c\u4e0a\u8ff0 job \u6587\u4ef6\u8fd0\u884c\u6ca1\u6709\u7b26\u5408\u6211\u4eec\u7684\u9884\u671f\uff0c\u731c\u6d4b\u662f streamreader \u8fd9\u4e2a\u63d2\u4ef6\u7684 parseMixupFunctions \u51fd\u6570\u6709\u95ee\u9898\uff0c\u6211\u60f3\u8c03\u8bd5\u770b\u5177\u4f53\u95ee\u9898\u5728\u54ea\u91cc\u3002 \u6ce8\u610f\uff1a\u8fdc\u7a0b\u8c03\u8bd5\u9700\u8981\u5728\u670d\u52a1\u5668\u6253\u5f00 9999 \u7aef\u53e3\uff0c\u56e0\u6b64\u8981\u4fdd\u8bc1\u670d\u52a1\u5668\u4e0a\u7684 9999 \u7aef\u53e3\u6ca1\u6709\u88ab\u5360\u7528\uff0c\u5982\u679c\u88ab\u5360\u7528\uff0c\u5219\u9700\u8981\u4fee\u6539\u6b64\u7aef\u53e3\u3002 \u4fee\u6539\u65b9\u5f0f\u5982\u4e0b\uff1a \u6253\u5f00 bin/addax.sh \u811a\u672c \u5b9a\u4f4d\u5230\u5927\u7ea624\u884c\u5904\uff0c\u627e\u5230 address=0.0.0.0:9999 \u5b57\u7b26\u4e32 \u5c06 9999 \u4fee\u6539\u6210\u5176\u4ed6\u672a\u88ab\u5360\u7528\u7684\u7aef\u53e3 \u4fdd\u5b58\u9000\u51fa","title":"\u4e00\u4e9b\u5047\u5b9a"},{"location":"debug/#idea_1","text":"\u6253\u5f00 IDEA\u5de5\u5177\uff0c\u5e76\u6253\u5f00 addax \u9879\u76ee\u6e90\u4ee3\u7801\uff0c\u6253\u5f00 plugin/reader/streamreader/StreamReader.java \u6587\u4ef6\uff0c\u627e\u5230 parseMixupFunctions \u51fd\u6570\uff0c\u5e76\u5728\u51fd\u6570\u7533\u660e\u5904\u7684\u70b9\u51fb\u5de6\u4fa7\u8fb9\u7f18\u5904\u589e\u52a0\u65ad\u70b9\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb IDEA \u7684 Run->Edit Configurations... \u83dc\u5355\uff0c\u5728\u5f39\u51fa\u7684 Run/Debug Configurations \u7a97\u53e3\uff0c\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684 + \u6309\u94ae\uff0c\u7136\u540e\u9009\u62e9 \u9009\u62e9 Remove JVM Debug \uff0c\u5728\u53f3\u4fa7\u914d\u7f6e\u6846\u4e2d\uff0c\u586b\u5199\u76f8\u5173\u4fe1\u606f\u5982\u4e0b\uff1a Name: \u8c03\u8bd5\u63cf\u8ff0\u540d\u79f0\uff0c\u8fd9\u91cc\u53ef\u4ee5\u6309\u7167\u81ea\u5df1\u559c\u597d\u586b\u5199 Configuration: Host: \u586b\u5199\u8fdc\u7a0b\u670d\u52a1\u5668IP\u5730\u5740\uff0c\u8fd9\u91cc\u586b\u5199 192.168.1.100 Port: \u586b\u5199\u8c03\u8bd5\u7aef\u53e3\uff0c\u8fd9\u91cc\u586b\u5199 9999 \u6216\u8005\u4f60\u4fee\u6539\u8fc7\u7684\u7aef\u53e3 \u5176\u4ed6\u4fdd\u6301\u4e0d\u53d8\uff0c\u70b9\u51fb Apply \u6309\u94ae\uff0c\u5f97\u5230\u5982\u4e0b\u914d\u7f6e\u4fe1\u606f\uff1a \u70b9\u51fb OK \u6309\u94ae\u4fdd\u5b58\u5e76\u8fd4\u56de\u5230 IDEA \u4e3b\u7a97\u53e3 \u786e\u4fdd\u5728\u7a97\u53e3\u5de5\u5177\u680f\u6709\u7eff\u8272 \ud83d\udd28 \u7684\u53f3\u4fa7\u9009\u62e9\u7684\u662f\u4e0a\u8ff0\u586b\u5199 Name \u7684\u63cf\u8ff0\u914d\u7f6e\uff0c\u5426\u5219\u5728\u4e0b\u62c9\u6846\u4e2d\u9009\u62e9\u521a\u624d\u7684\u914d\u7f6e\u3002","title":"\u914d\u7f6e IDEA"},{"location":"debug/#_6","text":"\u8fd0\u884c\u8fdc\u7a0b\u8c03\u8bd5\u5206\u6210\u4e24\u4e2a\u6b65\u9aa4\uff0c\u4e00\u662f\u542f\u52a8\u7a0b\u5e8f\uff0c\u4e8c\u662f\u8c03\u8bd5\u5de5\u5177\u8054\u63a5\u5230\u8fd0\u884c\u7684\u7a0b\u5e8f\u4e0a\u3002 \u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\uff1a bin/addax.sh -d job/job.json \u5982\u679c\u8fd0\u884c\u6b63\u5e38\uff0c\u4f1a\u5f97\u5230\u5982\u4e0b\u4fe1\u606f\uff1a bin/addax.sh -d job/job.json Listening for transport dt_socket at address: 9999 \u8868\u793a\u7a0b\u5e8f\u76d1\u542c\u5728 9999 \u7aef\u53e3\u4e0a\uff0c\u7b49\u5f85\u8054\u63a5\u3002 \u8fd4\u56de IDEA \u7a97\u53e3\uff0c\u70b9\u51fb\u5de5\u5177\u680f\u4e0a\u7eff\u8272 DEBUG \u5c0f\u866b\u6309\u94ae\uff0c\u5f00\u59cb\u8c03\u8bd5\uff0c\u5982\u679c\u8fd0\u884c\u6b63\u5e38\uff0c\u4f1a\u5f97\u5230\u7c7b\u4f3c\u4e0b\u56fe\u7684\u8c03\u8bd5\u7a97\u53e3\uff1a","title":"\u8fd0\u884c\u8c03\u8bd5"},{"location":"plugin_development/","text":"\u63d2\u4ef6\u5f00\u53d1 \u00b6 \u672c\u6307\u5357\u4e3b\u8981\u9762\u5411\u90a3\u4e9b\u9700\u8981\u5f00\u53d1\u7b26\u5408\u81ea\u5df1\u9700\u6c42\u7684 Addax \u63d2\u4ef6\u5f00\u53d1\u4eba\u5458\u3002 \u63d2\u4ef6\u673a\u5236 \u00b6 Addax \u4e3a\u4e86\u5e94\u5bf9\u4e0d\u540c\u6570\u636e\u6e90\u7684\u5dee\u5f02\u3001\u540c\u65f6\u63d0\u4f9b\u4e00\u81f4\u5730\u540c\u6b65\u539f\u8bed\u548c\u6269\u5c55\u80fd\u529b\uff0c\u91c7\u7528\u4e86 \u6846\u67b6 + \u63d2\u4ef6 \u7684\u6a21\u5f0f\uff1a \u63d2\u4ef6\u53ea\u9700\u5173\u5fc3\u6570\u636e\u7684\u8bfb\u53d6\u6216\u8005\u5199\u5165\u672c\u8eab\u3002 \u800c\u540c\u6b65\u7684\u5171\u6027\u95ee\u9898\uff0c\u6bd4\u5982\uff1a\u7c7b\u578b\u8f6c\u6362\u3001\u6027\u80fd\u3001\u7edf\u8ba1\uff0c\u5219\u4ea4\u7531\u6846\u67b6\u6765\u5904\u7406\u3002 \u4f5c\u4e3a\u63d2\u4ef6\u5f00\u53d1\u4eba\u5458\uff0c\u5219\u9700\u8981\u5173\u6ce8\u4e24\u4e2a\u95ee\u9898\uff1a \u6570\u636e\u6e90\u672c\u8eab\u7684\u8bfb\u5199\u6570\u636e\u6b63\u786e\u6027\u3002 \u5982\u4f55\u4e0e\u6846\u67b6\u6c9f\u901a\u3001\u5408\u7406\u6b63\u786e\u5730\u4f7f\u7528\u6846\u67b6\u3002 \u63d2\u4ef6\u89c6\u89d2\u770b\u6846\u67b6 \u00b6 \u903b\u8f91\u6267\u884c\u6a21\u578b \u00b6 \u63d2\u4ef6\u5f00\u53d1\u8005\u4e0d\u7528\u5173\u5fc3\u592a\u591a\uff0c\u57fa\u672c\u53ea\u9700\u8981\u5173\u6ce8\u7279\u5b9a\u7cfb\u7edf\u8bfb\u548c\u5199\uff0c\u4ee5\u53ca\u81ea\u5df1\u7684\u4ee3\u7801\u5728\u903b\u8f91\u4e0a\u662f\u600e\u6837\u88ab\u6267\u884c\u7684\uff0c\u54ea\u4e00\u4e2a\u65b9\u6cd5\u662f\u5728\u4ec0\u4e48\u65f6\u5019\u88ab\u8c03\u7528\u7684\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u9700\u8981\u660e\u786e\u4ee5\u4e0b\u6982\u5ff5\uff1a Job : \u7528\u4ee5\u63cf\u8ff0\u4ece\u4e00\u4e2a\u6e90\u5934\u5230\u4e00\u4e2a\u76ee\u7684\u7aef\u7684\u540c\u6b65\u4f5c\u4e1a\uff0c\u662f\u6570\u636e\u540c\u6b65\u7684\u6700\u5c0f\u4e1a\u52a1\u5355\u5143\u3002\u6bd4\u5982\uff1a\u4ece\u4e00\u5f20 MySQL \u7684\u8868\u540c\u6b65\u5230 PostgreSQL \u7684\u4e00\u4e2a\u8868\u3002 Task : \u4e3a\u6700\u6027\u80fd\u5927\u5316\u800c\u628a Job \u62c6\u5206\u5f97\u5230\u7684\u6700\u5c0f\u6267\u884c\u5355\u5143\u3002\u6bd4\u5982\uff1a\u8bfb\u4e00\u5f20\u6709 1024 \u4e2a\u5206\u8868\u7684 MySQL \u5206\u5e93\u5206\u8868\u7684 Job \uff0c\u62c6\u5206\u6210 1024 \u4e2a\u8bfb Task \uff0c\u7528\u82e5\u5e72\u4e2a\u5e76\u53d1\u6267\u884c\u3002 TaskGroup : \u4e00\u7ec4 Task \u96c6\u5408\u3002\u5728\u540c\u4e00\u4e2a TaskGroupContainer \u6267\u884c\u4e0b\u7684 Task \u96c6\u5408\u79f0\u4e4b\u4e3a TaskGroup JobContainer : Job \u6267\u884c\u5668\uff0c\u8d1f\u8d23 Job \u5168\u5c40\u62c6\u5206\u3001\u8c03\u5ea6\u3001\u524d\u7f6e\u8bed\u53e5\u548c\u540e\u7f6e\u8bed\u53e5\u7b49\u5de5\u4f5c\u7684\u5de5\u4f5c\u5355\u5143\u3002\u7c7b\u4f3c Yarn \u4e2d\u7684 JobTracker TaskGroupContainer : TaskGroup \u6267\u884c\u5668\uff0c\u8d1f\u8d23\u6267\u884c\u4e00\u7ec4 Task \u7684\u5de5\u4f5c\u5355\u5143\uff0c\u7c7b\u4f3c Yarn \u4e2d\u7684 TaskTracker\u3002 \u7b80\u800c\u8a00\u4e4b\uff0c Job \u62c6\u5206\u6210 Task \uff0c\u5206\u522b\u5728\u6846\u67b6\u63d0\u4f9b\u7684\u5bb9\u5668\u4e2d\u6267\u884c\uff0c\u63d2\u4ef6\u53ea\u9700\u8981\u5b9e\u73b0 Job \u548c Task \u4e24\u90e8\u5206\u903b\u8f91\u3002 \u7f16\u7a0b\u63a5\u53e3 \u00b6 \u90a3\u4e48\uff0c Job \u548c Task \u7684\u903b\u8f91\u5e94\u662f\u600e\u4e48\u5bf9\u5e94\u5230\u5177\u4f53\u7684\u4ee3\u7801\u4e2d\u7684\uff1f \u9996\u5148\uff0c\u63d2\u4ef6\u7684\u5165\u53e3\u7c7b\u5fc5\u987b\u6269\u5c55 Reader \u6216 Writer \u62bd\u8c61\u7c7b\uff0c\u5e76\u4e14\u5b9e\u73b0\u5206\u522b\u5b9e\u73b0 Job \u548c Task \u4e24\u4e2a\u5185\u90e8\u62bd\u8c61\u7c7b\uff0c Job \u548c Task \u7684\u5b9e\u73b0\u5fc5\u987b\u662f \u5185\u90e8\u7c7b \u7684\u5f62\u5f0f\uff0c\u539f\u56e0\u89c1 \u52a0\u8f7d\u539f\u7406 \u4e00\u8282\u3002\u4ee5 Reader \u4e3a\u4f8b\uff1a public class SomeReader extends Reader { public static class Job extends Reader . Job { @Override public void init () { } @Override public void prepare () { } @Override public List < Configuration > split ( int adviceNumber ) { return null ; } @Override public void post () { } @Override public void destroy () { } } public static class Task extends Reader . Task { @Override public void init () { } @Override public void prepare () { } @Override public void startRead ( RecordSender recordSender ) { } @Override public void post () { } @Override public void destroy () { } } } Job \u63a5\u53e3\u529f\u80fd\u5982\u4e0b\uff1a init : Job\u5bf9\u8c61\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7 super.getPluginJobConf() \u83b7\u53d6\u4e0e\u672c\u63d2\u4ef6\u76f8\u5173\u7684\u914d\u7f6e\u3002\u8bfb\u63d2\u4ef6\u83b7\u5f97\u914d\u7f6e\u4e2d reader \u90e8\u5206\uff0c\u5199\u63d2\u4ef6\u83b7\u5f97 writer \u90e8\u5206\u3002 prepare : \u5168\u5c40\u51c6\u5907\u5de5\u4f5c\uff0c\u6bd4\u5982 MySQL \u6e05\u7a7a\u76ee\u6807\u8868\u3002 split : \u62c6\u5206 Task \u3002\u53c2\u6570 adviceNumber \u6846\u67b6\u5efa\u8bae\u7684\u62c6\u5206\u6570\uff0c\u4e00\u822c\u662f\u8fd0\u884c\u65f6\u6240\u914d\u7f6e\u7684\u5e76\u53d1\u5ea6\u3002\u503c\u8fd4\u56de\u7684\u662f Task \u7684\u914d\u7f6e\u5217\u8868\u3002 post : \u5168\u5c40\u7684\u540e\u7f6e\u5de5\u4f5c\uff0c\u6bd4\u5982 MySQL writer \u540c\u6b65\u5b8c\u5f71\u5b50\u8868\u540e\u7684 rename \u64cd\u4f5c\u3002 destroy : Job\u5bf9\u8c61\u81ea\u8eab\u7684\u9500\u6bc1\u5de5\u4f5c\u3002 Task \u63a5\u53e3\u529f\u80fd\u5982\u4e0b\uff1a init \uff1aTask \u5bf9\u8c61\u7684\u521d\u59cb\u5316\u3002\u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7 super.getPluginJobConf() \u83b7\u53d6\u4e0e\u672c Task \u76f8\u5173\u7684\u914d\u7f6e\u3002\u8fd9\u91cc\u7684\u914d\u7f6e\u662f Job#split \u65b9\u6cd5\u8fd4\u56de\u7684\u914d\u7f6e\u5217\u8868\u4e2d\u7684\u5176\u4e2d\u4e00\u4e2a\u3002 prepare \uff1a\u5c40\u90e8\u7684\u51c6\u5907\u5de5\u4f5c\u3002 startRead : \u4ece\u6570\u636e\u6e90\u8bfb\u6570\u636e\uff0c\u5199\u5165\u5230 RecordSender \u4e2d\u3002 RecordSender \u4f1a\u628a\u6570\u636e\u5199\u5165\u8fde\u63a5 Reader \u548c Writer \u7684\u7f13\u5b58\u961f\u5217\u3002 startWrite \uff1a\u4ece RecordReceiver \u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u5199\u5165\u76ee\u6807\u6570\u636e\u6e90\u3002 RecordReceiver \u4e2d\u7684\u6570\u636e\u6765\u81ea Reader \u548c Writer \u4e4b\u95f4\u7684\u7f13\u5b58\u961f\u5217\u3002 post : \u5c40\u90e8\u7684\u540e\u7f6e\u5de5\u4f5c\u3002 destroy : Task \u5bf9\u8c61\u81ea\u8eab\u7684\u9500\u6bc1\u5de5\u4f5c\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a Job \u548c Task \u4e4b\u95f4\u4e00\u5b9a\u4e0d\u80fd\u6709\u5171\u4eab\u53d8\u91cf\uff0c\u56e0\u4e3a\u5206\u5e03\u5f0f\u8fd0\u884c\u65f6\u4e0d\u80fd\u4fdd\u8bc1\u5171\u4eab\u53d8\u91cf\u4f1a\u88ab\u6b63\u786e\u521d\u59cb\u5316\u3002\u4e24\u8005\u4e4b\u95f4\u53ea\u80fd\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u4f9d\u8d56\u3002 prepare \u548c post \u5728 Job \u548c Task \u4e2d\u90fd\u5b58\u5728\uff0c\u63d2\u4ef6\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u786e\u5b9a\u5728\u4ec0\u4e48\u5730\u65b9\u6267\u884c\u64cd\u4f5c\u3002 \u6846\u67b6\u6309\u7167\u5982\u4e0b\u7684\u987a\u5e8f\u6267\u884c Job \u548c Task \u7684\u63a5\u53e3\uff1a \u4e0a\u56fe\u4e2d\uff0c\u9ec4\u8272\u8868\u793a Job \u90e8\u5206\u7684\u6267\u884c\u9636\u6bb5\uff0c\u84dd\u8272\u8868\u793a Task \u90e8\u5206\u7684\u6267\u884c\u9636\u6bb5\uff0c\u7eff\u8272\u8868\u793a\u6846\u67b6\u6267\u884c\u9636\u6bb5\u3002 \u76f8\u5173\u7c7b\u5173\u7cfb\u5982\u4e0b\uff1a \u63d2\u4ef6\u5b9a\u4e49 \u00b6 \u5728\u6bcf\u4e2a\u63d2\u4ef6\u7684\u9879\u76ee\u4e2d\uff0c\u90fd\u6709\u4e00\u4e2a plugin.json \u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5b9a\u4e49\u4e86\u63d2\u4ef6\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u5305\u62ec\u5165\u53e3\u7c7b\u3002\u4f8b\u5982\uff1a { \"name\" : \"mysqlwriter\" , \"class\" : \"com.wgzhao.addax.plugin.writer.mysqlwriter.MysqlWriter\" , \"description\" : \"Use Jdbc connect to database, execute insert sql.\" , \"developer\" : \"wgzhao\" } name : \u63d2\u4ef6\u540d\u79f0\uff0c\u5927\u5c0f\u5199\u654f\u611f\u3002\u6846\u67b6\u6839\u636e\u7528\u6237\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u540d\u79f0\u6765\u641c\u5bfb\u63d2\u4ef6\u3002 \u5341\u5206\u91cd\u8981 \u3002 class : \u5165\u53e3\u7c7b\u7684\u5168\u9650\u5b9a\u540d\u79f0\uff0c\u6846\u67b6\u901a\u8fc7\u53cd\u5c04\u521b\u5efa\u5165\u53e3\u7c7b\u7684\u5b9e\u4f8b\u3002 \u5341\u5206\u91cd\u8981 \u3002 description : \u63cf\u8ff0\u4fe1\u606f\u3002 developer : \u5f00\u53d1\u4eba\u5458\u3002 \u6253\u5305\u53d1\u5e03 \u00b6 Addax \u4f7f\u7528 assembly \u6253\u5305\uff0c\u6253\u5305\u547d\u4ee4\u5982\u4e0b\uff1a mvn clean package mvn package assembly:single Addax \u63d2\u4ef6\u9700\u8981\u9075\u5faa\u7edf\u4e00\u7684\u76ee\u5f55\u7ed3\u6784\uff1a ${ADDAX_HOME} \u251c\u2500\u2500 bin \u2502 \u251c\u2500\u2500 addax.sh \u251c\u2500\u2500 conf \u2502 \u251c\u2500\u2500 core.json \u2502 \u2514\u2500\u2500 logback.xml \u251c\u2500\u2500 job \u251c\u2500\u2500 lib \u2502 \u251c\u2500\u2500 addax-common-4.0.5.jar \u2502 \u251c\u2500\u2500 addax-core-4.0.7-SNAPSHOT.jar \u2502 \u251c\u2500\u2500 addax-rdbms-4.0.5.jar \u2502 \u251c\u2500\u2500 addax-storage-4.0.5.jar \u2502 \u251c\u2500\u2500 addax-transformer-4.0.5.jar \u2502 \u251c\u2500\u2500 aircompressor-0.21.jar \u2502 \u251c\u2500\u2500 annotations-2.0.3.jar \u2502 \u251c\u2500\u2500 checker-qual-2.11.1.jar \u2502 \u251c\u2500\u2500 commons-beanutils-1.9.4.jar \u251c\u2500\u2500 log \u251c\u2500\u2500 plugin \u2502 \u251c\u2500\u2500 reader \u2502 \u2502 \u251c\u2500\u2500 cassandrareader \u2502 \u2502 \u2502 \u251c\u2500\u2500 cassandrareader-4.0.5.jar \u2502 \u2502 \u2502 \u251c\u2500\u2500 libs \u2502 \u2502 \u2502 \u2502 \u251c\u2500\u2500 <symbol link to shared folder> \u2502 \u2502 \u2502 \u251c\u2500\u2500 plugin.json \u2502 \u2502 \u2502 \u2514\u2500\u2500 plugin_job_template.json \u2502 \u2514\u2500\u2500 writer \u2502 \u251c\u2500\u2500 cassandrawriter \u2502 \u2502 \u251c\u2500\u2500 cassandrawriter-4.0.5.jar \u2502 \u2502 \u251c\u2500\u2500 libs \u2502 \u2502 \u2502 \u251c\u2500\u2500 <symbol link to shared folder> \u2502 \u2502 \u251c\u2500\u2500 plugin.json \u2502 \u2502 \u2514\u2500\u2500 plugin_job_template.json ${ADDAX_HOME}/bin : \u53ef\u6267\u884c\u7a0b\u5e8f\u76ee\u5f55 ${ADDAX_HOME}/conf : \u6846\u67b6\u914d\u7f6e\u76ee\u5f55 ${ADDAX_HOME}/lib : \u6846\u67b6\u4f9d\u8d56\u5e93\u76ee\u5f55 ${ADDAX_HOME}/shared : \u63d2\u4ef6\u4f9d\u8d56\u76ee\u5f55 ${ADDAX_HOME}/plugin : \u63d2\u4ef6\u76ee\u5f55 \u63d2\u4ef6\u76ee\u5f55\u5206\u4e3a reader \u548c writer \u5b50\u76ee\u5f55\uff0c\u8bfb\u5199\u63d2\u4ef6\u5206\u522b\u5b58\u653e\u3002\u63d2\u4ef6\u76ee\u5f55\u89c4\u8303\u5982\u4e0b\uff1a ${PLUGIN_HOME}/libs : \u63d2\u4ef6\u7684\u4f9d\u8d56\u5e93\uff0c\u4e3a\u4e86\u51cf\u5c11\u7a0b\u5e8f\u5305\u5927\u5c0f\uff0c\u8fd9\u4e9b\u4f9d\u8d56\u5305\u90fd\u662f\u6307\u5411 shared \u76ee\u5f55\u7684\u7b26\u53f7\u94fe\u63a5 ${PLUGIN_HOME}/plugin-name-version.jar : \u63d2\u4ef6\u672c\u8eab\u7684jar\u3002 ${PLUGIN_HOME}/plugin.json : \u63d2\u4ef6\u63cf\u8ff0\u6587\u4ef6\u3002 \u5c3d\u7ba1\u6846\u67b6\u52a0\u8f7d\u63d2\u4ef6\u65f6\uff0c\u4f1a\u628a ${PLUGIN_HOME} \u4e0b\u6240\u6709\u7684 jar \u5305\u6dfb\u52a0\u5230 classpath \u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4f46\u8fd8\u662f\u63a8\u8350\u4f9d\u8d56\u5e93\u7684jar\u548c\u63d2\u4ef6\u672c\u8eab\u7684jar\u5206\u5f00\u5b58\u653e\u3002 \u7279\u522b\u63d0\u9192 \u63d2\u4ef6\u7684\u76ee\u5f55\u540d\u5b57\u5fc5\u987b\u548c plugin.json \u4e2d\u5b9a\u4e49\u7684\u63d2\u4ef6\u540d\u79f0\u4e00\u81f4\u3002 \u914d\u7f6e\u6587\u4ef6 \u00b6 Addax \u4f7f\u7528 json \u4f5c\u4e3a\u914d\u7f6e\u6587\u4ef6\u7684\u683c\u5f0f\u3002\u4e00\u4e2a\u5178\u578b\u7684 Addax \u4efb\u52a1\u914d\u7f6e\u5982\u4e0b\uff1a { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"postgresqlreader\" , \"parameter\" : { \"username\" : \"pgtest\" , \"password\" : \"pgtest\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"addax_tbl\" ], \"jdbcUrl\" : [ \"jdbc:postgresql://localhost:5432/pgtest\" ] } ] } }, \"writer\" : { \"name\" : \"postgresqlwriter\" , \"parameter\" : { \"column\" : [ \"*\" ], \"preSql\" : [ \"truncate table @table\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:postgresql://127.0.0.1:5432/pgtest\" , \"table\" : [ \"addax_tbl1\" ] } ], \"username\" : \"pgtest\" , \"password\" : \"pgtest\" , \"writeMode\" : \"insert\" } } } } } Addax \u6846\u67b6\u6709 core.json \u914d\u7f6e\u6587\u4ef6\uff0c\u6307\u5b9a\u4e86\u6846\u67b6\u7684\u9ed8\u8ba4\u884c\u4e3a\u3002\u4efb\u52a1\u7684\u914d\u7f6e\u91cc\u5934\u53ef\u4ee5\u6307\u5b9a\u6846\u67b6\u4e2d\u5df2\u7ecf\u5b58\u5728\u7684\u914d\u7f6e\u9879\uff0c\u800c\u4e14\u5177\u6709\u66f4\u9ad8\u7684\u4f18\u5148\u7ea7\uff0c\u4f1a\u8986\u76d6 core.json \u4e2d\u7684\u9ed8\u8ba4\u503c\u3002 \u914d\u7f6e\u4e2d job.content.reader.parameter \u7684 value \u90e8\u5206\u4f1a\u4f20\u7ed9 Reader.Job \uff1b job.content.writer.parameter \u7684 value \u90e8\u5206\u4f1a\u4f20\u7ed9 Writer.Job \uff0c Reader.Job \u548c Writer.Job \u53ef\u4ee5\u901a\u8fc7 super.getPluginJobConf() \u6765\u83b7\u53d6\u3002 \u5982\u4f55\u8bbe\u8ba1\u914d\u7f6e\u53c2\u6570 \u00b6 \u914d\u7f6e\u6587\u4ef6\u7684\u8bbe\u8ba1\u662f\u63d2\u4ef6\u5f00\u53d1\u7684\u7b2c\u4e00\u6b65\uff01 \u4efb\u52a1\u914d\u7f6e\u4e2d reader \u548c writer \u4e0b parameter \u90e8\u5206\u662f\u63d2\u4ef6\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u63d2\u4ef6\u7684\u914d\u7f6e\u53c2\u6570\u5e94\u5f53\u9075\u5faa\u4ee5\u4e0b\u539f\u5219\uff1a \u9a7c\u5cf0\u547d\u540d\uff1a\u6240\u6709\u914d\u7f6e\u9879\u91c7\u7528\u5c0f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff0c\u9996\u5b57\u6bcd\u5c0f\u5199\u3002 \u6b63\u4ea4\u539f\u5219\uff1a\u914d\u7f6e\u9879\u5fc5\u987b\u6b63\u4ea4\uff0c\u529f\u80fd\u6ca1\u6709\u91cd\u590d\uff0c\u6ca1\u6709\u6f5c\u89c4\u5219\u3002 \u5bcc\u7c7b\u578b\uff1a\u5408\u7406\u4f7f\u7528json\u7684\u7c7b\u578b\uff0c\u51cf\u5c11\u65e0\u8c13\u7684\u5904\u7406\u903b\u8f91\uff0c\u51cf\u5c11\u51fa\u9519\u7684\u53ef\u80fd\u3002 \u4f7f\u7528\u6b63\u786e\u7684\u6570\u636e\u7c7b\u578b\u3002\u6bd4\u5982\uff0c bool \u7c7b\u578b\u7684\u503c\u4f7f\u7528 true / false \uff0c\u800c\u975e \"yes\" / \"true\" / 0 \u7b49\u3002 \u5408\u7406\u4f7f\u7528\u96c6\u5408\u7c7b\u578b\uff0c\u6bd4\u5982\uff0c\u7528\u6570\u7ec4\u66ff\u4ee3\u6709\u5206\u9694\u7b26\u7684\u5b57\u7b26\u4e32\u3002 \u7c7b\u4f3c\u901a\u7528\uff1a\u9075\u5b88\u540c\u4e00\u7c7b\u578b\u7684\u63d2\u4ef6\u7684\u4e60\u60ef\uff0c\u6bd4\u5982\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684 connection \u53c2\u6570\u90fd\u662f\u5982\u4e0b\u7ed3\u6784\uff1a { \"connection\" : [ { \"table\" : [ \"table_1\" , \"table_2\" ], \"jdbcUrl\" : [ \"jdbc:mysql://127.0.0.1:3306/database_1\" , \"jdbc:mysql://127.0.0.2:3306/database_1_slave\" ] }, { \"table\" : [ \"table_3\" , \"table_4\" ], \"jdbcUrl\" : [ \"jdbc:mysql://127.0.0.3:3306/database_2\" , \"jdbc:mysql://127.0.0.4:3306/database_2_slave\" ] } ] } \u5982\u4f55\u4f7f\u7528 Configuration \u7c7b \u00b6 \u4e3a\u4e86\u7b80\u5316\u5bf9 json \u7684\u64cd\u4f5c\uff0c Addax \u63d0\u4f9b\u4e86\u7b80\u5355\u7684 DSL \u914d\u5408 Configuration \u7c7b\u4f7f\u7528\u3002 Configuration \u63d0\u4f9b\u4e86\u5e38\u89c1\u7684 get , \u5e26\u7c7b\u578bget \uff0c \u5e26\u9ed8\u8ba4\u503cget \uff0c set \u7b49\u8bfb\u5199\u914d\u7f6e\u9879\u7684\u64cd\u4f5c\uff0c\u4ee5\u53ca clone , toJSON \u7b49\u65b9\u6cd5\u3002\u914d\u7f6e\u9879\u8bfb\u5199\u64cd\u4f5c\u90fd\u9700\u8981\u4f20\u5165\u4e00\u4e2a path \u505a\u4e3a\u53c2\u6570\uff0c \u8fd9\u4e2a path \u5c31\u662f Addax \u5b9a\u4e49\u7684 DSL\u3002\u8bed\u6cd5\u6709\u4e24\u6761\uff1a \u5b50map\u7528 .key \u8868\u793a\uff0c path \u7684\u7b2c\u4e00\u4e2a\u70b9\u7701\u7565\u3002 \u6570\u7ec4\u5143\u7d20\u7528 [index] \u8868\u793a\u3002 \u6bd4\u5982\u64cd\u4f5c\u5982\u4e0bjson\uff1a { \"a\" : { \"b\" : { \"c\" : 2 }, \"f\" : [ 1 , 2 , { \"g\" : true , \"h\" : false }, 4 ] }, \"x\" : 4 } \u6bd4\u5982\u8c03\u7528 configuration.get(path) \u65b9\u6cd5\uff0c\u5f53path\u4e3a\u5982\u4e0b\u503c\u7684\u65f6\u5019\u5f97\u5230\u7684\u7ed3\u679c\u4e3a\uff1a x \uff1a 4 a.b.c \uff1a 2 a.b.c.d \uff1a null a.b.f[0] \uff1a 1 a.b.f[2].g \uff1a true \u6ce8\u610f\uff0c\u56e0\u4e3a\u63d2\u4ef6\u770b\u5230\u7684\u914d\u7f6e\u53ea\u662f\u6574\u4e2a\u914d\u7f6e\u7684\u4e00\u90e8\u5206\u3002\u4f7f\u7528 Configuration \u5bf9\u8c61\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u5f53\u524d\u7684\u6839\u8def\u5f84\u662f\u4ec0\u4e48\u3002 \u66f4\u591a Configuration \u7684\u64cd\u4f5c\u8bf7\u53c2\u8003 Configuration.java \u3002 \u63d2\u4ef6\u6570\u636e\u4f20\u8f93 \u00b6 \u8ddf\u4e00\u822c\u7684 \u751f\u4ea7\u8005-\u6d88\u8d39\u8005 \u6a21\u5f0f\u4e00\u6837\uff0c Reader \u63d2\u4ef6\u548c Writer \u63d2\u4ef6\u4e4b\u95f4\u4e5f\u662f\u901a\u8fc7 channel \u6765\u5b9e\u73b0\u6570\u636e\u7684\u4f20\u8f93\u7684\u3002 channel \u53ef\u4ee5\u662f\u5185\u5b58\u7684\uff0c\u4e5f\u53ef\u80fd\u662f\u6301\u4e45\u5316\u7684\uff0c\u63d2\u4ef6\u4e0d\u5fc5\u5173\u5fc3\u3002 \u63d2\u4ef6\u901a\u8fc7 RecordSender \u5f80 channel \u5199\u5165\u6570\u636e\uff0c\u901a\u8fc7 RecordReceiver \u4ece channel \u8bfb\u53d6\u6570\u636e\u3002 channel \u4e2d\u7684\u4e00\u6761\u6570\u636e\u4e3a\u4e00\u4e2a Record \u7684\u5bf9\u8c61\uff0c Record \u4e2d\u53ef\u4ee5\u653e\u591a\u4e2a Column \u5bf9\u8c61\uff0c\u8fd9\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u6570\u636e\u5e93\u4e2d\u7684\u8bb0\u5f55\u548c\u5217\u3002 Record \u6709\u5982\u4e0b\u65b9\u6cd5\uff1a public interface Record { // \u52a0\u5165\u4e00\u4e2a\u5217\uff0c\u653e\u5728\u6700\u540e\u7684\u4f4d\u7f6e void addColumn ( Column column ); // \u5728\u6307\u5b9a\u4e0b\u6807\u5904\u653e\u7f6e\u4e00\u4e2a\u5217 void setColumn ( int i , final Column column ); // \u83b7\u53d6\u4e00\u4e2a\u5217 Column getColumn ( int i ); // \u8f6c\u6362\u4e3ajson String String toString (); // \u83b7\u53d6\u603b\u5217\u6570 int getColumnNumber (); // \u8ba1\u7b97\u6574\u6761\u8bb0\u5f55\u5728\u5185\u5b58\u4e2d\u5360\u7528\u7684\u5b57\u8282\u6570 int getByteSize (); } \u56e0\u4e3a Record \u662f\u4e00\u4e2a\u63a5\u53e3\uff0c Reader \u63d2\u4ef6\u9996\u5148\u8c03\u7528 RecordSender.createRecord() \u521b\u5efa\u4e00\u4e2a Record \u5b9e\u4f8b\uff0c\u7136\u540e\u628a Column \u4e00\u4e2a\u4e2a\u6dfb\u52a0\u5230 Record \u4e2d\u3002 Writer \u63d2\u4ef6\u8c03\u7528 RecordReceiver.getFromReader() \u65b9\u6cd5\u83b7\u53d6 Record \uff0c\u7136\u540e\u628a Column \u904d\u5386\u51fa\u6765\uff0c\u5199\u5165\u76ee\u6807\u5b58\u50a8\u4e2d\u3002\u5f53 Reader \u5c1a\u672a\u9000\u51fa\uff0c\u4f20\u8f93\u8fd8\u5728\u8fdb\u884c\u65f6\uff0c\u5982\u679c\u6682\u65f6\u6ca1\u6709\u6570\u636e RecordReceiver.getFromReader() \u65b9\u6cd5\u4f1a\u963b\u585e\u76f4\u5230\u6709\u6570\u636e\u3002 \u5982\u679c\u4f20\u8f93\u5df2\u7ecf\u7ed3\u675f\uff0c\u4f1a\u8fd4\u56de null \uff0c Writer \u63d2\u4ef6\u53ef\u4ee5\u636e\u6b64\u5224\u65ad\u662f\u5426\u7ed3\u675f startWrite \u65b9\u6cd5\u3002 \u7c7b\u578b\u8f6c\u6362 \u00b6 \u4e3a\u4e86\u89c4\u8303\u6e90\u7aef\u548c\u76ee\u7684\u7aef\u7c7b\u578b\u8f6c\u6362\u64cd\u4f5c\uff0c\u4fdd\u8bc1\u6570\u636e\u4e0d\u5931\u771f\uff0cAddax \u652f\u6301\u516d\u79cd\u5185\u90e8\u6570\u636e\u7c7b\u578b\uff1a Long \uff1a\u5b9a\u70b9\u6570(Int\u3001Short\u3001Long\u3001BigInteger\u7b49)\u3002 Double \uff1a\u6d6e\u70b9\u6570(Float\u3001Double\u3001BigDecimal(\u65e0\u9650\u7cbe\u5ea6)\u7b49)\u3002 String \uff1a\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u5e95\u5c42\u4e0d\u9650\u957f\uff0c\u4f7f\u7528\u901a\u7528\u5b57\u7b26\u96c6(Unicode)\u3002 Date \uff1a\u65e5\u671f\u7c7b\u578b\u3002 Timestamp : \u65f6\u95f4\u6233 Bool \uff1a\u5e03\u5c14\u503c\u3002 Bytes \uff1a\u4e8c\u8fdb\u5236\uff0c\u53ef\u4ee5\u5b58\u653e\u8bf8\u5982MP3\u7b49\u975e\u7ed3\u6784\u5316\u6570\u636e\u3002 \u5bf9\u5e94\u5730\uff0c\u6709 DateColumn \u3001 LongColumn \u3001 DoubleColumn \u3001 BytesColumn \u3001 StringColumn \u3001 BoolColumn \u548c TimestampColumn \u4e03\u79cd Column \u7684\u5b9e\u73b0\u3002 Column \u9664\u4e86\u63d0\u4f9b\u6570\u636e\u76f8\u5173\u7684\u65b9\u6cd5\u5916\uff0c\u8fd8\u63d0\u4f9b\u4e00\u7cfb\u5217\u4ee5 as \u5f00\u5934\u7684\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u8f6c\u6362\u65b9\u6cd5\u3002 Addax\u7684\u5185\u90e8\u7c7b\u578b\u5728\u5b9e\u73b0\u4e0a\u4f1a\u9009\u7528\u4e0d\u540c\u7684java\u7c7b\u578b\uff1a \u5185\u90e8\u7c7b\u578b \u5b9e\u73b0\u7c7b\u578b \u5907\u6ce8 Date java.util.Date Timestamp java.sql.Timestamp \u53ef\u4ee5\u7cbe\u786e\u5230\u7eb3\u79d2 Long java.math.BigInteger \u4f7f\u7528\u65e0\u9650\u7cbe\u5ea6\u7684\u5927\u6574\u6570\uff0c\u4fdd\u8bc1\u4e0d\u5931\u771f Double java.lang.String \u7528String\u8868\u793a\uff0c\u4fdd\u8bc1\u4e0d\u5931\u771f Bytes byte[] String java.lang.String Bool java.lang.Boolean \u7c7b\u578b\u4e4b\u95f4\u76f8\u4e92\u8f6c\u6362\u7684\u5173\u7cfb\u5982\u4e0b\uff1a from/to Date Long Double Bytes String Bool Date - \u4f7f\u7528\u6beb\u79d2\u65f6\u95f4\u6233 \u4e0d\u652f\u6301 \u4e0d\u652f\u6301 \u4f7f\u7528\u7cfb\u7edf\u914d\u7f6e\u7684date/time/datetime\u683c\u5f0f\u8f6c\u6362 \u4e0d\u652f\u6301 Long \u4f5c\u4e3a\u6beb\u79d2\u65f6\u95f4\u6233\u6784\u9020Date - BigInteger\u8f6c\u4e3aBigDecimal\uff0c\u7136\u540eBigDecimal.doubleValue() \u4e0d\u652f\u6301 BigInteger.toString() 0\u4e3afalse\uff0c\u5426\u5219true Double \u4e0d\u652f\u6301 \u5185\u90e8String\u6784\u9020BigDecimal\uff0c\u7136\u540eBigDecimal.longValue() - \u4e0d\u652f\u6301 \u76f4\u63a5\u8fd4\u56de\u5185\u90e8String Bytes \u4e0d\u652f\u6301 \u4e0d\u652f\u6301 \u4e0d\u652f\u6301 - \u6309\u7167 common.column.encoding \u914d\u7f6e\u7684\u7f16\u7801\u8f6c\u6362\u4e3aString\uff0c\u9ed8\u8ba4 utf-8 \u4e0d\u652f\u6301 String \u6309\u7167\u914d\u7f6e\u7684date/time/datetime/extra\u683c\u5f0f\u89e3\u6790 \u7528String\u6784\u9020BigDecimal\uff0c\u7136\u540e\u53d6longValue() \u7528String\u6784\u9020BigDecimal\uff0c\u7136\u540e\u53d6doubleValue(),\u4f1a\u6b63\u786e\u5904\u7406 NaN / Infinity / -Infinity \u6309\u7167 common.column.encoding \u914d\u7f6e\u7684\u7f16\u7801\u8f6c\u6362\u4e3abyte[]\uff0c\u9ed8\u8ba4 utf-8 - \"true\"\u4e3a true , \"false\"\u4e3a false \uff0c\u5927\u5c0f\u5199\u4e0d\u654f\u611f\u3002\u5176\u4ed6\u5b57\u7b26\u4e32\u4e0d\u652f\u6301 Bool \u4e0d\u652f\u6301 true \u4e3a 1L \uff0c\u5426\u5219 0L true \u4e3a 1.0 \uff0c\u5426\u5219 0.0 \u4e0d\u652f\u6301 - \u810f\u6570\u636e\u5904\u7406 \u00b6 \u4ec0\u4e48\u662f\u810f\u6570\u636e \u00b6 \u76ee\u524d\u4e3b\u8981\u6709\u4e09\u7c7b\u810f\u6570\u636e\uff1a Reader\u8bfb\u5230\u4e0d\u652f\u6301\u7684\u7c7b\u578b\u3001\u4e0d\u5408\u6cd5\u7684\u503c\u3002 \u4e0d\u652f\u6301\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u6bd4\u5982\uff1a Bytes \u8f6c\u6362\u4e3a Date \u3002 \u5199\u5165\u76ee\u6807\u7aef\u5931\u8d25\uff0c\u6bd4\u5982\uff1a\u5199 MySQL \u6574\u578b\u957f\u5ea6\u8d85\u957f\u3002 \u5982\u4f55\u5904\u7406\u810f\u6570\u636e \u00b6 \u5728 Reader.Task \u548c Writer.Task \u4e2d\uff0c\u901a\u8fc7 AbstractTaskPlugin.getPluginCollector() \u53ef\u4ee5\u62ff\u5230\u4e00\u4e2a TaskPluginCollector \uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217 collectDirtyRecord \u7684\u65b9\u6cd5\u3002 \u5f53\u810f\u6570\u636e\u51fa\u73b0\u65f6\uff0c\u53ea\u9700\u8981\u8c03\u7528\u5408\u9002\u7684 collectDirtyRecord \u65b9\u6cd5\uff0c\u628a\u88ab\u8ba4\u4e3a\u662f\u810f\u6570\u636e\u7684 Record \u4f20\u5165\u5373\u53ef\u3002 \u7528\u6237\u53ef\u4ee5\u5728\u4efb\u52a1\u7684\u914d\u7f6e\u4e2d\u6307\u5b9a\u810f\u6570\u636e\u9650\u5236\u6761\u6570\u6216\u8005\u767e\u5206\u6bd4\u9650\u5236\uff0c\u5f53\u810f\u6570\u636e\u8d85\u51fa\u9650\u5236\u65f6\uff0c\u6846\u67b6\u4f1a\u7ed3\u675f\u540c\u6b65\u4efb\u52a1\uff0c\u9000\u51fa\u3002\u63d2\u4ef6\u9700\u8981\u4fdd\u8bc1\u810f\u6570\u636e\u90fd\u88ab\u6536\u96c6\u5230\uff0c\u5176\u4ed6\u5de5\u4f5c\u4ea4\u7ed9\u6846\u67b6\u5c31\u597d\u3002 \u52a0\u8f7d\u539f\u7406 \u00b6 \u6846\u67b6\u626b\u63cf plugin/reader \u548c plugin/writer \u76ee\u5f55\uff0c\u52a0\u8f7d\u6bcf\u4e2a\u63d2\u4ef6\u7684 plugin.json \u6587\u4ef6\u3002 \u4ee5 plugin.json \u6587\u4ef6\u4e2d name \u4e3a key\uff0c\u7d22\u5f15\u6240\u6709\u7684\u63d2\u4ef6\u914d\u7f6e\u3002\u5982\u679c\u53d1\u73b0\u91cd\u540d\u7684\u63d2\u4ef6\uff0c\u6846\u67b6\u4f1a\u5f02\u5e38\u9000\u51fa\u3002 \u7528\u6237\u5728\u63d2\u4ef6\u4e2d\u5728 reader / writer \u914d\u7f6e\u7684 name \u5b57\u6bb5\u6307\u5b9a\u63d2\u4ef6\u540d\u5b57\u3002\u6846\u67b6\u6839\u636e\u63d2\u4ef6\u7684\u7c7b\u578b\uff08 reader / writer \uff09\u548c\u63d2\u4ef6\u540d\u79f0\u53bb\u63d2\u4ef6\u7684\u8def\u5f84\u4e0b\u626b\u63cf\u6240\u6709\u7684jar\uff0c\u52a0\u5165 classpath \u3002 \u6839\u636e\u63d2\u4ef6\u914d\u7f6e\u4e2d\u5b9a\u4e49\u7684\u5165\u53e3\u7c7b\uff0c\u6846\u67b6\u901a\u8fc7\u53cd\u5c04\u5b9e\u4f8b\u5316\u5bf9\u5e94\u7684 Job \u548c Task \u5bf9\u8c61\u3002","title":"\u63d2\u4ef6\u5f00\u53d1"},{"location":"plugin_development/#_1","text":"\u672c\u6307\u5357\u4e3b\u8981\u9762\u5411\u90a3\u4e9b\u9700\u8981\u5f00\u53d1\u7b26\u5408\u81ea\u5df1\u9700\u6c42\u7684 Addax \u63d2\u4ef6\u5f00\u53d1\u4eba\u5458\u3002","title":"\u63d2\u4ef6\u5f00\u53d1"},{"location":"plugin_development/#_2","text":"Addax \u4e3a\u4e86\u5e94\u5bf9\u4e0d\u540c\u6570\u636e\u6e90\u7684\u5dee\u5f02\u3001\u540c\u65f6\u63d0\u4f9b\u4e00\u81f4\u5730\u540c\u6b65\u539f\u8bed\u548c\u6269\u5c55\u80fd\u529b\uff0c\u91c7\u7528\u4e86 \u6846\u67b6 + \u63d2\u4ef6 \u7684\u6a21\u5f0f\uff1a \u63d2\u4ef6\u53ea\u9700\u5173\u5fc3\u6570\u636e\u7684\u8bfb\u53d6\u6216\u8005\u5199\u5165\u672c\u8eab\u3002 \u800c\u540c\u6b65\u7684\u5171\u6027\u95ee\u9898\uff0c\u6bd4\u5982\uff1a\u7c7b\u578b\u8f6c\u6362\u3001\u6027\u80fd\u3001\u7edf\u8ba1\uff0c\u5219\u4ea4\u7531\u6846\u67b6\u6765\u5904\u7406\u3002 \u4f5c\u4e3a\u63d2\u4ef6\u5f00\u53d1\u4eba\u5458\uff0c\u5219\u9700\u8981\u5173\u6ce8\u4e24\u4e2a\u95ee\u9898\uff1a \u6570\u636e\u6e90\u672c\u8eab\u7684\u8bfb\u5199\u6570\u636e\u6b63\u786e\u6027\u3002 \u5982\u4f55\u4e0e\u6846\u67b6\u6c9f\u901a\u3001\u5408\u7406\u6b63\u786e\u5730\u4f7f\u7528\u6846\u67b6\u3002","title":"\u63d2\u4ef6\u673a\u5236"},{"location":"plugin_development/#_3","text":"","title":"\u63d2\u4ef6\u89c6\u89d2\u770b\u6846\u67b6"},{"location":"plugin_development/#_4","text":"\u63d2\u4ef6\u5f00\u53d1\u8005\u4e0d\u7528\u5173\u5fc3\u592a\u591a\uff0c\u57fa\u672c\u53ea\u9700\u8981\u5173\u6ce8\u7279\u5b9a\u7cfb\u7edf\u8bfb\u548c\u5199\uff0c\u4ee5\u53ca\u81ea\u5df1\u7684\u4ee3\u7801\u5728\u903b\u8f91\u4e0a\u662f\u600e\u6837\u88ab\u6267\u884c\u7684\uff0c\u54ea\u4e00\u4e2a\u65b9\u6cd5\u662f\u5728\u4ec0\u4e48\u65f6\u5019\u88ab\u8c03\u7528\u7684\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u9700\u8981\u660e\u786e\u4ee5\u4e0b\u6982\u5ff5\uff1a Job : \u7528\u4ee5\u63cf\u8ff0\u4ece\u4e00\u4e2a\u6e90\u5934\u5230\u4e00\u4e2a\u76ee\u7684\u7aef\u7684\u540c\u6b65\u4f5c\u4e1a\uff0c\u662f\u6570\u636e\u540c\u6b65\u7684\u6700\u5c0f\u4e1a\u52a1\u5355\u5143\u3002\u6bd4\u5982\uff1a\u4ece\u4e00\u5f20 MySQL \u7684\u8868\u540c\u6b65\u5230 PostgreSQL \u7684\u4e00\u4e2a\u8868\u3002 Task : \u4e3a\u6700\u6027\u80fd\u5927\u5316\u800c\u628a Job \u62c6\u5206\u5f97\u5230\u7684\u6700\u5c0f\u6267\u884c\u5355\u5143\u3002\u6bd4\u5982\uff1a\u8bfb\u4e00\u5f20\u6709 1024 \u4e2a\u5206\u8868\u7684 MySQL \u5206\u5e93\u5206\u8868\u7684 Job \uff0c\u62c6\u5206\u6210 1024 \u4e2a\u8bfb Task \uff0c\u7528\u82e5\u5e72\u4e2a\u5e76\u53d1\u6267\u884c\u3002 TaskGroup : \u4e00\u7ec4 Task \u96c6\u5408\u3002\u5728\u540c\u4e00\u4e2a TaskGroupContainer \u6267\u884c\u4e0b\u7684 Task \u96c6\u5408\u79f0\u4e4b\u4e3a TaskGroup JobContainer : Job \u6267\u884c\u5668\uff0c\u8d1f\u8d23 Job \u5168\u5c40\u62c6\u5206\u3001\u8c03\u5ea6\u3001\u524d\u7f6e\u8bed\u53e5\u548c\u540e\u7f6e\u8bed\u53e5\u7b49\u5de5\u4f5c\u7684\u5de5\u4f5c\u5355\u5143\u3002\u7c7b\u4f3c Yarn \u4e2d\u7684 JobTracker TaskGroupContainer : TaskGroup \u6267\u884c\u5668\uff0c\u8d1f\u8d23\u6267\u884c\u4e00\u7ec4 Task \u7684\u5de5\u4f5c\u5355\u5143\uff0c\u7c7b\u4f3c Yarn \u4e2d\u7684 TaskTracker\u3002 \u7b80\u800c\u8a00\u4e4b\uff0c Job \u62c6\u5206\u6210 Task \uff0c\u5206\u522b\u5728\u6846\u67b6\u63d0\u4f9b\u7684\u5bb9\u5668\u4e2d\u6267\u884c\uff0c\u63d2\u4ef6\u53ea\u9700\u8981\u5b9e\u73b0 Job \u548c Task \u4e24\u90e8\u5206\u903b\u8f91\u3002","title":"\u903b\u8f91\u6267\u884c\u6a21\u578b"},{"location":"plugin_development/#_5","text":"\u90a3\u4e48\uff0c Job \u548c Task \u7684\u903b\u8f91\u5e94\u662f\u600e\u4e48\u5bf9\u5e94\u5230\u5177\u4f53\u7684\u4ee3\u7801\u4e2d\u7684\uff1f \u9996\u5148\uff0c\u63d2\u4ef6\u7684\u5165\u53e3\u7c7b\u5fc5\u987b\u6269\u5c55 Reader \u6216 Writer \u62bd\u8c61\u7c7b\uff0c\u5e76\u4e14\u5b9e\u73b0\u5206\u522b\u5b9e\u73b0 Job \u548c Task \u4e24\u4e2a\u5185\u90e8\u62bd\u8c61\u7c7b\uff0c Job \u548c Task \u7684\u5b9e\u73b0\u5fc5\u987b\u662f \u5185\u90e8\u7c7b \u7684\u5f62\u5f0f\uff0c\u539f\u56e0\u89c1 \u52a0\u8f7d\u539f\u7406 \u4e00\u8282\u3002\u4ee5 Reader \u4e3a\u4f8b\uff1a public class SomeReader extends Reader { public static class Job extends Reader . Job { @Override public void init () { } @Override public void prepare () { } @Override public List < Configuration > split ( int adviceNumber ) { return null ; } @Override public void post () { } @Override public void destroy () { } } public static class Task extends Reader . Task { @Override public void init () { } @Override public void prepare () { } @Override public void startRead ( RecordSender recordSender ) { } @Override public void post () { } @Override public void destroy () { } } } Job \u63a5\u53e3\u529f\u80fd\u5982\u4e0b\uff1a init : Job\u5bf9\u8c61\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7 super.getPluginJobConf() \u83b7\u53d6\u4e0e\u672c\u63d2\u4ef6\u76f8\u5173\u7684\u914d\u7f6e\u3002\u8bfb\u63d2\u4ef6\u83b7\u5f97\u914d\u7f6e\u4e2d reader \u90e8\u5206\uff0c\u5199\u63d2\u4ef6\u83b7\u5f97 writer \u90e8\u5206\u3002 prepare : \u5168\u5c40\u51c6\u5907\u5de5\u4f5c\uff0c\u6bd4\u5982 MySQL \u6e05\u7a7a\u76ee\u6807\u8868\u3002 split : \u62c6\u5206 Task \u3002\u53c2\u6570 adviceNumber \u6846\u67b6\u5efa\u8bae\u7684\u62c6\u5206\u6570\uff0c\u4e00\u822c\u662f\u8fd0\u884c\u65f6\u6240\u914d\u7f6e\u7684\u5e76\u53d1\u5ea6\u3002\u503c\u8fd4\u56de\u7684\u662f Task \u7684\u914d\u7f6e\u5217\u8868\u3002 post : \u5168\u5c40\u7684\u540e\u7f6e\u5de5\u4f5c\uff0c\u6bd4\u5982 MySQL writer \u540c\u6b65\u5b8c\u5f71\u5b50\u8868\u540e\u7684 rename \u64cd\u4f5c\u3002 destroy : Job\u5bf9\u8c61\u81ea\u8eab\u7684\u9500\u6bc1\u5de5\u4f5c\u3002 Task \u63a5\u53e3\u529f\u80fd\u5982\u4e0b\uff1a init \uff1aTask \u5bf9\u8c61\u7684\u521d\u59cb\u5316\u3002\u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7 super.getPluginJobConf() \u83b7\u53d6\u4e0e\u672c Task \u76f8\u5173\u7684\u914d\u7f6e\u3002\u8fd9\u91cc\u7684\u914d\u7f6e\u662f Job#split \u65b9\u6cd5\u8fd4\u56de\u7684\u914d\u7f6e\u5217\u8868\u4e2d\u7684\u5176\u4e2d\u4e00\u4e2a\u3002 prepare \uff1a\u5c40\u90e8\u7684\u51c6\u5907\u5de5\u4f5c\u3002 startRead : \u4ece\u6570\u636e\u6e90\u8bfb\u6570\u636e\uff0c\u5199\u5165\u5230 RecordSender \u4e2d\u3002 RecordSender \u4f1a\u628a\u6570\u636e\u5199\u5165\u8fde\u63a5 Reader \u548c Writer \u7684\u7f13\u5b58\u961f\u5217\u3002 startWrite \uff1a\u4ece RecordReceiver \u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u5199\u5165\u76ee\u6807\u6570\u636e\u6e90\u3002 RecordReceiver \u4e2d\u7684\u6570\u636e\u6765\u81ea Reader \u548c Writer \u4e4b\u95f4\u7684\u7f13\u5b58\u961f\u5217\u3002 post : \u5c40\u90e8\u7684\u540e\u7f6e\u5de5\u4f5c\u3002 destroy : Task \u5bf9\u8c61\u81ea\u8eab\u7684\u9500\u6bc1\u5de5\u4f5c\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a Job \u548c Task \u4e4b\u95f4\u4e00\u5b9a\u4e0d\u80fd\u6709\u5171\u4eab\u53d8\u91cf\uff0c\u56e0\u4e3a\u5206\u5e03\u5f0f\u8fd0\u884c\u65f6\u4e0d\u80fd\u4fdd\u8bc1\u5171\u4eab\u53d8\u91cf\u4f1a\u88ab\u6b63\u786e\u521d\u59cb\u5316\u3002\u4e24\u8005\u4e4b\u95f4\u53ea\u80fd\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u4f9d\u8d56\u3002 prepare \u548c post \u5728 Job \u548c Task \u4e2d\u90fd\u5b58\u5728\uff0c\u63d2\u4ef6\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u786e\u5b9a\u5728\u4ec0\u4e48\u5730\u65b9\u6267\u884c\u64cd\u4f5c\u3002 \u6846\u67b6\u6309\u7167\u5982\u4e0b\u7684\u987a\u5e8f\u6267\u884c Job \u548c Task \u7684\u63a5\u53e3\uff1a \u4e0a\u56fe\u4e2d\uff0c\u9ec4\u8272\u8868\u793a Job \u90e8\u5206\u7684\u6267\u884c\u9636\u6bb5\uff0c\u84dd\u8272\u8868\u793a Task \u90e8\u5206\u7684\u6267\u884c\u9636\u6bb5\uff0c\u7eff\u8272\u8868\u793a\u6846\u67b6\u6267\u884c\u9636\u6bb5\u3002 \u76f8\u5173\u7c7b\u5173\u7cfb\u5982\u4e0b\uff1a","title":"\u7f16\u7a0b\u63a5\u53e3"},{"location":"plugin_development/#_6","text":"\u5728\u6bcf\u4e2a\u63d2\u4ef6\u7684\u9879\u76ee\u4e2d\uff0c\u90fd\u6709\u4e00\u4e2a plugin.json \u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5b9a\u4e49\u4e86\u63d2\u4ef6\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u5305\u62ec\u5165\u53e3\u7c7b\u3002\u4f8b\u5982\uff1a { \"name\" : \"mysqlwriter\" , \"class\" : \"com.wgzhao.addax.plugin.writer.mysqlwriter.MysqlWriter\" , \"description\" : \"Use Jdbc connect to database, execute insert sql.\" , \"developer\" : \"wgzhao\" } name : \u63d2\u4ef6\u540d\u79f0\uff0c\u5927\u5c0f\u5199\u654f\u611f\u3002\u6846\u67b6\u6839\u636e\u7528\u6237\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u540d\u79f0\u6765\u641c\u5bfb\u63d2\u4ef6\u3002 \u5341\u5206\u91cd\u8981 \u3002 class : \u5165\u53e3\u7c7b\u7684\u5168\u9650\u5b9a\u540d\u79f0\uff0c\u6846\u67b6\u901a\u8fc7\u53cd\u5c04\u521b\u5efa\u5165\u53e3\u7c7b\u7684\u5b9e\u4f8b\u3002 \u5341\u5206\u91cd\u8981 \u3002 description : \u63cf\u8ff0\u4fe1\u606f\u3002 developer : \u5f00\u53d1\u4eba\u5458\u3002","title":"\u63d2\u4ef6\u5b9a\u4e49"},{"location":"plugin_development/#_7","text":"Addax \u4f7f\u7528 assembly \u6253\u5305\uff0c\u6253\u5305\u547d\u4ee4\u5982\u4e0b\uff1a mvn clean package mvn package assembly:single Addax \u63d2\u4ef6\u9700\u8981\u9075\u5faa\u7edf\u4e00\u7684\u76ee\u5f55\u7ed3\u6784\uff1a ${ADDAX_HOME} \u251c\u2500\u2500 bin \u2502 \u251c\u2500\u2500 addax.sh \u251c\u2500\u2500 conf \u2502 \u251c\u2500\u2500 core.json \u2502 \u2514\u2500\u2500 logback.xml \u251c\u2500\u2500 job \u251c\u2500\u2500 lib \u2502 \u251c\u2500\u2500 addax-common-4.0.5.jar \u2502 \u251c\u2500\u2500 addax-core-4.0.7-SNAPSHOT.jar \u2502 \u251c\u2500\u2500 addax-rdbms-4.0.5.jar \u2502 \u251c\u2500\u2500 addax-storage-4.0.5.jar \u2502 \u251c\u2500\u2500 addax-transformer-4.0.5.jar \u2502 \u251c\u2500\u2500 aircompressor-0.21.jar \u2502 \u251c\u2500\u2500 annotations-2.0.3.jar \u2502 \u251c\u2500\u2500 checker-qual-2.11.1.jar \u2502 \u251c\u2500\u2500 commons-beanutils-1.9.4.jar \u251c\u2500\u2500 log \u251c\u2500\u2500 plugin \u2502 \u251c\u2500\u2500 reader \u2502 \u2502 \u251c\u2500\u2500 cassandrareader \u2502 \u2502 \u2502 \u251c\u2500\u2500 cassandrareader-4.0.5.jar \u2502 \u2502 \u2502 \u251c\u2500\u2500 libs \u2502 \u2502 \u2502 \u2502 \u251c\u2500\u2500 <symbol link to shared folder> \u2502 \u2502 \u2502 \u251c\u2500\u2500 plugin.json \u2502 \u2502 \u2502 \u2514\u2500\u2500 plugin_job_template.json \u2502 \u2514\u2500\u2500 writer \u2502 \u251c\u2500\u2500 cassandrawriter \u2502 \u2502 \u251c\u2500\u2500 cassandrawriter-4.0.5.jar \u2502 \u2502 \u251c\u2500\u2500 libs \u2502 \u2502 \u2502 \u251c\u2500\u2500 <symbol link to shared folder> \u2502 \u2502 \u251c\u2500\u2500 plugin.json \u2502 \u2502 \u2514\u2500\u2500 plugin_job_template.json ${ADDAX_HOME}/bin : \u53ef\u6267\u884c\u7a0b\u5e8f\u76ee\u5f55 ${ADDAX_HOME}/conf : \u6846\u67b6\u914d\u7f6e\u76ee\u5f55 ${ADDAX_HOME}/lib : \u6846\u67b6\u4f9d\u8d56\u5e93\u76ee\u5f55 ${ADDAX_HOME}/shared : \u63d2\u4ef6\u4f9d\u8d56\u76ee\u5f55 ${ADDAX_HOME}/plugin : \u63d2\u4ef6\u76ee\u5f55 \u63d2\u4ef6\u76ee\u5f55\u5206\u4e3a reader \u548c writer \u5b50\u76ee\u5f55\uff0c\u8bfb\u5199\u63d2\u4ef6\u5206\u522b\u5b58\u653e\u3002\u63d2\u4ef6\u76ee\u5f55\u89c4\u8303\u5982\u4e0b\uff1a ${PLUGIN_HOME}/libs : \u63d2\u4ef6\u7684\u4f9d\u8d56\u5e93\uff0c\u4e3a\u4e86\u51cf\u5c11\u7a0b\u5e8f\u5305\u5927\u5c0f\uff0c\u8fd9\u4e9b\u4f9d\u8d56\u5305\u90fd\u662f\u6307\u5411 shared \u76ee\u5f55\u7684\u7b26\u53f7\u94fe\u63a5 ${PLUGIN_HOME}/plugin-name-version.jar : \u63d2\u4ef6\u672c\u8eab\u7684jar\u3002 ${PLUGIN_HOME}/plugin.json : \u63d2\u4ef6\u63cf\u8ff0\u6587\u4ef6\u3002 \u5c3d\u7ba1\u6846\u67b6\u52a0\u8f7d\u63d2\u4ef6\u65f6\uff0c\u4f1a\u628a ${PLUGIN_HOME} \u4e0b\u6240\u6709\u7684 jar \u5305\u6dfb\u52a0\u5230 classpath \u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4f46\u8fd8\u662f\u63a8\u8350\u4f9d\u8d56\u5e93\u7684jar\u548c\u63d2\u4ef6\u672c\u8eab\u7684jar\u5206\u5f00\u5b58\u653e\u3002 \u7279\u522b\u63d0\u9192 \u63d2\u4ef6\u7684\u76ee\u5f55\u540d\u5b57\u5fc5\u987b\u548c plugin.json \u4e2d\u5b9a\u4e49\u7684\u63d2\u4ef6\u540d\u79f0\u4e00\u81f4\u3002","title":"\u6253\u5305\u53d1\u5e03"},{"location":"plugin_development/#_8","text":"Addax \u4f7f\u7528 json \u4f5c\u4e3a\u914d\u7f6e\u6587\u4ef6\u7684\u683c\u5f0f\u3002\u4e00\u4e2a\u5178\u578b\u7684 Addax \u4efb\u52a1\u914d\u7f6e\u5982\u4e0b\uff1a { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"postgresqlreader\" , \"parameter\" : { \"username\" : \"pgtest\" , \"password\" : \"pgtest\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"addax_tbl\" ], \"jdbcUrl\" : [ \"jdbc:postgresql://localhost:5432/pgtest\" ] } ] } }, \"writer\" : { \"name\" : \"postgresqlwriter\" , \"parameter\" : { \"column\" : [ \"*\" ], \"preSql\" : [ \"truncate table @table\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:postgresql://127.0.0.1:5432/pgtest\" , \"table\" : [ \"addax_tbl1\" ] } ], \"username\" : \"pgtest\" , \"password\" : \"pgtest\" , \"writeMode\" : \"insert\" } } } } } Addax \u6846\u67b6\u6709 core.json \u914d\u7f6e\u6587\u4ef6\uff0c\u6307\u5b9a\u4e86\u6846\u67b6\u7684\u9ed8\u8ba4\u884c\u4e3a\u3002\u4efb\u52a1\u7684\u914d\u7f6e\u91cc\u5934\u53ef\u4ee5\u6307\u5b9a\u6846\u67b6\u4e2d\u5df2\u7ecf\u5b58\u5728\u7684\u914d\u7f6e\u9879\uff0c\u800c\u4e14\u5177\u6709\u66f4\u9ad8\u7684\u4f18\u5148\u7ea7\uff0c\u4f1a\u8986\u76d6 core.json \u4e2d\u7684\u9ed8\u8ba4\u503c\u3002 \u914d\u7f6e\u4e2d job.content.reader.parameter \u7684 value \u90e8\u5206\u4f1a\u4f20\u7ed9 Reader.Job \uff1b job.content.writer.parameter \u7684 value \u90e8\u5206\u4f1a\u4f20\u7ed9 Writer.Job \uff0c Reader.Job \u548c Writer.Job \u53ef\u4ee5\u901a\u8fc7 super.getPluginJobConf() \u6765\u83b7\u53d6\u3002","title":"\u914d\u7f6e\u6587\u4ef6"},{"location":"plugin_development/#_9","text":"\u914d\u7f6e\u6587\u4ef6\u7684\u8bbe\u8ba1\u662f\u63d2\u4ef6\u5f00\u53d1\u7684\u7b2c\u4e00\u6b65\uff01 \u4efb\u52a1\u914d\u7f6e\u4e2d reader \u548c writer \u4e0b parameter \u90e8\u5206\u662f\u63d2\u4ef6\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u63d2\u4ef6\u7684\u914d\u7f6e\u53c2\u6570\u5e94\u5f53\u9075\u5faa\u4ee5\u4e0b\u539f\u5219\uff1a \u9a7c\u5cf0\u547d\u540d\uff1a\u6240\u6709\u914d\u7f6e\u9879\u91c7\u7528\u5c0f\u9a7c\u5cf0\u547d\u540d\u6cd5\uff0c\u9996\u5b57\u6bcd\u5c0f\u5199\u3002 \u6b63\u4ea4\u539f\u5219\uff1a\u914d\u7f6e\u9879\u5fc5\u987b\u6b63\u4ea4\uff0c\u529f\u80fd\u6ca1\u6709\u91cd\u590d\uff0c\u6ca1\u6709\u6f5c\u89c4\u5219\u3002 \u5bcc\u7c7b\u578b\uff1a\u5408\u7406\u4f7f\u7528json\u7684\u7c7b\u578b\uff0c\u51cf\u5c11\u65e0\u8c13\u7684\u5904\u7406\u903b\u8f91\uff0c\u51cf\u5c11\u51fa\u9519\u7684\u53ef\u80fd\u3002 \u4f7f\u7528\u6b63\u786e\u7684\u6570\u636e\u7c7b\u578b\u3002\u6bd4\u5982\uff0c bool \u7c7b\u578b\u7684\u503c\u4f7f\u7528 true / false \uff0c\u800c\u975e \"yes\" / \"true\" / 0 \u7b49\u3002 \u5408\u7406\u4f7f\u7528\u96c6\u5408\u7c7b\u578b\uff0c\u6bd4\u5982\uff0c\u7528\u6570\u7ec4\u66ff\u4ee3\u6709\u5206\u9694\u7b26\u7684\u5b57\u7b26\u4e32\u3002 \u7c7b\u4f3c\u901a\u7528\uff1a\u9075\u5b88\u540c\u4e00\u7c7b\u578b\u7684\u63d2\u4ef6\u7684\u4e60\u60ef\uff0c\u6bd4\u5982\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684 connection \u53c2\u6570\u90fd\u662f\u5982\u4e0b\u7ed3\u6784\uff1a { \"connection\" : [ { \"table\" : [ \"table_1\" , \"table_2\" ], \"jdbcUrl\" : [ \"jdbc:mysql://127.0.0.1:3306/database_1\" , \"jdbc:mysql://127.0.0.2:3306/database_1_slave\" ] }, { \"table\" : [ \"table_3\" , \"table_4\" ], \"jdbcUrl\" : [ \"jdbc:mysql://127.0.0.3:3306/database_2\" , \"jdbc:mysql://127.0.0.4:3306/database_2_slave\" ] } ] }","title":"\u5982\u4f55\u8bbe\u8ba1\u914d\u7f6e\u53c2\u6570"},{"location":"plugin_development/#configuration","text":"\u4e3a\u4e86\u7b80\u5316\u5bf9 json \u7684\u64cd\u4f5c\uff0c Addax \u63d0\u4f9b\u4e86\u7b80\u5355\u7684 DSL \u914d\u5408 Configuration \u7c7b\u4f7f\u7528\u3002 Configuration \u63d0\u4f9b\u4e86\u5e38\u89c1\u7684 get , \u5e26\u7c7b\u578bget \uff0c \u5e26\u9ed8\u8ba4\u503cget \uff0c set \u7b49\u8bfb\u5199\u914d\u7f6e\u9879\u7684\u64cd\u4f5c\uff0c\u4ee5\u53ca clone , toJSON \u7b49\u65b9\u6cd5\u3002\u914d\u7f6e\u9879\u8bfb\u5199\u64cd\u4f5c\u90fd\u9700\u8981\u4f20\u5165\u4e00\u4e2a path \u505a\u4e3a\u53c2\u6570\uff0c \u8fd9\u4e2a path \u5c31\u662f Addax \u5b9a\u4e49\u7684 DSL\u3002\u8bed\u6cd5\u6709\u4e24\u6761\uff1a \u5b50map\u7528 .key \u8868\u793a\uff0c path \u7684\u7b2c\u4e00\u4e2a\u70b9\u7701\u7565\u3002 \u6570\u7ec4\u5143\u7d20\u7528 [index] \u8868\u793a\u3002 \u6bd4\u5982\u64cd\u4f5c\u5982\u4e0bjson\uff1a { \"a\" : { \"b\" : { \"c\" : 2 }, \"f\" : [ 1 , 2 , { \"g\" : true , \"h\" : false }, 4 ] }, \"x\" : 4 } \u6bd4\u5982\u8c03\u7528 configuration.get(path) \u65b9\u6cd5\uff0c\u5f53path\u4e3a\u5982\u4e0b\u503c\u7684\u65f6\u5019\u5f97\u5230\u7684\u7ed3\u679c\u4e3a\uff1a x \uff1a 4 a.b.c \uff1a 2 a.b.c.d \uff1a null a.b.f[0] \uff1a 1 a.b.f[2].g \uff1a true \u6ce8\u610f\uff0c\u56e0\u4e3a\u63d2\u4ef6\u770b\u5230\u7684\u914d\u7f6e\u53ea\u662f\u6574\u4e2a\u914d\u7f6e\u7684\u4e00\u90e8\u5206\u3002\u4f7f\u7528 Configuration \u5bf9\u8c61\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u5f53\u524d\u7684\u6839\u8def\u5f84\u662f\u4ec0\u4e48\u3002 \u66f4\u591a Configuration \u7684\u64cd\u4f5c\u8bf7\u53c2\u8003 Configuration.java \u3002","title":"\u5982\u4f55\u4f7f\u7528 Configuration \u7c7b"},{"location":"plugin_development/#_10","text":"\u8ddf\u4e00\u822c\u7684 \u751f\u4ea7\u8005-\u6d88\u8d39\u8005 \u6a21\u5f0f\u4e00\u6837\uff0c Reader \u63d2\u4ef6\u548c Writer \u63d2\u4ef6\u4e4b\u95f4\u4e5f\u662f\u901a\u8fc7 channel \u6765\u5b9e\u73b0\u6570\u636e\u7684\u4f20\u8f93\u7684\u3002 channel \u53ef\u4ee5\u662f\u5185\u5b58\u7684\uff0c\u4e5f\u53ef\u80fd\u662f\u6301\u4e45\u5316\u7684\uff0c\u63d2\u4ef6\u4e0d\u5fc5\u5173\u5fc3\u3002 \u63d2\u4ef6\u901a\u8fc7 RecordSender \u5f80 channel \u5199\u5165\u6570\u636e\uff0c\u901a\u8fc7 RecordReceiver \u4ece channel \u8bfb\u53d6\u6570\u636e\u3002 channel \u4e2d\u7684\u4e00\u6761\u6570\u636e\u4e3a\u4e00\u4e2a Record \u7684\u5bf9\u8c61\uff0c Record \u4e2d\u53ef\u4ee5\u653e\u591a\u4e2a Column \u5bf9\u8c61\uff0c\u8fd9\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u6570\u636e\u5e93\u4e2d\u7684\u8bb0\u5f55\u548c\u5217\u3002 Record \u6709\u5982\u4e0b\u65b9\u6cd5\uff1a public interface Record { // \u52a0\u5165\u4e00\u4e2a\u5217\uff0c\u653e\u5728\u6700\u540e\u7684\u4f4d\u7f6e void addColumn ( Column column ); // \u5728\u6307\u5b9a\u4e0b\u6807\u5904\u653e\u7f6e\u4e00\u4e2a\u5217 void setColumn ( int i , final Column column ); // \u83b7\u53d6\u4e00\u4e2a\u5217 Column getColumn ( int i ); // \u8f6c\u6362\u4e3ajson String String toString (); // \u83b7\u53d6\u603b\u5217\u6570 int getColumnNumber (); // \u8ba1\u7b97\u6574\u6761\u8bb0\u5f55\u5728\u5185\u5b58\u4e2d\u5360\u7528\u7684\u5b57\u8282\u6570 int getByteSize (); } \u56e0\u4e3a Record \u662f\u4e00\u4e2a\u63a5\u53e3\uff0c Reader \u63d2\u4ef6\u9996\u5148\u8c03\u7528 RecordSender.createRecord() \u521b\u5efa\u4e00\u4e2a Record \u5b9e\u4f8b\uff0c\u7136\u540e\u628a Column \u4e00\u4e2a\u4e2a\u6dfb\u52a0\u5230 Record \u4e2d\u3002 Writer \u63d2\u4ef6\u8c03\u7528 RecordReceiver.getFromReader() \u65b9\u6cd5\u83b7\u53d6 Record \uff0c\u7136\u540e\u628a Column \u904d\u5386\u51fa\u6765\uff0c\u5199\u5165\u76ee\u6807\u5b58\u50a8\u4e2d\u3002\u5f53 Reader \u5c1a\u672a\u9000\u51fa\uff0c\u4f20\u8f93\u8fd8\u5728\u8fdb\u884c\u65f6\uff0c\u5982\u679c\u6682\u65f6\u6ca1\u6709\u6570\u636e RecordReceiver.getFromReader() \u65b9\u6cd5\u4f1a\u963b\u585e\u76f4\u5230\u6709\u6570\u636e\u3002 \u5982\u679c\u4f20\u8f93\u5df2\u7ecf\u7ed3\u675f\uff0c\u4f1a\u8fd4\u56de null \uff0c Writer \u63d2\u4ef6\u53ef\u4ee5\u636e\u6b64\u5224\u65ad\u662f\u5426\u7ed3\u675f startWrite \u65b9\u6cd5\u3002","title":"\u63d2\u4ef6\u6570\u636e\u4f20\u8f93"},{"location":"plugin_development/#_11","text":"\u4e3a\u4e86\u89c4\u8303\u6e90\u7aef\u548c\u76ee\u7684\u7aef\u7c7b\u578b\u8f6c\u6362\u64cd\u4f5c\uff0c\u4fdd\u8bc1\u6570\u636e\u4e0d\u5931\u771f\uff0cAddax \u652f\u6301\u516d\u79cd\u5185\u90e8\u6570\u636e\u7c7b\u578b\uff1a Long \uff1a\u5b9a\u70b9\u6570(Int\u3001Short\u3001Long\u3001BigInteger\u7b49)\u3002 Double \uff1a\u6d6e\u70b9\u6570(Float\u3001Double\u3001BigDecimal(\u65e0\u9650\u7cbe\u5ea6)\u7b49)\u3002 String \uff1a\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u5e95\u5c42\u4e0d\u9650\u957f\uff0c\u4f7f\u7528\u901a\u7528\u5b57\u7b26\u96c6(Unicode)\u3002 Date \uff1a\u65e5\u671f\u7c7b\u578b\u3002 Timestamp : \u65f6\u95f4\u6233 Bool \uff1a\u5e03\u5c14\u503c\u3002 Bytes \uff1a\u4e8c\u8fdb\u5236\uff0c\u53ef\u4ee5\u5b58\u653e\u8bf8\u5982MP3\u7b49\u975e\u7ed3\u6784\u5316\u6570\u636e\u3002 \u5bf9\u5e94\u5730\uff0c\u6709 DateColumn \u3001 LongColumn \u3001 DoubleColumn \u3001 BytesColumn \u3001 StringColumn \u3001 BoolColumn \u548c TimestampColumn \u4e03\u79cd Column \u7684\u5b9e\u73b0\u3002 Column \u9664\u4e86\u63d0\u4f9b\u6570\u636e\u76f8\u5173\u7684\u65b9\u6cd5\u5916\uff0c\u8fd8\u63d0\u4f9b\u4e00\u7cfb\u5217\u4ee5 as \u5f00\u5934\u7684\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u8f6c\u6362\u65b9\u6cd5\u3002 Addax\u7684\u5185\u90e8\u7c7b\u578b\u5728\u5b9e\u73b0\u4e0a\u4f1a\u9009\u7528\u4e0d\u540c\u7684java\u7c7b\u578b\uff1a \u5185\u90e8\u7c7b\u578b \u5b9e\u73b0\u7c7b\u578b \u5907\u6ce8 Date java.util.Date Timestamp java.sql.Timestamp \u53ef\u4ee5\u7cbe\u786e\u5230\u7eb3\u79d2 Long java.math.BigInteger \u4f7f\u7528\u65e0\u9650\u7cbe\u5ea6\u7684\u5927\u6574\u6570\uff0c\u4fdd\u8bc1\u4e0d\u5931\u771f Double java.lang.String \u7528String\u8868\u793a\uff0c\u4fdd\u8bc1\u4e0d\u5931\u771f Bytes byte[] String java.lang.String Bool java.lang.Boolean \u7c7b\u578b\u4e4b\u95f4\u76f8\u4e92\u8f6c\u6362\u7684\u5173\u7cfb\u5982\u4e0b\uff1a from/to Date Long Double Bytes String Bool Date - \u4f7f\u7528\u6beb\u79d2\u65f6\u95f4\u6233 \u4e0d\u652f\u6301 \u4e0d\u652f\u6301 \u4f7f\u7528\u7cfb\u7edf\u914d\u7f6e\u7684date/time/datetime\u683c\u5f0f\u8f6c\u6362 \u4e0d\u652f\u6301 Long \u4f5c\u4e3a\u6beb\u79d2\u65f6\u95f4\u6233\u6784\u9020Date - BigInteger\u8f6c\u4e3aBigDecimal\uff0c\u7136\u540eBigDecimal.doubleValue() \u4e0d\u652f\u6301 BigInteger.toString() 0\u4e3afalse\uff0c\u5426\u5219true Double \u4e0d\u652f\u6301 \u5185\u90e8String\u6784\u9020BigDecimal\uff0c\u7136\u540eBigDecimal.longValue() - \u4e0d\u652f\u6301 \u76f4\u63a5\u8fd4\u56de\u5185\u90e8String Bytes \u4e0d\u652f\u6301 \u4e0d\u652f\u6301 \u4e0d\u652f\u6301 - \u6309\u7167 common.column.encoding \u914d\u7f6e\u7684\u7f16\u7801\u8f6c\u6362\u4e3aString\uff0c\u9ed8\u8ba4 utf-8 \u4e0d\u652f\u6301 String \u6309\u7167\u914d\u7f6e\u7684date/time/datetime/extra\u683c\u5f0f\u89e3\u6790 \u7528String\u6784\u9020BigDecimal\uff0c\u7136\u540e\u53d6longValue() \u7528String\u6784\u9020BigDecimal\uff0c\u7136\u540e\u53d6doubleValue(),\u4f1a\u6b63\u786e\u5904\u7406 NaN / Infinity / -Infinity \u6309\u7167 common.column.encoding \u914d\u7f6e\u7684\u7f16\u7801\u8f6c\u6362\u4e3abyte[]\uff0c\u9ed8\u8ba4 utf-8 - \"true\"\u4e3a true , \"false\"\u4e3a false \uff0c\u5927\u5c0f\u5199\u4e0d\u654f\u611f\u3002\u5176\u4ed6\u5b57\u7b26\u4e32\u4e0d\u652f\u6301 Bool \u4e0d\u652f\u6301 true \u4e3a 1L \uff0c\u5426\u5219 0L true \u4e3a 1.0 \uff0c\u5426\u5219 0.0 \u4e0d\u652f\u6301 -","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"plugin_development/#_12","text":"","title":"\u810f\u6570\u636e\u5904\u7406"},{"location":"plugin_development/#_13","text":"\u76ee\u524d\u4e3b\u8981\u6709\u4e09\u7c7b\u810f\u6570\u636e\uff1a Reader\u8bfb\u5230\u4e0d\u652f\u6301\u7684\u7c7b\u578b\u3001\u4e0d\u5408\u6cd5\u7684\u503c\u3002 \u4e0d\u652f\u6301\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u6bd4\u5982\uff1a Bytes \u8f6c\u6362\u4e3a Date \u3002 \u5199\u5165\u76ee\u6807\u7aef\u5931\u8d25\uff0c\u6bd4\u5982\uff1a\u5199 MySQL \u6574\u578b\u957f\u5ea6\u8d85\u957f\u3002","title":"\u4ec0\u4e48\u662f\u810f\u6570\u636e"},{"location":"plugin_development/#_14","text":"\u5728 Reader.Task \u548c Writer.Task \u4e2d\uff0c\u901a\u8fc7 AbstractTaskPlugin.getPluginCollector() \u53ef\u4ee5\u62ff\u5230\u4e00\u4e2a TaskPluginCollector \uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217 collectDirtyRecord \u7684\u65b9\u6cd5\u3002 \u5f53\u810f\u6570\u636e\u51fa\u73b0\u65f6\uff0c\u53ea\u9700\u8981\u8c03\u7528\u5408\u9002\u7684 collectDirtyRecord \u65b9\u6cd5\uff0c\u628a\u88ab\u8ba4\u4e3a\u662f\u810f\u6570\u636e\u7684 Record \u4f20\u5165\u5373\u53ef\u3002 \u7528\u6237\u53ef\u4ee5\u5728\u4efb\u52a1\u7684\u914d\u7f6e\u4e2d\u6307\u5b9a\u810f\u6570\u636e\u9650\u5236\u6761\u6570\u6216\u8005\u767e\u5206\u6bd4\u9650\u5236\uff0c\u5f53\u810f\u6570\u636e\u8d85\u51fa\u9650\u5236\u65f6\uff0c\u6846\u67b6\u4f1a\u7ed3\u675f\u540c\u6b65\u4efb\u52a1\uff0c\u9000\u51fa\u3002\u63d2\u4ef6\u9700\u8981\u4fdd\u8bc1\u810f\u6570\u636e\u90fd\u88ab\u6536\u96c6\u5230\uff0c\u5176\u4ed6\u5de5\u4f5c\u4ea4\u7ed9\u6846\u67b6\u5c31\u597d\u3002","title":"\u5982\u4f55\u5904\u7406\u810f\u6570\u636e"},{"location":"plugin_development/#_15","text":"\u6846\u67b6\u626b\u63cf plugin/reader \u548c plugin/writer \u76ee\u5f55\uff0c\u52a0\u8f7d\u6bcf\u4e2a\u63d2\u4ef6\u7684 plugin.json \u6587\u4ef6\u3002 \u4ee5 plugin.json \u6587\u4ef6\u4e2d name \u4e3a key\uff0c\u7d22\u5f15\u6240\u6709\u7684\u63d2\u4ef6\u914d\u7f6e\u3002\u5982\u679c\u53d1\u73b0\u91cd\u540d\u7684\u63d2\u4ef6\uff0c\u6846\u67b6\u4f1a\u5f02\u5e38\u9000\u51fa\u3002 \u7528\u6237\u5728\u63d2\u4ef6\u4e2d\u5728 reader / writer \u914d\u7f6e\u7684 name \u5b57\u6bb5\u6307\u5b9a\u63d2\u4ef6\u540d\u5b57\u3002\u6846\u67b6\u6839\u636e\u63d2\u4ef6\u7684\u7c7b\u578b\uff08 reader / writer \uff09\u548c\u63d2\u4ef6\u540d\u79f0\u53bb\u63d2\u4ef6\u7684\u8def\u5f84\u4e0b\u626b\u63cf\u6240\u6709\u7684jar\uff0c\u52a0\u5165 classpath \u3002 \u6839\u636e\u63d2\u4ef6\u914d\u7f6e\u4e2d\u5b9a\u4e49\u7684\u5165\u53e3\u7c7b\uff0c\u6846\u67b6\u901a\u8fc7\u53cd\u5c04\u5b9e\u4f8b\u5316\u5bf9\u5e94\u7684 Job \u548c Task \u5bf9\u8c61\u3002","title":"\u52a0\u8f7d\u539f\u7406"},{"location":"quickstart/","text":"\u5feb\u901f\u4f7f\u7528 \u00b6 \u5b89\u88c5 Addax \u00b6 \u4e00\u952e\u5b89\u88c5 \u00b6 \u5982\u679c\u4f60\u4e0d\u60f3\u7f16\u8bd1\uff0c\u4f60\u53ef\u4ee5\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u4e00\u952e\u5b89\u88c5\uff08\u5f53\u524d\u4ec5\u652f\u6301 Linux \u548c macOS \uff09 /bin/bash -c \" $( curl -fsSL https://raw.githubusercontent.com/wgzhao/Addax/master/install.sh ) \" \u5982\u679c\u662f macOS \uff0c\u9ed8\u8ba4\u5b89\u88c5\u5728 /usr/local/addax \u76ee\u5f55\u4e0b\uff0c \u5982\u679c\u662f Linux\uff0c \u5219\u5b89\u88c5\u5728 /opt/addax \u76ee\u5f55\u4e0b \u6e90\u4ee3\u7801\u7f16\u8bd1\u5b89\u88c5 \u00b6 \u4f60\u53ef\u4ee5\u9009\u62e9\u4ece\u6e90\u4ee3\u7801\u7f16\u8bd1\u5b89\u88c5\uff0c\u57fa\u672c\u64cd\u4f5c\u5982\u4e0b\uff1a git clone https://github.com/wgzhao/addax.git cd addax mvn clean package mvn package assembly:single cd target/addax/addax-<version> \u5f00\u59cb\u7b2c\u4e00\u4e2a\u91c7\u96c6\u4efb\u52a1 \u00b6 \u8981\u4f7f\u7528 Addax \u8fdb\u884c\u6570\u636e\u91c7\u96c6\uff0c\u53ea\u9700\u8981\u7f16\u5199\u4e00\u4e2a\u4efb\u52a1\u91c7\u96c6\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u4e3a JSON \u683c\u5f0f\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8be5\u4efb\u52a1\u7684\u76ee\u7684\u662f\u4ece\u5185\u5b58\u8bfb\u53d6\u8bfb\u53d6\u6307\u5b9a\u5185\u5bb9\u7684\u6570\u636e\uff0c\u5e76\u5c06\u5176\u6253\u5370\u51fa\u6765\uff0c\u6587\u4ef6\u4fdd\u5b58\u5728 job/test.json \u4e2d job/test.json { \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"addax\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 00:00:00\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } \u5c06\u4e0a\u8ff0\u6587\u4ef6\u4fdd\u5b58\u4e3a job/test.json \u7136\u540e\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a bin/addax.sh job/test.json \u5982\u679c\u6ca1\u6709\u62a5\u9519\uff0c\u5e94\u8be5\u4f1a\u6709\u7c7b\u4f3c\u8fd9\u6837\u7684\u8f93\u51fa ___ _ _ / _ \\ | | | | / /_ \\ \\ __ | | __ | | __ ___ __ | _ | / _ ` | / _ ` | / _ ` \\ \\/ / | | | | ( _ | | ( _ | | ( _ | | > < \\_ | | _/ \\_ _,_ | \\_ _,_ | \\_ _,_/_/ \\_\\ :: Addax version :: ( v4.0.3-SNAPSHOT ) 2021 -08-23 13 :45:17.199 [ main ] INFO VMInfo - VMInfo# operatingSystem class = > com.sun.management.internal.OperatingSystemImpl 2021 -08-23 13 :45:17.223 [ main ] INFO Engine - { \"content\" : { \"reader\" : { \"parameter\" : { \"column\" : [ { \"type\" : \"string\" , \"value\" : \"addax\" } , { \"type\" : \"long\" , \"value\" :19890604 } , { \"type\" : \"date\" , \"value\" : \"1989-06-04 00:00:00\" } , { \"type\" : \"bool\" , \"value\" :true } ] , \"sliceRecordCount\" :10 } , \"name\" : \"streamreader\" } , \"writer\" : { \"parameter\" : { \"print\" :true } , \"name\" : \"streamwriter\" } } } 2021 -08-23 13 :45:17.238 [ main ] INFO PerfTrace - PerfTrace traceId = job_-1, isEnable = false, priority = 0 2021 -08-23 13 :45:17.239 [ main ] INFO JobContainer - Addax jobContainer starts job. 2021 -08-23 13 :45:17.240 [ main ] INFO JobContainer - Set jobId = 0 2021 -08-23 13 :45:17.250 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do prepare work . 2021 -08-23 13 :45:17.250 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do prepare work . 2021 -08-23 13 :45:17.251 [ job-0 ] INFO JobContainer - Job set Channel-Number to 1 channels. 2021 -08-23 13 :45:17.251 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] splits to [ 1 ] tasks. 2021 -08-23 13 :45:17.252 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] splits to [ 1 ] tasks. 2021 -08-23 13 :45:17.276 [ job-0 ] INFO JobContainer - Scheduler starts [ 1 ] taskGroups. 2021 -08-23 13 :45:17.282 [ taskGroup-0 ] INFO TaskGroupContainer - taskGroupId =[ 0 ] start [ 1 ] channels for [ 1 ] tasks. 2021 -08-23 13 :45:17.287 [ taskGroup-0 ] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021 -08-23 13 :45:17.288 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true 2021 -08-23 13 :45:20.295 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -08-23 13 :45:20.296 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do post work. 2021 -08-23 13 :45:20.297 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do post work. 2021 -08-23 13 :45:20.302 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -08-23 13 :45:20.305 [ job-0 ] INFO StandAloneJobContainerCommunicator - Total 10 records, 220 bytes | Speed 73B/s, 3 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0 .000s | All Task WaitReaderTime 0 .011s | Percentage 100 .00% 2021 -08-23 13 :45:20.307 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -08-23 13 :45:17 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -08-23 13 :45:20 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 73B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 3rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 10 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0","title":"\u5feb\u901f\u4f7f\u7528"},{"location":"quickstart/#_1","text":"","title":"\u5feb\u901f\u4f7f\u7528"},{"location":"quickstart/#addax","text":"","title":"\u5b89\u88c5 Addax"},{"location":"quickstart/#_2","text":"\u5982\u679c\u4f60\u4e0d\u60f3\u7f16\u8bd1\uff0c\u4f60\u53ef\u4ee5\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u4e00\u952e\u5b89\u88c5\uff08\u5f53\u524d\u4ec5\u652f\u6301 Linux \u548c macOS \uff09 /bin/bash -c \" $( curl -fsSL https://raw.githubusercontent.com/wgzhao/Addax/master/install.sh ) \" \u5982\u679c\u662f macOS \uff0c\u9ed8\u8ba4\u5b89\u88c5\u5728 /usr/local/addax \u76ee\u5f55\u4e0b\uff0c \u5982\u679c\u662f Linux\uff0c \u5219\u5b89\u88c5\u5728 /opt/addax \u76ee\u5f55\u4e0b","title":"\u4e00\u952e\u5b89\u88c5"},{"location":"quickstart/#_3","text":"\u4f60\u53ef\u4ee5\u9009\u62e9\u4ece\u6e90\u4ee3\u7801\u7f16\u8bd1\u5b89\u88c5\uff0c\u57fa\u672c\u64cd\u4f5c\u5982\u4e0b\uff1a git clone https://github.com/wgzhao/addax.git cd addax mvn clean package mvn package assembly:single cd target/addax/addax-<version>","title":"\u6e90\u4ee3\u7801\u7f16\u8bd1\u5b89\u88c5"},{"location":"quickstart/#_4","text":"\u8981\u4f7f\u7528 Addax \u8fdb\u884c\u6570\u636e\u91c7\u96c6\uff0c\u53ea\u9700\u8981\u7f16\u5199\u4e00\u4e2a\u4efb\u52a1\u91c7\u96c6\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u4e3a JSON \u683c\u5f0f\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8be5\u4efb\u52a1\u7684\u76ee\u7684\u662f\u4ece\u5185\u5b58\u8bfb\u53d6\u8bfb\u53d6\u6307\u5b9a\u5185\u5bb9\u7684\u6570\u636e\uff0c\u5e76\u5c06\u5176\u6253\u5370\u51fa\u6765\uff0c\u6587\u4ef6\u4fdd\u5b58\u5728 job/test.json \u4e2d job/test.json { \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"addax\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 00:00:00\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } \u5c06\u4e0a\u8ff0\u6587\u4ef6\u4fdd\u5b58\u4e3a job/test.json \u7136\u540e\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a bin/addax.sh job/test.json \u5982\u679c\u6ca1\u6709\u62a5\u9519\uff0c\u5e94\u8be5\u4f1a\u6709\u7c7b\u4f3c\u8fd9\u6837\u7684\u8f93\u51fa ___ _ _ / _ \\ | | | | / /_ \\ \\ __ | | __ | | __ ___ __ | _ | / _ ` | / _ ` | / _ ` \\ \\/ / | | | | ( _ | | ( _ | | ( _ | | > < \\_ | | _/ \\_ _,_ | \\_ _,_ | \\_ _,_/_/ \\_\\ :: Addax version :: ( v4.0.3-SNAPSHOT ) 2021 -08-23 13 :45:17.199 [ main ] INFO VMInfo - VMInfo# operatingSystem class = > com.sun.management.internal.OperatingSystemImpl 2021 -08-23 13 :45:17.223 [ main ] INFO Engine - { \"content\" : { \"reader\" : { \"parameter\" : { \"column\" : [ { \"type\" : \"string\" , \"value\" : \"addax\" } , { \"type\" : \"long\" , \"value\" :19890604 } , { \"type\" : \"date\" , \"value\" : \"1989-06-04 00:00:00\" } , { \"type\" : \"bool\" , \"value\" :true } ] , \"sliceRecordCount\" :10 } , \"name\" : \"streamreader\" } , \"writer\" : { \"parameter\" : { \"print\" :true } , \"name\" : \"streamwriter\" } } } 2021 -08-23 13 :45:17.238 [ main ] INFO PerfTrace - PerfTrace traceId = job_-1, isEnable = false, priority = 0 2021 -08-23 13 :45:17.239 [ main ] INFO JobContainer - Addax jobContainer starts job. 2021 -08-23 13 :45:17.240 [ main ] INFO JobContainer - Set jobId = 0 2021 -08-23 13 :45:17.250 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do prepare work . 2021 -08-23 13 :45:17.250 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do prepare work . 2021 -08-23 13 :45:17.251 [ job-0 ] INFO JobContainer - Job set Channel-Number to 1 channels. 2021 -08-23 13 :45:17.251 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] splits to [ 1 ] tasks. 2021 -08-23 13 :45:17.252 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] splits to [ 1 ] tasks. 2021 -08-23 13 :45:17.276 [ job-0 ] INFO JobContainer - Scheduler starts [ 1 ] taskGroups. 2021 -08-23 13 :45:17.282 [ taskGroup-0 ] INFO TaskGroupContainer - taskGroupId =[ 0 ] start [ 1 ] channels for [ 1 ] tasks. 2021 -08-23 13 :45:17.287 [ taskGroup-0 ] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021 -08-23 13 :45:17.288 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true addax 19890604 1989 -06-04 00 :00:00 true 2021 -08-23 13 :45:20.295 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -08-23 13 :45:20.296 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do post work. 2021 -08-23 13 :45:20.297 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do post work. 2021 -08-23 13 :45:20.302 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -08-23 13 :45:20.305 [ job-0 ] INFO StandAloneJobContainerCommunicator - Total 10 records, 220 bytes | Speed 73B/s, 3 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0 .000s | All Task WaitReaderTime 0 .011s | Percentage 100 .00% 2021 -08-23 13 :45:20.307 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -08-23 13 :45:17 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -08-23 13 :45:20 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 73B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 3rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 10 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0","title":"\u5f00\u59cb\u7b2c\u4e00\u4e2a\u91c7\u96c6\u4efb\u52a1"},{"location":"setupJob/","text":"\u4efb\u52a1\u914d\u7f6e \u00b6 \u4e00\u4e2a\u91c7\u96c6\u4efb\u52a1\u5c31\u662f\u4e00\u4e2a JSON \u683c\u5f0f\u914d\u7f6e\u6587\u4ef6\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u7684\u6a21\u677f\u5982\u4e0b\uff1a { \"job\" : { \"settings\" : {}, \"content\" : { \"reader\" : {}, \"writer\" : {}, \"transformer\" : [] } } } \u4efb\u52a1\u914d\u7f6e\u7531 key \u4e3a job \u7684\u5b57\u5178\u7ec4\u6210\uff0c\u5176\u5b57\u5178\u5143\u7d20\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a settings : \u7528\u6765\u5b9a\u4e49\u672c\u6b21\u4efb\u52a1\u7684\u4e00\u4e9b\u63a7\u5236\u53c2\u6570\uff0c\u6bd4\u5982\u6307\u5b9a\u591a\u5c11\u7ebf\u7a0b\uff0c\u6700\u5927\u9519\u8bef\u7387\uff0c\u6700\u5927\u9519\u8bef\u8bb0\u5f55\u6761\u6570\u7b49\uff0c\u8fd9\u662f\u53ef\u9009\u914d\u7f6e\u3002 reader : \u7528\u6765\u914d\u7f6e\u6570\u636e\u8bfb\u53d6\u6240\u9700\u8981\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u8fd9\u662f\u5fc5\u586b\u5185\u5bb9 writer : \u7528\u6765\u914d\u7f6e\u5199\u5165\u6570\u636e\u6240\u9700\u8981\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u8fd9\u662f\u5fc5\u586b\u5185\u5bb9 transformer : \u6570\u636e\u8f6c\u6362\u89c4\u5219\uff0c\u5982\u679c\u9700\u8981\u5bf9\u8bfb\u53d6\u7684\u6570\u636e\u5728\u5199\u5165\u4e4b\u524d\u505a\u4e00\u4e9b\u53d8\u6362\uff0c\u53ef\u4ee5\u914d\u7f6e\u8be5\u9879\uff0c\u5426\u5219\u53ef\u4ee5\u4e0d\u914d\u7f6e reader \u914d\u7f6e\u9879 \u00b6 reader \u914d\u7f6e\u9879\u4f9d\u636e\u4e0d\u540c\u7684 reader \u63d2\u4ef6\u800c\u6709\u4e9b\u5fae\u4e0d\u540c\uff0c\u4f46\u5927\u90e8\u5206\u7684\u914d\u7f6e\u5927\u540c\u5c0f\u5f02\uff0c\u7279\u522b\u662f\u9488\u5bf9\u5173\u7cfb\u578b\u6570\u636e\u5e93\u800c\u8a00\uff0c\u5176\u57fa\u672c\u914d\u7f6e\u5982\u4e0b\uff1a { \"name\" : \"mysqlreader\" , \"parameter\" : { \"username\" : \"\" , \"password\" : \"\" , \"column\" : [], \"connection\" : [ { \"jdbcUrl\" : [], \"table\" : [] } ], \"where\" : \"\" } } \u5176\u4e2d name \u662f\u63d2\u4ef6\u7684\u540d\u79f0\uff0c\u6bcf\u4e2a\u63d2\u4ef6\u7684\u540d\u79f0\u90fd\u662f\u552f\u4e00\u7684\uff0c\u6bcf\u4e2a\u63d2\u4ef6\u66f4\u8be6\u7ec6\u7684\u914d\u7f6e\u53ef\u4ee5\u53c2\u8003\u8bfb\u53d6\u63d2\u4ef6\u7ae0\u8282\u7684\u5404\u63d2\u4ef6\u5185\u5bb9 writer \u914d\u7f6e\u9879 \u00b6 writer \u914d\u7f6e\u9879\u548c reader \u914d\u7f6e\u9879\u5dee\u4e0d\u591a\uff0c\u5176\u57fa\u672c\u6a21\u677f\u5982\u4e0b\uff1a { \"name\" : \"mysqlwriter\" , \"parameter\" : { \"username\" : \"\" , \"password\" : \"\" , \"writeMode\" : \"\" , \"column\" : [], \"session\" : [], \"preSql\" : [], \"connection\" : [ { \"jdbcUrl\" : \"\" , \"table\" : [] } ] } } \u540c\u6837\u7684\uff0c\u8fd9\u91cc\u7684 name \u4e5f\u662f\u552f\u4e00\u7684\uff0c\u6bcf\u4e2a\u63d2\u4ef6\u66f4\u8be6\u7ec6\u7684\u914d\u7f6e\u53ef\u4ee5\u53c2\u8003\u5199\u5165\u63d2\u4ef6\u7ae0\u8282\u7684\u5404\u63d2\u4ef6\u5185\u5bb9 settings \u914d\u7f6e\u9879 \u00b6 settings \u53ef\u914d\u7f6e\u7684\u5185\u5bb9\u5982\u4e0b\uff1a { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"record\" : 100 , \"channel\" : 1 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } } } \u89e3\u91ca\u5982\u4e0b\uff1a speed \u00b6 \u987e\u540d\u601d\u4e49\uff0c\u8fd9\u91cc\u662f\u7528\u6765\u505a\u6d41\u63a7\u7684\u914d\u7f6e\u9879\uff0c\u53ef\u4ee5\u4ece\u7f51\u7edc\u4f20\u8f93\u901f\u5ea6\uff0c\u6bcf\u79d2\u7684\u8bb0\u5f55\u6570\u4ee5\u53ca\u7ebf\u7a0b\u6570\u4e0a\u505a\u63a7\u5236\uff0c\u5206\u522b\u63cf\u8ff0\u5982\u4e0b\uff1a speed.byte \u00b6 \u8bbe\u7f6e\u6bcf\u79d2\u53ef\u83b7\u53d6\u7684\u5b57\u8282\u6570(Bps)\uff0c\u4e00\u822c\u662f\u4e3a\u4e86\u9632\u6b62\u6267\u884c\u4efb\u52a1\u65f6\u5c06\u6574\u4e2a\u5e26\u5bbd\u8dd1\u6ee1\uff0c\u4ece\u800c\u5f71\u54cd\u5230\u5176\u4ed6\u670d\u52a1\u3002\u5982\u679c\u4e0d\u505a\u9650\u5236\uff0c\u53ef\u8bbe\u7f6e\u4e3a -1 speed.record \u00b6 \u8bbe\u7f6e\u8bb0\u5f55\u6bcf\u79d2\u53ef\u83b7\u53d6\u7684\u6700\u5927\u8bb0\u5f55\u6761\u6570\uff0c\u8be5\u53c2\u6570\u9700\u8981\u548c speed.byte \u914d\u5408\u4f7f\u7528 speed.channel \u00b6 \u8bbe\u7f6e\u901a\u9053\u6570\uff0c\u8be5\u901a\u9053\u8def\u786e\u5b9a\u4e86\u6bcf\u4e2a\u4efb\u52a1\u7684\u7ebf\u7a0b\u6570\uff0c\u76ee\u524d\u4e00\u4e2achannel\u5bf9\u5e945\u4e2a\u7ebf\u7a0b\uff0c\u6bd4\u5982\u8bbe\u7f6e channel \u4e3a 3\uff0c \u5219\u6709 3 * 5 + 1 = 16 \u4e2a\u7ebf\u7a0b\uff0c\u5176\u4e2d\u4e00\u4e2a\u7ebf\u7a0b\u4e3a\u7edf\u8ba1\u7ebf\u7a0b\u3002 errorLimit \u00b6 errorLimit \u7528\u6765\u914d\u7f6e\u5728\u6570\u636e\u5199\u5165\u62a5\u9519\u65f6\u7684\u884c\u4e3a\uff0c\u5177\u4f53\u5982\u4e0b errorLimit.record \u00b6 \u5141\u8bb8\u9519\u8bef\u7684\u8bb0\u5f55\u6761\u6570\uff0c\u5982\u679c\u8d85\u8fc7\u8fd9\u4e2a\u6570\uff0c\u5219\u8ba4\u4e3a\u672c\u6b21\u4efb\u52a1\u5931\u8d25\uff0c\u5426\u5219\u8ba4\u4e3a\u6210\u529f errorLimit.percentage \u00b6 \u5141\u8bb8\u9519\u8bef\u8bb0\u5f55\u7684\u6bd4\u7387\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u6bd4\u7387\uff0c\u5219\u8ba4\u4e3a\u672c\u6b21\u4efb\u52a1\u5931\u8d25\uff0c\u5426\u5219\u8ba4\u4e3a\u6210\u529f \u6ce8\u610f\uff0c\u4e0a\u8ff0\u53c2\u6570\u5728 conf/core.json \u914d\u7f6e\u6587\u4ef6\u5747\u6709\u9ed8\u8ba4\u914d\u7f6e\uff0c\u7528\u6765\u63a7\u5236\u5168\u5c40\u7684\u8bbe\u7f6e\u3002","title":"\u4efb\u52a1\u914d\u7f6e"},{"location":"setupJob/#_1","text":"\u4e00\u4e2a\u91c7\u96c6\u4efb\u52a1\u5c31\u662f\u4e00\u4e2a JSON \u683c\u5f0f\u914d\u7f6e\u6587\u4ef6\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u7684\u6a21\u677f\u5982\u4e0b\uff1a { \"job\" : { \"settings\" : {}, \"content\" : { \"reader\" : {}, \"writer\" : {}, \"transformer\" : [] } } } \u4efb\u52a1\u914d\u7f6e\u7531 key \u4e3a job \u7684\u5b57\u5178\u7ec4\u6210\uff0c\u5176\u5b57\u5178\u5143\u7d20\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a settings : \u7528\u6765\u5b9a\u4e49\u672c\u6b21\u4efb\u52a1\u7684\u4e00\u4e9b\u63a7\u5236\u53c2\u6570\uff0c\u6bd4\u5982\u6307\u5b9a\u591a\u5c11\u7ebf\u7a0b\uff0c\u6700\u5927\u9519\u8bef\u7387\uff0c\u6700\u5927\u9519\u8bef\u8bb0\u5f55\u6761\u6570\u7b49\uff0c\u8fd9\u662f\u53ef\u9009\u914d\u7f6e\u3002 reader : \u7528\u6765\u914d\u7f6e\u6570\u636e\u8bfb\u53d6\u6240\u9700\u8981\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u8fd9\u662f\u5fc5\u586b\u5185\u5bb9 writer : \u7528\u6765\u914d\u7f6e\u5199\u5165\u6570\u636e\u6240\u9700\u8981\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u8fd9\u662f\u5fc5\u586b\u5185\u5bb9 transformer : \u6570\u636e\u8f6c\u6362\u89c4\u5219\uff0c\u5982\u679c\u9700\u8981\u5bf9\u8bfb\u53d6\u7684\u6570\u636e\u5728\u5199\u5165\u4e4b\u524d\u505a\u4e00\u4e9b\u53d8\u6362\uff0c\u53ef\u4ee5\u914d\u7f6e\u8be5\u9879\uff0c\u5426\u5219\u53ef\u4ee5\u4e0d\u914d\u7f6e","title":"\u4efb\u52a1\u914d\u7f6e"},{"location":"setupJob/#reader","text":"reader \u914d\u7f6e\u9879\u4f9d\u636e\u4e0d\u540c\u7684 reader \u63d2\u4ef6\u800c\u6709\u4e9b\u5fae\u4e0d\u540c\uff0c\u4f46\u5927\u90e8\u5206\u7684\u914d\u7f6e\u5927\u540c\u5c0f\u5f02\uff0c\u7279\u522b\u662f\u9488\u5bf9\u5173\u7cfb\u578b\u6570\u636e\u5e93\u800c\u8a00\uff0c\u5176\u57fa\u672c\u914d\u7f6e\u5982\u4e0b\uff1a { \"name\" : \"mysqlreader\" , \"parameter\" : { \"username\" : \"\" , \"password\" : \"\" , \"column\" : [], \"connection\" : [ { \"jdbcUrl\" : [], \"table\" : [] } ], \"where\" : \"\" } } \u5176\u4e2d name \u662f\u63d2\u4ef6\u7684\u540d\u79f0\uff0c\u6bcf\u4e2a\u63d2\u4ef6\u7684\u540d\u79f0\u90fd\u662f\u552f\u4e00\u7684\uff0c\u6bcf\u4e2a\u63d2\u4ef6\u66f4\u8be6\u7ec6\u7684\u914d\u7f6e\u53ef\u4ee5\u53c2\u8003\u8bfb\u53d6\u63d2\u4ef6\u7ae0\u8282\u7684\u5404\u63d2\u4ef6\u5185\u5bb9","title":"reader \u914d\u7f6e\u9879"},{"location":"setupJob/#writer","text":"writer \u914d\u7f6e\u9879\u548c reader \u914d\u7f6e\u9879\u5dee\u4e0d\u591a\uff0c\u5176\u57fa\u672c\u6a21\u677f\u5982\u4e0b\uff1a { \"name\" : \"mysqlwriter\" , \"parameter\" : { \"username\" : \"\" , \"password\" : \"\" , \"writeMode\" : \"\" , \"column\" : [], \"session\" : [], \"preSql\" : [], \"connection\" : [ { \"jdbcUrl\" : \"\" , \"table\" : [] } ] } } \u540c\u6837\u7684\uff0c\u8fd9\u91cc\u7684 name \u4e5f\u662f\u552f\u4e00\u7684\uff0c\u6bcf\u4e2a\u63d2\u4ef6\u66f4\u8be6\u7ec6\u7684\u914d\u7f6e\u53ef\u4ee5\u53c2\u8003\u5199\u5165\u63d2\u4ef6\u7ae0\u8282\u7684\u5404\u63d2\u4ef6\u5185\u5bb9","title":"writer \u914d\u7f6e\u9879"},{"location":"setupJob/#settings","text":"settings \u53ef\u914d\u7f6e\u7684\u5185\u5bb9\u5982\u4e0b\uff1a { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"record\" : 100 , \"channel\" : 1 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } } } \u89e3\u91ca\u5982\u4e0b\uff1a","title":"settings \u914d\u7f6e\u9879"},{"location":"setupJob/#speed","text":"\u987e\u540d\u601d\u4e49\uff0c\u8fd9\u91cc\u662f\u7528\u6765\u505a\u6d41\u63a7\u7684\u914d\u7f6e\u9879\uff0c\u53ef\u4ee5\u4ece\u7f51\u7edc\u4f20\u8f93\u901f\u5ea6\uff0c\u6bcf\u79d2\u7684\u8bb0\u5f55\u6570\u4ee5\u53ca\u7ebf\u7a0b\u6570\u4e0a\u505a\u63a7\u5236\uff0c\u5206\u522b\u63cf\u8ff0\u5982\u4e0b\uff1a","title":"speed"},{"location":"setupJob/#speedbyte","text":"\u8bbe\u7f6e\u6bcf\u79d2\u53ef\u83b7\u53d6\u7684\u5b57\u8282\u6570(Bps)\uff0c\u4e00\u822c\u662f\u4e3a\u4e86\u9632\u6b62\u6267\u884c\u4efb\u52a1\u65f6\u5c06\u6574\u4e2a\u5e26\u5bbd\u8dd1\u6ee1\uff0c\u4ece\u800c\u5f71\u54cd\u5230\u5176\u4ed6\u670d\u52a1\u3002\u5982\u679c\u4e0d\u505a\u9650\u5236\uff0c\u53ef\u8bbe\u7f6e\u4e3a -1","title":"speed.byte"},{"location":"setupJob/#speedrecord","text":"\u8bbe\u7f6e\u8bb0\u5f55\u6bcf\u79d2\u53ef\u83b7\u53d6\u7684\u6700\u5927\u8bb0\u5f55\u6761\u6570\uff0c\u8be5\u53c2\u6570\u9700\u8981\u548c speed.byte \u914d\u5408\u4f7f\u7528","title":"speed.record"},{"location":"setupJob/#speedchannel","text":"\u8bbe\u7f6e\u901a\u9053\u6570\uff0c\u8be5\u901a\u9053\u8def\u786e\u5b9a\u4e86\u6bcf\u4e2a\u4efb\u52a1\u7684\u7ebf\u7a0b\u6570\uff0c\u76ee\u524d\u4e00\u4e2achannel\u5bf9\u5e945\u4e2a\u7ebf\u7a0b\uff0c\u6bd4\u5982\u8bbe\u7f6e channel \u4e3a 3\uff0c \u5219\u6709 3 * 5 + 1 = 16 \u4e2a\u7ebf\u7a0b\uff0c\u5176\u4e2d\u4e00\u4e2a\u7ebf\u7a0b\u4e3a\u7edf\u8ba1\u7ebf\u7a0b\u3002","title":"speed.channel"},{"location":"setupJob/#errorlimit","text":"errorLimit \u7528\u6765\u914d\u7f6e\u5728\u6570\u636e\u5199\u5165\u62a5\u9519\u65f6\u7684\u884c\u4e3a\uff0c\u5177\u4f53\u5982\u4e0b","title":"errorLimit"},{"location":"setupJob/#errorlimitrecord","text":"\u5141\u8bb8\u9519\u8bef\u7684\u8bb0\u5f55\u6761\u6570\uff0c\u5982\u679c\u8d85\u8fc7\u8fd9\u4e2a\u6570\uff0c\u5219\u8ba4\u4e3a\u672c\u6b21\u4efb\u52a1\u5931\u8d25\uff0c\u5426\u5219\u8ba4\u4e3a\u6210\u529f","title":"errorLimit.record"},{"location":"setupJob/#errorlimitpercentage","text":"\u5141\u8bb8\u9519\u8bef\u8bb0\u5f55\u7684\u6bd4\u7387\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u6bd4\u7387\uff0c\u5219\u8ba4\u4e3a\u672c\u6b21\u4efb\u52a1\u5931\u8d25\uff0c\u5426\u5219\u8ba4\u4e3a\u6210\u529f \u6ce8\u610f\uff0c\u4e0a\u8ff0\u53c2\u6570\u5728 conf/core.json \u914d\u7f6e\u6587\u4ef6\u5747\u6709\u9ed8\u8ba4\u914d\u7f6e\uff0c\u7528\u6765\u63a7\u5236\u5168\u5c40\u7684\u8bbe\u7f6e\u3002","title":"errorLimit.percentage"},{"location":"statsreport/","text":"\u4efb\u52a1\u7ed3\u679c\u4e0a\u62a5 \u00b6 \u5feb\u901f\u4ecb\u7ecd \u00b6 \u4e3b\u8981\u7528\u4e8e\u5c06\u5b9a\u65f6\u4efb\u52a1\u7684\u7ed3\u679c\u4e0a\u62a5\u7ed9\u6307\u5b9a\u670d\u52a1\u5668 \u529f\u80fd\u4e0e\u9650\u5236 \u00b6 \u652f\u4ed8http\u534f\u8bae\uff0cJSON\u683c\u5f0f\u3002 \u63a5\u53e3\u5730\u5740\u914d\u7f6e\u5728 core.json \u6587\u4ef6\u4e0b\u7684 core.addaxServer.address \u4e0b\u3002 \u5f02\u6b65\u53d1\u9001\u3002 \u9700\u8981\u5f15\u5165 httpclient-4.5.2.jar , httpcore-4.4.5.jar , httpcore-nio-4.4.5.jar , httpasyncclient-4.1.2.jar \u76f8\u5173jar\u5305 \u529f\u80fd\u8bf4\u660e \u00b6 \u914d\u7f6e\u6837\u4f8b \u00b6 { \"jobName\" : \"test\" , \"startTimeStamp\" : 1587971621 , \"endTimeStamp\" : 1587971621 , \"totalCosts\" : 10 , \"byteSpeedPerSecond\" : 33 , \"recordSpeedPerSecond\" : 1 , \"totalReadRecords\" : 6 , \"totalErrorRecords\" : 0 , \"jobContent\" : { ... } } \u53c2\u6570\u8bf4\u660e \u00b6 \u53c2\u6570 \u63cf\u8ff0 \u5fc5\u9009 \u9ed8\u8ba4\u503c jobName \u4efb\u52a1\u540d \u662f jobName startTimeStamp \u4efb\u52a1\u6267\u884c\u7684\u5f00\u59cb\u65f6\u95f4 \u662f \u65e0 endTimeStamp \u4efb\u52a1\u6267\u884c\u7684\u7ed3\u675f\u65f6\u95f4 \u662f \u65e0 totalCosts \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 \u662f \u65e0 byteSpeedPerSecond \u4efb\u52a1\u5e73\u5747\u6d41\u91cf \u662f \u65e0 recordSpeedPerSecond \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 \u662f \u65e0 totalReadRecords \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 \u662f 0 totalErrorRecords \u8bfb\u5199\u5931\u8d25\u603b\u6570 \u662f 0 jobContent \u672c\u6b21\u4efb\u52a1\u7684json\u6587\u4ef6 \u662f \u65e0 jobName \u7684\u8bbe\u7f6e\u89c4\u5219\u5982\u4e0b: \u5728\u547d\u4ee4\u884c\u901a\u8fc7\u4f20\u9012 -P\"-DjobName=xxxx\" \u65b9\u5f0f\u6307\u5b9a,\u5426\u5219 \u914d\u7f6e\u6587\u4ef6\u7684 writer.parameters.path \u503c\u6309 / \u5206\u5272\u540e\u53d6\u7b2c2\uff0c3\u5217\u7528\u70b9(.)\u62fc\u63a5\u800c\u6210\uff0c\u5176\u542b\u4e49\u662f\u4e3a\u5e93\u540d\u53ca\u8868\u540d,\u5426\u5219 \u5426\u5219\u8bbe\u7f6e\u4e3a jobName","title":"\u4efb\u52a1\u7ed3\u679c\u4e0a\u62a5"},{"location":"statsreport/#_1","text":"","title":"\u4efb\u52a1\u7ed3\u679c\u4e0a\u62a5"},{"location":"statsreport/#_2","text":"\u4e3b\u8981\u7528\u4e8e\u5c06\u5b9a\u65f6\u4efb\u52a1\u7684\u7ed3\u679c\u4e0a\u62a5\u7ed9\u6307\u5b9a\u670d\u52a1\u5668","title":"\u5feb\u901f\u4ecb\u7ecd"},{"location":"statsreport/#_3","text":"\u652f\u4ed8http\u534f\u8bae\uff0cJSON\u683c\u5f0f\u3002 \u63a5\u53e3\u5730\u5740\u914d\u7f6e\u5728 core.json \u6587\u4ef6\u4e0b\u7684 core.addaxServer.address \u4e0b\u3002 \u5f02\u6b65\u53d1\u9001\u3002 \u9700\u8981\u5f15\u5165 httpclient-4.5.2.jar , httpcore-4.4.5.jar , httpcore-nio-4.4.5.jar , httpasyncclient-4.1.2.jar \u76f8\u5173jar\u5305","title":"\u529f\u80fd\u4e0e\u9650\u5236"},{"location":"statsreport/#_4","text":"","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"statsreport/#_5","text":"{ \"jobName\" : \"test\" , \"startTimeStamp\" : 1587971621 , \"endTimeStamp\" : 1587971621 , \"totalCosts\" : 10 , \"byteSpeedPerSecond\" : 33 , \"recordSpeedPerSecond\" : 1 , \"totalReadRecords\" : 6 , \"totalErrorRecords\" : 0 , \"jobContent\" : { ... } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"statsreport/#_6","text":"\u53c2\u6570 \u63cf\u8ff0 \u5fc5\u9009 \u9ed8\u8ba4\u503c jobName \u4efb\u52a1\u540d \u662f jobName startTimeStamp \u4efb\u52a1\u6267\u884c\u7684\u5f00\u59cb\u65f6\u95f4 \u662f \u65e0 endTimeStamp \u4efb\u52a1\u6267\u884c\u7684\u7ed3\u675f\u65f6\u95f4 \u662f \u65e0 totalCosts \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 \u662f \u65e0 byteSpeedPerSecond \u4efb\u52a1\u5e73\u5747\u6d41\u91cf \u662f \u65e0 recordSpeedPerSecond \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 \u662f \u65e0 totalReadRecords \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 \u662f 0 totalErrorRecords \u8bfb\u5199\u5931\u8d25\u603b\u6570 \u662f 0 jobContent \u672c\u6b21\u4efb\u52a1\u7684json\u6587\u4ef6 \u662f \u65e0 jobName \u7684\u8bbe\u7f6e\u89c4\u5219\u5982\u4e0b: \u5728\u547d\u4ee4\u884c\u901a\u8fc7\u4f20\u9012 -P\"-DjobName=xxxx\" \u65b9\u5f0f\u6307\u5b9a,\u5426\u5219 \u914d\u7f6e\u6587\u4ef6\u7684 writer.parameters.path \u503c\u6309 / \u5206\u5272\u540e\u53d6\u7b2c2\uff0c3\u5217\u7528\u70b9(.)\u62fc\u63a5\u800c\u6210\uff0c\u5176\u542b\u4e49\u662f\u4e3a\u5e93\u540d\u53ca\u8868\u540d,\u5426\u5219 \u5426\u5219\u8bbe\u7f6e\u4e3a jobName","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"transformer/","text":"\u6570\u636e\u8f6c\u6362 \u00b6 Transformer \u5b9a\u4e49 \u00b6 \u5728\u6570\u636e\u540c\u6b65\u3001\u4f20\u8f93\u8fc7\u7a0b\u4e2d\uff0c\u5b58\u5728\u7528\u6237\u5bf9\u4e8e\u6570\u636e\u4f20\u8f93\u8fdb\u884c\u7279\u6b8a\u5b9a\u5236\u5316\u7684\u9700\u6c42\u573a\u666f\uff0c\u5305\u62ec\u88c1\u526a\u5217\u3001\u8f6c\u6362\u5217\u7b49\u5de5\u4f5c\uff0c\u53ef\u4ee5\u501f\u52a9ETL\u7684T\u8fc7\u7a0b\u5b9e\u73b0(Transformer)\u3002Addax\u5305\u542b\u4e86\u5b8c\u6210\u7684E(Extract)\u3001T(Transformer)\u3001L(Load)\u652f\u6301\u3002 \u8fd0\u884c\u6a21\u578b \u00b6 UDF \u51fd\u6570 \u00b6 dx_substr \u00b6 dx_substr(idx, pos, length) -> str \u53c2\u6570 idx : \u5b57\u6bb5\u7f16\u53f7\uff0c\u5bf9\u5e94record\u4e2d\u7b2c\u51e0\u4e2a\u5b57\u6bb5 pos : \u5b57\u6bb5\u503c\u7684\u5f00\u59cb\u4f4d\u7f6e length : \u76ee\u6807\u5b57\u6bb5\u957f\u5ea6 \u8fd4\u56de\uff1a \u4ece\u5b57\u7b26\u4e32\u7684\u6307\u5b9a\u4f4d\u7f6e\uff08\u5305\u542b\uff09\u622a\u53d6\u6307\u5b9a\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002\u5982\u679c\u5f00\u59cb\u4f4d\u7f6e\u975e\u6cd5\u629b\u51fa\u5f02\u5e38\u3002\u5982\u679c\u5b57\u6bb5\u4e3a\u7a7a\u503c\uff0c\u76f4\u63a5\u8fd4\u56de\uff08\u5373\u4e0d\u53c2\u4e0e\u672ctransformer\uff09 dx_pad \u00b6 dx_pad(idx, flag, length, chr) \u53c2\u6570 idx : \u5b57\u6bb5\u7f16\u53f7\uff0c\u5bf9\u5e94record\u4e2d\u7b2c\u51e0\u4e2a\u5b57\u6bb5 flag : \"l\",\"r\", \u6307\u793a\u662f\u5728\u5934\u8fdb\u884c\u586b\u5145\uff0c\u8fd8\u662f\u5c3e\u8fdb\u884c\u586b\u5145 length : \u76ee\u6807\u5b57\u6bb5\u957f\u5ea6 chr : \u9700\u8981\u586b\u5145\u7684\u5b57\u7b26 \u8fd4\u56de\uff1a \u5982\u679c\u6e90\u5b57\u7b26\u4e32\u957f\u5ea6\u5c0f\u4e8e\u76ee\u6807\u5b57\u6bb5\u957f\u5ea6\uff0c\u6309\u7167\u4f4d\u7f6e\u6dfb\u52a0pad\u5b57\u7b26\u540e\u8fd4\u56de\u3002\u5982\u679c\u957f\u4e8e\uff0c\u76f4\u63a5\u622a\u65ad\uff08\u90fd\u622a\u53f3\u8fb9\uff09\u3002\u5982\u679c\u5b57\u6bb5\u4e3a\u7a7a\u503c\uff0c\u8f6c\u6362\u4e3a\u7a7a\u5b57\u7b26\u4e32\u8fdb\u884cpad\uff0c\u5373\u6700\u540e\u7684\u5b57\u7b26\u4e32\u5168\u662f\u9700\u8981pad\u7684\u5b57\u7b26 \u4e3e\u4f8b\uff1a dx_pad(1,\"l\",\"4\",\"A\") : \u5982\u679c column 1 \u7684\u503c\u4e3a xyz=> Axyz \uff0c \u5219\u8f6c\u6362\u540e\u7684\u503c\u4e3a xyzzzzz => xyzz dx_pad(1,\"r\",\"4\",\"A\") , \u5982\u679c column 1 \u7684\u503c\u4e3a xyz=> xyzA \uff0c \u503c\u4e3a xyzzzzz => xyzz dx_replace \u00b6 dx_replace(idx, pos, length, str) -> str \u53c2\u6570 idx : \u5b57\u6bb5\u7f16\u53f7\uff0c\u5bf9\u5e94record\u4e2d\u7b2c\u51e0\u4e2a\u5b57\u6bb5 pos : \u5b57\u6bb5\u503c\u7684\u5f00\u59cb\u4f4d\u7f6e length : \u9700\u8981\u66ff\u6362\u7684\u5b57\u6bb5\u957f\u5ea6 str : \u8981\u66ff\u6362\u7684\u5b57\u7b26\u4e32 \u8fd4\u56de\uff1a \u4ece\u5b57\u7b26\u4e32\u7684\u6307\u5b9a\u4f4d\u7f6e\uff08\u5305\u542b\uff09\u66ff\u6362\u6307\u5b9a\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002\u5982\u679c\u5f00\u59cb\u4f4d\u7f6e\u975e\u6cd5\u629b\u51fa\u5f02\u5e38\u3002\u5982\u679c\u5b57\u6bb5\u4e3a\u7a7a\u503c\uff0c\u76f4\u63a5\u8fd4\u56de\uff08\u5373\u4e0d\u53c2\u4e0e\u672ctransformer\uff09 \u4e3e\u4f8b\uff1a dx_replace(1,\"2\",\"4\",\"****\") : \u5982\u679c column 1 \u7684\u503c\u4e3a addaxTest , \u5219\u8f6c\u6362\u4e3a da****est dx_replace(1,\"5\",\"10\",\"****\") \u5982\u679c column 1 \u7684\u503c\u4e3a addaxTest \u5219\u8f6c\u6362\u4e3a data**** dx_filter \u00b6 dx_filter(idx, operator, expr) -> str \u53c2\u6570\uff1a idx : \u5b57\u6bb5\u7f16\u53f7\uff0c\u5bf9\u5e94record\u4e2d\u7b2c\u51e0\u4e2a\u5b57\u6bb5 operator : \u8fd0\u7b97\u7b26, \u652f\u6301 like , not like , > , = , < , >= , != , <= expr : \u6b63\u5219\u8868\u8fbe\u5f0f\uff08java\u6b63\u5219\u8868\u8fbe\u5f0f\uff09\u3001\u503c str : \u8981\u66ff\u6362\u7684\u5b57\u7b26\u4e32 \u8fd4\u56de\uff1a \u5982\u679c\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u8fd4\u56deNull\uff0c\u8868\u793a\u8fc7\u6ee4\u8be5\u884c\u3002\u4e0d\u5339\u914d\u8868\u8fbe\u5f0f\u65f6\uff0c\u8868\u793a\u4fdd\u7559\u8be5\u884c\u3002\uff08\u6ce8\u610f\u662f\u8be5\u884c\uff09\u3002\u5bf9\u4e8e > , = , < \u90fd\u662f\u5bf9\u5b57\u6bb5\u76f4\u63a5compare\u7684\u7ed3\u679c. like \uff0c not like \u662f\u5c06\u5b57\u6bb5\u8f6c\u6362\u6210\u5b57\u7b26\u7c7b\u578b\uff0c\u7136\u540e\u548c\u76ee\u6807\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5168\u5339\u914d\u3002 > , = , < , >= , != , <= ,\u6309\u7167\u7c7b\u578b\u8fdb\u884c\u6bd4\u8f83, \u6570\u503c\u7c7b\u578b\u6309\u5927\u5c0f\u6bd4\u8f83,\u5b57\u7b26\u53ca\u5e03\u5c14\u7c7b\u578b\u6309\u7167\u5b57\u5178\u5e8f\u6bd4\u8f83 \u5982\u679c\u76ee\u6807\u5b57\u6bb5\u4e3a\u7a7a\uff08null\uff09\uff0c\u5bf9\u4e8e = null \u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u5c06\u6ee1\u8db3\u6761\u4ef6\uff0c\u88ab\u8fc7\u6ee4\u3002 \uff01=null \u7684\u8fc7\u6ee4\u6761\u4ef6\uff0cnull\u4e0d\u6ee1\u8db3\u8fc7\u6ee4\u6761\u4ef6\uff0c\u4e0d\u88ab\u8fc7\u6ee4\u3002 like \uff0c\u5b57\u6bb5\u4e3anull\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u4e0d\u88ab\u8fc7\u6ee4\uff0c\u548c not like \uff0c\u5b57\u6bb5\u4e3anull\u6ee1\u8db3\u6761\u4ef6\uff0c\u88ab\u8fc7\u6ee4\u3002 \u4e3e\u4f8b dx_filter(1,\"like\",\"dataTest\") dx_filter(1,\">=\",\"10\") \u5173\u8054filter\u6682\u4e0d\u652f\u6301\uff0c\u5373\u591a\u4e2a\u5b57\u6bb5\u7684\u8054\u5408\u5224\u65ad\uff0c\u51fd\u53c2\u592a\u8fc7\u590d\u6742\uff0c\u7528\u6237\u96be\u4ee5\u4f7f\u7528\u3002 dx_groovy \u00b6 dx_groovy(code, package) -> record \u53c2\u6570 coee : \u7b26\u5408 groovy \u7f16\u7801\u8981\u6c42\u7684\u4ee3\u7801 package : extraPackage, \u5217\u8868\u6216\u8005\u4e3a\u7a7a \u8fd4\u56de Record \u6570\u636e\u7c7b\u578b \u6ce8\u610f\uff1a dx_groovy \u53ea\u80fd\u8c03\u7528\u4e00\u6b21\u3002\u4e0d\u80fd\u591a\u6b21\u8c03\u7528\u3002 groovy code \u4e2d\u652f\u6301 java.lang , java.util \u7684\u5305\uff0c\u53ef\u76f4\u63a5\u5f15\u7528\u7684\u5bf9\u8c61\u6709 record \uff0c\u4ee5\u53caelement\u4e0b\u7684\u5404\u79cdcolumn\uff08BoolColumn.class,BytesColumn.class,DateColumn.class,DoubleColumn.class,LongColumn.class,StringColumn.class\uff09\u3002 \u4e0d\u652f\u6301\u5176\u4ed6\u5305\uff0c\u5982\u679c\u7528\u6237\u6709\u9700\u8981\u7528\u5230\u5176\u4ed6\u5305\uff0c\u53ef\u8bbe\u7f6eextraPackage\uff0c\u6ce8\u610fextraPackage\u4e0d\u652f\u6301\u7b2c\u4e09\u65b9jar\u5305\u3002 groovy code \u4e2d\uff0c\u8fd4\u56de\u66f4\u65b0\u8fc7\u7684 Record \uff08\u6bd4\u5982record.setColumn(columnIndex, new StringColumn(newValue));\uff09\uff0c\u6216\u8005null\u3002\u8fd4\u56denull\u8868\u793a\u8fc7\u6ee4\u6b64\u884c\u3002 \u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u9759\u6001\u7684Util\u65b9\u5f0f\uff08GroovyTransformerStaticUtil) \u4e3e\u4f8b: groovy \u5b9e\u73b0\u7684 subStr String code = \"Column column = record.getColumn(1);\\n\" + \" String oriValue = column.asString();\\n\" + \" String newValue = oriValue.substring(0, 3);\\n\" + \" record.setColumn(1, new StringColumn(newValue));\\n\" + \" return record;\" ; dx_groovy ( record ); groovy \u5b9e\u73b0\u7684Replace String code2 = \"Column column = record.getColumn(1);\\n\" + \" String oriValue = column.asString();\\n\" + \" String newValue = \\\"****\\\" + oriValue.substring(3, oriValue.length());\\n\" + \" record.setColumn(1, new StringColumn(newValue));\\n\" + \" return record;\" ; groovy \u5b9e\u73b0\u7684Pad String code3 = \"Column column = record.getColumn(1);\\n\" + \" String oriValue = column.asString();\\n\" + \" String padString = \\\"12345\\\";\\n\" + \" String finalPad = \\\"\\\";\\n\" + \" int NeedLength = 8 - oriValue.length();\\n\" + \" while (NeedLength > 0) {\\n\" + \"\\n\" + \" if (NeedLength >= padString.length()) {\\n\" + \" finalPad += padString;\\n\" + \" NeedLength -= padString.length();\\n\" + \" } else {\\n\" + \" finalPad += padString.substring(0, NeedLength);\\n\" + \" NeedLength = 0;\\n\" + \" }\\n\" + \" }\\n\" + \" String newValue= finalPad + oriValue;\\n\" + \" record.setColumn(1, new StringColumn(newValue));\\n\" + \" return record;\" ; Job\u5b9a\u4e49 \u00b6 \u672c\u4f8b\u4e2d\uff0c\u914d\u7f6e4\u4e2aUDF\u3002 { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"My name is xxxx\" , \"type\" : \"string\" }, { \"value\" : \"password is Passw0rd\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 00:00:00\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" }, { \"random\" : \"0,10\" , \"type\" : \"long\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true , \"encoding\" : \"UTF-8\" } }, \"transformer\" : [ { \"name\" : \"dx_replace\" , \"parameter\" : { \"columnIndex\" : 0 , \"paras\" : [ \"11\" , \"6\" , \"wgzhao\" ] } }, { \"name\" : \"dx_substr\" , \"parameter\" : { \"columnIndex\" : 1 , \"paras\" : [ \"0\" , \"12\" ] } }, { \"name\" : \"dx_map\" , \"parameter\" : { \"columnIndex\" : 2 , \"paras\" : [ \"^\" , \"2\" ] } }, { \"name\" : \"dx_filter\" , \"parameter\" : { \"columnIndex\" : 6 , \"paras\" : [ \"<\" , \"5\" ] } } ] } } } \u81ea\u5b9a\u4e49\u51fd\u6570 \u00b6 \u5982\u679c\u81ea\u5e26\u7684\u51fd\u6570\u4e0d\u6ee1\u8db3\u6570\u636e\u8f6c\u6362\u8981\u6c42\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 transformer \u7f16\u5199\u6ee1\u8db3 groovy \u89c4\u8303\u8981\u6c42\u7684\u4ee3\u7801\uff0c\u4e0b\u9762\u7ed9\u51fa\u4e00\u4e2a\u5b8c\u6574\u7684\u4f8b\u5b50 \u4e0a\u8ff0 transformer \u4ee3\u7801\u9488\u5bf9\u6bcf\u6761\u8bb0\u5f55\u7684\u524d\u9762\u4e24\u4e2a\u5b57\u6bb5\u505a\u4e86\u4fee\u6539\uff0c\u5bf9\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u7684\u5b57\u7b26\u4e32\uff0c\u5728\u5b57\u7b26\u4e32\u524d\u9762\u589e\u52a0 Header_ \u5b57\u7b26\uff1b \u7b2c\u4e8c\u4e2a\u6574\u6570\u5b57\u6bb5\u503c\u8fdb\u884c\u500d\u589e\u5904\u7406\u3002\u6700\u540e\u6267\u884c\u7684\u7ed3\u679c\u5982\u4e0b\uff1a $ bin/addax.sh job/transformer_demo.json ___ _ _ / _ \\ | | | | / /_ \\ \\ __ | | __ | | __ ___ __ | _ | / _ ` | / _ ` | / _ ` \\ \\/ / | | | | ( _ | | ( _ | | ( _ | | > < \\_ | | _/ \\_ _,_ | \\_ _,_ | \\_ _,_/_/ \\_\\ :: Addax version :: ( v4.0.2-SNAPSHOT ) 2021 -08-04 15 :45:56.421 [ main ] INFO VMInfo - VMInfo# operatingSystem class = > com.sun.management.internal.OperatingSystemImpl 2021 -08-04 15 :45:56.443 [ main ] INFO Engine - ..... 2021 -08-04 15 :45:56.458 [ main ] INFO PerfTrace - PerfTrace traceId = job_-1, isEnable = false, priority = 0 2021 -08-04 15 :45:56.459 [ main ] INFO JobContainer - Addax jobContainer starts job. 2021 -08-04 15 :45:56.460 [ main ] INFO JobContainer - Set jobId = 0 2021 -08-04 15 :45:56.470 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do prepare work . 2021 -08-04 15 :45:56.471 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do prepare work . 2021 -08-04 15 :45:56.471 [ job-0 ] INFO JobContainer - Job set Channel-Number to 1 channels. 2021 -08-04 15 :45:56.472 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] splits to [ 1 ] tasks. 2021 -08-04 15 :45:56.472 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] splits to [ 1 ] tasks. 2021 -08-04 15 :45:56.498 [ job-0 ] INFO JobContainer - Scheduler starts [ 1 ] taskGroups. 2021 -08-04 15 :45:56.505 [ taskGroup-0 ] INFO TaskGroupContainer - taskGroupId =[ 0 ] start [ 1 ] channels for [ 1 ] tasks. 2021 -08-04 15 :45:56.517 [ taskGroup-0 ] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021 -08-04 15 :45:56.517 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 2021 -08-04 15 :45:56.520 [ taskGroup-0 ] INFO TransformerUtil - user config transformers [[ dx_groovy ]] , loading... 2021 -08-04 15 :45:56.531 [ taskGroup-0 ] INFO TransformerUtil - 1 of transformer init success. name = dx_groovy, isNative = true parameter = { \"code\" : \"record.setColumn(0, new StringColumn('Header_' + record.getColumn(0).asString()));record.setColumn(1, new LongColumn(record.getColumn(1).asLong() * 2));return record;\" } Header_Addax 2 1989 -06-04 00 :00:01 true test Header_Addax 4 1989 -06-03 00 :00:01 true test Header_Addax 6 1989 -06-02 00 :00:01 true test Header_Addax 8 1989 -06-01 00 :00:01 true test Header_Addax 10 1989 -05-31 00 :00:01 true test Header_Addax 12 1989 -05-30 00 :00:01 true test Header_Addax 14 1989 -05-29 00 :00:01 true test Header_Addax 16 1989 -05-28 00 :00:01 true test Header_Addax 18 1989 -05-27 00 :00:01 true test Header_Addax 20 1989 -05-26 00 :00:01 true test 2021 -08-04 15 :45:59.515 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -08-04 15 :45:59.517 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do post work. 2021 -08-04 15 :45:59.518 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do post work. 2021 -08-04 15 :45:59.521 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -08-04 15 :45:59.524 [ job-0 ] INFO StandAloneJobContainerCommunicator - Total 10 records, 330 bytes | Speed 110B/s, 3 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0 .000s | All Task WaitReaderTime 0 .000s | Transformer Success 10 records | Transformer Error 0 records | Transformer Filter 0 records | Transformer usedTime 0 .383s | Percentage 100 .00% 2021 -08-04 15 :45:59.527 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -08-04 15 :45:56 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -08-04 15 :45:59 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 110B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 3rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 10 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 2021 -08-04 15 :45:59.528 [ job-0 ] INFO JobContainer - Transformer\u6210\u529f\u8bb0\u5f55\u603b\u6570 : 10 Transformer\u5931\u8d25\u8bb0\u5f55\u603b\u6570 : 0 Transformer\u8fc7\u6ee4\u8bb0\u5f55\u603b\u6570 : 0 \u8ba1\u91cf\u548c\u810f\u6570\u636e \u00b6 Transform\u8fc7\u7a0b\u6d89\u53ca\u5230\u6570\u636e\u7684\u8f6c\u6362\uff0c\u53ef\u80fd\u9020\u6210\u6570\u636e\u7684\u589e\u52a0\u6216\u51cf\u5c11\uff0c\u56e0\u6b64\u66f4\u52a0\u9700\u8981\u7cbe\u786e\u5ea6\u91cf\uff0c\u5305\u62ec\uff1a Transform\u7684\u5165\u53c2Record\u6761\u6570\u3001\u5b57\u8282\u6570\u3002 Transform\u7684\u51fa\u53c2Record\u6761\u6570\u3001\u5b57\u8282\u6570\u3002 Transform\u7684\u810f\u6570\u636eRecord\u6761\u6570\u3001\u5b57\u8282\u6570\u3002 \u5982\u679c\u662f\u591a\u4e2aTransform\uff0c\u67d0\u4e00\u4e2a\u53d1\u751f\u810f\u6570\u636e\uff0c\u5c06\u4e0d\u4f1a\u518d\u8fdb\u884c\u540e\u9762\u7684transform\uff0c\u76f4\u63a5\u7edf\u8ba1\u4e3a\u810f\u6570\u636e\u3002 \u76ee\u524d\u53ea\u63d0\u4f9b\u4e86\u6240\u6709Transform\u7684\u8ba1\u91cf\uff08\u6210\u529f\uff0c\u5931\u8d25\uff0c\u8fc7\u6ee4\u7684count\uff0c\u4ee5\u53catransform\u7684\u6d88\u8017\u65f6\u95f4\uff09\u3002 \u6d89\u53ca\u5230\u8fd0\u884c\u8fc7\u7a0b\u7684\u8ba1\u91cf\u6570\u636e\u5c55\u73b0\u5b9a\u4e49\u5982\u4e0b\uff1a Total 1000000 records, 22000000 bytes | Transform 100000 records ( in ) , 10000 records ( out ) | Speed 2 .10MB/s, 100000 records/s | Error 0 records, 0 bytes | Percentage 100 .00% \u6ce8\u610f\uff0c\u8fd9\u91cc\u4e3b\u8981\u8bb0\u5f55\u8f6c\u6362\u7684\u8f93\u5165\u8f93\u51fa\uff0c\u9700\u8981\u68c0\u6d4b\u6570\u636e\u8f93\u5165\u8f93\u51fa\u7684\u8bb0\u5f55\u6570\u91cf\u53d8\u5316\u3002 \u6d89\u53ca\u5230\u6700\u7ec8\u4f5c\u4e1a\u7684\u8ba1\u91cf\u6570\u636e\u5c55\u73b0\u5b9a\u4e49\u5982\u4e0b\uff1a \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2015 -03-10 17 :34:21 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2015 -03-10 17 :34:31 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 10s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 2 .10MB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 100000rec/s \u8f6c\u6362\u8f93\u5165\u603b\u6570 : 1000000 \u8f6c\u6362\u8f93\u51fa\u603b\u6570 : 1000000 \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 1000000 \u540c\u6b65\u5931\u8d25\u603b\u6570 : 0 \u6ce8\u610f\uff0c\u8fd9\u91cc\u4e3b\u8981\u8bb0\u5f55\u8f6c\u6362\u7684\u8f93\u5165\u8f93\u51fa\uff0c\u9700\u8981\u68c0\u6d4b\u6570\u636e\u8f93\u5165\u8f93\u51fa\u7684\u8bb0\u5f55\u6570\u91cf\u53d8\u5316\u3002","title":"\u6570\u636e\u8f6c\u6362"},{"location":"transformer/#_1","text":"","title":"\u6570\u636e\u8f6c\u6362"},{"location":"transformer/#transformer","text":"\u5728\u6570\u636e\u540c\u6b65\u3001\u4f20\u8f93\u8fc7\u7a0b\u4e2d\uff0c\u5b58\u5728\u7528\u6237\u5bf9\u4e8e\u6570\u636e\u4f20\u8f93\u8fdb\u884c\u7279\u6b8a\u5b9a\u5236\u5316\u7684\u9700\u6c42\u573a\u666f\uff0c\u5305\u62ec\u88c1\u526a\u5217\u3001\u8f6c\u6362\u5217\u7b49\u5de5\u4f5c\uff0c\u53ef\u4ee5\u501f\u52a9ETL\u7684T\u8fc7\u7a0b\u5b9e\u73b0(Transformer)\u3002Addax\u5305\u542b\u4e86\u5b8c\u6210\u7684E(Extract)\u3001T(Transformer)\u3001L(Load)\u652f\u6301\u3002","title":"Transformer \u5b9a\u4e49"},{"location":"transformer/#_2","text":"","title":"\u8fd0\u884c\u6a21\u578b"},{"location":"transformer/#udf","text":"","title":"UDF \u51fd\u6570"},{"location":"transformer/#dx_substr","text":"dx_substr(idx, pos, length) -> str \u53c2\u6570 idx : \u5b57\u6bb5\u7f16\u53f7\uff0c\u5bf9\u5e94record\u4e2d\u7b2c\u51e0\u4e2a\u5b57\u6bb5 pos : \u5b57\u6bb5\u503c\u7684\u5f00\u59cb\u4f4d\u7f6e length : \u76ee\u6807\u5b57\u6bb5\u957f\u5ea6 \u8fd4\u56de\uff1a \u4ece\u5b57\u7b26\u4e32\u7684\u6307\u5b9a\u4f4d\u7f6e\uff08\u5305\u542b\uff09\u622a\u53d6\u6307\u5b9a\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002\u5982\u679c\u5f00\u59cb\u4f4d\u7f6e\u975e\u6cd5\u629b\u51fa\u5f02\u5e38\u3002\u5982\u679c\u5b57\u6bb5\u4e3a\u7a7a\u503c\uff0c\u76f4\u63a5\u8fd4\u56de\uff08\u5373\u4e0d\u53c2\u4e0e\u672ctransformer\uff09","title":"dx_substr"},{"location":"transformer/#dx_pad","text":"dx_pad(idx, flag, length, chr) \u53c2\u6570 idx : \u5b57\u6bb5\u7f16\u53f7\uff0c\u5bf9\u5e94record\u4e2d\u7b2c\u51e0\u4e2a\u5b57\u6bb5 flag : \"l\",\"r\", \u6307\u793a\u662f\u5728\u5934\u8fdb\u884c\u586b\u5145\uff0c\u8fd8\u662f\u5c3e\u8fdb\u884c\u586b\u5145 length : \u76ee\u6807\u5b57\u6bb5\u957f\u5ea6 chr : \u9700\u8981\u586b\u5145\u7684\u5b57\u7b26 \u8fd4\u56de\uff1a \u5982\u679c\u6e90\u5b57\u7b26\u4e32\u957f\u5ea6\u5c0f\u4e8e\u76ee\u6807\u5b57\u6bb5\u957f\u5ea6\uff0c\u6309\u7167\u4f4d\u7f6e\u6dfb\u52a0pad\u5b57\u7b26\u540e\u8fd4\u56de\u3002\u5982\u679c\u957f\u4e8e\uff0c\u76f4\u63a5\u622a\u65ad\uff08\u90fd\u622a\u53f3\u8fb9\uff09\u3002\u5982\u679c\u5b57\u6bb5\u4e3a\u7a7a\u503c\uff0c\u8f6c\u6362\u4e3a\u7a7a\u5b57\u7b26\u4e32\u8fdb\u884cpad\uff0c\u5373\u6700\u540e\u7684\u5b57\u7b26\u4e32\u5168\u662f\u9700\u8981pad\u7684\u5b57\u7b26 \u4e3e\u4f8b\uff1a dx_pad(1,\"l\",\"4\",\"A\") : \u5982\u679c column 1 \u7684\u503c\u4e3a xyz=> Axyz \uff0c \u5219\u8f6c\u6362\u540e\u7684\u503c\u4e3a xyzzzzz => xyzz dx_pad(1,\"r\",\"4\",\"A\") , \u5982\u679c column 1 \u7684\u503c\u4e3a xyz=> xyzA \uff0c \u503c\u4e3a xyzzzzz => xyzz","title":"dx_pad"},{"location":"transformer/#dx_replace","text":"dx_replace(idx, pos, length, str) -> str \u53c2\u6570 idx : \u5b57\u6bb5\u7f16\u53f7\uff0c\u5bf9\u5e94record\u4e2d\u7b2c\u51e0\u4e2a\u5b57\u6bb5 pos : \u5b57\u6bb5\u503c\u7684\u5f00\u59cb\u4f4d\u7f6e length : \u9700\u8981\u66ff\u6362\u7684\u5b57\u6bb5\u957f\u5ea6 str : \u8981\u66ff\u6362\u7684\u5b57\u7b26\u4e32 \u8fd4\u56de\uff1a \u4ece\u5b57\u7b26\u4e32\u7684\u6307\u5b9a\u4f4d\u7f6e\uff08\u5305\u542b\uff09\u66ff\u6362\u6307\u5b9a\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002\u5982\u679c\u5f00\u59cb\u4f4d\u7f6e\u975e\u6cd5\u629b\u51fa\u5f02\u5e38\u3002\u5982\u679c\u5b57\u6bb5\u4e3a\u7a7a\u503c\uff0c\u76f4\u63a5\u8fd4\u56de\uff08\u5373\u4e0d\u53c2\u4e0e\u672ctransformer\uff09 \u4e3e\u4f8b\uff1a dx_replace(1,\"2\",\"4\",\"****\") : \u5982\u679c column 1 \u7684\u503c\u4e3a addaxTest , \u5219\u8f6c\u6362\u4e3a da****est dx_replace(1,\"5\",\"10\",\"****\") \u5982\u679c column 1 \u7684\u503c\u4e3a addaxTest \u5219\u8f6c\u6362\u4e3a data****","title":"dx_replace"},{"location":"transformer/#dx_filter","text":"dx_filter(idx, operator, expr) -> str \u53c2\u6570\uff1a idx : \u5b57\u6bb5\u7f16\u53f7\uff0c\u5bf9\u5e94record\u4e2d\u7b2c\u51e0\u4e2a\u5b57\u6bb5 operator : \u8fd0\u7b97\u7b26, \u652f\u6301 like , not like , > , = , < , >= , != , <= expr : \u6b63\u5219\u8868\u8fbe\u5f0f\uff08java\u6b63\u5219\u8868\u8fbe\u5f0f\uff09\u3001\u503c str : \u8981\u66ff\u6362\u7684\u5b57\u7b26\u4e32 \u8fd4\u56de\uff1a \u5982\u679c\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u8fd4\u56deNull\uff0c\u8868\u793a\u8fc7\u6ee4\u8be5\u884c\u3002\u4e0d\u5339\u914d\u8868\u8fbe\u5f0f\u65f6\uff0c\u8868\u793a\u4fdd\u7559\u8be5\u884c\u3002\uff08\u6ce8\u610f\u662f\u8be5\u884c\uff09\u3002\u5bf9\u4e8e > , = , < \u90fd\u662f\u5bf9\u5b57\u6bb5\u76f4\u63a5compare\u7684\u7ed3\u679c. like \uff0c not like \u662f\u5c06\u5b57\u6bb5\u8f6c\u6362\u6210\u5b57\u7b26\u7c7b\u578b\uff0c\u7136\u540e\u548c\u76ee\u6807\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5168\u5339\u914d\u3002 > , = , < , >= , != , <= ,\u6309\u7167\u7c7b\u578b\u8fdb\u884c\u6bd4\u8f83, \u6570\u503c\u7c7b\u578b\u6309\u5927\u5c0f\u6bd4\u8f83,\u5b57\u7b26\u53ca\u5e03\u5c14\u7c7b\u578b\u6309\u7167\u5b57\u5178\u5e8f\u6bd4\u8f83 \u5982\u679c\u76ee\u6807\u5b57\u6bb5\u4e3a\u7a7a\uff08null\uff09\uff0c\u5bf9\u4e8e = null \u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u5c06\u6ee1\u8db3\u6761\u4ef6\uff0c\u88ab\u8fc7\u6ee4\u3002 \uff01=null \u7684\u8fc7\u6ee4\u6761\u4ef6\uff0cnull\u4e0d\u6ee1\u8db3\u8fc7\u6ee4\u6761\u4ef6\uff0c\u4e0d\u88ab\u8fc7\u6ee4\u3002 like \uff0c\u5b57\u6bb5\u4e3anull\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u4e0d\u88ab\u8fc7\u6ee4\uff0c\u548c not like \uff0c\u5b57\u6bb5\u4e3anull\u6ee1\u8db3\u6761\u4ef6\uff0c\u88ab\u8fc7\u6ee4\u3002 \u4e3e\u4f8b dx_filter(1,\"like\",\"dataTest\") dx_filter(1,\">=\",\"10\") \u5173\u8054filter\u6682\u4e0d\u652f\u6301\uff0c\u5373\u591a\u4e2a\u5b57\u6bb5\u7684\u8054\u5408\u5224\u65ad\uff0c\u51fd\u53c2\u592a\u8fc7\u590d\u6742\uff0c\u7528\u6237\u96be\u4ee5\u4f7f\u7528\u3002","title":"dx_filter"},{"location":"transformer/#dx_groovy","text":"dx_groovy(code, package) -> record \u53c2\u6570 coee : \u7b26\u5408 groovy \u7f16\u7801\u8981\u6c42\u7684\u4ee3\u7801 package : extraPackage, \u5217\u8868\u6216\u8005\u4e3a\u7a7a \u8fd4\u56de Record \u6570\u636e\u7c7b\u578b \u6ce8\u610f\uff1a dx_groovy \u53ea\u80fd\u8c03\u7528\u4e00\u6b21\u3002\u4e0d\u80fd\u591a\u6b21\u8c03\u7528\u3002 groovy code \u4e2d\u652f\u6301 java.lang , java.util \u7684\u5305\uff0c\u53ef\u76f4\u63a5\u5f15\u7528\u7684\u5bf9\u8c61\u6709 record \uff0c\u4ee5\u53caelement\u4e0b\u7684\u5404\u79cdcolumn\uff08BoolColumn.class,BytesColumn.class,DateColumn.class,DoubleColumn.class,LongColumn.class,StringColumn.class\uff09\u3002 \u4e0d\u652f\u6301\u5176\u4ed6\u5305\uff0c\u5982\u679c\u7528\u6237\u6709\u9700\u8981\u7528\u5230\u5176\u4ed6\u5305\uff0c\u53ef\u8bbe\u7f6eextraPackage\uff0c\u6ce8\u610fextraPackage\u4e0d\u652f\u6301\u7b2c\u4e09\u65b9jar\u5305\u3002 groovy code \u4e2d\uff0c\u8fd4\u56de\u66f4\u65b0\u8fc7\u7684 Record \uff08\u6bd4\u5982record.setColumn(columnIndex, new StringColumn(newValue));\uff09\uff0c\u6216\u8005null\u3002\u8fd4\u56denull\u8868\u793a\u8fc7\u6ee4\u6b64\u884c\u3002 \u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u9759\u6001\u7684Util\u65b9\u5f0f\uff08GroovyTransformerStaticUtil) \u4e3e\u4f8b: groovy \u5b9e\u73b0\u7684 subStr String code = \"Column column = record.getColumn(1);\\n\" + \" String oriValue = column.asString();\\n\" + \" String newValue = oriValue.substring(0, 3);\\n\" + \" record.setColumn(1, new StringColumn(newValue));\\n\" + \" return record;\" ; dx_groovy ( record ); groovy \u5b9e\u73b0\u7684Replace String code2 = \"Column column = record.getColumn(1);\\n\" + \" String oriValue = column.asString();\\n\" + \" String newValue = \\\"****\\\" + oriValue.substring(3, oriValue.length());\\n\" + \" record.setColumn(1, new StringColumn(newValue));\\n\" + \" return record;\" ; groovy \u5b9e\u73b0\u7684Pad String code3 = \"Column column = record.getColumn(1);\\n\" + \" String oriValue = column.asString();\\n\" + \" String padString = \\\"12345\\\";\\n\" + \" String finalPad = \\\"\\\";\\n\" + \" int NeedLength = 8 - oriValue.length();\\n\" + \" while (NeedLength > 0) {\\n\" + \"\\n\" + \" if (NeedLength >= padString.length()) {\\n\" + \" finalPad += padString;\\n\" + \" NeedLength -= padString.length();\\n\" + \" } else {\\n\" + \" finalPad += padString.substring(0, NeedLength);\\n\" + \" NeedLength = 0;\\n\" + \" }\\n\" + \" }\\n\" + \" String newValue= finalPad + oriValue;\\n\" + \" record.setColumn(1, new StringColumn(newValue));\\n\" + \" return record;\" ;","title":"dx_groovy"},{"location":"transformer/#job","text":"\u672c\u4f8b\u4e2d\uff0c\u914d\u7f6e4\u4e2aUDF\u3002 { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"My name is xxxx\" , \"type\" : \"string\" }, { \"value\" : \"password is Passw0rd\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 00:00:00\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" }, { \"random\" : \"0,10\" , \"type\" : \"long\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true , \"encoding\" : \"UTF-8\" } }, \"transformer\" : [ { \"name\" : \"dx_replace\" , \"parameter\" : { \"columnIndex\" : 0 , \"paras\" : [ \"11\" , \"6\" , \"wgzhao\" ] } }, { \"name\" : \"dx_substr\" , \"parameter\" : { \"columnIndex\" : 1 , \"paras\" : [ \"0\" , \"12\" ] } }, { \"name\" : \"dx_map\" , \"parameter\" : { \"columnIndex\" : 2 , \"paras\" : [ \"^\" , \"2\" ] } }, { \"name\" : \"dx_filter\" , \"parameter\" : { \"columnIndex\" : 6 , \"paras\" : [ \"<\" , \"5\" ] } } ] } } }","title":"Job\u5b9a\u4e49"},{"location":"transformer/#_3","text":"\u5982\u679c\u81ea\u5e26\u7684\u51fd\u6570\u4e0d\u6ee1\u8db3\u6570\u636e\u8f6c\u6362\u8981\u6c42\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 transformer \u7f16\u5199\u6ee1\u8db3 groovy \u89c4\u8303\u8981\u6c42\u7684\u4ee3\u7801\uff0c\u4e0b\u9762\u7ed9\u51fa\u4e00\u4e2a\u5b8c\u6574\u7684\u4f8b\u5b50 \u4e0a\u8ff0 transformer \u4ee3\u7801\u9488\u5bf9\u6bcf\u6761\u8bb0\u5f55\u7684\u524d\u9762\u4e24\u4e2a\u5b57\u6bb5\u505a\u4e86\u4fee\u6539\uff0c\u5bf9\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u7684\u5b57\u7b26\u4e32\uff0c\u5728\u5b57\u7b26\u4e32\u524d\u9762\u589e\u52a0 Header_ \u5b57\u7b26\uff1b \u7b2c\u4e8c\u4e2a\u6574\u6570\u5b57\u6bb5\u503c\u8fdb\u884c\u500d\u589e\u5904\u7406\u3002\u6700\u540e\u6267\u884c\u7684\u7ed3\u679c\u5982\u4e0b\uff1a $ bin/addax.sh job/transformer_demo.json ___ _ _ / _ \\ | | | | / /_ \\ \\ __ | | __ | | __ ___ __ | _ | / _ ` | / _ ` | / _ ` \\ \\/ / | | | | ( _ | | ( _ | | ( _ | | > < \\_ | | _/ \\_ _,_ | \\_ _,_ | \\_ _,_/_/ \\_\\ :: Addax version :: ( v4.0.2-SNAPSHOT ) 2021 -08-04 15 :45:56.421 [ main ] INFO VMInfo - VMInfo# operatingSystem class = > com.sun.management.internal.OperatingSystemImpl 2021 -08-04 15 :45:56.443 [ main ] INFO Engine - ..... 2021 -08-04 15 :45:56.458 [ main ] INFO PerfTrace - PerfTrace traceId = job_-1, isEnable = false, priority = 0 2021 -08-04 15 :45:56.459 [ main ] INFO JobContainer - Addax jobContainer starts job. 2021 -08-04 15 :45:56.460 [ main ] INFO JobContainer - Set jobId = 0 2021 -08-04 15 :45:56.470 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do prepare work . 2021 -08-04 15 :45:56.471 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do prepare work . 2021 -08-04 15 :45:56.471 [ job-0 ] INFO JobContainer - Job set Channel-Number to 1 channels. 2021 -08-04 15 :45:56.472 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] splits to [ 1 ] tasks. 2021 -08-04 15 :45:56.472 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] splits to [ 1 ] tasks. 2021 -08-04 15 :45:56.498 [ job-0 ] INFO JobContainer - Scheduler starts [ 1 ] taskGroups. 2021 -08-04 15 :45:56.505 [ taskGroup-0 ] INFO TaskGroupContainer - taskGroupId =[ 0 ] start [ 1 ] channels for [ 1 ] tasks. 2021 -08-04 15 :45:56.517 [ taskGroup-0 ] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021 -08-04 15 :45:56.517 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 2021 -08-04 15 :45:56.520 [ taskGroup-0 ] INFO TransformerUtil - user config transformers [[ dx_groovy ]] , loading... 2021 -08-04 15 :45:56.531 [ taskGroup-0 ] INFO TransformerUtil - 1 of transformer init success. name = dx_groovy, isNative = true parameter = { \"code\" : \"record.setColumn(0, new StringColumn('Header_' + record.getColumn(0).asString()));record.setColumn(1, new LongColumn(record.getColumn(1).asLong() * 2));return record;\" } Header_Addax 2 1989 -06-04 00 :00:01 true test Header_Addax 4 1989 -06-03 00 :00:01 true test Header_Addax 6 1989 -06-02 00 :00:01 true test Header_Addax 8 1989 -06-01 00 :00:01 true test Header_Addax 10 1989 -05-31 00 :00:01 true test Header_Addax 12 1989 -05-30 00 :00:01 true test Header_Addax 14 1989 -05-29 00 :00:01 true test Header_Addax 16 1989 -05-28 00 :00:01 true test Header_Addax 18 1989 -05-27 00 :00:01 true test Header_Addax 20 1989 -05-26 00 :00:01 true test 2021 -08-04 15 :45:59.515 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -08-04 15 :45:59.517 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do post work. 2021 -08-04 15 :45:59.518 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do post work. 2021 -08-04 15 :45:59.521 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -08-04 15 :45:59.524 [ job-0 ] INFO StandAloneJobContainerCommunicator - Total 10 records, 330 bytes | Speed 110B/s, 3 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0 .000s | All Task WaitReaderTime 0 .000s | Transformer Success 10 records | Transformer Error 0 records | Transformer Filter 0 records | Transformer usedTime 0 .383s | Percentage 100 .00% 2021 -08-04 15 :45:59.527 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -08-04 15 :45:56 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -08-04 15 :45:59 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 110B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 3rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 10 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 2021 -08-04 15 :45:59.528 [ job-0 ] INFO JobContainer - Transformer\u6210\u529f\u8bb0\u5f55\u603b\u6570 : 10 Transformer\u5931\u8d25\u8bb0\u5f55\u603b\u6570 : 0 Transformer\u8fc7\u6ee4\u8bb0\u5f55\u603b\u6570 : 0","title":"\u81ea\u5b9a\u4e49\u51fd\u6570"},{"location":"transformer/#_4","text":"Transform\u8fc7\u7a0b\u6d89\u53ca\u5230\u6570\u636e\u7684\u8f6c\u6362\uff0c\u53ef\u80fd\u9020\u6210\u6570\u636e\u7684\u589e\u52a0\u6216\u51cf\u5c11\uff0c\u56e0\u6b64\u66f4\u52a0\u9700\u8981\u7cbe\u786e\u5ea6\u91cf\uff0c\u5305\u62ec\uff1a Transform\u7684\u5165\u53c2Record\u6761\u6570\u3001\u5b57\u8282\u6570\u3002 Transform\u7684\u51fa\u53c2Record\u6761\u6570\u3001\u5b57\u8282\u6570\u3002 Transform\u7684\u810f\u6570\u636eRecord\u6761\u6570\u3001\u5b57\u8282\u6570\u3002 \u5982\u679c\u662f\u591a\u4e2aTransform\uff0c\u67d0\u4e00\u4e2a\u53d1\u751f\u810f\u6570\u636e\uff0c\u5c06\u4e0d\u4f1a\u518d\u8fdb\u884c\u540e\u9762\u7684transform\uff0c\u76f4\u63a5\u7edf\u8ba1\u4e3a\u810f\u6570\u636e\u3002 \u76ee\u524d\u53ea\u63d0\u4f9b\u4e86\u6240\u6709Transform\u7684\u8ba1\u91cf\uff08\u6210\u529f\uff0c\u5931\u8d25\uff0c\u8fc7\u6ee4\u7684count\uff0c\u4ee5\u53catransform\u7684\u6d88\u8017\u65f6\u95f4\uff09\u3002 \u6d89\u53ca\u5230\u8fd0\u884c\u8fc7\u7a0b\u7684\u8ba1\u91cf\u6570\u636e\u5c55\u73b0\u5b9a\u4e49\u5982\u4e0b\uff1a Total 1000000 records, 22000000 bytes | Transform 100000 records ( in ) , 10000 records ( out ) | Speed 2 .10MB/s, 100000 records/s | Error 0 records, 0 bytes | Percentage 100 .00% \u6ce8\u610f\uff0c\u8fd9\u91cc\u4e3b\u8981\u8bb0\u5f55\u8f6c\u6362\u7684\u8f93\u5165\u8f93\u51fa\uff0c\u9700\u8981\u68c0\u6d4b\u6570\u636e\u8f93\u5165\u8f93\u51fa\u7684\u8bb0\u5f55\u6570\u91cf\u53d8\u5316\u3002 \u6d89\u53ca\u5230\u6700\u7ec8\u4f5c\u4e1a\u7684\u8ba1\u91cf\u6570\u636e\u5c55\u73b0\u5b9a\u4e49\u5982\u4e0b\uff1a \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2015 -03-10 17 :34:21 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2015 -03-10 17 :34:31 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 10s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 2 .10MB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 100000rec/s \u8f6c\u6362\u8f93\u5165\u603b\u6570 : 1000000 \u8f6c\u6362\u8f93\u51fa\u603b\u6570 : 1000000 \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 1000000 \u540c\u6b65\u5931\u8d25\u603b\u6570 : 0 \u6ce8\u610f\uff0c\u8fd9\u91cc\u4e3b\u8981\u8bb0\u5f55\u8f6c\u6362\u7684\u8f93\u5165\u8f93\u51fa\uff0c\u9700\u8981\u68c0\u6d4b\u6570\u636e\u8f93\u5165\u8f93\u51fa\u7684\u8bb0\u5f55\u6570\u91cf\u53d8\u5316\u3002","title":"\u8ba1\u91cf\u548c\u810f\u6570\u636e"},{"location":"reader/cassandrareader/","text":"Cassandra Reader \u00b6 CassandraReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece Cassandra \u8bfb\u53d6\u6570\u636e\u3002 \u914d\u7f6e \u00b6 \u4e0b\u9762\u662f\u914d\u7f6e\u4e00\u4e2a\u4ece Cassandra \u8bfb\u53d6\u6570\u636e\u5230\u7ec8\u7aef\u7684\u4f8b\u5b50 job/cassandra2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"cassandrareader\" , \"parameter\" : { \"host\" : \"localhost\" , \"port\" : 9042 , \"useSSL\" : false , \"keyspace\" : \"test\" , \"table\" : \"addax_src\" , \"column\" : [ \"textCol\" , \"blobCol\" , \"writetime(blobCol)\" , \"boolCol\" , \"smallintCol\" , \"tinyintCol\" , \"intCol\" , \"bigintCol\" , \"varintCol\" , \"floatCol\" , \"doubleCol\" , \"decimalCol\" , \"dateCol\" , \"timeCol\" , \"timeStampCol\" , \"uuidCol\" , \"inetCol\" , \"durationCol\" , \"listCol\" , \"mapCol\" , \"setCol\" , \"tupleCol\" , \"udtCol\" ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 parameter \u914d\u7f6e\u9879\u652f\u6301\u4ee5\u4e0b\u914d\u7f6e \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 host \u662f \u65e0 Cassandra\u8fde\u63a5\u70b9\u7684\u57df\u540d\u6216ip\uff0c\u591a\u4e2anode\u4e4b\u95f4\u7528\u9017\u53f7\u5206\u9694 port \u662f 9042 Cassandra\u7aef\u53e3 username \u5426 \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 useSSL \u5426 false \u662f\u5426\u4f7f\u7528SSL\u8fde\u63a5 keyspace \u662f \u65e0 \u9700\u8981\u540c\u6b65\u7684\u8868\u6240\u5728\u7684keyspace table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u96c6\u5408,\u5176\u4e2d\u7684\u5143\u7d20\u53ef\u4ee5\u6307\u5b9a\u5217\u7684\u540d\u79f0\u6216 writetime(column_name) \uff0c\u540e\u4e00\u79cd\u5f62\u5f0f\u4f1a\u8bfb\u53d6 column_name \u5217\u7684\u65f6\u95f4\u6233\u800c\u4e0d\u662f\u6570\u636e where \u5426 \u65e0 \u6570\u636e\u7b5b\u9009\u6761\u4ef6\u7684 cql \u8868\u8fbe\u5f0f allowFiltering \u5426 \u65e0 \u662f\u5426\u5728\u670d\u52a1\u7aef\u8fc7\u6ee4\u6570\u636e\uff0c\u8be6\u7ec6\u63cf\u8ff0\u53c2\u8003\u5b98\u65b9\u6587\u6863\u7684 \u76f8\u5173\u63cf\u8ff0 consistancyLevel \u5426 LOCAL_QUORUM \u6570\u636e\u4e00\u81f4\u6027\u7ea7\u522b, \u53ef\u9009 ONE, QUORUM, LOCAL_QUORUM, EACH_QUORUM, ALL, ANY, TWO, THREE, LOCAL_ONE \u652f\u6301\u7684\u6570\u636e\u7c7b\u578b \u00b6 \u76ee\u524d\u652f\u6301\u9664 counter \u548c Custom \u7c7b\u578b\u4e4b\u5916\u7684\u6240\u6709\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51fa CassandraReader \u9488\u5bf9 Cassandra \u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b Cassandra \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint,varint,bigint,time Double float, double, decimal String ascii,varchar, text,uuid,timeuuid,duration,list,map,set,tuple,udt,inet Date date, timestamp Boolean bool Bytes blob","title":"Cassandra Reader"},{"location":"reader/cassandrareader/#cassandra-reader","text":"CassandraReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece Cassandra \u8bfb\u53d6\u6570\u636e\u3002","title":"Cassandra Reader"},{"location":"reader/cassandrareader/#_1","text":"\u4e0b\u9762\u662f\u914d\u7f6e\u4e00\u4e2a\u4ece Cassandra \u8bfb\u53d6\u6570\u636e\u5230\u7ec8\u7aef\u7684\u4f8b\u5b50 job/cassandra2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"cassandrareader\" , \"parameter\" : { \"host\" : \"localhost\" , \"port\" : 9042 , \"useSSL\" : false , \"keyspace\" : \"test\" , \"table\" : \"addax_src\" , \"column\" : [ \"textCol\" , \"blobCol\" , \"writetime(blobCol)\" , \"boolCol\" , \"smallintCol\" , \"tinyintCol\" , \"intCol\" , \"bigintCol\" , \"varintCol\" , \"floatCol\" , \"doubleCol\" , \"decimalCol\" , \"dateCol\" , \"timeCol\" , \"timeStampCol\" , \"uuidCol\" , \"inetCol\" , \"durationCol\" , \"listCol\" , \"mapCol\" , \"setCol\" , \"tupleCol\" , \"udtCol\" ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } }","title":"\u914d\u7f6e"},{"location":"reader/cassandrareader/#_2","text":"parameter \u914d\u7f6e\u9879\u652f\u6301\u4ee5\u4e0b\u914d\u7f6e \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 host \u662f \u65e0 Cassandra\u8fde\u63a5\u70b9\u7684\u57df\u540d\u6216ip\uff0c\u591a\u4e2anode\u4e4b\u95f4\u7528\u9017\u53f7\u5206\u9694 port \u662f 9042 Cassandra\u7aef\u53e3 username \u5426 \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 useSSL \u5426 false \u662f\u5426\u4f7f\u7528SSL\u8fde\u63a5 keyspace \u662f \u65e0 \u9700\u8981\u540c\u6b65\u7684\u8868\u6240\u5728\u7684keyspace table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u96c6\u5408,\u5176\u4e2d\u7684\u5143\u7d20\u53ef\u4ee5\u6307\u5b9a\u5217\u7684\u540d\u79f0\u6216 writetime(column_name) \uff0c\u540e\u4e00\u79cd\u5f62\u5f0f\u4f1a\u8bfb\u53d6 column_name \u5217\u7684\u65f6\u95f4\u6233\u800c\u4e0d\u662f\u6570\u636e where \u5426 \u65e0 \u6570\u636e\u7b5b\u9009\u6761\u4ef6\u7684 cql \u8868\u8fbe\u5f0f allowFiltering \u5426 \u65e0 \u662f\u5426\u5728\u670d\u52a1\u7aef\u8fc7\u6ee4\u6570\u636e\uff0c\u8be6\u7ec6\u63cf\u8ff0\u53c2\u8003\u5b98\u65b9\u6587\u6863\u7684 \u76f8\u5173\u63cf\u8ff0 consistancyLevel \u5426 LOCAL_QUORUM \u6570\u636e\u4e00\u81f4\u6027\u7ea7\u522b, \u53ef\u9009 ONE, QUORUM, LOCAL_QUORUM, EACH_QUORUM, ALL, ANY, TWO, THREE, LOCAL_ONE","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/cassandrareader/#_3","text":"\u76ee\u524d\u652f\u6301\u9664 counter \u548c Custom \u7c7b\u578b\u4e4b\u5916\u7684\u6240\u6709\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51fa CassandraReader \u9488\u5bf9 Cassandra \u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b Cassandra \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint,varint,bigint,time Double float, double, decimal String ascii,varchar, text,uuid,timeuuid,duration,list,map,set,tuple,udt,inet Date date, timestamp Boolean bool Bytes blob","title":"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b"},{"location":"reader/clickhousereader/","text":"ClickHouse Reader \u00b6 ClickHouseReader \u63d2\u4ef6\u652f\u6301\u4ece ClickHouse \u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\u3002 \u793a\u4f8b \u00b6 \u8868\u7ed3\u6784\u53ca\u6570\u636e\u4fe1\u606f \u00b6 \u5047\u5b9a\u9700\u8981\u7684\u8bfb\u53d6\u7684\u8868\u7684\u7ed3\u6784\u4ee5\u53ca\u6570\u636e\u5982\u4e0b\uff1a CREATE TABLE ck_addax ( c_int8 Int8 , c_int16 Int16 , c_int32 Int32 , c_int64 Int64 , c_uint8 UInt8 , c_uint16 UInt16 , c_uint32 UInt32 , c_uint64 UInt64 , c_float32 Float32 , c_float64 Float64 , c_decimal Decimal ( 38 , 10 ), c_string String , c_fixstr FixedString ( 36 ), c_uuid UUID , c_date Date , c_datetime DateTime ( 'Asia/Chongqing' ), c_datetime64 DateTime64 ( 3 , 'Asia/Chongqing' ), c_enum Enum ( 'hello' = 1 , 'world' = 2 ) ) ENGINE = MergeTree () ORDER BY ( c_int8 , c_int16 ) SETTINGS index_granularity = 8192 ; insert into ck_addax values ( 127 , - 32768 , 2147483647 , - 9223372036854775808 , 255 , 65535 , 4294967295 , 18446744073709551615 , 0 . 999999999999 , 0 . 99999999999999999 , 1234567891234567891234567891 . 1234567891 , 'Hello String' , '2c:16:db:a3:3a:4f' , '5F042A36-5B0C-4F71-ADFD-4DF4FCA1B863' , '2021-01-01' , '2021-01-01 11:22:33' , '2021-01-01 10:33:23.123' , 'hello' ); \u914d\u7f6e json \u6587\u4ef6 \u00b6 \u4e0b\u9762\u7684\u914d\u7f6e\u6587\u4ef6\u8868\u793a\u4ece ClickHouse \u6570\u636e\u5e93\u8bfb\u53d6\u6307\u5b9a\u7684\u8868\u6570\u636e\u5e76\u6253\u5370\u5230\u7ec8\u7aef job/clickhouse2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"clickhousereader\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"ck_addax\" ], \"jdbcUrl\" : [ \"jdbc:clickhouse://127.0.0.1:8123/default\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/clickhouse2stream.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/clickhouse2stream.json \u5176\u8f93\u51fa\u4fe1\u606f\u5982\u4e0b\uff08\u5220\u9664\u4e86\u975e\u5173\u952e\u4fe1\u606f) 021-01-06 14:39:35.742 [main] INFO VMInfo - VMInfo# operatingSystem class => com.sun.management.internal.OperatingSystemImpl 2021-01-06 14:39:35.767 [main] INFO Engine - { \"content\": { \"reader\":{ \"parameter\":{ \"column\":[ \"*\" ], \"connection\":[ { \"jdbcUrl\":[ \"jdbc:clickhouse://127.0.0.1:8123/\" ], \"table\":[ \"ck_addax\" ] } ], \"username\":\"default\" }, \"name\":\"clickhousereader\" }, \"writer\":{ \"parameter\":{ \"print\":true }, \"name\":\"streamwriter\" } }, \"setting\":{ \"errorLimit\":{ \"record\":0, \"percentage\":0.02 }, \"speed\":{ \"channel\":3 } } } 127 -32768 2147483647 -9223372036854775808 255 65535 4294967295 18446744073709551615 1 1 1234567891234567891234567891.1234567891Hello String 2c:16:db:a3:3a:4f 5f042a36-5b0c-4f71-adfd-4df4fca1b863 2021-01-01 2021-01-01 00:00:00 2021-01-01 00:00:00 hello \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-01-06 14:39:35 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-01-06 14:39:39 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 77B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 0rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 1 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 \u53c2\u6570\u8bf4\u660e \u00b6 parameter \u914d\u7f6e\u9879\u652f\u6301\u4ee5\u4e0b\u914d\u7f6e \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f array \u65e0 ClickHouse JDBC \u8fde\u63a5\u4fe1\u606f ,\u53ef\u6309\u7167\u5b98\u65b9\u89c4\u8303\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f\u3002\u5177\u4f53\u8bf7\u53c2\u770b \u5b98\u65b9\u6587\u6863 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f array \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868 ,\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00schema\u7ed3\u6784 column \u662f array \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408, \u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\u3002\u7528\u6237\u4f7f\u7528 * \u4ee3\u8868\u9ed8\u8ba4\u4f7f\u7528\u6240\u6709\u5217\u914d\u7f6e\uff0c\u4f8b\u5982 [\"*\"] splitPk \u5426 string \u65e0 \u5e0c\u671b\u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247,Addax\u56e0\u6b64\u4f1a\u542f\u52a8\u5e76\u53d1\u4efb\u52a1\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u63d0\u4f9b\u6570\u636e\u540c\u6b65\u7684\u6548\u80fd autoPk \u5426 bool false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 string \u65e0 \u7b5b\u9009\u6761\u4ef6 querySql \u5426 array \u65e0 \u4f7f\u7528SQL\u67e5\u8be2\u800c\u4e0d\u662f\u76f4\u63a5\u6307\u5b9a\u8868\u7684\u65b9\u5f0f\u8bfb\u53d6\u6570\u636e\uff0c\u5f53\u7528\u6237\u914d\u7f6equerySql\u65f6\uff0cClickHouseReader\u76f4\u63a5\u5ffd\u7565table\u3001column\u3001where\u6761\u4ef6\u7684\u914d\u7f6e \u652f\u6301\u7684\u6570\u636e\u7c7b\u578b \u00b6 \u76ee\u524dClickHouseReader\u652f\u6301\u5927\u90e8\u5206ClickHouse\u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51faClickHouseReader\u9488\u5bf9ClickHouse\u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b ClickHouse \u6570\u636e\u7c7b\u578b Long Uint8, Uint16, Uint32, Uint64, Int8, Int16, Int32, Int64, Enum8, Enum16 Double Float32, Float64, Decimal String String, FixedString(N) Date Date, DateTime, DateTime64 Boolean UInt8 Bytes String \u9650\u5236 \u00b6 \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301\uff0c\u5982Array\u3001Nested\u7b49","title":"ClickHouse Reader"},{"location":"reader/clickhousereader/#clickhouse-reader","text":"ClickHouseReader \u63d2\u4ef6\u652f\u6301\u4ece ClickHouse \u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\u3002","title":"ClickHouse Reader"},{"location":"reader/clickhousereader/#_1","text":"","title":"\u793a\u4f8b"},{"location":"reader/clickhousereader/#_2","text":"\u5047\u5b9a\u9700\u8981\u7684\u8bfb\u53d6\u7684\u8868\u7684\u7ed3\u6784\u4ee5\u53ca\u6570\u636e\u5982\u4e0b\uff1a CREATE TABLE ck_addax ( c_int8 Int8 , c_int16 Int16 , c_int32 Int32 , c_int64 Int64 , c_uint8 UInt8 , c_uint16 UInt16 , c_uint32 UInt32 , c_uint64 UInt64 , c_float32 Float32 , c_float64 Float64 , c_decimal Decimal ( 38 , 10 ), c_string String , c_fixstr FixedString ( 36 ), c_uuid UUID , c_date Date , c_datetime DateTime ( 'Asia/Chongqing' ), c_datetime64 DateTime64 ( 3 , 'Asia/Chongqing' ), c_enum Enum ( 'hello' = 1 , 'world' = 2 ) ) ENGINE = MergeTree () ORDER BY ( c_int8 , c_int16 ) SETTINGS index_granularity = 8192 ; insert into ck_addax values ( 127 , - 32768 , 2147483647 , - 9223372036854775808 , 255 , 65535 , 4294967295 , 18446744073709551615 , 0 . 999999999999 , 0 . 99999999999999999 , 1234567891234567891234567891 . 1234567891 , 'Hello String' , '2c:16:db:a3:3a:4f' , '5F042A36-5B0C-4F71-ADFD-4DF4FCA1B863' , '2021-01-01' , '2021-01-01 11:22:33' , '2021-01-01 10:33:23.123' , 'hello' );","title":"\u8868\u7ed3\u6784\u53ca\u6570\u636e\u4fe1\u606f"},{"location":"reader/clickhousereader/#json","text":"\u4e0b\u9762\u7684\u914d\u7f6e\u6587\u4ef6\u8868\u793a\u4ece ClickHouse \u6570\u636e\u5e93\u8bfb\u53d6\u6307\u5b9a\u7684\u8868\u6570\u636e\u5e76\u6253\u5370\u5230\u7ec8\u7aef job/clickhouse2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"clickhousereader\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"ck_addax\" ], \"jdbcUrl\" : [ \"jdbc:clickhouse://127.0.0.1:8123/default\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/clickhouse2stream.json","title":"\u914d\u7f6e json \u6587\u4ef6"},{"location":"reader/clickhousereader/#_3","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/clickhouse2stream.json \u5176\u8f93\u51fa\u4fe1\u606f\u5982\u4e0b\uff08\u5220\u9664\u4e86\u975e\u5173\u952e\u4fe1\u606f) 021-01-06 14:39:35.742 [main] INFO VMInfo - VMInfo# operatingSystem class => com.sun.management.internal.OperatingSystemImpl 2021-01-06 14:39:35.767 [main] INFO Engine - { \"content\": { \"reader\":{ \"parameter\":{ \"column\":[ \"*\" ], \"connection\":[ { \"jdbcUrl\":[ \"jdbc:clickhouse://127.0.0.1:8123/\" ], \"table\":[ \"ck_addax\" ] } ], \"username\":\"default\" }, \"name\":\"clickhousereader\" }, \"writer\":{ \"parameter\":{ \"print\":true }, \"name\":\"streamwriter\" } }, \"setting\":{ \"errorLimit\":{ \"record\":0, \"percentage\":0.02 }, \"speed\":{ \"channel\":3 } } } 127 -32768 2147483647 -9223372036854775808 255 65535 4294967295 18446744073709551615 1 1 1234567891234567891234567891.1234567891Hello String 2c:16:db:a3:3a:4f 5f042a36-5b0c-4f71-adfd-4df4fca1b863 2021-01-01 2021-01-01 00:00:00 2021-01-01 00:00:00 hello \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-01-06 14:39:35 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-01-06 14:39:39 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 77B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 0rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 1 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"reader/clickhousereader/#_4","text":"parameter \u914d\u7f6e\u9879\u652f\u6301\u4ee5\u4e0b\u914d\u7f6e \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f array \u65e0 ClickHouse JDBC \u8fde\u63a5\u4fe1\u606f ,\u53ef\u6309\u7167\u5b98\u65b9\u89c4\u8303\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f\u3002\u5177\u4f53\u8bf7\u53c2\u770b \u5b98\u65b9\u6587\u6863 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f array \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868 ,\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00schema\u7ed3\u6784 column \u662f array \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408, \u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\u3002\u7528\u6237\u4f7f\u7528 * \u4ee3\u8868\u9ed8\u8ba4\u4f7f\u7528\u6240\u6709\u5217\u914d\u7f6e\uff0c\u4f8b\u5982 [\"*\"] splitPk \u5426 string \u65e0 \u5e0c\u671b\u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247,Addax\u56e0\u6b64\u4f1a\u542f\u52a8\u5e76\u53d1\u4efb\u52a1\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u63d0\u4f9b\u6570\u636e\u540c\u6b65\u7684\u6548\u80fd autoPk \u5426 bool false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 string \u65e0 \u7b5b\u9009\u6761\u4ef6 querySql \u5426 array \u65e0 \u4f7f\u7528SQL\u67e5\u8be2\u800c\u4e0d\u662f\u76f4\u63a5\u6307\u5b9a\u8868\u7684\u65b9\u5f0f\u8bfb\u53d6\u6570\u636e\uff0c\u5f53\u7528\u6237\u914d\u7f6equerySql\u65f6\uff0cClickHouseReader\u76f4\u63a5\u5ffd\u7565table\u3001column\u3001where\u6761\u4ef6\u7684\u914d\u7f6e","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/clickhousereader/#_5","text":"\u76ee\u524dClickHouseReader\u652f\u6301\u5927\u90e8\u5206ClickHouse\u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51faClickHouseReader\u9488\u5bf9ClickHouse\u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b ClickHouse \u6570\u636e\u7c7b\u578b Long Uint8, Uint16, Uint32, Uint64, Int8, Int16, Int32, Int64, Enum8, Enum16 Double Float32, Float64, Decimal String String, FixedString(N) Date Date, DateTime, DateTime64 Boolean UInt8 Bytes String","title":"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b"},{"location":"reader/clickhousereader/#_6","text":"\u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301\uff0c\u5982Array\u3001Nested\u7b49","title":"\u9650\u5236"},{"location":"reader/datareader/","text":"Data Reader \u00b6 DataReader \u63d2\u4ef6\u662f\u4e13\u95e8\u63d0\u4f9b\u7528\u4e8e\u5f00\u53d1\u548c\u6d4b\u8bd5\u73af\u5883\u4e2d\uff0c\u751f\u4ea7\u6ee1\u8db3\u4e00\u5b9a\u89c4\u5219\u8981\u6c42\u7684\u6570\u636e\u7684\u63d2\u4ef6\u3002 \u5728\u5b9e\u9645\u5f00\u53d1\u548c\u6d4b\u8bd5\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u6309\u7167\u4e00\u5b9a\u7684\u4e1a\u52a1\u89c4\u5219\u6765\u751f\u4ea7\u6d4b\u8bd5\u6570\u636e\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u968f\u673a\u5185\u5bb9\uff0c\u6bd4\u5982\u8eab\u4efd\u8bc1\u53f7\u7801\uff0c\u94f6\u884c\u8d26\u53f7\uff0c\u80a1\u7968\u4ee3\u7801\u7b49\u3002 \u4e3a\u4ec0\u4e48\u8981\u91cd\u590d\u53d1\u660e\u8f6e\u5b50 \u00b6 \u8bda\u7136\uff0c\u7f51\u7edc\u4e0a\u6709\u76f8\u5f53\u591a\u7684\u4e13\u95e8\u7684\u6570\u636e\u751f\u4ea7\u5de5\u5177\uff0c\u5176\u4e2d\u4e0d\u4e4f\u529f\u80fd\u5f3a\u5927\u3001\u6027\u80fd\u4e5f\u5f3a\u608d\u3002 \u4f46\u8fd9\u4e9b\u5de5\u5177\u5927\u90e8\u5206\u662f\u8003\u8651\u5230\u4e86\u6570\u636e\u751f\u6210\u8fd9\u4e00\u6bb5\uff0c\u800c\u5ffd\u7565\u4e86\u6570\u636e\u5199\u5165\u5230\u76ee\u6807\u7aef\u7684\u95ee\u9898\uff0c\u6216\u8005\u8bf4\u6709\u4e9b\u8003\u8651\u5230\u4e86\uff0c\u4f46\u4ec5\u4ec5\u53ea\u8003\u8651\u4e86\u4e00\u79cd\u6216\u6709\u9650\u7684\u51e0\u79cd\u6570\u636e\u5e93\u3002 \u6070\u597d Addax \u5de5\u5177\u80fd\u591f\u63d0\u4f9b\u8db3\u591f\u591a\u7684\u76ee\u6807\u7aef\u5199\u5165\u80fd\u529b\uff0c\u52a0\u4e0a\u4e4b\u524d\u7684\u5df2\u6709\u7684 streamReader \u5df2\u7ecf\u7b97\u662f\u4e00\u4e2a\u7b80\u5355\u7248\u7684\u6570\u636e\u751f\u6210\u5de5\u5177\uff0c\u56e0\u6b64\u5728\u6b64\u529f\u80fd\u4e0a \u589e\u52a0\u4e00\u4e9b\u7279\u5b9a\u89c4\u5219\uff0c\u518d\u5229\u7528\u5199\u5165\u7aef\u591a\u6837\u6027\u7684\u80fd\u529b\uff0c\u81ea\u7136\u5c31\u6210\u4e3a\u4e86\u4e00\u4e2a\u8f83\u597d\u7684\u6570\u636e\u751f\u6210\u5de5\u5177\u3002 \u914d\u7f6e\u793a\u4f8b \u00b6 \u8fd9\u91cc\u6211\u628a\u76ee\u524d\u63d2\u4ef6\u652f\u6301\u7684\u89c4\u5219\u5168\u90e8\u5217\u4e3e\u5230\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d datareader2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"datareader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"1,100,\" , \"rule\" : \"random\" , \"type\" : \"double\" }, { \"value\" : \"DataX\" , \"type\" : \"string\" }, { \"value\" : \"1\" , \"rule\" : \"incr\" , \"type\" : \"long\" }, { \"value\" : \"1989/06/04 00:00:01,-1\" , \"rule\" : \"incr\" , \"type\" : \"date\" , \"dateFormat\" : \"yyyy/MM/dd hh:mm:ss\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" }, { \"rule\" : \"address\" }, { \"rule\" : \"bank\" }, { \"rule\" : \"company\" }, { \"rule\" : \"creditCard\" }, { \"rule\" : \"debitCard\" }, { \"rule\" : \"idCard\" }, { \"rule\" : \"lat\" }, { \"rule\" : \"lng\" }, { \"rule\" : \"name\" }, { \"rule\" : \"job\" }, { \"rule\" : \"phone\" }, { \"rule\" : \"stockCode\" }, { \"rule\" : \"stockAccount\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true , \"encoding\" : \"UTF-8\" } } } } } \u4fdd\u5b58\u4e0a\u8ff0\u5185\u5bb9\u5230 job/datareader2stream.json \u7136\u540e\u6267\u884c\u8be5\u4efb\u52a1\uff0c\u5176\u8f93\u51fa\u7ed3\u679c\u7c7b\u4f3c\u5982\u4e0b\uff1a $ bin/addax.sh job/datareader2stream.json ___ _ _ / _ \\ | | | | / /_ \\ \\ __ | | __ | | __ ___ __ | _ | / _ ` | / _ ` | / _ ` \\ \\/ / | | | | ( _ | | ( _ | | ( _ | | > < \\_ | | _/ \\_ _,_ | \\_ _,_ | \\_ _,_/_/ \\_\\ :: Addax version :: ( v4.0.2-SNAPSHOT ) 2021 -08-13 17 :02:00.888 [ main ] INFO VMInfo - VMInfo# operatingSystem class = > com.sun.management.internal.OperatingSystemImpl 2021 -08-13 17 :02:00.910 [ main ] INFO Engine - { \"content\" : { \"reader\" : { \"parameter\" : { \"column\" : [ { \"rule\" : \"random\" , \"type\" : \"double\" , \"scale\" : \"2\" , \"value\" : \"1,100,\" } , { \"type\" : \"string\" , \"value\" : \"DataX\" } , { \"rule\" : \"incr\" , \"type\" : \"long\" , \"value\" : \"1\" } , { \"dateFormat\" : \"yyyy/MM/dd hh:mm:ss\" , \"rule\" : \"incr\" , \"type\" : \"date\" , \"value\" : \"1989/06/04 00:00:01,-1\" } , { \"type\" : \"bytes\" , \"value\" : \"test\" } , { \"rule\" : \"address\" } , { \"rule\" : \"bank\" } , { \"rule\" : \"company\" } , { \"rule\" : \"creditCard\" } , { \"rule\" : \"debitCard\" } , { \"rule\" : \"idCard\" } , { \"rule\" : \"lat\" } , { \"rule\" : \"lng\" } , { \"rule\" : \"name\" } , { \"rule\" : \"job\" } , { \"rule\" : \"phone\" } , { \"rule\" : \"stockCode\" } , { \"rule\" : \"stockAccount\" } ] , \"sliceRecordCount\" :10 } , \"name\" : \"datareader\" } , \"writer\" : { \"parameter\" : { \"print\" :true, \"encoding\" : \"UTF-8\" } , \"name\" : \"streamwriter\" } } , \"setting\" : { \"errorLimit\" : { \"record\" :0, \"percentage\" :0.02 } , \"speed\" : { \"byte\" :-1, \"channel\" :1 } } } 2021 -08-13 17 :02:00.937 [ main ] INFO PerfTrace - PerfTrace traceId = job_-1, isEnable = false, priority = 0 2021 -08-13 17 :02:00.938 [ main ] INFO JobContainer - Addax jobContainer starts job. 2021 -08-13 17 :02:00.940 [ main ] INFO JobContainer - Set jobId = 0 2021 -08-13 17 :02:00.976 [ job-0 ] INFO JobContainer - Addax Reader.Job [ datareader ] do prepare work . 2021 -08-13 17 :02:00.977 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do prepare work . 2021 -08-13 17 :02:00.978 [ job-0 ] INFO JobContainer - Job set Channel-Number to 1 channels. 2021 -08-13 17 :02:00.979 [ job-0 ] INFO JobContainer - Addax Reader.Job [ datareader ] splits to [ 1 ] tasks. 2021 -08-13 17 :02:00.980 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] splits to [ 1 ] tasks. 2021 -08-13 17 :02:01.002 [ job-0 ] INFO JobContainer - Scheduler starts [ 1 ] taskGroups. 2021 -08-13 17 :02:01.009 [ taskGroup-0 ] INFO TaskGroupContainer - taskGroupId =[ 0 ] start [ 1 ] channels for [ 1 ] tasks. 2021 -08-13 17 :02:01.017 [ taskGroup-0 ] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021 -08-13 17 :02:01.017 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 7 .65 DataX 1 1989 -06-04 00 :00:01 test \u5929\u6d25\u5e02\u5357\u4eac\u53bf\u957f\u5bff\u533a\u5149\u660e\u8def263\u53f7 \u4ea4\u901a\u94f6\u884c \u6613\u52a8\u529b\u4fe1\u606f\u6709\u9650\u516c\u53f8 6227894836568607 6235712610856305437 450304194808316766 31 .3732613 -125.3507716 \u9f9a\u519b \u673a\u7535\u5de5\u7a0b\u5e08 13438631667 726929 8741848665 18 .58 DataX 2 1989 -06-03 00 :00:01 test \u6c5f\u82cf\u7701\u592a\u539f\u5e02\u6d54\u9633\u533a\u4e1c\u5c71\u8def33\u53f7 \u4e2d\u56fd\u94f6\u884c \u65f6\u7a7a\u76d2\u6570\u5b57\u4fe1\u606f\u6709\u9650\u516c\u53f8 4096666711928233 6217419359154239015 220301200008188547 48 .6648764 104 .8567048 \u5321\u98de \u5316\u5986\u5e08 18093137306 006845 1815787371 16 .16 DataX 3 1989 -06-02 00 :00:01 test \u53f0\u6e7e\u7701\u90af\u90f8\u5e02\u6e05\u6cb3\u533a\u4e07\u987a\u8def10\u53f7 \u5927\u540c\u5546\u884c \u5f00\u53d1\u533a\u4e16\u521b\u79d1\u6280\u6709\u9650\u516c\u53f8 4096713966912225 6212977716107080594 150223196408276322 29 .0134395 142 .6426842 \u652f\u6ce2 \u5ba1\u6838\u5458 13013458079 020695 3545552026 63 .89 DataX 4 1989 -06-01 00 :00:01 test \u4e0a\u6d77\u5e02\u8f9b\u96c6\u53bf\u516d\u679d\u7279\u533a\u7518\u56ed\u8def119\u53f7 \u4e2d\u56fd\u519c\u4e1a\u94f6\u884c \u6cf0\u9e92\u9e9f\u4f20\u5a92\u6709\u9650\u516c\u53f8 6227893481508780 6215686558778997167 220822196208286838 -71.6484635 111 .8181273 \u656c\u5764 \u623f\u5730\u4ea7\u5ba2\u670d 13384928291 174445 0799668655 79 .18 DataX 5 1989 -05-31 00 :00:01 test \u9655\u897f\u7701\u5357\u4eac\u5e02\u671d\u9633\u533a\u5927\u80dc\u8def170\u53f7 \u5185\u8499\u53e4\u94f6\u884c \u6656\u6765\u8ba1\u7b97\u673a\u4fe1\u606f\u6709\u9650\u516c\u53f8 6227535683896707 6217255315590053833 350600198508222018 -24.9783587 78 .017024 \u848b\u6768 \u56fa\u5b9a\u8d44\u4ea7\u4f1a\u8ba1 18766298716 402188 9633759917 14 .97 DataX 6 1989 -05-30 00 :00:01 test \u6d77\u5357\u7701\u957f\u6625\u53bf\u74a7\u5c71\u533a\u78a7\u6d77\u8857147\u53f7 \u534e\u590f\u94f6\u884c \u6d59\u5927\u4e07\u670b\u79d1\u6280\u6709\u9650\u516c\u53f8 6224797475369912 6215680436662199846 220122199608190275 -3.5088667 -40.2634359 \u8fb9\u6768 \u7763\u5bfc/\u5de1\u5e97 13278765923 092780 2408887582 45 .49 DataX 7 1989 -05-29 00 :00:01 test \u53f0\u6e7e\u7701\u6f5c\u6c5f\u53bf\u6881\u5e73\u533a\u4e03\u661f\u8857201\u53f7 \u664b\u57ce\u5546\u884c \u5f00\u53d1\u533a\u4e16\u521b\u4fe1\u606f\u6709\u9650\u516c\u53f8 5257468530819766 6213336008535546044 141082197908244004 -72.9200596 120 .6018163 \u6851\u660e \u7cfb\u7edf\u5de5\u7a0b\u5e08 13853379719 175864 8303448618 8 .45 DataX 8 1989 -05-28 00 :00:01 test \u6d77\u5357\u7701\u676d\u5dde\u53bf\u57ce\u5317\u533a\u5929\u5174\u8def11\u53f7 \u5927\u540c\u5546\u884c \u4e07\u8fc5\u7535\u8111\u79d1\u6280\u6709\u9650\u516c\u53f8 6227639043120062 6270259717880740332 430405198908214042 -16.5115338 -39.336119 \u8983\u5065 \u4eba\u4e8b\u603b\u76d1 13950216061 687461 0216734574 15 .01 DataX 9 1989 -05-27 00 :00:01 test \u4e91\u5357\u7701\u60e0\u5dde\u5e02\u548c\u5e73\u533a\u6d77\u9e25\u8857201\u53f7 \u5185\u8499\u53e4\u94f6\u884c \u9ec4\u77f3\u91d1\u627f\u4fe1\u606f\u6709\u9650\u516c\u53f8 6200358843233005 6235730928871528500 130300195008312067 -61.646097 163 .0882369 \u536b\u5efa\u534e \u7535\u8bdd\u91c7\u7f16 15292600492 001658 1045093445 55 .14 DataX 10 1989 -05-26 00 :00:01 test \u8fbd\u5b81\u7701\u5170\u5dde\u5e02\u5f90\u6c47\u533a\u4e1c\u5c71\u8857176\u53f7 \u5eca\u574a\u94f6\u884c \u521b\u6c47\u79d1\u6280\u6709\u9650\u516c\u53f8 6227605280751588 6270262330691012025 341822200908168063 77 .2165746 139 .5431377 \u6c60\u6d69 \u591a\u5a92\u4f53\u8bbe\u8ba1 18693948216 201678 0692522928 2021 -08-13 17 :02:04.020 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -08-13 17 :02:04.021 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do post work. 2021 -08-13 17 :02:04.022 [ job-0 ] INFO JobContainer - Addax Reader.Job [ datareader ] do post work. 2021 -08-13 17 :02:04.025 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -08-13 17 :02:04.028 [ job-0 ] INFO StandAloneJobContainerCommunicator - Total 10 records, 1817 bytes | Speed 605B/s, 3 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0 .000s | All Task WaitReaderTime 0 .000s | Percentage 100 .00% 2021 -08-13 17 :02:04.030 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -08-13 17 :02:00 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -08-13 17 :02:04 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 605B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 3rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 10 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 \u914d\u7f6e\u8bf4\u660e \u00b6 column \u7684\u914d\u7f6e\u548c\u5176\u4ed6\u63d2\u4ef6\u7684\u914d\u7f6e\u7a0d\u6709\u4e0d\u540c\uff0c\u4e00\u4e2a\u5b57\u6bb5\u7531\u4ee5\u4e0b\u914d\u7f6e\u9879\u7ec4\u6210 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u793a\u4f8b \u8bf4\u660e value \u5426 \u65e0 Addax \u6570\u636e\u503c\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4e3a\u5fc5\u9009\u9879 rule \u5426 constant idCard \u6570\u636e\u751f\u4ea7\u89c4\u5219\uff0c\u8be6\u7ec6\u4e0b\u9762\u7684\u63cf\u8ff0 type \u5426 string double \u6570\u636e\u503c\u7c7b\u578b dateFormat \u5426 yyyy-MM-dd HH:mm:ss yyyy/MM/dd HH:mm:ss \u65e5\u671f\u683c\u5f0f\uff0c\u4ec5\u5728 type \u4e3a date \u65f6\u6709\u6548 rule \u8bf4\u660e \u00b6 \u8be5\u63d2\u4ef6\u7684\u5b57\u6bb5\u914d\u7f6e\u6838\u5fc3\u662f rule \u5b57\u6bb5\uff0c\u5b83\u7528\u6765\u6307\u793a\u5e94\u8be5\u751f\u6210\u4ec0\u4e48\u6837\u7684\u6570\u636e\uff0c\u5e76\u4f9d\u636e\u4e0d\u540c\u89c4\u5219\uff0c\u914d\u5408\u5176\u4ed6\u914d\u7f6e\u9009\u9879\u6765\u751f\u4ea7\u6ee1\u8db3\u671f\u671b\u7684\u6570\u636e\u3002 \u5f53\u524d rule \u7684\u914d\u7f6e\u5747\u4e3a\u5185\u7f6e\u652f\u6301\u7684\u89c4\u5219\uff0c\u6682\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\uff0c\u4ee5\u4e0b\u8be6\u7ec6\u8bf4\u660e constant \u00b6 constant \u662f rule \u7684\u9ed8\u8ba4\u914d\u7f6e\uff0c\u8be5\u89c4\u5219\u610f\u5473\u7740\u8981\u751f\u6210\u7684\u6570\u636e\u503c\u7531 value \u914d\u7f6e\u9879\u51b3\u5b9a\uff0c\u5176\u4e0d\u505a\u4efb\u4f55\u53d8\u66f4\u3002\u6bd4\u5982 { \"value\" : \"Addax\" , \"type\" : \"string\" , \"rule\" : \"constant\" } \u8868\u793a\u8be5\u5b57\u6bb5\u751f\u4ea7\u7684\u6570\u636e\u503c\u5747\u4e3a Addax incr \u00b6 incr \u914d\u7f6e\u9879\u7684\u542b\u4e49\u548c streamreader \u63d2\u4ef6\u4e2d\u7684 incr \u542b\u4e49\u4e00\u81f4\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u9012\u589e\u7684\u6570\u636e\u751f\u4ea7\u89c4\u5219\uff0c\u6bd4\u5982 { \"value\" : \"1,2\" , \"rule\" : \"incr\" , \"type\" : \"long\" } \u8868\u793a\u8be5\u5b57\u6bb5\u7684\u6570\u636e\u662f\u4e00\u4e2a\u957f\u6574\u5f62\uff0c\u6570\u503c\u4ece 1 \u5f00\u59cb\uff0c\u6bcf\u6b21\u9012\u589e 2\uff0c\u4e5f\u5c31\u662f\u5f62\u6210 1 \u5f00\u59cb\uff0c\u6b65\u957f\u4e3a 2 \u7684\u9012\u589e\u6570\u5217\u3002 \u8be5\u5b57\u6bb5\u66f4\u8be6\u7ec6\u7684\u914d\u7f6e\u89c4\u5219\u548c\u6ce8\u610f\u4e8b\u9879\uff0c\u53ef\u4ee5\u53c2\u8003 streamreader \u4e2d\u7684 incr \u8bf4\u660e\u3002 random \u00b6 random \u914d\u7f6e\u9879\u7684\u542b\u4e49\u548c streamreader \u63d2\u4ef6\u4e2d\u7684 random \u542b\u4e49\u4e00\u81f4\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u9012\u589e\u7684\u6570\u636e\u751f\u4ea7\u89c4\u5219\uff0c\u6bd4\u5982 { \"value\" : \"1,10\" , \"rule\" : \"random\" , \"type\" : \"string\" } \u8868\u793a\u8be5\u5b57\u6bb5\u7684\u6570\u636e\u662f\u4e00\u4e2a\u957f\u5ea6\u4e3a 1 \u5230 10 \uff081\u548c10\u90fd\u5305\u62ec\uff09\u968f\u673a\u5b57\u7b26\u4e32\u3002 \u8be5\u5b57\u6bb5\u66f4\u8be6\u7ec6\u7684\u914d\u7f6e\u89c4\u5219\u548c\u6ce8\u610f\u4e8b\u9879\uff0c\u53ef\u4ee5\u53c2\u8003 streamreader \u4e2d\u7684 random \u8bf4\u660e\u3002 \u89c4\u5219\u540d\u79f0 \u542b\u4e49 \u793a\u4f8b \u6570\u636e\u7c7b\u578b \u8bf4\u660e address \u968f\u673a\u751f\u6210\u4e00\u6761\u57fa\u672c\u6ee1\u8db3\u56fd\u5185\u5b9e\u9645\u60c5\u51b5\u7684\u5730\u5740\u4fe1\u606f \u8fbd\u5b81\u7701\u5170\u5dde\u5e02\u5f90\u6c47\u533a\u4e1c\u5c71\u8857176\u53f7 string bank \u968f\u673a\u751f\u6210\u4e00\u4e2a\u56fd\u5185\u94f6\u884c\u540d\u79f0 \u534e\u590f\u94f6\u884c string company \u968f\u673a\u751f\u6210\u4e00\u4e2a\u516c\u53f8\u7684\u540d\u79f0 \u4e07\u8fc5\u7535\u8111\u79d1\u6280\u6709\u9650\u516c\u53f8 string creditCard \u968f\u673a\u751f\u6210\u4e00\u4e2a\u4fe1\u7528\u5361\u5361\u53f7 430405198908214042 string 16\u4f4d debitCard \u968f\u673a\u751f\u6210\u4e00\u4e2a\u50a8\u84c4\u5361\u5361\u53f7 6227894836568607 string 19\u4f4d idCard \u968f\u673a\u751f\u6210\u4e00\u4e2a\u56fd\u5185\u8eab\u4efd\u8bc1\u53f7\u7801 350600198508222018 string 18\u4f4d\uff0c\u8d1f\u8d23\u6821\u9a8c\u89c4\u5219\uff0c\u59346\u4f4d\u7f16\u7801\u6ee1\u8db3\u884c\u653f\u533a\u5212\u8981\u6c42 lat \u968f\u673a\u751f\u6210\u7ef4\u5ea6\u6570\u636e 48.6648764 double \u56fa\u5b9a7\u4f4d\u5c0f\u6570 \uff0c\u4e5f\u53ef\u4ee5\u7528 latitude \u8868\u793a lng \u968f\u673a\u751f\u6210\u7ecf\u5ea6\u6570\u636e 120.6018163 double \u56fa\u5b9a7\u4f4d\u5c0f\u6570\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 longitude \u8868\u793a name \u968f\u673a\u751f\u6210\u4e00\u4e2a\u56fd\u5185\u540d\u5b57 \u6c60\u6d69 string \u6682\u6ca1\u8003\u8651\u59d3\u6c0f\u5728\u56fd\u5185\u7684\u5360\u6bd4\u5ea6 job \u968f\u673a\u751f\u6210\u4e00\u4e2a\u56fd\u5185\u5c97\u4f4d\u540d\u79f0 \u7cfb\u7edf\u5de5\u7a0b\u5e08 string \u6570\u636e\u6765\u6e90\u4e8e\u62db\u8058\u7f51\u7ad9 phone \u968f\u673a\u751f\u6210\u4e00\u4e2a\u56fd\u5185\u624b\u673a\u53f7\u7801 15292600492 string \u6682\u4e0d\u8003\u8651\u865a\u62df\u624b\u673a\u53f7 stockCode \u968f\u673a\u751f\u6210\u4e00\u4e2a6\u4f4d\u7684\u80a1\u7968\u4ee3\u7801 687461 string \u524d\u4e24\u4f4d\u6ee1\u8db3\u56fd\u5185\u80a1\u7968\u4ee3\u7801\u7f16\u53f7\u89c4\u8303 stockAccount \u968f\u673a\u751f\u6210\u4e00\u4e2a10\u4f4d\u7684\u80a1\u7968\u4ea4\u6613\u8d26\u6237 0692522928 string \u5b8c\u5168\u968f\u673a\uff0c\u4e0d\u6ee1\u8db3\u8d26\u6237\u89c4\u8303 uuid \u968f\u673a\u751f\u6210\u4e00\u4e2a UUID \u5b57\u7b26\u4e32 bc1cf125-929b-43b7-b324-d7c4cc5a75d2 string \u5b8c\u5168\u968f\u673a\uff0c\u4e0d\u6ee1\u8db3\u8d26\u6237\u89c4\u8303 \u6ce8\u610f\uff1a\u4e0a\u8ff0\u8868\u683c\u4e2d\u7684\u89c4\u5219\u8fd4\u56de\u7684\u6570\u636e\u7c7b\u578b\u662f\u56fa\u5b9a\u7684\uff0c\u4e14\u4e0d\u652f\u6301\u4fee\u6539\uff0c\u56e0\u6b64 type \u65e0\u9700\u914d\u7f6e\uff0c\u914d\u7f6e\u7684\u7c7b\u578b\u4e5f\u4f1a\u88ab\u5ffd\u7565\uff0c\u56e0\u4e3a\u6570\u636e\u751f\u6210\u6765\u81ea\u5185\u90e8\u89c4\u5219\uff0c\u6240\u4ee5 value \u4e5f\u65e0\u9700\u914d\u7f6e\uff0c\u914d\u7f6e\u7684\u5185\u5bb9\u4e5f\u4f1a\u88ab\u5ffd\u7565\u3002","title":"Data Reader"},{"location":"reader/datareader/#data-reader","text":"DataReader \u63d2\u4ef6\u662f\u4e13\u95e8\u63d0\u4f9b\u7528\u4e8e\u5f00\u53d1\u548c\u6d4b\u8bd5\u73af\u5883\u4e2d\uff0c\u751f\u4ea7\u6ee1\u8db3\u4e00\u5b9a\u89c4\u5219\u8981\u6c42\u7684\u6570\u636e\u7684\u63d2\u4ef6\u3002 \u5728\u5b9e\u9645\u5f00\u53d1\u548c\u6d4b\u8bd5\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u6309\u7167\u4e00\u5b9a\u7684\u4e1a\u52a1\u89c4\u5219\u6765\u751f\u4ea7\u6d4b\u8bd5\u6570\u636e\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u968f\u673a\u5185\u5bb9\uff0c\u6bd4\u5982\u8eab\u4efd\u8bc1\u53f7\u7801\uff0c\u94f6\u884c\u8d26\u53f7\uff0c\u80a1\u7968\u4ee3\u7801\u7b49\u3002","title":"Data Reader"},{"location":"reader/datareader/#_1","text":"\u8bda\u7136\uff0c\u7f51\u7edc\u4e0a\u6709\u76f8\u5f53\u591a\u7684\u4e13\u95e8\u7684\u6570\u636e\u751f\u4ea7\u5de5\u5177\uff0c\u5176\u4e2d\u4e0d\u4e4f\u529f\u80fd\u5f3a\u5927\u3001\u6027\u80fd\u4e5f\u5f3a\u608d\u3002 \u4f46\u8fd9\u4e9b\u5de5\u5177\u5927\u90e8\u5206\u662f\u8003\u8651\u5230\u4e86\u6570\u636e\u751f\u6210\u8fd9\u4e00\u6bb5\uff0c\u800c\u5ffd\u7565\u4e86\u6570\u636e\u5199\u5165\u5230\u76ee\u6807\u7aef\u7684\u95ee\u9898\uff0c\u6216\u8005\u8bf4\u6709\u4e9b\u8003\u8651\u5230\u4e86\uff0c\u4f46\u4ec5\u4ec5\u53ea\u8003\u8651\u4e86\u4e00\u79cd\u6216\u6709\u9650\u7684\u51e0\u79cd\u6570\u636e\u5e93\u3002 \u6070\u597d Addax \u5de5\u5177\u80fd\u591f\u63d0\u4f9b\u8db3\u591f\u591a\u7684\u76ee\u6807\u7aef\u5199\u5165\u80fd\u529b\uff0c\u52a0\u4e0a\u4e4b\u524d\u7684\u5df2\u6709\u7684 streamReader \u5df2\u7ecf\u7b97\u662f\u4e00\u4e2a\u7b80\u5355\u7248\u7684\u6570\u636e\u751f\u6210\u5de5\u5177\uff0c\u56e0\u6b64\u5728\u6b64\u529f\u80fd\u4e0a \u589e\u52a0\u4e00\u4e9b\u7279\u5b9a\u89c4\u5219\uff0c\u518d\u5229\u7528\u5199\u5165\u7aef\u591a\u6837\u6027\u7684\u80fd\u529b\uff0c\u81ea\u7136\u5c31\u6210\u4e3a\u4e86\u4e00\u4e2a\u8f83\u597d\u7684\u6570\u636e\u751f\u6210\u5de5\u5177\u3002","title":"\u4e3a\u4ec0\u4e48\u8981\u91cd\u590d\u53d1\u660e\u8f6e\u5b50"},{"location":"reader/datareader/#_2","text":"\u8fd9\u91cc\u6211\u628a\u76ee\u524d\u63d2\u4ef6\u652f\u6301\u7684\u89c4\u5219\u5168\u90e8\u5217\u4e3e\u5230\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d datareader2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"datareader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"1,100,\" , \"rule\" : \"random\" , \"type\" : \"double\" }, { \"value\" : \"DataX\" , \"type\" : \"string\" }, { \"value\" : \"1\" , \"rule\" : \"incr\" , \"type\" : \"long\" }, { \"value\" : \"1989/06/04 00:00:01,-1\" , \"rule\" : \"incr\" , \"type\" : \"date\" , \"dateFormat\" : \"yyyy/MM/dd hh:mm:ss\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" }, { \"rule\" : \"address\" }, { \"rule\" : \"bank\" }, { \"rule\" : \"company\" }, { \"rule\" : \"creditCard\" }, { \"rule\" : \"debitCard\" }, { \"rule\" : \"idCard\" }, { \"rule\" : \"lat\" }, { \"rule\" : \"lng\" }, { \"rule\" : \"name\" }, { \"rule\" : \"job\" }, { \"rule\" : \"phone\" }, { \"rule\" : \"stockCode\" }, { \"rule\" : \"stockAccount\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true , \"encoding\" : \"UTF-8\" } } } } } \u4fdd\u5b58\u4e0a\u8ff0\u5185\u5bb9\u5230 job/datareader2stream.json \u7136\u540e\u6267\u884c\u8be5\u4efb\u52a1\uff0c\u5176\u8f93\u51fa\u7ed3\u679c\u7c7b\u4f3c\u5982\u4e0b\uff1a $ bin/addax.sh job/datareader2stream.json ___ _ _ / _ \\ | | | | / /_ \\ \\ __ | | __ | | __ ___ __ | _ | / _ ` | / _ ` | / _ ` \\ \\/ / | | | | ( _ | | ( _ | | ( _ | | > < \\_ | | _/ \\_ _,_ | \\_ _,_ | \\_ _,_/_/ \\_\\ :: Addax version :: ( v4.0.2-SNAPSHOT ) 2021 -08-13 17 :02:00.888 [ main ] INFO VMInfo - VMInfo# operatingSystem class = > com.sun.management.internal.OperatingSystemImpl 2021 -08-13 17 :02:00.910 [ main ] INFO Engine - { \"content\" : { \"reader\" : { \"parameter\" : { \"column\" : [ { \"rule\" : \"random\" , \"type\" : \"double\" , \"scale\" : \"2\" , \"value\" : \"1,100,\" } , { \"type\" : \"string\" , \"value\" : \"DataX\" } , { \"rule\" : \"incr\" , \"type\" : \"long\" , \"value\" : \"1\" } , { \"dateFormat\" : \"yyyy/MM/dd hh:mm:ss\" , \"rule\" : \"incr\" , \"type\" : \"date\" , \"value\" : \"1989/06/04 00:00:01,-1\" } , { \"type\" : \"bytes\" , \"value\" : \"test\" } , { \"rule\" : \"address\" } , { \"rule\" : \"bank\" } , { \"rule\" : \"company\" } , { \"rule\" : \"creditCard\" } , { \"rule\" : \"debitCard\" } , { \"rule\" : \"idCard\" } , { \"rule\" : \"lat\" } , { \"rule\" : \"lng\" } , { \"rule\" : \"name\" } , { \"rule\" : \"job\" } , { \"rule\" : \"phone\" } , { \"rule\" : \"stockCode\" } , { \"rule\" : \"stockAccount\" } ] , \"sliceRecordCount\" :10 } , \"name\" : \"datareader\" } , \"writer\" : { \"parameter\" : { \"print\" :true, \"encoding\" : \"UTF-8\" } , \"name\" : \"streamwriter\" } } , \"setting\" : { \"errorLimit\" : { \"record\" :0, \"percentage\" :0.02 } , \"speed\" : { \"byte\" :-1, \"channel\" :1 } } } 2021 -08-13 17 :02:00.937 [ main ] INFO PerfTrace - PerfTrace traceId = job_-1, isEnable = false, priority = 0 2021 -08-13 17 :02:00.938 [ main ] INFO JobContainer - Addax jobContainer starts job. 2021 -08-13 17 :02:00.940 [ main ] INFO JobContainer - Set jobId = 0 2021 -08-13 17 :02:00.976 [ job-0 ] INFO JobContainer - Addax Reader.Job [ datareader ] do prepare work . 2021 -08-13 17 :02:00.977 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do prepare work . 2021 -08-13 17 :02:00.978 [ job-0 ] INFO JobContainer - Job set Channel-Number to 1 channels. 2021 -08-13 17 :02:00.979 [ job-0 ] INFO JobContainer - Addax Reader.Job [ datareader ] splits to [ 1 ] tasks. 2021 -08-13 17 :02:00.980 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] splits to [ 1 ] tasks. 2021 -08-13 17 :02:01.002 [ job-0 ] INFO JobContainer - Scheduler starts [ 1 ] taskGroups. 2021 -08-13 17 :02:01.009 [ taskGroup-0 ] INFO TaskGroupContainer - taskGroupId =[ 0 ] start [ 1 ] channels for [ 1 ] tasks. 2021 -08-13 17 :02:01.017 [ taskGroup-0 ] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021 -08-13 17 :02:01.017 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 7 .65 DataX 1 1989 -06-04 00 :00:01 test \u5929\u6d25\u5e02\u5357\u4eac\u53bf\u957f\u5bff\u533a\u5149\u660e\u8def263\u53f7 \u4ea4\u901a\u94f6\u884c \u6613\u52a8\u529b\u4fe1\u606f\u6709\u9650\u516c\u53f8 6227894836568607 6235712610856305437 450304194808316766 31 .3732613 -125.3507716 \u9f9a\u519b \u673a\u7535\u5de5\u7a0b\u5e08 13438631667 726929 8741848665 18 .58 DataX 2 1989 -06-03 00 :00:01 test \u6c5f\u82cf\u7701\u592a\u539f\u5e02\u6d54\u9633\u533a\u4e1c\u5c71\u8def33\u53f7 \u4e2d\u56fd\u94f6\u884c \u65f6\u7a7a\u76d2\u6570\u5b57\u4fe1\u606f\u6709\u9650\u516c\u53f8 4096666711928233 6217419359154239015 220301200008188547 48 .6648764 104 .8567048 \u5321\u98de \u5316\u5986\u5e08 18093137306 006845 1815787371 16 .16 DataX 3 1989 -06-02 00 :00:01 test \u53f0\u6e7e\u7701\u90af\u90f8\u5e02\u6e05\u6cb3\u533a\u4e07\u987a\u8def10\u53f7 \u5927\u540c\u5546\u884c \u5f00\u53d1\u533a\u4e16\u521b\u79d1\u6280\u6709\u9650\u516c\u53f8 4096713966912225 6212977716107080594 150223196408276322 29 .0134395 142 .6426842 \u652f\u6ce2 \u5ba1\u6838\u5458 13013458079 020695 3545552026 63 .89 DataX 4 1989 -06-01 00 :00:01 test \u4e0a\u6d77\u5e02\u8f9b\u96c6\u53bf\u516d\u679d\u7279\u533a\u7518\u56ed\u8def119\u53f7 \u4e2d\u56fd\u519c\u4e1a\u94f6\u884c \u6cf0\u9e92\u9e9f\u4f20\u5a92\u6709\u9650\u516c\u53f8 6227893481508780 6215686558778997167 220822196208286838 -71.6484635 111 .8181273 \u656c\u5764 \u623f\u5730\u4ea7\u5ba2\u670d 13384928291 174445 0799668655 79 .18 DataX 5 1989 -05-31 00 :00:01 test \u9655\u897f\u7701\u5357\u4eac\u5e02\u671d\u9633\u533a\u5927\u80dc\u8def170\u53f7 \u5185\u8499\u53e4\u94f6\u884c \u6656\u6765\u8ba1\u7b97\u673a\u4fe1\u606f\u6709\u9650\u516c\u53f8 6227535683896707 6217255315590053833 350600198508222018 -24.9783587 78 .017024 \u848b\u6768 \u56fa\u5b9a\u8d44\u4ea7\u4f1a\u8ba1 18766298716 402188 9633759917 14 .97 DataX 6 1989 -05-30 00 :00:01 test \u6d77\u5357\u7701\u957f\u6625\u53bf\u74a7\u5c71\u533a\u78a7\u6d77\u8857147\u53f7 \u534e\u590f\u94f6\u884c \u6d59\u5927\u4e07\u670b\u79d1\u6280\u6709\u9650\u516c\u53f8 6224797475369912 6215680436662199846 220122199608190275 -3.5088667 -40.2634359 \u8fb9\u6768 \u7763\u5bfc/\u5de1\u5e97 13278765923 092780 2408887582 45 .49 DataX 7 1989 -05-29 00 :00:01 test \u53f0\u6e7e\u7701\u6f5c\u6c5f\u53bf\u6881\u5e73\u533a\u4e03\u661f\u8857201\u53f7 \u664b\u57ce\u5546\u884c \u5f00\u53d1\u533a\u4e16\u521b\u4fe1\u606f\u6709\u9650\u516c\u53f8 5257468530819766 6213336008535546044 141082197908244004 -72.9200596 120 .6018163 \u6851\u660e \u7cfb\u7edf\u5de5\u7a0b\u5e08 13853379719 175864 8303448618 8 .45 DataX 8 1989 -05-28 00 :00:01 test \u6d77\u5357\u7701\u676d\u5dde\u53bf\u57ce\u5317\u533a\u5929\u5174\u8def11\u53f7 \u5927\u540c\u5546\u884c \u4e07\u8fc5\u7535\u8111\u79d1\u6280\u6709\u9650\u516c\u53f8 6227639043120062 6270259717880740332 430405198908214042 -16.5115338 -39.336119 \u8983\u5065 \u4eba\u4e8b\u603b\u76d1 13950216061 687461 0216734574 15 .01 DataX 9 1989 -05-27 00 :00:01 test \u4e91\u5357\u7701\u60e0\u5dde\u5e02\u548c\u5e73\u533a\u6d77\u9e25\u8857201\u53f7 \u5185\u8499\u53e4\u94f6\u884c \u9ec4\u77f3\u91d1\u627f\u4fe1\u606f\u6709\u9650\u516c\u53f8 6200358843233005 6235730928871528500 130300195008312067 -61.646097 163 .0882369 \u536b\u5efa\u534e \u7535\u8bdd\u91c7\u7f16 15292600492 001658 1045093445 55 .14 DataX 10 1989 -05-26 00 :00:01 test \u8fbd\u5b81\u7701\u5170\u5dde\u5e02\u5f90\u6c47\u533a\u4e1c\u5c71\u8857176\u53f7 \u5eca\u574a\u94f6\u884c \u521b\u6c47\u79d1\u6280\u6709\u9650\u516c\u53f8 6227605280751588 6270262330691012025 341822200908168063 77 .2165746 139 .5431377 \u6c60\u6d69 \u591a\u5a92\u4f53\u8bbe\u8ba1 18693948216 201678 0692522928 2021 -08-13 17 :02:04.020 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -08-13 17 :02:04.021 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do post work. 2021 -08-13 17 :02:04.022 [ job-0 ] INFO JobContainer - Addax Reader.Job [ datareader ] do post work. 2021 -08-13 17 :02:04.025 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -08-13 17 :02:04.028 [ job-0 ] INFO StandAloneJobContainerCommunicator - Total 10 records, 1817 bytes | Speed 605B/s, 3 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0 .000s | All Task WaitReaderTime 0 .000s | Percentage 100 .00% 2021 -08-13 17 :02:04.030 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -08-13 17 :02:00 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -08-13 17 :02:04 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 605B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 3rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 10 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"reader/datareader/#_3","text":"column \u7684\u914d\u7f6e\u548c\u5176\u4ed6\u63d2\u4ef6\u7684\u914d\u7f6e\u7a0d\u6709\u4e0d\u540c\uff0c\u4e00\u4e2a\u5b57\u6bb5\u7531\u4ee5\u4e0b\u914d\u7f6e\u9879\u7ec4\u6210 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u793a\u4f8b \u8bf4\u660e value \u5426 \u65e0 Addax \u6570\u636e\u503c\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4e3a\u5fc5\u9009\u9879 rule \u5426 constant idCard \u6570\u636e\u751f\u4ea7\u89c4\u5219\uff0c\u8be6\u7ec6\u4e0b\u9762\u7684\u63cf\u8ff0 type \u5426 string double \u6570\u636e\u503c\u7c7b\u578b dateFormat \u5426 yyyy-MM-dd HH:mm:ss yyyy/MM/dd HH:mm:ss \u65e5\u671f\u683c\u5f0f\uff0c\u4ec5\u5728 type \u4e3a date \u65f6\u6709\u6548","title":"\u914d\u7f6e\u8bf4\u660e"},{"location":"reader/datareader/#rule","text":"\u8be5\u63d2\u4ef6\u7684\u5b57\u6bb5\u914d\u7f6e\u6838\u5fc3\u662f rule \u5b57\u6bb5\uff0c\u5b83\u7528\u6765\u6307\u793a\u5e94\u8be5\u751f\u6210\u4ec0\u4e48\u6837\u7684\u6570\u636e\uff0c\u5e76\u4f9d\u636e\u4e0d\u540c\u89c4\u5219\uff0c\u914d\u5408\u5176\u4ed6\u914d\u7f6e\u9009\u9879\u6765\u751f\u4ea7\u6ee1\u8db3\u671f\u671b\u7684\u6570\u636e\u3002 \u5f53\u524d rule \u7684\u914d\u7f6e\u5747\u4e3a\u5185\u7f6e\u652f\u6301\u7684\u89c4\u5219\uff0c\u6682\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\uff0c\u4ee5\u4e0b\u8be6\u7ec6\u8bf4\u660e","title":"rule \u8bf4\u660e"},{"location":"reader/datareader/#constant","text":"constant \u662f rule \u7684\u9ed8\u8ba4\u914d\u7f6e\uff0c\u8be5\u89c4\u5219\u610f\u5473\u7740\u8981\u751f\u6210\u7684\u6570\u636e\u503c\u7531 value \u914d\u7f6e\u9879\u51b3\u5b9a\uff0c\u5176\u4e0d\u505a\u4efb\u4f55\u53d8\u66f4\u3002\u6bd4\u5982 { \"value\" : \"Addax\" , \"type\" : \"string\" , \"rule\" : \"constant\" } \u8868\u793a\u8be5\u5b57\u6bb5\u751f\u4ea7\u7684\u6570\u636e\u503c\u5747\u4e3a Addax","title":"constant"},{"location":"reader/datareader/#incr","text":"incr \u914d\u7f6e\u9879\u7684\u542b\u4e49\u548c streamreader \u63d2\u4ef6\u4e2d\u7684 incr \u542b\u4e49\u4e00\u81f4\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u9012\u589e\u7684\u6570\u636e\u751f\u4ea7\u89c4\u5219\uff0c\u6bd4\u5982 { \"value\" : \"1,2\" , \"rule\" : \"incr\" , \"type\" : \"long\" } \u8868\u793a\u8be5\u5b57\u6bb5\u7684\u6570\u636e\u662f\u4e00\u4e2a\u957f\u6574\u5f62\uff0c\u6570\u503c\u4ece 1 \u5f00\u59cb\uff0c\u6bcf\u6b21\u9012\u589e 2\uff0c\u4e5f\u5c31\u662f\u5f62\u6210 1 \u5f00\u59cb\uff0c\u6b65\u957f\u4e3a 2 \u7684\u9012\u589e\u6570\u5217\u3002 \u8be5\u5b57\u6bb5\u66f4\u8be6\u7ec6\u7684\u914d\u7f6e\u89c4\u5219\u548c\u6ce8\u610f\u4e8b\u9879\uff0c\u53ef\u4ee5\u53c2\u8003 streamreader \u4e2d\u7684 incr \u8bf4\u660e\u3002","title":"incr"},{"location":"reader/datareader/#random","text":"random \u914d\u7f6e\u9879\u7684\u542b\u4e49\u548c streamreader \u63d2\u4ef6\u4e2d\u7684 random \u542b\u4e49\u4e00\u81f4\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u9012\u589e\u7684\u6570\u636e\u751f\u4ea7\u89c4\u5219\uff0c\u6bd4\u5982 { \"value\" : \"1,10\" , \"rule\" : \"random\" , \"type\" : \"string\" } \u8868\u793a\u8be5\u5b57\u6bb5\u7684\u6570\u636e\u662f\u4e00\u4e2a\u957f\u5ea6\u4e3a 1 \u5230 10 \uff081\u548c10\u90fd\u5305\u62ec\uff09\u968f\u673a\u5b57\u7b26\u4e32\u3002 \u8be5\u5b57\u6bb5\u66f4\u8be6\u7ec6\u7684\u914d\u7f6e\u89c4\u5219\u548c\u6ce8\u610f\u4e8b\u9879\uff0c\u53ef\u4ee5\u53c2\u8003 streamreader \u4e2d\u7684 random \u8bf4\u660e\u3002 \u89c4\u5219\u540d\u79f0 \u542b\u4e49 \u793a\u4f8b \u6570\u636e\u7c7b\u578b \u8bf4\u660e address \u968f\u673a\u751f\u6210\u4e00\u6761\u57fa\u672c\u6ee1\u8db3\u56fd\u5185\u5b9e\u9645\u60c5\u51b5\u7684\u5730\u5740\u4fe1\u606f \u8fbd\u5b81\u7701\u5170\u5dde\u5e02\u5f90\u6c47\u533a\u4e1c\u5c71\u8857176\u53f7 string bank \u968f\u673a\u751f\u6210\u4e00\u4e2a\u56fd\u5185\u94f6\u884c\u540d\u79f0 \u534e\u590f\u94f6\u884c string company \u968f\u673a\u751f\u6210\u4e00\u4e2a\u516c\u53f8\u7684\u540d\u79f0 \u4e07\u8fc5\u7535\u8111\u79d1\u6280\u6709\u9650\u516c\u53f8 string creditCard \u968f\u673a\u751f\u6210\u4e00\u4e2a\u4fe1\u7528\u5361\u5361\u53f7 430405198908214042 string 16\u4f4d debitCard \u968f\u673a\u751f\u6210\u4e00\u4e2a\u50a8\u84c4\u5361\u5361\u53f7 6227894836568607 string 19\u4f4d idCard \u968f\u673a\u751f\u6210\u4e00\u4e2a\u56fd\u5185\u8eab\u4efd\u8bc1\u53f7\u7801 350600198508222018 string 18\u4f4d\uff0c\u8d1f\u8d23\u6821\u9a8c\u89c4\u5219\uff0c\u59346\u4f4d\u7f16\u7801\u6ee1\u8db3\u884c\u653f\u533a\u5212\u8981\u6c42 lat \u968f\u673a\u751f\u6210\u7ef4\u5ea6\u6570\u636e 48.6648764 double \u56fa\u5b9a7\u4f4d\u5c0f\u6570 \uff0c\u4e5f\u53ef\u4ee5\u7528 latitude \u8868\u793a lng \u968f\u673a\u751f\u6210\u7ecf\u5ea6\u6570\u636e 120.6018163 double \u56fa\u5b9a7\u4f4d\u5c0f\u6570\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 longitude \u8868\u793a name \u968f\u673a\u751f\u6210\u4e00\u4e2a\u56fd\u5185\u540d\u5b57 \u6c60\u6d69 string \u6682\u6ca1\u8003\u8651\u59d3\u6c0f\u5728\u56fd\u5185\u7684\u5360\u6bd4\u5ea6 job \u968f\u673a\u751f\u6210\u4e00\u4e2a\u56fd\u5185\u5c97\u4f4d\u540d\u79f0 \u7cfb\u7edf\u5de5\u7a0b\u5e08 string \u6570\u636e\u6765\u6e90\u4e8e\u62db\u8058\u7f51\u7ad9 phone \u968f\u673a\u751f\u6210\u4e00\u4e2a\u56fd\u5185\u624b\u673a\u53f7\u7801 15292600492 string \u6682\u4e0d\u8003\u8651\u865a\u62df\u624b\u673a\u53f7 stockCode \u968f\u673a\u751f\u6210\u4e00\u4e2a6\u4f4d\u7684\u80a1\u7968\u4ee3\u7801 687461 string \u524d\u4e24\u4f4d\u6ee1\u8db3\u56fd\u5185\u80a1\u7968\u4ee3\u7801\u7f16\u53f7\u89c4\u8303 stockAccount \u968f\u673a\u751f\u6210\u4e00\u4e2a10\u4f4d\u7684\u80a1\u7968\u4ea4\u6613\u8d26\u6237 0692522928 string \u5b8c\u5168\u968f\u673a\uff0c\u4e0d\u6ee1\u8db3\u8d26\u6237\u89c4\u8303 uuid \u968f\u673a\u751f\u6210\u4e00\u4e2a UUID \u5b57\u7b26\u4e32 bc1cf125-929b-43b7-b324-d7c4cc5a75d2 string \u5b8c\u5168\u968f\u673a\uff0c\u4e0d\u6ee1\u8db3\u8d26\u6237\u89c4\u8303 \u6ce8\u610f\uff1a\u4e0a\u8ff0\u8868\u683c\u4e2d\u7684\u89c4\u5219\u8fd4\u56de\u7684\u6570\u636e\u7c7b\u578b\u662f\u56fa\u5b9a\u7684\uff0c\u4e14\u4e0d\u652f\u6301\u4fee\u6539\uff0c\u56e0\u6b64 type \u65e0\u9700\u914d\u7f6e\uff0c\u914d\u7f6e\u7684\u7c7b\u578b\u4e5f\u4f1a\u88ab\u5ffd\u7565\uff0c\u56e0\u4e3a\u6570\u636e\u751f\u6210\u6765\u81ea\u5185\u90e8\u89c4\u5219\uff0c\u6240\u4ee5 value \u4e5f\u65e0\u9700\u914d\u7f6e\uff0c\u914d\u7f6e\u7684\u5185\u5bb9\u4e5f\u4f1a\u88ab\u5ffd\u7565\u3002","title":"random"},{"location":"reader/dbfreader/","text":"Dbf Reader \u00b6 DbfReader \u63d2\u4ef6\u652f\u6301\u8bfb\u53d6DBF\u683c\u5f0f\u6587\u4ef6 \u914d\u7f6e\u8bf4\u660e \u00b6 \u4ee5\u4e0b\u662f\u8bfb\u53d6 DBF \u6587\u4ef6\u540e\u6253\u5370\u5230\u7ec8\u7aef\u7684\u914d\u7f6e\u6837\u4f8b jobs/dbf2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"dbfreader\" , \"parameter\" : { \"column\" : [ { \"index\" : 0 , \"type\" : \"string\" }, { \"index\" : 1 , \"type\" : \"long\" }, { \"index\" : 2 , \"type\" : \"string\" }, { \"index\" : 3 , \"type\" : \"boolean\" }, { \"index\" : 4 , \"type\" : \"string\" }, { \"value\" : \"dbf\" , \"type\" : \"string\" } ], \"path\" : [ \"/tmp/out\" ], \"encoding\" : \"GBK\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 parameter \u914d\u7f6e\u9879\u652f\u6301\u4ee5\u4e0b\u914d\u7f6e \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f \u65e0 DBF\u6587\u4ef6\u8def\u5f84\uff0c\u652f\u6301\u5199\u591a\u4e2a\u8def\u5f84\uff0c\u8be6\u7ec6\u60c5\u51b5\u89c1\u4e0b column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u96c6\u5408, \u662f {type: value} \u6216 {type: index} \u7684\u96c6\u5408\uff0c\u8be6\u7ec6\u914d\u7f6e\u89c1\u4e0b encoding \u5426 GBK DBF\u6587\u4ef6\u7f16\u7801\uff0c\u6bd4\u5982 GBK , UTF-8 nullFormat \u5426 \\N \u5b9a\u4e49\u54ea\u4e2a\u5b57\u7b26\u4e32\u53ef\u4ee5\u8868\u793a\u4e3anull, path \u00b6 \u63cf\u8ff0\uff1a\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84\u3002 \u5f53\u6307\u5b9a\u5355\u4e2a\u672c\u5730\u6587\u4ef6\uff0cDbfFileReader\u6682\u65f6\u53ea\u80fd\u4f7f\u7528\u5355\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u4e8c\u671f\u8003\u8651\u5728\u975e\u538b\u7f29\u6587\u4ef6\u60c5\u51b5\u4e0b\u9488\u5bf9\u5355\u4e2aFile\u53ef\u4ee5\u8fdb\u884c\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6\u3002 \u5f53\u6307\u5b9a\u591a\u4e2a\u672c\u5730\u6587\u4ef6\uff0cDbfFileReader\u652f\u6301\u4f7f\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u7ebf\u7a0b\u5e76\u53d1\u6570\u901a\u8fc7\u901a\u9053\u6570\u6307\u5b9a\u3002 \u5f53\u6307\u5b9a\u901a\u914d\u7b26\uff0cDbfFileReader\u5c1d\u8bd5\u904d\u5386\u51fa\u591a\u4e2a\u6587\u4ef6\u4fe1\u606f\u3002\u4f8b\u5982: \u6307\u5b9a /* \u4ee3\u8868\u8bfb\u53d6/\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\uff0c\u6307\u5b9a /foo/* \u4ee3\u8868\u8bfb\u53d6 foo \u76ee\u5f55\u4e0b\u6e38\u6240\u6709\u7684\u6587\u4ef6\u3002 dbfFileReader\u76ee\u524d\u53ea\u652f\u6301 * \u4f5c\u4e3a\u6587\u4ef6\u901a\u914d\u7b26\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cAddax\u4f1a\u5c06\u4e00\u4e2a\u4f5c\u4e1a\u4e0b\u540c\u6b65\u7684\u6240\u6709dbf File\u89c6\u4f5c\u540c\u4e00\u5f20\u6570\u636e\u8868\u3002\u7528\u6237\u5fc5\u987b\u81ea\u5df1\u4fdd\u8bc1\u6240\u6709\u7684File\u80fd\u591f\u9002\u914d\u540c\u4e00\u5957schema\u4fe1\u606f\u3002\u8bfb\u53d6\u6587\u4ef6\u7528\u6237\u5fc5\u987b\u4fdd\u8bc1\u4e3a\u7c7bdbf\u683c\u5f0f\uff0c\u5e76\u4e14\u63d0\u4f9b\u7ed9Addax\u6743\u9650\u53ef\u8bfb\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679cPath\u6307\u5b9a\u7684\u8def\u5f84\u4e0b\u6ca1\u6709\u7b26\u5408\u5339\u914d\u7684\u6587\u4ef6\u62bd\u53d6\uff0cAddax\u5c06\u62a5\u9519\u3002 column \u00b6 \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c name \u4e3a\u5b57\u6bb5\u540d,\u957f\u5ea6\u6700\u59278\uff0c value \u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece\u6e90\u5934\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636e value \u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u53ef\u4ee5\u5168\u90e8\u6309\u7167 String \u7c7b\u578b\u8bfb\u53d6\u6570\u636e\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"column\" : [ \"*\" ] } \u7528\u6237\u53ef\u4ee5\u6307\u5b9aColumn\u5b57\u6bb5\u4fe1\u606f\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a [ { \"type\" : \"long\" , \"index\" : 0 }, { \"type\" : \"string\" , \"value\" : \"addax\" } ] \"index\": 0 \u8868\u793a\u4ece\u672c\u5730DBF\u6587\u4ef6\u7b2c\u4e00\u5217\u83b7\u53d6int\u5b57\u6bb5 \"value\": \"addax\" \u8868\u793a\u4ece dbfFileReader \u5185\u90e8\u751f\u6210 addax \u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\u4f5c\u4e3a\u5f53\u524d\u5b57\u6bb5 \u5bf9\u4e8e\u7528\u6237\u6307\u5b9a column \u4fe1\u606f\uff0c type \u5fc5\u987b\u586b\u5199\uff0c index \u548c value \u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002 \u652f\u6301\u7684\u6570\u636e\u7c7b\u578b \u00b6 \u672c\u5730\u6587\u4ef6\u672c\u8eab\u63d0\u4f9b\u6570\u636e\u7c7b\u578b\uff0c\u8be5\u7c7b\u578b\u662f Addax dbfFileReader\u5b9a\u4e49\uff1a Addax \u5185\u90e8\u7c7b\u578b \u672c\u5730\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long Double Double String String Boolean Boolean Date Date \u5176\u4e2d\uff1a Long \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528\u6574\u5f62\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 19901219 \u3002 Double \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Double\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 3.1415 \u3002 Boolean \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Boolean\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 true \u3001 false \u3002\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002 Date \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Date\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 2014-12-31 \uff0c\u53ef\u4ee5\u914d\u7f6e dateFormat \u6307\u5b9a\u683c\u5f0f\u3002","title":"Dbf Reader"},{"location":"reader/dbfreader/#dbf-reader","text":"DbfReader \u63d2\u4ef6\u652f\u6301\u8bfb\u53d6DBF\u683c\u5f0f\u6587\u4ef6","title":"Dbf Reader"},{"location":"reader/dbfreader/#_1","text":"\u4ee5\u4e0b\u662f\u8bfb\u53d6 DBF \u6587\u4ef6\u540e\u6253\u5370\u5230\u7ec8\u7aef\u7684\u914d\u7f6e\u6837\u4f8b jobs/dbf2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"dbfreader\" , \"parameter\" : { \"column\" : [ { \"index\" : 0 , \"type\" : \"string\" }, { \"index\" : 1 , \"type\" : \"long\" }, { \"index\" : 2 , \"type\" : \"string\" }, { \"index\" : 3 , \"type\" : \"boolean\" }, { \"index\" : 4 , \"type\" : \"string\" }, { \"value\" : \"dbf\" , \"type\" : \"string\" } ], \"path\" : [ \"/tmp/out\" ], \"encoding\" : \"GBK\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } } } } }","title":"\u914d\u7f6e\u8bf4\u660e"},{"location":"reader/dbfreader/#_2","text":"parameter \u914d\u7f6e\u9879\u652f\u6301\u4ee5\u4e0b\u914d\u7f6e \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f \u65e0 DBF\u6587\u4ef6\u8def\u5f84\uff0c\u652f\u6301\u5199\u591a\u4e2a\u8def\u5f84\uff0c\u8be6\u7ec6\u60c5\u51b5\u89c1\u4e0b column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u96c6\u5408, \u662f {type: value} \u6216 {type: index} \u7684\u96c6\u5408\uff0c\u8be6\u7ec6\u914d\u7f6e\u89c1\u4e0b encoding \u5426 GBK DBF\u6587\u4ef6\u7f16\u7801\uff0c\u6bd4\u5982 GBK , UTF-8 nullFormat \u5426 \\N \u5b9a\u4e49\u54ea\u4e2a\u5b57\u7b26\u4e32\u53ef\u4ee5\u8868\u793a\u4e3anull,","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/dbfreader/#path","text":"\u63cf\u8ff0\uff1a\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84\u3002 \u5f53\u6307\u5b9a\u5355\u4e2a\u672c\u5730\u6587\u4ef6\uff0cDbfFileReader\u6682\u65f6\u53ea\u80fd\u4f7f\u7528\u5355\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u4e8c\u671f\u8003\u8651\u5728\u975e\u538b\u7f29\u6587\u4ef6\u60c5\u51b5\u4e0b\u9488\u5bf9\u5355\u4e2aFile\u53ef\u4ee5\u8fdb\u884c\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6\u3002 \u5f53\u6307\u5b9a\u591a\u4e2a\u672c\u5730\u6587\u4ef6\uff0cDbfFileReader\u652f\u6301\u4f7f\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u7ebf\u7a0b\u5e76\u53d1\u6570\u901a\u8fc7\u901a\u9053\u6570\u6307\u5b9a\u3002 \u5f53\u6307\u5b9a\u901a\u914d\u7b26\uff0cDbfFileReader\u5c1d\u8bd5\u904d\u5386\u51fa\u591a\u4e2a\u6587\u4ef6\u4fe1\u606f\u3002\u4f8b\u5982: \u6307\u5b9a /* \u4ee3\u8868\u8bfb\u53d6/\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\uff0c\u6307\u5b9a /foo/* \u4ee3\u8868\u8bfb\u53d6 foo \u76ee\u5f55\u4e0b\u6e38\u6240\u6709\u7684\u6587\u4ef6\u3002 dbfFileReader\u76ee\u524d\u53ea\u652f\u6301 * \u4f5c\u4e3a\u6587\u4ef6\u901a\u914d\u7b26\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cAddax\u4f1a\u5c06\u4e00\u4e2a\u4f5c\u4e1a\u4e0b\u540c\u6b65\u7684\u6240\u6709dbf File\u89c6\u4f5c\u540c\u4e00\u5f20\u6570\u636e\u8868\u3002\u7528\u6237\u5fc5\u987b\u81ea\u5df1\u4fdd\u8bc1\u6240\u6709\u7684File\u80fd\u591f\u9002\u914d\u540c\u4e00\u5957schema\u4fe1\u606f\u3002\u8bfb\u53d6\u6587\u4ef6\u7528\u6237\u5fc5\u987b\u4fdd\u8bc1\u4e3a\u7c7bdbf\u683c\u5f0f\uff0c\u5e76\u4e14\u63d0\u4f9b\u7ed9Addax\u6743\u9650\u53ef\u8bfb\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679cPath\u6307\u5b9a\u7684\u8def\u5f84\u4e0b\u6ca1\u6709\u7b26\u5408\u5339\u914d\u7684\u6587\u4ef6\u62bd\u53d6\uff0cAddax\u5c06\u62a5\u9519\u3002","title":"path"},{"location":"reader/dbfreader/#column","text":"\u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c name \u4e3a\u5b57\u6bb5\u540d,\u957f\u5ea6\u6700\u59278\uff0c value \u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece\u6e90\u5934\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636e value \u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u53ef\u4ee5\u5168\u90e8\u6309\u7167 String \u7c7b\u578b\u8bfb\u53d6\u6570\u636e\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"column\" : [ \"*\" ] } \u7528\u6237\u53ef\u4ee5\u6307\u5b9aColumn\u5b57\u6bb5\u4fe1\u606f\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a [ { \"type\" : \"long\" , \"index\" : 0 }, { \"type\" : \"string\" , \"value\" : \"addax\" } ] \"index\": 0 \u8868\u793a\u4ece\u672c\u5730DBF\u6587\u4ef6\u7b2c\u4e00\u5217\u83b7\u53d6int\u5b57\u6bb5 \"value\": \"addax\" \u8868\u793a\u4ece dbfFileReader \u5185\u90e8\u751f\u6210 addax \u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\u4f5c\u4e3a\u5f53\u524d\u5b57\u6bb5 \u5bf9\u4e8e\u7528\u6237\u6307\u5b9a column \u4fe1\u606f\uff0c type \u5fc5\u987b\u586b\u5199\uff0c index \u548c value \u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002","title":"column"},{"location":"reader/dbfreader/#_3","text":"\u672c\u5730\u6587\u4ef6\u672c\u8eab\u63d0\u4f9b\u6570\u636e\u7c7b\u578b\uff0c\u8be5\u7c7b\u578b\u662f Addax dbfFileReader\u5b9a\u4e49\uff1a Addax \u5185\u90e8\u7c7b\u578b \u672c\u5730\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long Double Double String String Boolean Boolean Date Date \u5176\u4e2d\uff1a Long \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528\u6574\u5f62\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 19901219 \u3002 Double \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Double\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 3.1415 \u3002 Boolean \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Boolean\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 true \u3001 false \u3002\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002 Date \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Date\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 2014-12-31 \uff0c\u53ef\u4ee5\u914d\u7f6e dateFormat \u6307\u5b9a\u683c\u5f0f\u3002","title":"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b"},{"location":"reader/elasticsearchreader/","text":"ElasticSearchReader \u00b6 ElasticSearchReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece Elasticsearch \u8bfb\u53d6\u7d22\u5f15\u7684\u529f\u80fd\uff0c \u5b83\u901a\u8fc7 Elasticsearch \u63d0\u4f9b\u7684 Rest API \uff08\u9ed8\u8ba4\u7aef\u53e39200\uff09\uff0c\u6267\u884c\u6307\u5b9a\u7684\u67e5\u8be2\u8bed\u53e5\u6279\u91cf\u83b7\u53d6\u6570\u636e \u793a\u4f8b \u00b6 \u5047\u5b9a\u8981\u83b7\u53d6\u7684\u7d22\u5f15\u5185\u5bb9\u5982\u4e0b { \"took\" : 14 , \"timed_out\" : false , \"_shards\" : { \"total\" : 1 , \"successful\" : 1 , \"skipped\" : 0 , \"failed\" : 0 }, \"hits\" : { \"total\" : 2 , \"max_score\" : 1 , \"hits\" : [ { \"_index\" : \"test-1\" , \"_type\" : \"default\" , \"_id\" : \"38\" , \"_score\" : 1 , \"_source\" : { \"col_date\" : \"2017-05-25T11:22:33.000+08:00\" , \"col_integer\" : 19890604 , \"col_keyword\" : \"hello world\" , \"col_ip\" : \"1.1.1.1\" , \"col_text\" : \"long text\" , \"col_double\" : 19890604 , \"col_long\" : 19890604 , \"col_geo_point\" : \"41.12,-71.34\" } }, { \"_index\" : \"test-1\" , \"_type\" : \"default\" , \"_id\" : \"103\" , \"_score\" : 1 , \"_source\" : { \"col_date\" : \"2017-05-25T11:22:33.000+08:00\" , \"col_integer\" : 19890604 , \"col_keyword\" : \"hello world\" , \"col_ip\" : \"1.1.1.1\" , \"col_text\" : \"long text\" , \"col_double\" : 19890604 , \"col_long\" : 19890604 , \"col_geo_point\" : \"41.12,-71.34\" } } ] } } \u914d\u7f6e\u4e00\u4e2a\u4ece Elasticsearch \u8bfb\u53d6\u6570\u636e\u5e76\u6253\u5370\u5230\u7ec8\u7aef\u7684\u4efb\u52a1 job/es2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"elasticsearchreader\" , \"parameter\" : { \"endpoint\" : \"http://127.0.0.1:9200\" , \"accessId\" : \"\" , \"accesskey\" : \"\" , \"index\" : \"test-1\" , \"type\" : \"default\" , \"searchType\" : \"dfs_query_then_fetch\" , \"headers\" : {}, \"scroll\" : \"3m\" , \"search\" : [ { \"query\" : { \"match\" : { \"col_ip\" : \"1.1.1.1\" } }, \"aggregations\" : { \"top_10_states\" : { \"terms\" : { \"field\" : \"col_date\" , \"size\" : 10 } } } } ], \"column\" : [ \"col_ip\" , \"col_double\" , \"col_long\" , \"col_integer\" , \"col_keyword\" , \"col_text\" , \"col_geo_point\" , \"col_date\" ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true , \"encoding\" : \"UTF-8\" } } } } } \u5c06\u4e0a\u8ff0\u5185\u5bb9\u4fdd\u5b58\u4e3a job/es2stream.json \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u91c7\u96c6 bin/addax.sh job/es2stream.json \u5176\u8f93\u51fa\u7ed3\u679c\u7c7b\u4f3c\u5982\u4e0b\uff08\u8f93\u51fa\u8bb0\u5f55\u6570\u6709\u5220\u51cf) 2021-02-19 13:38:15.860 [main] INFO VMInfo - VMInfo# operatingSystem class => com.sun.management.internal.OperatingSystemImpl 2021-02-19 13:38:15.895 [main] INFO Engine - { \"content\": { \"reader\":{ \"parameter\":{ \"accessId\":\"\", \"headers\":{}, \"endpoint\":\"http://127.0.0.1:9200\", \"search\":[ { \"query\": { \"match\": { \"col_ip\": \"1.1.1.1\" } }, \"aggregations\": { \"top_10_states\": { \"terms\": { \"field\": \"col_date\", \"size\": 10 } } } } ], \"accesskey\":\"*****\", \"searchType\":\"dfs_query_then_fetch\", \"scroll\":\"3m\", \"column\":[ \"col_ip\", \"col_double\", \"col_long\", \"col_integer\", \"col_keyword\", \"col_text\", \"col_geo_point\", \"col_date\" ], \"index\":\"test-1\", \"type\":\"default\" }, \"name\":\"elasticsearchreader\" }, \"writer\":{ \"parameter\":{ \"print\":true, \"encoding\":\"UTF-8\" }, \"name\":\"streamwriter\" } }, \"setting\":{ \"errorLimit\":{ \"record\":0, \"percentage\":0.02 }, \"speed\":{ \"byte\":-1, \"channel\":1 } } } 2021-02-19 13:38:15.934 [main] INFO PerfTrace - PerfTrace traceId=job_-1, isEnable=false, priority=0 2021-02-19 13:38:15.934 [main] INFO JobContainer - Addax jobContainer starts job. 2021-02-19 13:38:15.937 [main] INFO JobContainer - Set jobId = 0 2017-05-25T11:22:33.000+08:00 19890604 hello world 1.1.1.1 long text 19890604 19890604 41.12,-71.34 2017-05-25T11:22:33.000+08:00 19890604 hello world 1.1.1.1 long text 19890604 19890604 41.12,-71.34 2021-02-19 13:38:19.845 [job-0] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021-02-19 13:38:19.848 [job-0] INFO JobContainer - Addax Writer.Job [streamwriter] do post work. 2021-02-19 13:38:19.849 [job-0] INFO JobContainer - Addax Reader.Job [elasticsearchreader] do post work. 2021-02-19 13:38:19.855 [job-0] INFO JobContainer - PerfTrace not enable! 2021-02-19 13:38:19.858 [job-0] INFO StandAloneJobContainerCommunicator - Total 95 records, 8740 bytes | Speed 2.84KB/s, 31 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0.000s | All Task WaitReaderTime 0.103s | Percentage 100.00% 2021-02-19 13:38:19.861 [job-0] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-02-19 13:38:15 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-02-19 13:38:19 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 2.84KB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 31rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 2 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 ElasticSearch\u7684\u8fde\u63a5\u5730\u5740 accessId \u5426 string \"\" http auth\u4e2d\u7684user accessKey \u5426 string \"\" http auth\u4e2d\u7684password index \u662f string \u65e0 elasticsearch\u4e2d\u7684index\u540d type \u5426 string index\u540d elasticsearch\u4e2dindex\u7684type\u540d search \u662f list [] json\u683c\u5f0fapi\u641c\u7d22\u6570\u636e\u4f53 column \u662f list \u65e0 \u9700\u8981\u8bfb\u53d6\u7684\u5b57\u6bb5 timeout \u5426 int 60 \u5ba2\u6237\u7aef\u8d85\u65f6\u65f6\u95f4\uff08\u5355\u4f4d\uff1a\u79d2) discovery \u5426 boolean false \u542f\u7528\u8282\u70b9\u53d1\u73b0\u5c06(\u8f6e\u8be2)\u5e76\u5b9a\u671f\u66f4\u65b0\u5ba2\u6237\u673a\u4e2d\u7684\u670d\u52a1\u5668\u5217\u8868 compression \u5426 boolean true http\u8bf7\u6c42\uff0c\u5f00\u542f\u538b\u7f29 multiThread \u5426 boolean true http\u8bf7\u6c42\uff0c\u662f\u5426\u6709\u591a\u7ebf\u7a0b searchType \u5426 string dfs_query_then_fetch \u641c\u7d22\u7c7b\u578b headers \u5426 map {} http\u8bf7\u6c42\u5934 scroll \u5426 string \"\" \u6eda\u52a8\u5206\u9875\u914d\u7f6e search \u00b6 search \u914d\u7f6e\u9879\u5141\u8bb8\u914d\u7f6e\u4e3a\u6ee1\u8db3 Elasticsearch API \u67e5\u8be2\u8981\u6c42\u7684\u5185\u5bb9\uff0c\u6bd4\u5982\u8fd9\u6837\uff1a { \"query\" : { \"match\" : { \"message\" : \"myProduct\" } }, \"aggregations\" : { \"top_10_states\" : { \"terms\" : { \"field\" : \"state\" , \"size\" : 10 } } } } searchType \u00b6 searchType \u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u51e0\u79cd\uff1a dfs_query_then_fetch query_then_fetch count scan","title":"ElasticSearchReader"},{"location":"reader/elasticsearchreader/#elasticsearchreader","text":"ElasticSearchReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece Elasticsearch \u8bfb\u53d6\u7d22\u5f15\u7684\u529f\u80fd\uff0c \u5b83\u901a\u8fc7 Elasticsearch \u63d0\u4f9b\u7684 Rest API \uff08\u9ed8\u8ba4\u7aef\u53e39200\uff09\uff0c\u6267\u884c\u6307\u5b9a\u7684\u67e5\u8be2\u8bed\u53e5\u6279\u91cf\u83b7\u53d6\u6570\u636e","title":"ElasticSearchReader"},{"location":"reader/elasticsearchreader/#_1","text":"\u5047\u5b9a\u8981\u83b7\u53d6\u7684\u7d22\u5f15\u5185\u5bb9\u5982\u4e0b { \"took\" : 14 , \"timed_out\" : false , \"_shards\" : { \"total\" : 1 , \"successful\" : 1 , \"skipped\" : 0 , \"failed\" : 0 }, \"hits\" : { \"total\" : 2 , \"max_score\" : 1 , \"hits\" : [ { \"_index\" : \"test-1\" , \"_type\" : \"default\" , \"_id\" : \"38\" , \"_score\" : 1 , \"_source\" : { \"col_date\" : \"2017-05-25T11:22:33.000+08:00\" , \"col_integer\" : 19890604 , \"col_keyword\" : \"hello world\" , \"col_ip\" : \"1.1.1.1\" , \"col_text\" : \"long text\" , \"col_double\" : 19890604 , \"col_long\" : 19890604 , \"col_geo_point\" : \"41.12,-71.34\" } }, { \"_index\" : \"test-1\" , \"_type\" : \"default\" , \"_id\" : \"103\" , \"_score\" : 1 , \"_source\" : { \"col_date\" : \"2017-05-25T11:22:33.000+08:00\" , \"col_integer\" : 19890604 , \"col_keyword\" : \"hello world\" , \"col_ip\" : \"1.1.1.1\" , \"col_text\" : \"long text\" , \"col_double\" : 19890604 , \"col_long\" : 19890604 , \"col_geo_point\" : \"41.12,-71.34\" } } ] } } \u914d\u7f6e\u4e00\u4e2a\u4ece Elasticsearch \u8bfb\u53d6\u6570\u636e\u5e76\u6253\u5370\u5230\u7ec8\u7aef\u7684\u4efb\u52a1 job/es2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"elasticsearchreader\" , \"parameter\" : { \"endpoint\" : \"http://127.0.0.1:9200\" , \"accessId\" : \"\" , \"accesskey\" : \"\" , \"index\" : \"test-1\" , \"type\" : \"default\" , \"searchType\" : \"dfs_query_then_fetch\" , \"headers\" : {}, \"scroll\" : \"3m\" , \"search\" : [ { \"query\" : { \"match\" : { \"col_ip\" : \"1.1.1.1\" } }, \"aggregations\" : { \"top_10_states\" : { \"terms\" : { \"field\" : \"col_date\" , \"size\" : 10 } } } } ], \"column\" : [ \"col_ip\" , \"col_double\" , \"col_long\" , \"col_integer\" , \"col_keyword\" , \"col_text\" , \"col_geo_point\" , \"col_date\" ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true , \"encoding\" : \"UTF-8\" } } } } } \u5c06\u4e0a\u8ff0\u5185\u5bb9\u4fdd\u5b58\u4e3a job/es2stream.json \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u91c7\u96c6 bin/addax.sh job/es2stream.json \u5176\u8f93\u51fa\u7ed3\u679c\u7c7b\u4f3c\u5982\u4e0b\uff08\u8f93\u51fa\u8bb0\u5f55\u6570\u6709\u5220\u51cf) 2021-02-19 13:38:15.860 [main] INFO VMInfo - VMInfo# operatingSystem class => com.sun.management.internal.OperatingSystemImpl 2021-02-19 13:38:15.895 [main] INFO Engine - { \"content\": { \"reader\":{ \"parameter\":{ \"accessId\":\"\", \"headers\":{}, \"endpoint\":\"http://127.0.0.1:9200\", \"search\":[ { \"query\": { \"match\": { \"col_ip\": \"1.1.1.1\" } }, \"aggregations\": { \"top_10_states\": { \"terms\": { \"field\": \"col_date\", \"size\": 10 } } } } ], \"accesskey\":\"*****\", \"searchType\":\"dfs_query_then_fetch\", \"scroll\":\"3m\", \"column\":[ \"col_ip\", \"col_double\", \"col_long\", \"col_integer\", \"col_keyword\", \"col_text\", \"col_geo_point\", \"col_date\" ], \"index\":\"test-1\", \"type\":\"default\" }, \"name\":\"elasticsearchreader\" }, \"writer\":{ \"parameter\":{ \"print\":true, \"encoding\":\"UTF-8\" }, \"name\":\"streamwriter\" } }, \"setting\":{ \"errorLimit\":{ \"record\":0, \"percentage\":0.02 }, \"speed\":{ \"byte\":-1, \"channel\":1 } } } 2021-02-19 13:38:15.934 [main] INFO PerfTrace - PerfTrace traceId=job_-1, isEnable=false, priority=0 2021-02-19 13:38:15.934 [main] INFO JobContainer - Addax jobContainer starts job. 2021-02-19 13:38:15.937 [main] INFO JobContainer - Set jobId = 0 2017-05-25T11:22:33.000+08:00 19890604 hello world 1.1.1.1 long text 19890604 19890604 41.12,-71.34 2017-05-25T11:22:33.000+08:00 19890604 hello world 1.1.1.1 long text 19890604 19890604 41.12,-71.34 2021-02-19 13:38:19.845 [job-0] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021-02-19 13:38:19.848 [job-0] INFO JobContainer - Addax Writer.Job [streamwriter] do post work. 2021-02-19 13:38:19.849 [job-0] INFO JobContainer - Addax Reader.Job [elasticsearchreader] do post work. 2021-02-19 13:38:19.855 [job-0] INFO JobContainer - PerfTrace not enable! 2021-02-19 13:38:19.858 [job-0] INFO StandAloneJobContainerCommunicator - Total 95 records, 8740 bytes | Speed 2.84KB/s, 31 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0.000s | All Task WaitReaderTime 0.103s | Percentage 100.00% 2021-02-19 13:38:19.861 [job-0] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-02-19 13:38:15 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-02-19 13:38:19 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 2.84KB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 31rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 2 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0","title":"\u793a\u4f8b"},{"location":"reader/elasticsearchreader/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 ElasticSearch\u7684\u8fde\u63a5\u5730\u5740 accessId \u5426 string \"\" http auth\u4e2d\u7684user accessKey \u5426 string \"\" http auth\u4e2d\u7684password index \u662f string \u65e0 elasticsearch\u4e2d\u7684index\u540d type \u5426 string index\u540d elasticsearch\u4e2dindex\u7684type\u540d search \u662f list [] json\u683c\u5f0fapi\u641c\u7d22\u6570\u636e\u4f53 column \u662f list \u65e0 \u9700\u8981\u8bfb\u53d6\u7684\u5b57\u6bb5 timeout \u5426 int 60 \u5ba2\u6237\u7aef\u8d85\u65f6\u65f6\u95f4\uff08\u5355\u4f4d\uff1a\u79d2) discovery \u5426 boolean false \u542f\u7528\u8282\u70b9\u53d1\u73b0\u5c06(\u8f6e\u8be2)\u5e76\u5b9a\u671f\u66f4\u65b0\u5ba2\u6237\u673a\u4e2d\u7684\u670d\u52a1\u5668\u5217\u8868 compression \u5426 boolean true http\u8bf7\u6c42\uff0c\u5f00\u542f\u538b\u7f29 multiThread \u5426 boolean true http\u8bf7\u6c42\uff0c\u662f\u5426\u6709\u591a\u7ebf\u7a0b searchType \u5426 string dfs_query_then_fetch \u641c\u7d22\u7c7b\u578b headers \u5426 map {} http\u8bf7\u6c42\u5934 scroll \u5426 string \"\" \u6eda\u52a8\u5206\u9875\u914d\u7f6e","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/elasticsearchreader/#search","text":"search \u914d\u7f6e\u9879\u5141\u8bb8\u914d\u7f6e\u4e3a\u6ee1\u8db3 Elasticsearch API \u67e5\u8be2\u8981\u6c42\u7684\u5185\u5bb9\uff0c\u6bd4\u5982\u8fd9\u6837\uff1a { \"query\" : { \"match\" : { \"message\" : \"myProduct\" } }, \"aggregations\" : { \"top_10_states\" : { \"terms\" : { \"field\" : \"state\" , \"size\" : 10 } } } }","title":"search"},{"location":"reader/elasticsearchreader/#searchtype","text":"searchType \u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u51e0\u79cd\uff1a dfs_query_then_fetch query_then_fetch count scan","title":"searchType"},{"location":"reader/excelreader/","text":"Excel Reader \u00b6 excelreader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece Microsoft Excel \u6587\u4ef6\u8bfb\u53d6\u6570\u636e\u7684\u80fd\u529b\u3002 \u914d\u7f6e \u00b6 \u83b7\u53d6\u6837\u4f8b\u6587\u4ef6 \u00b6 \u4ece \u8fd9\u91cc\u4e0b\u8f7d \u7528\u4e8e\u6f14\u793a\u7684Excel\u538b\u7f29\u6587\u4ef6\uff0c\u5e76\u89e3\u538b\u7f29\u653e\u7f6e\u5230 /tmp/in \u76ee\u5f55\u4e0b\u3002 \u4e09\u4e2a\u6587\u4ef6\u5939\u7684\u5185\u5bb9\u76f8\u540c\uff0c\u5176\u4e2d demo.xlsx \u662f Excel \u65b0\u683c\u5f0f demo.xls \u662f Excel \u8001\u683c\u5f0f demo_gbk.xlsx \u662f\u5728Windows\u4e0b\u521b\u5efa\uff0c\u5df2GBK\u7f16\u7801\u5b58\u50a8\u7684\u6587\u4ef6 \u6587\u4ef6\u5185\u5bb9\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8868\u5934\u5927\u81f4\u8bf4\u660e\u4e86\u5355\u5143\u6570\u636e\u7684\u7279\u5f81 \u521b\u5efa job \u6587\u4ef6 \u00b6 \u521b\u5efa\u5982\u4e0b json \u6587\u4ef6 excel2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"excelreader\" , \"parameter\" : { \"path\" : [ \"/tmp/in\" ], \"header\" : true , \"skipRows\" : 0 } }, \"writer\" : { \"parameter\" : { \"print\" : true }, \"name\" : \"streamwriter\" } } } } \u5c06\u8f93\u51fa\u5185\u5bb9\u5b58\u4fdd\u4e3a\u5230 job/excel2stream.json \u6587\u4ef6\u4e2d\uff0c\u6267\u884c\u91c7\u96c6\u547d\u4ee4\uff1a $ bin/addax.sh job/excel2stream.json \u5982\u679c\u6ca1\u6709\u62a5\u9519\uff0c\u5e94\u8be5\u5f97\u5230\u5982\u4e0b\u8f93\u51fa\uff1a \u70b9\u51fb\u5c55\u5f00 ___ _ _ / _ \\ | | | | / /_ \\ \\ __ | | __ | | __ ___ __ | _ | / _ ` | / _ ` | / _ ` \\ \\/ / | | | | ( _ | | ( _ | | ( _ | | > < \\_ | | _/ \\_ _,_ | \\_ _,_ | \\_ _,_/_/ \\_\\ :: Addax version :: ( v4.0.3 ) 2021 -09-09 14 :43:42.579 [ main ] INFO VMInfo - VMInfo# operatingSystem class = > sun.management.OperatingSystemImpl 2021 -09-09 14 :43:42.621 [ main ] INFO Engine - { \"content\" : { \"reader\" : { \"parameter\" : { \"path\" : [ \"/tmp/in\" ] , \"column\" : [ { \"name\" : \"no\" , \"type\" : \"long\" } , { \"name\" : \"birth\" , \"format\" : \"yyyy-MM-dd HH:mm:ss\" , \"type\" : \"date\" } , { \"name\" : \"kk\" , \"type\" : \"string\" } ] , \"header\" :true, \"skipHeader\" :true, \"encoding\" : \"UTF-8\" , \"fieldDelimiter\" : \",\" } , \"name\" : \"excelreader\" } , \"writer\" : { \"parameter\" : { \"print\" :true } , \"name\" : \"streamwriter\" } } , \"setting\" : { \"speed\" : { \"bytes\" :-1, \"channel\" :2 } } } 2021 -09-09 14 :43:42.653 [ main ] INFO PerfTrace - PerfTrace traceId = job_-1, isEnable = false, priority = 0 2021 -09-09 14 :43:42.653 [ main ] INFO JobContainer - Addax jobContainer starts job. 2021 -09-09 14 :43:42.655 [ main ] INFO JobContainer - Set jobId = 0 2021 -09-09 14 :43:42.669 [ job-0 ] INFO ExcelReader $Job - add file [ /tmp/in/demo_old.xls ] as a candidate to be read. 2021 -09-09 14 :43:42.669 [ job-0 ] INFO ExcelReader $Job - add file [ /tmp/in/demo_gbk.xlsx ] as a candidate to be read. 2021 -09-09 14 :43:42.670 [ job-0 ] INFO ExcelReader $Job - add file [ /tmp/in/demo.xlsx ] as a candidate to be read. 2021 -09-09 14 :43:42.670 [ job-0 ] INFO ExcelReader $Job - The number of files to read is: [ 3 ] 2021 -09-09 14 :43:42.677 [ job-0 ] INFO JobContainer - Addax Reader.Job [ excelreader ] do prepare work . 2021 -09-09 14 :43:42.678 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do prepare work . 2021 -09-09 14 :43:42.679 [ job-0 ] INFO JobContainer - Job set Channel-Number to 2 channels. 2021 -09-09 14 :43:42.681 [ job-0 ] INFO JobContainer - Addax Reader.Job [ excelreader ] splits to [ 3 ] tasks. 2021 -09-09 14 :43:42.682 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] splits to [ 3 ] tasks. 2021 -09-09 14 :43:42.727 [ job-0 ] INFO JobContainer - Scheduler starts [ 1 ] taskGroups. 2021 -09-09 14 :43:42.736 [ taskGroup-0 ] INFO TaskGroupContainer - taskGroupId =[ 0 ] start [ 2 ] channels for [ 3 ] tasks. 2021 -09-09 14 :43:42.741 [ taskGroup-0 ] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021 -09-09 14 :43:42.742 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 2021 -09-09 14 :43:42.755 [ 0 -0-1-reader ] INFO ExcelReader $Task - The first row is skipped as a table header 2021 -09-09 14 :43:42.755 [ 0 -0-1-reader ] INFO ExcelReader $Task - begin read file /tmp/in/demo.xlsx 2021 -09-09 14 :43:42.757 [ 0 -0-0-reader ] INFO ExcelReader $Task - The first row is skipped as a table header 2021 -09-09 14 :43:42.758 [ 0 -0-0-reader ] INFO ExcelReader $Task - begin read file /tmp/in/demo_gbk.xlsx 1 11 1102 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-10 00 :00:00 5544 .17 1102 .234 1 12 1103 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-11 00 :00:00 5552 .17 1103 .234 1 13 1104 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-12 00 :00:00 5560 .17 1104 .234 1 14 1105 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-13 00 :00:00 5568 .17 1105 .234 1 15 1106 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-14 00 :00:00 5576 .17 1106 .234 1 16 1107 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-15 00 :00:00 5584 .17 1107 .234 1 17 1108 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-16 00 :00:00 5592 .17 1108 .234 1 18 1109 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-17 00 :00:00 5600 .17 1109 .234 1 19 1110 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-18 00 :00:00 5608 .17 1110 .234 1 20 1111 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-19 00 :00:00 5616 .17 1111 .234 1 21 1112 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-20 00 :00:00 5624 .17 1112 .234 1 22 1113 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-21 00 :00:00 5632 .17 1113 .234 1 23 1114 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-22 00 :00:00 5640 .17 1114 .234 1 24 1115 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-23 00 :00:00 5648 .17 1115 .234 1 25 1116 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-24 00 :00:00 5656 .17 1116 .234 1 26 1117 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-25 00 :00:00 5664 .17 1117 .234 1 27 1118 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-26 00 :00:00 5672 .17 1118 .234 1 28 1119 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-27 00 :00:00 5680 .17 1119 .234 1 29 1120 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-28 00 :00:00 5688 .17 1120 .234 1 30 1121 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-29 00 :00:00 5696 .17 1121 .234 1 11 1102 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-10 00 :00:00 5544 .17 1102 .234 2 12 1103 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-11 00 :00:00 5552 .17 1103 .234 3 13 1104 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-12 00 :00:00 5560 .17 1104 .234 4 14 1105 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-13 00 :00:00 5568 .17 1105 .234 5 15 1106 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-14 00 :00:00 5576 .17 1106 .234 6 16 1107 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-15 00 :00:00 5584 .17 1107 .234 7 17 1108 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-16 00 :00:00 5592 .17 1108 .234 8 18 1109 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-17 00 :00:00 5600 .17 1109 .234 9 19 1110 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-18 00 :00:00 5608 .17 1110 .234 10 20 1111 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-19 00 :00:00 5616 .17 1111 .234 11 21 1112 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-20 00 :00:00 5624 .17 1112 .234 12 22 1113 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-21 00 :00:00 5632 .17 1113 .234 13 23 1114 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-22 00 :00:00 5640 .17 1114 .234 14 24 1115 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-23 00 :00:00 5648 .17 1115 .234 15 25 1116 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-24 00 :00:00 5656 .17 1116 .234 16 26 1117 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-25 00 :00:00 5664 .17 1117 .234 17 27 1118 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-26 00 :00:00 5672 .17 1118 .234 18 28 1119 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-27 00 :00:00 5680 .17 1119 .234 19 29 1120 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-28 00 :00:00 5688 .17 1120 .234 20 30 1121 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-29 00 :00:00 5696 .17 1121 .234 2021 -09-09 14 :43:43.894 [ 0 -0-2-reader ] INFO ExcelReader $Task - The first row is skipped as a table header 2021 -09-09 14 :43:43.894 [ 0 -0-2-reader ] INFO ExcelReader $Task - begin read file /tmp/in/demo_old.xls 1 11 1102 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-10 00 :00:00 5544 .17 1102 .234 2 12 1103 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-11 00 :00:00 5552 .17 1103 .234 3 13 1104 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-12 00 :00:00 5560 .17 1104 .234 4 14 1105 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-13 00 :00:00 5568 .17 1105 .234 5 15 1106 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-14 00 :00:00 5576 .17 1106 .234 6 16 1107 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-15 00 :00:00 5584 .17 1107 .234 7 17 1108 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-16 00 :00:00 5592 .17 1108 .234 8 18 1109 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-17 00 :00:00 5600 .17 1109 .234 9 19 1110 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-18 00 :00:00 5608 .17 1110 .234 10 20 1111 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-19 00 :00:00 5616 .17 1111 .234 11 21 1112 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-20 00 :00:00 5624 .17 1112 .234 12 22 1113 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-21 00 :00:00 5632 .17 1113 .234 13 23 1114 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-22 00 :00:00 5640 .17 1114 .234 14 24 1115 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-23 00 :00:00 5648 .17 1115 .234 15 25 1116 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-24 00 :00:00 5656 .17 1116 .234 16 26 1117 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-25 00 :00:00 5664 .17 1117 .234 17 27 1118 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-26 00 :00:00 5672 .17 1118 .234 18 28 1119 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-27 00 :00:00 5680 .17 1119 .234 19 29 1120 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-28 00 :00:00 5688 .17 1120 .234 20 30 1121 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-29 00 :00:00 5696 .17 1121 .234 2021 -09-09 14 :43:45.753 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -09-09 14 :43:45.754 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do post work. 2021 -09-09 14 :43:45.756 [ job-0 ] INFO JobContainer - Addax Reader.Job [ excelreader ] do post work. 2021 -09-09 14 :43:45.761 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -09-09 14 :43:45.762 [ job-0 ] INFO StandAloneJobContainerCommunicator - Total 60 records, 3360 bytes | Speed 1 .09KB/s, 20 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0 .000s | All Task WaitReaderTime 0 .993s | Percentage 100 .00% 2021 -09-09 14 :43:45.764 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -09-09 14 :43:42 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -09-09 14 :43:45 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 1 .09KB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 20rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 60 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f string/list \u65e0 \u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u5939\uff0c\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a header \u5426 boolean false \u6587\u4ef6\u662f\u5426\u5305\u542b\u5934 skipRows \u5426 int 0 \u8981\u8df3\u8fc7\u524d\u591a\u5c11\u884c header \u00b6 Excel \u6587\u4ef6\u662f\u5426\u5305\u542b\u5934\uff0c\u5982\u679c\u5305\u542b\uff0c\u5219\u8df3\u8fc7 skipRows \u00b6 \u6307\u5b9a\u8981\u8df3\u8fc7\u7684\u884c\u6570\uff0c \u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u4e0d\u8df3\u8fc7\u3002\u8fd9\u91cc\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5047\u5b9a \u8bbe\u7f6e\u4e86 header \u4e3a true\uff0c\u540c\u65f6\u8bbe\u7f6e skipRows \u4e3a 2\u3002\u5219\u8868\u793a\u524d\u4e09\u884c\u90fd\u8df3\u8fc7\u3002 \u5982\u679c header \u4e3a false\uff0c \u5219\u8868\u793a\u8df3\u8fc7\u524d\u4e24\u884c\u3002 \u652f\u6301\u7684\u6570\u636e\u7c7b\u578b \u00b6 Excel \u8bfb\u53d6\u529f\u80fd\u7684\u5b9e\u73b0\u4f9d\u8d56\u4e8e Apache POI \u9879\u76ee\uff0c\u8be5\u5b9e\u73b0\u5bf9\u5355\u5143\u683c\u7684\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u5f88\u5bbd\u6cdb\u3002 \u4ec5\u5b9a\u4e49\u4e86\u5e03\u5c14\u578b(Boolean)\uff0c\u6570\u503c\u578b\uff08Double)\uff0c\u5b57\u7b26\u4e32\u578b(String) \u4e09\u79cd\u3002\u5176\u4e2d\u6570\u503c\u578b\u5305\u62ec\u6240\u6709\u6574\u6570\uff0c\u5c0f\u6570\u548c\u65e5\u671f\u3002 \u76ee\u524d\u5bf9\u4e8e\u6570\u503c\u7c7b\u578b\u505a\u4e86\u7b80\u5355\u533a\u5206 \u4f7f\u7528\u5e93\u5de5\u5177\u7c7b\u63a2\u6d4b\u662f\u5426\u4e3a\u65e5\u671f\u7c7b\u578b\uff0c\u5982\u679c\u662f\uff0c\u5219\u5224\u65ad\u4e3a\u65e5\u671f\u7c7b\u578b \u5c06\u6570\u503c\u8f6c\u6362\u4e3a\u957f\u6574\u5f62\uff0c\u5e76\u548c\u539f\u503c\u6bd4\u8f83\uff0c\u5982\u679c\u5927\u5c0f\u76f8\u7b49\uff0c\u5219\u5224\u65ad\u4e3a\u957f\u6574\u578b(Long) \u5426\u5219\u5224\u65ad\u4e3a\u6d6e\u70b9\u578b\uff08Double\uff09 \u9650\u5236 \u00b6 \u5f53\u524d\u4ec5\u8bfb\u53d6\u6587\u4ef6\u7684\u7b2c\u4e00\u4e2a Sheet \u800c\u5ffd\u7565\u5176\u4ed6 Sheets \u6682\u4e0d\u652f\u6301\u6307\u5b9a\u5217\u8bfb\u53d6 \u6682\u4e0d\u652f\u6301\u8df3\u8fc7\u5c3e\u90e8\u884c\u6570\uff08\u6bd4\u5982\u6709\u603b\u7ed3\u7684\u5c3e\u884c\u53ef\u80fd\u5e76\u4e0d\u7b26\u5408\u8981\u6c42\uff09 \u6682\u4e0d\u5224\u65ad\u6bcf\u4e00\u884c\u7684\u5217\u6570\u662f\u5426\u76f8\u7b49\uff0c\u9700\u8981 Excel \u81ea\u884c\u4fdd\u8bc1 \u4ec5\u4f1a\u8bfb\u53d6\u6307\u5b9a\u76ee\u5f55\u4e0b\u6587\u4ef6\u540e\u7f00\u4e3a xlsx \u6216 xls \u7684\u6587\u4ef6\uff0c\u5176\u4ed6\u540e\u7f00\u6587\u4ef6\u5c06\u4f1a\u5ffd\u7565\u5e76\u7ed9\u51fa\u544a\u8b66\u6d88\u606f","title":"Excel Reader"},{"location":"reader/excelreader/#excel-reader","text":"excelreader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece Microsoft Excel \u6587\u4ef6\u8bfb\u53d6\u6570\u636e\u7684\u80fd\u529b\u3002","title":"Excel Reader"},{"location":"reader/excelreader/#_1","text":"","title":"\u914d\u7f6e"},{"location":"reader/excelreader/#_2","text":"\u4ece \u8fd9\u91cc\u4e0b\u8f7d \u7528\u4e8e\u6f14\u793a\u7684Excel\u538b\u7f29\u6587\u4ef6\uff0c\u5e76\u89e3\u538b\u7f29\u653e\u7f6e\u5230 /tmp/in \u76ee\u5f55\u4e0b\u3002 \u4e09\u4e2a\u6587\u4ef6\u5939\u7684\u5185\u5bb9\u76f8\u540c\uff0c\u5176\u4e2d demo.xlsx \u662f Excel \u65b0\u683c\u5f0f demo.xls \u662f Excel \u8001\u683c\u5f0f demo_gbk.xlsx \u662f\u5728Windows\u4e0b\u521b\u5efa\uff0c\u5df2GBK\u7f16\u7801\u5b58\u50a8\u7684\u6587\u4ef6 \u6587\u4ef6\u5185\u5bb9\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8868\u5934\u5927\u81f4\u8bf4\u660e\u4e86\u5355\u5143\u6570\u636e\u7684\u7279\u5f81","title":"\u83b7\u53d6\u6837\u4f8b\u6587\u4ef6"},{"location":"reader/excelreader/#job","text":"\u521b\u5efa\u5982\u4e0b json \u6587\u4ef6 excel2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"excelreader\" , \"parameter\" : { \"path\" : [ \"/tmp/in\" ], \"header\" : true , \"skipRows\" : 0 } }, \"writer\" : { \"parameter\" : { \"print\" : true }, \"name\" : \"streamwriter\" } } } } \u5c06\u8f93\u51fa\u5185\u5bb9\u5b58\u4fdd\u4e3a\u5230 job/excel2stream.json \u6587\u4ef6\u4e2d\uff0c\u6267\u884c\u91c7\u96c6\u547d\u4ee4\uff1a $ bin/addax.sh job/excel2stream.json \u5982\u679c\u6ca1\u6709\u62a5\u9519\uff0c\u5e94\u8be5\u5f97\u5230\u5982\u4e0b\u8f93\u51fa\uff1a \u70b9\u51fb\u5c55\u5f00 ___ _ _ / _ \\ | | | | / /_ \\ \\ __ | | __ | | __ ___ __ | _ | / _ ` | / _ ` | / _ ` \\ \\/ / | | | | ( _ | | ( _ | | ( _ | | > < \\_ | | _/ \\_ _,_ | \\_ _,_ | \\_ _,_/_/ \\_\\ :: Addax version :: ( v4.0.3 ) 2021 -09-09 14 :43:42.579 [ main ] INFO VMInfo - VMInfo# operatingSystem class = > sun.management.OperatingSystemImpl 2021 -09-09 14 :43:42.621 [ main ] INFO Engine - { \"content\" : { \"reader\" : { \"parameter\" : { \"path\" : [ \"/tmp/in\" ] , \"column\" : [ { \"name\" : \"no\" , \"type\" : \"long\" } , { \"name\" : \"birth\" , \"format\" : \"yyyy-MM-dd HH:mm:ss\" , \"type\" : \"date\" } , { \"name\" : \"kk\" , \"type\" : \"string\" } ] , \"header\" :true, \"skipHeader\" :true, \"encoding\" : \"UTF-8\" , \"fieldDelimiter\" : \",\" } , \"name\" : \"excelreader\" } , \"writer\" : { \"parameter\" : { \"print\" :true } , \"name\" : \"streamwriter\" } } , \"setting\" : { \"speed\" : { \"bytes\" :-1, \"channel\" :2 } } } 2021 -09-09 14 :43:42.653 [ main ] INFO PerfTrace - PerfTrace traceId = job_-1, isEnable = false, priority = 0 2021 -09-09 14 :43:42.653 [ main ] INFO JobContainer - Addax jobContainer starts job. 2021 -09-09 14 :43:42.655 [ main ] INFO JobContainer - Set jobId = 0 2021 -09-09 14 :43:42.669 [ job-0 ] INFO ExcelReader $Job - add file [ /tmp/in/demo_old.xls ] as a candidate to be read. 2021 -09-09 14 :43:42.669 [ job-0 ] INFO ExcelReader $Job - add file [ /tmp/in/demo_gbk.xlsx ] as a candidate to be read. 2021 -09-09 14 :43:42.670 [ job-0 ] INFO ExcelReader $Job - add file [ /tmp/in/demo.xlsx ] as a candidate to be read. 2021 -09-09 14 :43:42.670 [ job-0 ] INFO ExcelReader $Job - The number of files to read is: [ 3 ] 2021 -09-09 14 :43:42.677 [ job-0 ] INFO JobContainer - Addax Reader.Job [ excelreader ] do prepare work . 2021 -09-09 14 :43:42.678 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do prepare work . 2021 -09-09 14 :43:42.679 [ job-0 ] INFO JobContainer - Job set Channel-Number to 2 channels. 2021 -09-09 14 :43:42.681 [ job-0 ] INFO JobContainer - Addax Reader.Job [ excelreader ] splits to [ 3 ] tasks. 2021 -09-09 14 :43:42.682 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] splits to [ 3 ] tasks. 2021 -09-09 14 :43:42.727 [ job-0 ] INFO JobContainer - Scheduler starts [ 1 ] taskGroups. 2021 -09-09 14 :43:42.736 [ taskGroup-0 ] INFO TaskGroupContainer - taskGroupId =[ 0 ] start [ 2 ] channels for [ 3 ] tasks. 2021 -09-09 14 :43:42.741 [ taskGroup-0 ] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021 -09-09 14 :43:42.742 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 2021 -09-09 14 :43:42.755 [ 0 -0-1-reader ] INFO ExcelReader $Task - The first row is skipped as a table header 2021 -09-09 14 :43:42.755 [ 0 -0-1-reader ] INFO ExcelReader $Task - begin read file /tmp/in/demo.xlsx 2021 -09-09 14 :43:42.757 [ 0 -0-0-reader ] INFO ExcelReader $Task - The first row is skipped as a table header 2021 -09-09 14 :43:42.758 [ 0 -0-0-reader ] INFO ExcelReader $Task - begin read file /tmp/in/demo_gbk.xlsx 1 11 1102 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-10 00 :00:00 5544 .17 1102 .234 1 12 1103 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-11 00 :00:00 5552 .17 1103 .234 1 13 1104 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-12 00 :00:00 5560 .17 1104 .234 1 14 1105 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-13 00 :00:00 5568 .17 1105 .234 1 15 1106 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-14 00 :00:00 5576 .17 1106 .234 1 16 1107 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-15 00 :00:00 5584 .17 1107 .234 1 17 1108 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-16 00 :00:00 5592 .17 1108 .234 1 18 1109 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-17 00 :00:00 5600 .17 1109 .234 1 19 1110 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-18 00 :00:00 5608 .17 1110 .234 1 20 1111 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-19 00 :00:00 5616 .17 1111 .234 1 21 1112 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-20 00 :00:00 5624 .17 1112 .234 1 22 1113 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-21 00 :00:00 5632 .17 1113 .234 1 23 1114 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-22 00 :00:00 5640 .17 1114 .234 1 24 1115 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-23 00 :00:00 5648 .17 1115 .234 1 25 1116 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-24 00 :00:00 5656 .17 1116 .234 1 26 1117 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-25 00 :00:00 5664 .17 1117 .234 1 27 1118 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-26 00 :00:00 5672 .17 1118 .234 1 28 1119 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-27 00 :00:00 5680 .17 1119 .234 1 29 1120 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-28 00 :00:00 5688 .17 1120 .234 1 30 1121 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-29 00 :00:00 5696 .17 1121 .234 1 11 1102 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-10 00 :00:00 5544 .17 1102 .234 2 12 1103 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-11 00 :00:00 5552 .17 1103 .234 3 13 1104 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-12 00 :00:00 5560 .17 1104 .234 4 14 1105 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-13 00 :00:00 5568 .17 1105 .234 5 15 1106 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-14 00 :00:00 5576 .17 1106 .234 6 16 1107 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-15 00 :00:00 5584 .17 1107 .234 7 17 1108 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-16 00 :00:00 5592 .17 1108 .234 8 18 1109 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-17 00 :00:00 5600 .17 1109 .234 9 19 1110 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-18 00 :00:00 5608 .17 1110 .234 10 20 1111 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-19 00 :00:00 5616 .17 1111 .234 11 21 1112 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-20 00 :00:00 5624 .17 1112 .234 12 22 1113 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-21 00 :00:00 5632 .17 1113 .234 13 23 1114 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-22 00 :00:00 5640 .17 1114 .234 14 24 1115 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-23 00 :00:00 5648 .17 1115 .234 15 25 1116 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-24 00 :00:00 5656 .17 1116 .234 16 26 1117 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-25 00 :00:00 5664 .17 1117 .234 17 27 1118 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-26 00 :00:00 5672 .17 1118 .234 18 28 1119 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-27 00 :00:00 5680 .17 1119 .234 19 29 1120 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-28 00 :00:00 5688 .17 1120 .234 20 30 1121 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-29 00 :00:00 5696 .17 1121 .234 2021 -09-09 14 :43:43.894 [ 0 -0-2-reader ] INFO ExcelReader $Task - The first row is skipped as a table header 2021 -09-09 14 :43:43.894 [ 0 -0-2-reader ] INFO ExcelReader $Task - begin read file /tmp/in/demo_old.xls 1 11 1102 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-10 00 :00:00 5544 .17 1102 .234 2 12 1103 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-11 00 :00:00 5552 .17 1103 .234 3 13 1104 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-12 00 :00:00 5560 .17 1104 .234 4 14 1105 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-13 00 :00:00 5568 .17 1105 .234 5 15 1106 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-14 00 :00:00 5576 .17 1106 .234 6 16 1107 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-15 00 :00:00 5584 .17 1107 .234 7 17 1108 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-16 00 :00:00 5592 .17 1108 .234 8 18 1109 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-17 00 :00:00 5600 .17 1109 .234 9 19 1110 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-18 00 :00:00 5608 .17 1110 .234 10 20 1111 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-19 00 :00:00 5616 .17 1111 .234 11 21 1112 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-20 00 :00:00 5624 .17 1112 .234 12 22 1113 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-21 00 :00:00 5632 .17 1113 .234 13 23 1114 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-22 00 :00:00 5640 .17 1114 .234 14 24 1115 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-23 00 :00:00 5648 .17 1115 .234 15 25 1116 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-24 00 :00:00 5656 .17 1116 .234 16 26 1117 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-25 00 :00:00 5664 .17 1117 .234 17 27 1118 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-26 00 :00:00 5672 .17 1118 .234 18 28 1119 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-27 00 :00:00 5680 .17 1119 .234 19 29 1120 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-28 00 :00:00 5688 .17 1120 .234 20 30 1121 .234 Addax\u52a0\u4e0a\u4e2d\u6587 2021 -09-29 00 :00:00 5696 .17 1121 .234 2021 -09-09 14 :43:45.753 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -09-09 14 :43:45.754 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do post work. 2021 -09-09 14 :43:45.756 [ job-0 ] INFO JobContainer - Addax Reader.Job [ excelreader ] do post work. 2021 -09-09 14 :43:45.761 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -09-09 14 :43:45.762 [ job-0 ] INFO StandAloneJobContainerCommunicator - Total 60 records, 3360 bytes | Speed 1 .09KB/s, 20 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0 .000s | All Task WaitReaderTime 0 .993s | Percentage 100 .00% 2021 -09-09 14 :43:45.764 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -09-09 14 :43:42 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -09-09 14 :43:45 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 1 .09KB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 20rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 60 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0","title":"\u521b\u5efa job \u6587\u4ef6"},{"location":"reader/excelreader/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f string/list \u65e0 \u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u5939\uff0c\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a header \u5426 boolean false \u6587\u4ef6\u662f\u5426\u5305\u542b\u5934 skipRows \u5426 int 0 \u8981\u8df3\u8fc7\u524d\u591a\u5c11\u884c","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/excelreader/#header","text":"Excel \u6587\u4ef6\u662f\u5426\u5305\u542b\u5934\uff0c\u5982\u679c\u5305\u542b\uff0c\u5219\u8df3\u8fc7","title":"header"},{"location":"reader/excelreader/#skiprows","text":"\u6307\u5b9a\u8981\u8df3\u8fc7\u7684\u884c\u6570\uff0c \u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u4e0d\u8df3\u8fc7\u3002\u8fd9\u91cc\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5047\u5b9a \u8bbe\u7f6e\u4e86 header \u4e3a true\uff0c\u540c\u65f6\u8bbe\u7f6e skipRows \u4e3a 2\u3002\u5219\u8868\u793a\u524d\u4e09\u884c\u90fd\u8df3\u8fc7\u3002 \u5982\u679c header \u4e3a false\uff0c \u5219\u8868\u793a\u8df3\u8fc7\u524d\u4e24\u884c\u3002","title":"skipRows"},{"location":"reader/excelreader/#_4","text":"Excel \u8bfb\u53d6\u529f\u80fd\u7684\u5b9e\u73b0\u4f9d\u8d56\u4e8e Apache POI \u9879\u76ee\uff0c\u8be5\u5b9e\u73b0\u5bf9\u5355\u5143\u683c\u7684\u6570\u636e\u7c7b\u578b\u5b9a\u4e49\u5f88\u5bbd\u6cdb\u3002 \u4ec5\u5b9a\u4e49\u4e86\u5e03\u5c14\u578b(Boolean)\uff0c\u6570\u503c\u578b\uff08Double)\uff0c\u5b57\u7b26\u4e32\u578b(String) \u4e09\u79cd\u3002\u5176\u4e2d\u6570\u503c\u578b\u5305\u62ec\u6240\u6709\u6574\u6570\uff0c\u5c0f\u6570\u548c\u65e5\u671f\u3002 \u76ee\u524d\u5bf9\u4e8e\u6570\u503c\u7c7b\u578b\u505a\u4e86\u7b80\u5355\u533a\u5206 \u4f7f\u7528\u5e93\u5de5\u5177\u7c7b\u63a2\u6d4b\u662f\u5426\u4e3a\u65e5\u671f\u7c7b\u578b\uff0c\u5982\u679c\u662f\uff0c\u5219\u5224\u65ad\u4e3a\u65e5\u671f\u7c7b\u578b \u5c06\u6570\u503c\u8f6c\u6362\u4e3a\u957f\u6574\u5f62\uff0c\u5e76\u548c\u539f\u503c\u6bd4\u8f83\uff0c\u5982\u679c\u5927\u5c0f\u76f8\u7b49\uff0c\u5219\u5224\u65ad\u4e3a\u957f\u6574\u578b(Long) \u5426\u5219\u5224\u65ad\u4e3a\u6d6e\u70b9\u578b\uff08Double\uff09","title":"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b"},{"location":"reader/excelreader/#_5","text":"\u5f53\u524d\u4ec5\u8bfb\u53d6\u6587\u4ef6\u7684\u7b2c\u4e00\u4e2a Sheet \u800c\u5ffd\u7565\u5176\u4ed6 Sheets \u6682\u4e0d\u652f\u6301\u6307\u5b9a\u5217\u8bfb\u53d6 \u6682\u4e0d\u652f\u6301\u8df3\u8fc7\u5c3e\u90e8\u884c\u6570\uff08\u6bd4\u5982\u6709\u603b\u7ed3\u7684\u5c3e\u884c\u53ef\u80fd\u5e76\u4e0d\u7b26\u5408\u8981\u6c42\uff09 \u6682\u4e0d\u5224\u65ad\u6bcf\u4e00\u884c\u7684\u5217\u6570\u662f\u5426\u76f8\u7b49\uff0c\u9700\u8981 Excel \u81ea\u884c\u4fdd\u8bc1 \u4ec5\u4f1a\u8bfb\u53d6\u6307\u5b9a\u76ee\u5f55\u4e0b\u6587\u4ef6\u540e\u7f00\u4e3a xlsx \u6216 xls \u7684\u6587\u4ef6\uff0c\u5176\u4ed6\u540e\u7f00\u6587\u4ef6\u5c06\u4f1a\u5ffd\u7565\u5e76\u7ed9\u51fa\u544a\u8b66\u6d88\u606f","title":"\u9650\u5236"},{"location":"reader/ftpreader/","text":"Ftp Reader \u00b6 FtpReader \u63d0\u4f9b\u4e86\u8bfb\u53d6\u8fdc\u7a0b FTP/SFTP \u6587\u4ef6\u7cfb\u7edf\u6570\u636e\u5b58\u50a8\u7684\u80fd\u529b\u3002 \u529f\u80fd\u8bf4\u660e \u00b6 \u914d\u7f6e\u6837\u4f8b \u00b6 job/ftp2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"ftpreader\" , \"parameter\" : { \"protocol\" : \"sftp\" , \"host\" : \"127.0.0.1\" , \"port\" : 22 , \"username\" : \"xx\" , \"password\" : \"xxx\" , \"path\" : [ \"/var/pub/ftpReaderTest/data\" ], \"column\" : [ { \"index\" : 0 , \"type\" : \"long\" }, { \"index\" : 1 , \"type\" : \"boolean\" }, { \"index\" : 2 , \"type\" : \"double\" }, { \"index\" : 3 , \"type\" : \"string\" }, { \"index\" : 4 , \"type\" : \"date\" , \"format\" : \"yyyy.MM.dd\" } ], \"encoding\" : \"UTF-8\" , \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"ftpWriter\" , \"parameter\" : { \"path\" : \"/var/ftp/FtpWriter/result\" , \"fileName\" : \"shihf\" , \"writeMode\" : \"truncate\" , \"format\" : \"yyyy-MM-dd\" } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 protocol \u662f \u65e0 ftp\u670d\u52a1\u5668\u534f\u8bae\uff0c\u76ee\u524d\u652f\u6301\u4f20\u8f93\u534f\u8bae\u6709ftp\u548csftp host \u662f \u65e0 ftp\u670d\u52a1\u5668\u5730\u5740 port \u5426 22/21 \u82e5\u4f20\u8f93\u534f\u8bae\u662fsftp\u534f\u8bae\uff0c\u9ed8\u8ba4\u503c\u662f22\uff1b\u82e5\u4f20\u8f93\u534f\u8bae\u662f\u6807\u51c6ftp\u534f\u8bae\uff0c\u9ed8\u8ba4\u503c\u662f21 timeout \u5426 60000 \u8fde\u63a5ftp\u670d\u52a1\u5668\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u6beb\u79d2(ms) connectPattern \u5426 PASV \u8fde\u63a5\u6a21\u5f0f\uff0c\u4ec5\u652f\u6301 PORT , PASV \u6a21\u5f0f\u3002\u8be5\u53c2\u6570\u53ea\u5728\u4f20\u8f93\u534f\u8bae\u662f\u6807\u51c6ftp\u534f\u8bae\u65f6\u4f7f\u7528 username \u662f \u65e0 ftp\u670d\u52a1\u5668\u8bbf\u95ee\u7528\u6237\u540d password \u662f \u65e0 ftp\u670d\u52a1\u5668\u8bbf\u95ee\u5bc6\u7801 path \u662f \u65e0 \u8fdc\u7a0bFTP\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1\u4e0b column \u662f \u9ed8\u8ba4String\u7c7b\u578b \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c\u8be6\u89c1\u4e0b\u6587 fieldDelimiter \u662f , \u63cf\u8ff0\uff1a\u8bfb\u53d6\u7684\u5b57\u6bb5\u5206\u9694\u7b26 compress \u5426 \u65e0 \u6587\u672c\u538b\u7f29\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4e0d\u586b\u5199\u610f\u5473\u7740\u6ca1\u6709\u538b\u7f29\u3002\u652f\u6301\u538b\u7f29\u7c7b\u578b\u4e3azip\u3001gzip\u3001bzip2 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e skipHeader \u5426 false \u7c7bCSV\u683c\u5f0f\u6587\u4ef6\u53ef\u80fd\u5b58\u5728\u8868\u5934\u4e3a\u6807\u9898\u60c5\u51b5\uff0c\u9700\u8981\u8df3\u8fc7\u3002\u9ed8\u8ba4\u4e0d\u8df3\u8fc7 nullFormat \u5426 \\N \u5b9a\u4e49\u54ea\u4e9b\u5b57\u7b26\u4e32\u53ef\u4ee5\u8868\u793a\u4e3anull maxTraversalLevel \u5426 100 \u5141\u8bb8\u904d\u5386\u6587\u4ef6\u5939\u7684\u6700\u5927\u5c42\u6570 csvReaderConfig \u5426 \u65e0 \u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u53c2\u6570\u914d\u7f6e\uff0cMap\u7c7b\u578b\u3002\u4e0d\u914d\u7f6e\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c,\u8be6\u89c1\u4e0b\u6587 path \u00b6 \u8fdc\u7a0bFTP\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84\u3002 \u5f53\u6307\u5b9a\u5355\u4e2a\u8fdc\u7a0bFTP\u6587\u4ef6\uff0cFtpReader\u6682\u65f6\u53ea\u80fd\u4f7f\u7528\u5355\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u4e8c\u671f\u8003\u8651\u5728\u975e\u538b\u7f29\u6587\u4ef6\u60c5\u51b5\u4e0b\u9488\u5bf9\u5355\u4e2aFile\u53ef\u4ee5\u8fdb\u884c\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6 = \u5f53\u6307\u5b9a\u591a\u4e2a\u8fdc\u7a0bFTP\u6587\u4ef6\uff0cFtpReader\u652f\u6301\u4f7f\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u7ebf\u7a0b\u5e76\u53d1\u6570\u901a\u8fc7\u901a\u9053\u6570\u6307\u5b9a \u5f53\u6307\u5b9a\u901a\u914d\u7b26\uff0cFtpReader\u5c1d\u8bd5\u904d\u5386\u51fa\u591a\u4e2a\u6587\u4ef6\u4fe1\u606f\u3002\u4f8b\u5982: \u6307\u5b9a /* \u4ee3\u8868\u8bfb\u53d6/\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\uff0c\u6307\u5b9a /bazhen/* \u4ee3\u8868\u8bfb\u53d6 bazhen \u76ee\u5f55\u4e0b\u6e38\u6240\u6709\u7684\u6587\u4ef6\u3002\u76ee\u524d\u53ea\u652f\u6301 * \u4f5c\u4e3a\u6587\u4ef6\u901a\u914d\u7b26\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cAddax\u4f1a\u5c06\u4e00\u4e2a\u4f5c\u4e1a\u4e0b\u540c\u6b65\u7684\u6240\u6709Text File\u89c6\u4f5c\u540c\u4e00\u5f20\u6570\u636e\u8868\u3002\u7528\u6237\u5fc5\u987b\u81ea\u5df1\u4fdd\u8bc1\u6240\u6709\u7684File\u80fd\u591f\u9002\u914d\u540c\u4e00\u5957schema\u4fe1\u606f\u3002\u8bfb\u53d6\u6587\u4ef6\u7528\u6237\u5fc5\u987b\u4fdd\u8bc1\u4e3a\u7c7bCSV\u683c\u5f0f\uff0c\u5e76\u4e14\u63d0\u4f9b\u7ed9Addax\u6743\u9650\u53ef\u8bfb\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679cPath\u6307\u5b9a\u7684\u8def\u5f84\u4e0b\u6ca1\u6709\u7b26\u5408\u5339\u914d\u7684\u6587\u4ef6\u62bd\u53d6\uff0cAddax\u5c06\u62a5\u9519\u3002 column \u00b6 \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0cindex\u6307\u5b9a\u5f53\u524d\u5217\u6765\u81ea\u4e8e\u6587\u672c\u7b2c\u51e0\u5217(\u4ee50\u5f00\u59cb)\uff0cvalue\u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece\u6e90\u5934\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636evalue\u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u53ef\u4ee5\u5168\u90e8\u6309\u7167String\u7c7b\u578b\u8bfb\u53d6\u6570\u636e\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"column\" : [ \"*\" ] } \u7528\u6237\u53ef\u4ee5\u6307\u5b9aColumn\u5b57\u6bb5\u4fe1\u606f\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a [ { \"type\" : \"long\" , \"index\" : 0 , \"description\" : \"\u4ece\u8fdc\u7a0bFTP\u6587\u4ef6\u6587\u672c\u7b2c\u4e00\u5217\u83b7\u53d6int\u5b57\u6bb5\" }, { \"type\" : \"string\" , \"value\" : \"addax\" , \"description\" : \"\u4eceFtpReader\u5185\u90e8\u751f\u6210alibaba\u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\u4f5c\u4e3a\u5f53\u524d\u5b57\u6bb5\" } ] \u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cindex/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002 csvReaderConfig \u00b6 \u5e38\u89c1\u914d\u7f6e\uff1a { \"csvReaderConfig\" : { \"safetySwitch\" : false , \"skipEmptyRecords\" : false , \"useTextQualifier\" : false } } \u6240\u6709\u914d\u7f6e\u9879\u53ca\u9ed8\u8ba4\u503c,\u914d\u7f6e\u65f6 csvReaderConfig \u7684map\u4e2d\u8bf7**\u4e25\u683c\u6309\u7167\u4ee5\u4e0b\u5b57\u6bb5\u540d\u5b57\u8fdb\u884c\u914d\u7f6e**\uff1a boolean caseSensitive = true; char textQualifier = 34; boolean trimWhitespace = true; boolean useTextQualifier = true;//\u662f\u5426\u4f7f\u7528csv\u8f6c\u4e49\u5b57\u7b26 char delimiter = 44;//\u5206\u9694\u7b26 char recordDelimiter = 0; char comment = 35; boolean useComments = false; int escapeMode = 1; boolean safetySwitch = true;//\u5355\u5217\u957f\u5ea6\u662f\u5426\u9650\u5236100000\u5b57\u7b26 boolean skipEmptyRecords = true;//\u662f\u5426\u8df3\u8fc7\u7a7a\u884c boolean captureRawRecord = true; \u7c7b\u578b\u8f6c\u6362 \u00b6 \u8fdc\u7a0bFTP\u6587\u4ef6\u672c\u8eab\u4e0d\u63d0\u4f9b\u6570\u636e\u7c7b\u578b\uff0c\u8be5\u7c7b\u578b\u662fAddax FtpReader\u5b9a\u4e49\uff1a Addax \u5185\u90e8\u7c7b\u578b \u8fdc\u7a0bFTP\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long Double Double String String Boolean Boolean Date Date \u5176\u4e2d\uff1a Long \u662f\u6307\u8fdc\u7a0bFTP\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528\u6574\u5f62\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982\"19901219\"\u3002 Double \u662f\u6307\u8fdc\u7a0bFTP\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Double\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982\"3.1415\"\u3002 Boolean \u662f\u6307\u8fdc\u7a0bFTP\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Boolean\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982\"true\"\u3001\"false\"\u3002\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002 Date \u662f\u6307\u8fdc\u7a0bFTP\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Date\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982\"2014-12-31\"\uff0cDate\u53ef\u4ee5\u6307\u5b9aformat\u683c\u5f0f\u3002 \u9650\u5236 \u00b6 \u5355\u4e2aFile\u652f\u6301\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6\uff0c\u8fd9\u91cc\u6d89\u53ca\u5230\u5355\u4e2aFile\u5185\u90e8\u5207\u5206\u7b97\u6cd5 \u5355\u4e2aFile\u5728\u538b\u7f29\u60c5\u51b5\u4e0b\uff0c\u4ece\u6280\u672f\u4e0a\u65e0\u6cd5\u652f\u6301\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6\u3002","title":"Ftp Reader"},{"location":"reader/ftpreader/#ftp-reader","text":"FtpReader \u63d0\u4f9b\u4e86\u8bfb\u53d6\u8fdc\u7a0b FTP/SFTP \u6587\u4ef6\u7cfb\u7edf\u6570\u636e\u5b58\u50a8\u7684\u80fd\u529b\u3002","title":"Ftp Reader"},{"location":"reader/ftpreader/#_1","text":"","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"reader/ftpreader/#_2","text":"job/ftp2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"ftpreader\" , \"parameter\" : { \"protocol\" : \"sftp\" , \"host\" : \"127.0.0.1\" , \"port\" : 22 , \"username\" : \"xx\" , \"password\" : \"xxx\" , \"path\" : [ \"/var/pub/ftpReaderTest/data\" ], \"column\" : [ { \"index\" : 0 , \"type\" : \"long\" }, { \"index\" : 1 , \"type\" : \"boolean\" }, { \"index\" : 2 , \"type\" : \"double\" }, { \"index\" : 3 , \"type\" : \"string\" }, { \"index\" : 4 , \"type\" : \"date\" , \"format\" : \"yyyy.MM.dd\" } ], \"encoding\" : \"UTF-8\" , \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"ftpWriter\" , \"parameter\" : { \"path\" : \"/var/ftp/FtpWriter/result\" , \"fileName\" : \"shihf\" , \"writeMode\" : \"truncate\" , \"format\" : \"yyyy-MM-dd\" } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"reader/ftpreader/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 protocol \u662f \u65e0 ftp\u670d\u52a1\u5668\u534f\u8bae\uff0c\u76ee\u524d\u652f\u6301\u4f20\u8f93\u534f\u8bae\u6709ftp\u548csftp host \u662f \u65e0 ftp\u670d\u52a1\u5668\u5730\u5740 port \u5426 22/21 \u82e5\u4f20\u8f93\u534f\u8bae\u662fsftp\u534f\u8bae\uff0c\u9ed8\u8ba4\u503c\u662f22\uff1b\u82e5\u4f20\u8f93\u534f\u8bae\u662f\u6807\u51c6ftp\u534f\u8bae\uff0c\u9ed8\u8ba4\u503c\u662f21 timeout \u5426 60000 \u8fde\u63a5ftp\u670d\u52a1\u5668\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u6beb\u79d2(ms) connectPattern \u5426 PASV \u8fde\u63a5\u6a21\u5f0f\uff0c\u4ec5\u652f\u6301 PORT , PASV \u6a21\u5f0f\u3002\u8be5\u53c2\u6570\u53ea\u5728\u4f20\u8f93\u534f\u8bae\u662f\u6807\u51c6ftp\u534f\u8bae\u65f6\u4f7f\u7528 username \u662f \u65e0 ftp\u670d\u52a1\u5668\u8bbf\u95ee\u7528\u6237\u540d password \u662f \u65e0 ftp\u670d\u52a1\u5668\u8bbf\u95ee\u5bc6\u7801 path \u662f \u65e0 \u8fdc\u7a0bFTP\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1\u4e0b column \u662f \u9ed8\u8ba4String\u7c7b\u578b \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c\u8be6\u89c1\u4e0b\u6587 fieldDelimiter \u662f , \u63cf\u8ff0\uff1a\u8bfb\u53d6\u7684\u5b57\u6bb5\u5206\u9694\u7b26 compress \u5426 \u65e0 \u6587\u672c\u538b\u7f29\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4e0d\u586b\u5199\u610f\u5473\u7740\u6ca1\u6709\u538b\u7f29\u3002\u652f\u6301\u538b\u7f29\u7c7b\u578b\u4e3azip\u3001gzip\u3001bzip2 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e skipHeader \u5426 false \u7c7bCSV\u683c\u5f0f\u6587\u4ef6\u53ef\u80fd\u5b58\u5728\u8868\u5934\u4e3a\u6807\u9898\u60c5\u51b5\uff0c\u9700\u8981\u8df3\u8fc7\u3002\u9ed8\u8ba4\u4e0d\u8df3\u8fc7 nullFormat \u5426 \\N \u5b9a\u4e49\u54ea\u4e9b\u5b57\u7b26\u4e32\u53ef\u4ee5\u8868\u793a\u4e3anull maxTraversalLevel \u5426 100 \u5141\u8bb8\u904d\u5386\u6587\u4ef6\u5939\u7684\u6700\u5927\u5c42\u6570 csvReaderConfig \u5426 \u65e0 \u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u53c2\u6570\u914d\u7f6e\uff0cMap\u7c7b\u578b\u3002\u4e0d\u914d\u7f6e\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c,\u8be6\u89c1\u4e0b\u6587","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/ftpreader/#path","text":"\u8fdc\u7a0bFTP\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84\u3002 \u5f53\u6307\u5b9a\u5355\u4e2a\u8fdc\u7a0bFTP\u6587\u4ef6\uff0cFtpReader\u6682\u65f6\u53ea\u80fd\u4f7f\u7528\u5355\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u4e8c\u671f\u8003\u8651\u5728\u975e\u538b\u7f29\u6587\u4ef6\u60c5\u51b5\u4e0b\u9488\u5bf9\u5355\u4e2aFile\u53ef\u4ee5\u8fdb\u884c\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6 = \u5f53\u6307\u5b9a\u591a\u4e2a\u8fdc\u7a0bFTP\u6587\u4ef6\uff0cFtpReader\u652f\u6301\u4f7f\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u7ebf\u7a0b\u5e76\u53d1\u6570\u901a\u8fc7\u901a\u9053\u6570\u6307\u5b9a \u5f53\u6307\u5b9a\u901a\u914d\u7b26\uff0cFtpReader\u5c1d\u8bd5\u904d\u5386\u51fa\u591a\u4e2a\u6587\u4ef6\u4fe1\u606f\u3002\u4f8b\u5982: \u6307\u5b9a /* \u4ee3\u8868\u8bfb\u53d6/\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\uff0c\u6307\u5b9a /bazhen/* \u4ee3\u8868\u8bfb\u53d6 bazhen \u76ee\u5f55\u4e0b\u6e38\u6240\u6709\u7684\u6587\u4ef6\u3002\u76ee\u524d\u53ea\u652f\u6301 * \u4f5c\u4e3a\u6587\u4ef6\u901a\u914d\u7b26\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cAddax\u4f1a\u5c06\u4e00\u4e2a\u4f5c\u4e1a\u4e0b\u540c\u6b65\u7684\u6240\u6709Text File\u89c6\u4f5c\u540c\u4e00\u5f20\u6570\u636e\u8868\u3002\u7528\u6237\u5fc5\u987b\u81ea\u5df1\u4fdd\u8bc1\u6240\u6709\u7684File\u80fd\u591f\u9002\u914d\u540c\u4e00\u5957schema\u4fe1\u606f\u3002\u8bfb\u53d6\u6587\u4ef6\u7528\u6237\u5fc5\u987b\u4fdd\u8bc1\u4e3a\u7c7bCSV\u683c\u5f0f\uff0c\u5e76\u4e14\u63d0\u4f9b\u7ed9Addax\u6743\u9650\u53ef\u8bfb\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679cPath\u6307\u5b9a\u7684\u8def\u5f84\u4e0b\u6ca1\u6709\u7b26\u5408\u5339\u914d\u7684\u6587\u4ef6\u62bd\u53d6\uff0cAddax\u5c06\u62a5\u9519\u3002","title":"path"},{"location":"reader/ftpreader/#column","text":"\u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0cindex\u6307\u5b9a\u5f53\u524d\u5217\u6765\u81ea\u4e8e\u6587\u672c\u7b2c\u51e0\u5217(\u4ee50\u5f00\u59cb)\uff0cvalue\u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece\u6e90\u5934\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636evalue\u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u53ef\u4ee5\u5168\u90e8\u6309\u7167String\u7c7b\u578b\u8bfb\u53d6\u6570\u636e\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"column\" : [ \"*\" ] } \u7528\u6237\u53ef\u4ee5\u6307\u5b9aColumn\u5b57\u6bb5\u4fe1\u606f\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a [ { \"type\" : \"long\" , \"index\" : 0 , \"description\" : \"\u4ece\u8fdc\u7a0bFTP\u6587\u4ef6\u6587\u672c\u7b2c\u4e00\u5217\u83b7\u53d6int\u5b57\u6bb5\" }, { \"type\" : \"string\" , \"value\" : \"addax\" , \"description\" : \"\u4eceFtpReader\u5185\u90e8\u751f\u6210alibaba\u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\u4f5c\u4e3a\u5f53\u524d\u5b57\u6bb5\" } ] \u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cindex/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002","title":"column"},{"location":"reader/ftpreader/#csvreaderconfig","text":"\u5e38\u89c1\u914d\u7f6e\uff1a { \"csvReaderConfig\" : { \"safetySwitch\" : false , \"skipEmptyRecords\" : false , \"useTextQualifier\" : false } } \u6240\u6709\u914d\u7f6e\u9879\u53ca\u9ed8\u8ba4\u503c,\u914d\u7f6e\u65f6 csvReaderConfig \u7684map\u4e2d\u8bf7**\u4e25\u683c\u6309\u7167\u4ee5\u4e0b\u5b57\u6bb5\u540d\u5b57\u8fdb\u884c\u914d\u7f6e**\uff1a boolean caseSensitive = true; char textQualifier = 34; boolean trimWhitespace = true; boolean useTextQualifier = true;//\u662f\u5426\u4f7f\u7528csv\u8f6c\u4e49\u5b57\u7b26 char delimiter = 44;//\u5206\u9694\u7b26 char recordDelimiter = 0; char comment = 35; boolean useComments = false; int escapeMode = 1; boolean safetySwitch = true;//\u5355\u5217\u957f\u5ea6\u662f\u5426\u9650\u5236100000\u5b57\u7b26 boolean skipEmptyRecords = true;//\u662f\u5426\u8df3\u8fc7\u7a7a\u884c boolean captureRawRecord = true;","title":"csvReaderConfig"},{"location":"reader/ftpreader/#_4","text":"\u8fdc\u7a0bFTP\u6587\u4ef6\u672c\u8eab\u4e0d\u63d0\u4f9b\u6570\u636e\u7c7b\u578b\uff0c\u8be5\u7c7b\u578b\u662fAddax FtpReader\u5b9a\u4e49\uff1a Addax \u5185\u90e8\u7c7b\u578b \u8fdc\u7a0bFTP\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long Double Double String String Boolean Boolean Date Date \u5176\u4e2d\uff1a Long \u662f\u6307\u8fdc\u7a0bFTP\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528\u6574\u5f62\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982\"19901219\"\u3002 Double \u662f\u6307\u8fdc\u7a0bFTP\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Double\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982\"3.1415\"\u3002 Boolean \u662f\u6307\u8fdc\u7a0bFTP\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Boolean\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982\"true\"\u3001\"false\"\u3002\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002 Date \u662f\u6307\u8fdc\u7a0bFTP\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Date\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982\"2014-12-31\"\uff0cDate\u53ef\u4ee5\u6307\u5b9aformat\u683c\u5f0f\u3002","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/ftpreader/#_5","text":"\u5355\u4e2aFile\u652f\u6301\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6\uff0c\u8fd9\u91cc\u6d89\u53ca\u5230\u5355\u4e2aFile\u5185\u90e8\u5207\u5206\u7b97\u6cd5 \u5355\u4e2aFile\u5728\u538b\u7f29\u60c5\u51b5\u4e0b\uff0c\u4ece\u6280\u672f\u4e0a\u65e0\u6cd5\u652f\u6301\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6\u3002","title":"\u9650\u5236"},{"location":"reader/hbase11xreader/","text":"Hbase11X Reader \u00b6 Hbase11X Reader \u63d2\u4ef6\u652f\u6301\u4ece HBase 1.x \u7248\u672c\u8bfb\u53d6\u6570\u636e\uff0c \u5176\u5b9e\u73b0\u65b9\u5f0f\u4e3a \u901a\u8fc7 HBase \u7684 Java \u5ba2\u6237\u7aef\u8fde\u63a5\u8fdc\u7a0b HBase \u670d\u52a1\uff0c\u5e76\u901a\u8fc7 Scan \u65b9\u5f0f\u8bfb\u53d6\u4f60\u6307\u5b9a rowkey \u8303\u56f4\u5185\u7684\u6570\u636e\u3002 \u914d\u7f6e \u00b6 \u5efa\u8868\u4ee5\u53ca\u586b\u5145\u6570\u636e \u00b6 \u4ee5\u4e0b\u6f14\u793a\u57fa\u4e8e\u4e0b\u9762\u521b\u5efa\u7684\u8868\u4ee5\u53ca\u6570\u636e create 'users' , 'address' , 'info' put 'users' , 'lisi' , 'address:country' , 'china' put 'users' , 'lisi' , 'address:province' , 'beijing' put 'users' , 'lisi' , 'info:age' , 27 put 'users' , 'lisi' , 'info:birthday' , '1987-06-17' put 'users' , 'lisi' , 'info:company' , 'baidu' put 'users' , 'xiaoming' , 'address:city' , 'hangzhou' put 'users' , 'xiaoming' , 'address:country' , 'china' put 'users' , 'xiaoming' , 'address:province' , 'zhejiang' put 'users' , 'xiaoming' , 'info:age' , 29 put 'users' , 'xiaoming' , 'info:birthday' , '1987-06-17' put 'users' , 'xiaoming' , 'info:company' , 'alibaba' normal \u6a21\u5f0f \u00b6 \u628aHBase\u4e2d\u7684\u8868\uff0c\u5f53\u6210\u666e\u901a\u4e8c\u7ef4\u8868\uff08\u6a2a\u8868\uff09\u8fdb\u884c\u8bfb\u53d6,\u8bfb\u53d6\u6700\u65b0\u7248\u672c\u6570\u636e\u3002\u5982\uff1a hbase ( main ) :017:0> scan 'users' ROW COLUMN+CELL lisi column = address:city, timestamp = 1457101972764 , value = beijing lisi column = address:country, timestamp = 1457102773908 , value = china lisi column = address:province, timestamp = 1457101972736 , value = beijing lisi column = info:age, timestamp = 1457101972548 , value = 27 lisi column = info:birthday, timestamp = 1457101972604 , value = 1987 -06-17 lisi column = info:company, timestamp = 1457101972653 , value = baidu xiaoming column = address:city, timestamp = 1457082196082 , value = hangzhou xiaoming column = address:country, timestamp = 1457082195729 , value = china xiaoming column = address:province, timestamp = 1457082195773 , value = zhejiang xiaoming column = info:age, timestamp = 1457082218735 , value = 29 xiaoming column = info:birthday, timestamp = 1457082186830 , value = 1987 -06-17 xiaoming column = info:company, timestamp = 1457082189826 , value = alibaba 2 row ( s ) in 0 .0580 seconds \u8bfb\u53d6\u540e\u6570\u636e rowKey addres:city address:country address:province info:age info:birthday info:company lisi beijing china beijing 27 1987-06-17 baidu xiaoming hangzhou china zhejiang 29 1987-06-17 alibaba multiVersionFixedColumn \u6a21\u5f0f \u00b6 \u628aHBase\u4e2d\u7684\u8868\uff0c\u5f53\u6210\u7ad6\u8868\u8fdb\u884c\u8bfb\u53d6\u3002\u8bfb\u51fa\u7684\u6bcf\u6761\u8bb0\u5f55\u4e00\u5b9a\u662f\u56db\u5217\u5f62\u5f0f\uff0c\u4f9d\u6b21\u4e3a\uff1a rowKey \uff0c family:qualifier \uff0c timestamp \uff0c value \u3002 \u8bfb\u53d6\u65f6\u9700\u8981\u660e\u786e\u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u5217\uff0c\u628a\u6bcf\u4e00\u4e2a cell \u4e2d\u7684\u503c\uff0c\u4f5c\u4e3a\u4e00\u6761\u8bb0\u5f55\uff08record\uff09\uff0c\u82e5\u6709\u591a\u4e2a\u7248\u672c\u5c31\u6709\u591a\u6761\u8bb0\u5f55\uff08record\uff09\u3002\u5982\uff1a hbase ( main ) :018:0> scan 'users' , { VERSIONS = >5 } ROW COLUMN+CELL lisi column = address:city, timestamp = 1457101972764 , value = beijing lisi column = address:contry, timestamp = 1457102773908 , value = china lisi column = address:province, timestamp = 1457101972736 , value = beijing lisi column = info:age, timestamp = 1457101972548 , value = 27 lisi column = info:birthday, timestamp = 1457101972604 , value = 1987 -06-17 lisi column = info:company, timestamp = 1457101972653 , value = baidu xiaoming column = address:city, timestamp = 1457082196082 , value = hangzhou xiaoming column = address:contry, timestamp = 1457082195729 , value = china xiaoming column = address:province, timestamp = 1457082195773 , value = zhejiang xiaoming column = info:age, timestamp = 1457082218735 , value = 29 xiaoming column = info:age, timestamp = 1457082178630 , value = 24 xiaoming column = info:birthday, timestamp = 1457082186830 , value = 1987 -06-17 xiaoming column = info:company, timestamp = 1457082189826 , value = alibaba 2 row ( s ) in 0 .0260 seconds \u8bfb\u53d6\u540e\u6570\u636e(4\u5217) rowKey column:qualifier timestamp value lisi address:city 1457101972764 beijing lisi address:contry 1457102773908 china lisi address:province 1457101972736 beijing lisi info:age 1457101972548 27 lisi info:birthday 1457101972604 1987-06-17 lisi info:company 1457101972653 beijing xiaoming address:city 1457082196082 hangzhou xiaoming address:contry 1457082195729 china xiaoming address:province 1457082195773 zhejiang xiaoming info:age 1457082218735 29 xiaoming info:age 1457082178630 24 xiaoming info:birthday 1457082186830 1987-06-17 xiaoming info:company 1457082189826 alibaba \u914d\u7f6e\u6837\u4f8b \u00b6 \u914d\u7f6e\u4e00\u4e2a\u4ece HBase \u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a\uff0c\u5206\u522b\u4e3a\u6807\u51c6\u6a21\u5f0f\u548c\u591a\u7248\u672c\u6a21\u5f0f job/hbase11x2stream_normal.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"hbase11xreader\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"xxxf\" }, \"table\" : \"users\" , \"encoding\" : \"utf-8\" , \"mode\" : \"normal\" , \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" }, { \"name\" : \"info: birthday\" , \"type\" : \"date\" , \"format\" : \"yyyy-MM-dd\" }, { \"name\" : \"info: company\" , \"type\" : \"string\" }, { \"name\" : \"address: country\" , \"type\" : \"string\" }, { \"name\" : \"address: province\" , \"type\" : \"string\" }, { \"name\" : \"address: city\" , \"type\" : \"string\" } ], \"range\" : { \"startRowkey\" : \"\" , \"endRowkey\" : \"\" , \"isBinaryRowkey\" : true } } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/Users/shf/workplace/addax_test/hbase11xreader/result\" , \"fileName\" : \"qiran\" , \"writeMode\" : \"truncate\" } } } } } job/hbase11x2srtream_version.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"hbase11xreader\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"127.0.0.1:2181\" }, \"table\" : \"users\" , \"encoding\" : \"utf-8\" , \"mode\" : \"multiVersionFixedColumn\" , \"maxVersion\" : \"-1\" , \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" }, { \"name\" : \"info: birthday\" , \"type\" : \"date\" , \"format\" : \"yyyy-MM-dd\" }, { \"name\" : \"info: company\" , \"type\" : \"string\" }, { \"name\" : \"address: contry\" , \"type\" : \"string\" }, { \"name\" : \"address: province\" , \"type\" : \"string\" }, { \"name\" : \"address: city\" , \"type\" : \"string\" } ], \"range\" : { \"startRowkey\" : \"\" , \"endRowkey\" : \"\" } } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/Users/shf/workplace/addax_test/hbase11xreader/result\" , \"fileName\" : \"qiran\" , \"writeMode\" : \"truncate\" } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 hbaseConfig \u662f \u65e0 \u8fde\u63a5HBase\u96c6\u7fa4\u9700\u8981\u7684\u914d\u7f6e\u4fe1\u606f, hbase.zookeeper.quorum \u4e3a\u5fc5\u586b\u9879\uff0c\u5176\u4ed6 HBase client\u7684\u914d\u7f6e\u4e3a\u53ef\u9009\u9879 mode \u662f \u65e0 \u8bfb\u53d6hbase\u7684\u6a21\u5f0f\uff0c\u53ef\u586b\u5199 normal \u6216 multiVersionFixedColumn table \u662f \u65e0 \u8981\u8bfb\u53d6\u7684 hbase \u8868\u540d\uff08\u5927\u5c0f\u5199\u654f\u611f\uff09 encoding \u5426 UTF-8 \u7f16\u7801\u65b9\u5f0f\uff0c UTF-8 \u6216\u662f GBK \uff0c\u7528\u4e8e\u5bf9\u4e8c\u8fdb\u5236\u5b58\u50a8\u7684 HBase byte[] \u8f6c\u4e3a String \u65f6\u7684\u7f16\u7801 column \u662f \u65e0 \u8981\u8bfb\u53d6\u7684hbase\u5b57\u6bb5\uff0cnormal \u6a21\u5f0f\u4e0e multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b\u9879, \u8be6\u7ec6\u8bf4\u660e\u89c1\u4e0b\u6587 maxVersion \u662f \u65e0 \u6307\u5b9a\u5728\u591a\u7248\u672c\u6a21\u5f0f\u4e0b\u8bfb\u53d6\u7684\u7248\u672c\u6570\uff0c -1 \u8868\u793a\u8bfb\u53d6\u6240\u6709\u7248\u672c, multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b range \u5426 \u65e0 \u6307\u5b9a\u8bfb\u53d6\u7684 rowkey \u8303\u56f4, \u8be6\u89c1\u4e0b\u6587 scanCacheSize \u5426 256 Hbase client \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u884c\u6570 scanBatchSize \u5426 100 Hbase client \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u5217\u6570 column \u00b6 \u63cf\u8ff0\uff1a\u8981\u8bfb\u53d6\u7684hbase\u5b57\u6bb5\uff0cnormal \u6a21\u5f0f\u4e0emultiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b\u9879\u3002 normal \u6a21\u5f0f \u00b6 name \u6307\u5b9a\u8bfb\u53d6\u7684 hbase \u5217\uff0c\u9664\u4e86 rowkey \u5916\uff0c\u5fc5\u987b\u4e3a \u5217\u65cf:\u5217\u540d \u7684\u683c\u5f0f\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c format \u6307\u5b9a\u65e5\u671f\u7c7b\u578b\u7684\u683c\u5f0f\uff0c value \u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece hbase \u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636e value \u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"value\" : \"test\" , \"type\" : \"string\" } ] } normal \u6a21\u5f0f\u4e0b\uff0c\u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cname/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002 multiVersionFixedColumn \u6a21\u5f0f \u00b6 name \u6307\u5b9a\u8bfb\u53d6\u7684 hbase \u5217\uff0c\u9664\u4e86 rowkey \u5916\uff0c\u5fc5\u987b\u4e3a \u5217\u65cf:\u5217\u540d \u7684\u683c\u5f0f\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c format \u6307\u5b9a\u65e5\u671f\u7c7b\u578b\u7684\u683c\u5f0f \u3002 multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u4e0d\u652f\u6301\u5e38\u91cf\u5217\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" } ] } range \u00b6 \u6307\u5b9a\u8bfb\u53d6\u7684 rowkey \u8303\u56f4 startRowkey \uff1a\u6307\u5b9a\u5f00\u59cb rowkey endRowkey \u6307\u5b9a\u7ed3\u675f rowkey isBinaryRowkey \uff1a\u6307\u5b9a\u914d\u7f6e\u7684 startRowkey \u548c endRowkey \u8f6c\u6362\u4e3a byte[] \u65f6\u7684\u65b9\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3afalse,\u82e5\u4e3atrue\uff0c\u5219\u8c03\u7528 Bytes.toBytesBinary(rowkey) \u65b9\u6cd5\u8fdb\u884c\u8f6c\u6362;\u82e5\u4e3afalse\uff1a\u5219\u8c03\u7528 Bytes.toBytes(rowkey) \u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"range\" : { \"startRowkey\" : \"aaa\" , \"endRowkey\" : \"ccc\" , \"isBinaryRowkey\" : false } } \u7c7b\u578b\u8f6c\u6362 \u00b6 \u4e0b\u9762\u5217\u51fa\u652f\u6301\u7684\u8bfb\u53d6HBase\u6570\u636e\u7c7b\u578b\uff0cHbaseReader \u9488\u5bf9 HBase \u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b HBase \u6570\u636e\u7c7b\u578b Long int, short ,long Double float, double String string, binarystring Date date Boolean boolean \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301 \u9650\u5236 \u00b6 \u76ee\u524d\u4e0d\u652f\u6301\u52a8\u6001\u5217\u7684\u8bfb\u53d6\u3002\u8003\u8651\u7f51\u7edc\u4f20\u8f93\u6d41\u91cf\uff08\u652f\u6301\u52a8\u6001\u5217\uff0c\u9700\u8981\u5148\u5c06hbase\u6240\u6709\u5217\u7684\u6570\u636e\u8bfb\u53d6\u51fa\u6765\uff0c\u518d\u6309\u89c4\u5219\u8fdb\u884c\u8fc7\u6ee4\uff09\uff0c\u73b0\u652f\u6301\u7684\u4e24\u79cd\u8bfb\u53d6\u6a21\u5f0f\u4e2d\u9700\u8981\u7528\u6237\u660e\u786e\u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u5217\u3002 \u5173\u4e8e\u540c\u6b65\u4f5c\u4e1a\u7684\u5207\u5206\uff1a\u76ee\u524d\u7684\u5207\u5206\u65b9\u5f0f\u662f\u6839\u636e\u7528\u6237hbase\u8868\u6570\u636e\u7684region\u5206\u5e03\u8fdb\u884c\u5207\u5206\u3002\u5373\uff1a\u5728\u7528\u6237\u586b\u5199\u7684 [startrowkey\uff0cendrowkey\uff3d \u8303\u56f4\u5185\uff0c\u4e00\u4e2aregion\u4f1a\u5207\u5206\u6210\u4e00\u4e2atask\uff0c\u5355\u4e2aregion\u4e0d\u8fdb\u884c\u5207\u5206\u3002 multiVersionFixedColumn\u6a21\u5f0f\u4e0b\u4e0d\u652f\u6301\u589e\u52a0\u5e38\u91cf\u5217","title":"Hbase11X Reader"},{"location":"reader/hbase11xreader/#hbase11x-reader","text":"Hbase11X Reader \u63d2\u4ef6\u652f\u6301\u4ece HBase 1.x \u7248\u672c\u8bfb\u53d6\u6570\u636e\uff0c \u5176\u5b9e\u73b0\u65b9\u5f0f\u4e3a \u901a\u8fc7 HBase \u7684 Java \u5ba2\u6237\u7aef\u8fde\u63a5\u8fdc\u7a0b HBase \u670d\u52a1\uff0c\u5e76\u901a\u8fc7 Scan \u65b9\u5f0f\u8bfb\u53d6\u4f60\u6307\u5b9a rowkey \u8303\u56f4\u5185\u7684\u6570\u636e\u3002","title":"Hbase11X Reader"},{"location":"reader/hbase11xreader/#_1","text":"","title":"\u914d\u7f6e"},{"location":"reader/hbase11xreader/#_2","text":"\u4ee5\u4e0b\u6f14\u793a\u57fa\u4e8e\u4e0b\u9762\u521b\u5efa\u7684\u8868\u4ee5\u53ca\u6570\u636e create 'users' , 'address' , 'info' put 'users' , 'lisi' , 'address:country' , 'china' put 'users' , 'lisi' , 'address:province' , 'beijing' put 'users' , 'lisi' , 'info:age' , 27 put 'users' , 'lisi' , 'info:birthday' , '1987-06-17' put 'users' , 'lisi' , 'info:company' , 'baidu' put 'users' , 'xiaoming' , 'address:city' , 'hangzhou' put 'users' , 'xiaoming' , 'address:country' , 'china' put 'users' , 'xiaoming' , 'address:province' , 'zhejiang' put 'users' , 'xiaoming' , 'info:age' , 29 put 'users' , 'xiaoming' , 'info:birthday' , '1987-06-17' put 'users' , 'xiaoming' , 'info:company' , 'alibaba'","title":"\u5efa\u8868\u4ee5\u53ca\u586b\u5145\u6570\u636e"},{"location":"reader/hbase11xreader/#normal","text":"\u628aHBase\u4e2d\u7684\u8868\uff0c\u5f53\u6210\u666e\u901a\u4e8c\u7ef4\u8868\uff08\u6a2a\u8868\uff09\u8fdb\u884c\u8bfb\u53d6,\u8bfb\u53d6\u6700\u65b0\u7248\u672c\u6570\u636e\u3002\u5982\uff1a hbase ( main ) :017:0> scan 'users' ROW COLUMN+CELL lisi column = address:city, timestamp = 1457101972764 , value = beijing lisi column = address:country, timestamp = 1457102773908 , value = china lisi column = address:province, timestamp = 1457101972736 , value = beijing lisi column = info:age, timestamp = 1457101972548 , value = 27 lisi column = info:birthday, timestamp = 1457101972604 , value = 1987 -06-17 lisi column = info:company, timestamp = 1457101972653 , value = baidu xiaoming column = address:city, timestamp = 1457082196082 , value = hangzhou xiaoming column = address:country, timestamp = 1457082195729 , value = china xiaoming column = address:province, timestamp = 1457082195773 , value = zhejiang xiaoming column = info:age, timestamp = 1457082218735 , value = 29 xiaoming column = info:birthday, timestamp = 1457082186830 , value = 1987 -06-17 xiaoming column = info:company, timestamp = 1457082189826 , value = alibaba 2 row ( s ) in 0 .0580 seconds \u8bfb\u53d6\u540e\u6570\u636e rowKey addres:city address:country address:province info:age info:birthday info:company lisi beijing china beijing 27 1987-06-17 baidu xiaoming hangzhou china zhejiang 29 1987-06-17 alibaba","title":"normal \u6a21\u5f0f"},{"location":"reader/hbase11xreader/#multiversionfixedcolumn","text":"\u628aHBase\u4e2d\u7684\u8868\uff0c\u5f53\u6210\u7ad6\u8868\u8fdb\u884c\u8bfb\u53d6\u3002\u8bfb\u51fa\u7684\u6bcf\u6761\u8bb0\u5f55\u4e00\u5b9a\u662f\u56db\u5217\u5f62\u5f0f\uff0c\u4f9d\u6b21\u4e3a\uff1a rowKey \uff0c family:qualifier \uff0c timestamp \uff0c value \u3002 \u8bfb\u53d6\u65f6\u9700\u8981\u660e\u786e\u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u5217\uff0c\u628a\u6bcf\u4e00\u4e2a cell \u4e2d\u7684\u503c\uff0c\u4f5c\u4e3a\u4e00\u6761\u8bb0\u5f55\uff08record\uff09\uff0c\u82e5\u6709\u591a\u4e2a\u7248\u672c\u5c31\u6709\u591a\u6761\u8bb0\u5f55\uff08record\uff09\u3002\u5982\uff1a hbase ( main ) :018:0> scan 'users' , { VERSIONS = >5 } ROW COLUMN+CELL lisi column = address:city, timestamp = 1457101972764 , value = beijing lisi column = address:contry, timestamp = 1457102773908 , value = china lisi column = address:province, timestamp = 1457101972736 , value = beijing lisi column = info:age, timestamp = 1457101972548 , value = 27 lisi column = info:birthday, timestamp = 1457101972604 , value = 1987 -06-17 lisi column = info:company, timestamp = 1457101972653 , value = baidu xiaoming column = address:city, timestamp = 1457082196082 , value = hangzhou xiaoming column = address:contry, timestamp = 1457082195729 , value = china xiaoming column = address:province, timestamp = 1457082195773 , value = zhejiang xiaoming column = info:age, timestamp = 1457082218735 , value = 29 xiaoming column = info:age, timestamp = 1457082178630 , value = 24 xiaoming column = info:birthday, timestamp = 1457082186830 , value = 1987 -06-17 xiaoming column = info:company, timestamp = 1457082189826 , value = alibaba 2 row ( s ) in 0 .0260 seconds \u8bfb\u53d6\u540e\u6570\u636e(4\u5217) rowKey column:qualifier timestamp value lisi address:city 1457101972764 beijing lisi address:contry 1457102773908 china lisi address:province 1457101972736 beijing lisi info:age 1457101972548 27 lisi info:birthday 1457101972604 1987-06-17 lisi info:company 1457101972653 beijing xiaoming address:city 1457082196082 hangzhou xiaoming address:contry 1457082195729 china xiaoming address:province 1457082195773 zhejiang xiaoming info:age 1457082218735 29 xiaoming info:age 1457082178630 24 xiaoming info:birthday 1457082186830 1987-06-17 xiaoming info:company 1457082189826 alibaba","title":"multiVersionFixedColumn \u6a21\u5f0f"},{"location":"reader/hbase11xreader/#_3","text":"\u914d\u7f6e\u4e00\u4e2a\u4ece HBase \u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a\uff0c\u5206\u522b\u4e3a\u6807\u51c6\u6a21\u5f0f\u548c\u591a\u7248\u672c\u6a21\u5f0f job/hbase11x2stream_normal.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"hbase11xreader\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"xxxf\" }, \"table\" : \"users\" , \"encoding\" : \"utf-8\" , \"mode\" : \"normal\" , \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" }, { \"name\" : \"info: birthday\" , \"type\" : \"date\" , \"format\" : \"yyyy-MM-dd\" }, { \"name\" : \"info: company\" , \"type\" : \"string\" }, { \"name\" : \"address: country\" , \"type\" : \"string\" }, { \"name\" : \"address: province\" , \"type\" : \"string\" }, { \"name\" : \"address: city\" , \"type\" : \"string\" } ], \"range\" : { \"startRowkey\" : \"\" , \"endRowkey\" : \"\" , \"isBinaryRowkey\" : true } } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/Users/shf/workplace/addax_test/hbase11xreader/result\" , \"fileName\" : \"qiran\" , \"writeMode\" : \"truncate\" } } } } } job/hbase11x2srtream_version.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"hbase11xreader\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"127.0.0.1:2181\" }, \"table\" : \"users\" , \"encoding\" : \"utf-8\" , \"mode\" : \"multiVersionFixedColumn\" , \"maxVersion\" : \"-1\" , \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" }, { \"name\" : \"info: birthday\" , \"type\" : \"date\" , \"format\" : \"yyyy-MM-dd\" }, { \"name\" : \"info: company\" , \"type\" : \"string\" }, { \"name\" : \"address: contry\" , \"type\" : \"string\" }, { \"name\" : \"address: province\" , \"type\" : \"string\" }, { \"name\" : \"address: city\" , \"type\" : \"string\" } ], \"range\" : { \"startRowkey\" : \"\" , \"endRowkey\" : \"\" } } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/Users/shf/workplace/addax_test/hbase11xreader/result\" , \"fileName\" : \"qiran\" , \"writeMode\" : \"truncate\" } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"reader/hbase11xreader/#_4","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 hbaseConfig \u662f \u65e0 \u8fde\u63a5HBase\u96c6\u7fa4\u9700\u8981\u7684\u914d\u7f6e\u4fe1\u606f, hbase.zookeeper.quorum \u4e3a\u5fc5\u586b\u9879\uff0c\u5176\u4ed6 HBase client\u7684\u914d\u7f6e\u4e3a\u53ef\u9009\u9879 mode \u662f \u65e0 \u8bfb\u53d6hbase\u7684\u6a21\u5f0f\uff0c\u53ef\u586b\u5199 normal \u6216 multiVersionFixedColumn table \u662f \u65e0 \u8981\u8bfb\u53d6\u7684 hbase \u8868\u540d\uff08\u5927\u5c0f\u5199\u654f\u611f\uff09 encoding \u5426 UTF-8 \u7f16\u7801\u65b9\u5f0f\uff0c UTF-8 \u6216\u662f GBK \uff0c\u7528\u4e8e\u5bf9\u4e8c\u8fdb\u5236\u5b58\u50a8\u7684 HBase byte[] \u8f6c\u4e3a String \u65f6\u7684\u7f16\u7801 column \u662f \u65e0 \u8981\u8bfb\u53d6\u7684hbase\u5b57\u6bb5\uff0cnormal \u6a21\u5f0f\u4e0e multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b\u9879, \u8be6\u7ec6\u8bf4\u660e\u89c1\u4e0b\u6587 maxVersion \u662f \u65e0 \u6307\u5b9a\u5728\u591a\u7248\u672c\u6a21\u5f0f\u4e0b\u8bfb\u53d6\u7684\u7248\u672c\u6570\uff0c -1 \u8868\u793a\u8bfb\u53d6\u6240\u6709\u7248\u672c, multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b range \u5426 \u65e0 \u6307\u5b9a\u8bfb\u53d6\u7684 rowkey \u8303\u56f4, \u8be6\u89c1\u4e0b\u6587 scanCacheSize \u5426 256 Hbase client \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u884c\u6570 scanBatchSize \u5426 100 Hbase client \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u5217\u6570","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/hbase11xreader/#column","text":"\u63cf\u8ff0\uff1a\u8981\u8bfb\u53d6\u7684hbase\u5b57\u6bb5\uff0cnormal \u6a21\u5f0f\u4e0emultiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b\u9879\u3002","title":"column"},{"location":"reader/hbase11xreader/#normal_1","text":"name \u6307\u5b9a\u8bfb\u53d6\u7684 hbase \u5217\uff0c\u9664\u4e86 rowkey \u5916\uff0c\u5fc5\u987b\u4e3a \u5217\u65cf:\u5217\u540d \u7684\u683c\u5f0f\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c format \u6307\u5b9a\u65e5\u671f\u7c7b\u578b\u7684\u683c\u5f0f\uff0c value \u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece hbase \u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636e value \u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"value\" : \"test\" , \"type\" : \"string\" } ] } normal \u6a21\u5f0f\u4e0b\uff0c\u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cname/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002","title":"normal \u6a21\u5f0f"},{"location":"reader/hbase11xreader/#multiversionfixedcolumn_1","text":"name \u6307\u5b9a\u8bfb\u53d6\u7684 hbase \u5217\uff0c\u9664\u4e86 rowkey \u5916\uff0c\u5fc5\u987b\u4e3a \u5217\u65cf:\u5217\u540d \u7684\u683c\u5f0f\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c format \u6307\u5b9a\u65e5\u671f\u7c7b\u578b\u7684\u683c\u5f0f \u3002 multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u4e0d\u652f\u6301\u5e38\u91cf\u5217\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" } ] }","title":"multiVersionFixedColumn \u6a21\u5f0f"},{"location":"reader/hbase11xreader/#range","text":"\u6307\u5b9a\u8bfb\u53d6\u7684 rowkey \u8303\u56f4 startRowkey \uff1a\u6307\u5b9a\u5f00\u59cb rowkey endRowkey \u6307\u5b9a\u7ed3\u675f rowkey isBinaryRowkey \uff1a\u6307\u5b9a\u914d\u7f6e\u7684 startRowkey \u548c endRowkey \u8f6c\u6362\u4e3a byte[] \u65f6\u7684\u65b9\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3afalse,\u82e5\u4e3atrue\uff0c\u5219\u8c03\u7528 Bytes.toBytesBinary(rowkey) \u65b9\u6cd5\u8fdb\u884c\u8f6c\u6362;\u82e5\u4e3afalse\uff1a\u5219\u8c03\u7528 Bytes.toBytes(rowkey) \u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"range\" : { \"startRowkey\" : \"aaa\" , \"endRowkey\" : \"ccc\" , \"isBinaryRowkey\" : false } }","title":"range"},{"location":"reader/hbase11xreader/#_5","text":"\u4e0b\u9762\u5217\u51fa\u652f\u6301\u7684\u8bfb\u53d6HBase\u6570\u636e\u7c7b\u578b\uff0cHbaseReader \u9488\u5bf9 HBase \u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b HBase \u6570\u636e\u7c7b\u578b Long int, short ,long Double float, double String string, binarystring Date date Boolean boolean \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/hbase11xreader/#_6","text":"\u76ee\u524d\u4e0d\u652f\u6301\u52a8\u6001\u5217\u7684\u8bfb\u53d6\u3002\u8003\u8651\u7f51\u7edc\u4f20\u8f93\u6d41\u91cf\uff08\u652f\u6301\u52a8\u6001\u5217\uff0c\u9700\u8981\u5148\u5c06hbase\u6240\u6709\u5217\u7684\u6570\u636e\u8bfb\u53d6\u51fa\u6765\uff0c\u518d\u6309\u89c4\u5219\u8fdb\u884c\u8fc7\u6ee4\uff09\uff0c\u73b0\u652f\u6301\u7684\u4e24\u79cd\u8bfb\u53d6\u6a21\u5f0f\u4e2d\u9700\u8981\u7528\u6237\u660e\u786e\u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u5217\u3002 \u5173\u4e8e\u540c\u6b65\u4f5c\u4e1a\u7684\u5207\u5206\uff1a\u76ee\u524d\u7684\u5207\u5206\u65b9\u5f0f\u662f\u6839\u636e\u7528\u6237hbase\u8868\u6570\u636e\u7684region\u5206\u5e03\u8fdb\u884c\u5207\u5206\u3002\u5373\uff1a\u5728\u7528\u6237\u586b\u5199\u7684 [startrowkey\uff0cendrowkey\uff3d \u8303\u56f4\u5185\uff0c\u4e00\u4e2aregion\u4f1a\u5207\u5206\u6210\u4e00\u4e2atask\uff0c\u5355\u4e2aregion\u4e0d\u8fdb\u884c\u5207\u5206\u3002 multiVersionFixedColumn\u6a21\u5f0f\u4e0b\u4e0d\u652f\u6301\u589e\u52a0\u5e38\u91cf\u5217","title":"\u9650\u5236"},{"location":"reader/hbase11xsqlreader/","text":"hbase11xsql reader \u00b6 hbase11xsqlreader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ecePhoenix(HBase SQL)\u8bfb\u53d6\u6570\u636e, \u652f\u6301\u7684 HBase \u7248\u672c\u4e3a 1.x \u914d\u7f6e\u6837\u4f8b \u00b6 \u914d\u7f6e\u4e00\u4e2a\u4ecePhoenix\u540c\u6b65\u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a: { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : [ { \"reader\" : { \"name\" : \"hbase11xsqlreader\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"node1,node2,node3\" }, \"table\" : \"US_POPULATION\" , \"column\" : [], \"where\" : \"1=1\" , \"querySql\" : \"\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true , \"encoding\" : \"UTF-8\" } } } ] } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 hbaseConfig \u662f \u65e0 \u9700\u8981\u901a\u8fc7 Phoenix \u5ba2\u6237\u7aef\u53bb\u8fde\u63a5 hbase \u96c6\u7fa4\uff0c\u56e0\u6b64\u8fd9\u91cc\u9700\u8981\u586b\u5199\u5bf9\u5e94 hbase \u96c6\u7fa4\u7684 zkurl \u5730\u5740 table \u662f \u65e0 \u6307\u5b9a Phoenix \u4e2d\u7684\u8868\u540d,\u5982\u679c\u6709 namespace\uff0c\u8be5\u503c\u8bbe\u7f6e\u4e3a namespace.tablename querySql \u5426 \u65e0 \u4e0d\u662f\u76f4\u63a5\u67e5\u8be2\u8868\uff0c\u800c\u662f\u63d0\u4f9b\u5177\u4f53\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u5982\u679c\u8be5\u53c2\u6570\u548c table \u53c2\u6570\u540c\u65f6\u5b58\u5728\uff0c\u5219\u4f18\u5148\u4f7f\u7528\u8be5\u53c2\u6570 column \u662f \u65e0 \u586b\u5199\u9700\u8981\u4ecephoenix\u8868\u4e2d\u8bfb\u53d6\u7684\u5217\u540d\u96c6\u5408\uff0c\u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\uff0c\u7a7a\u503c\u6216 \"*\" \u8868\u793a\u8bfb\u53d6\u6240\u6709\u5217 where \u5426 \u65e0 where \u6761\u4ef6 \u7c7b\u578b\u8f6c\u6362 \u00b6 \u76ee\u524d\u652f\u6301\u5927\u90e8\u5206 Phoenix\u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51fa\u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b Phoenix \u6570\u636e\u7c7b\u578b String CHAR, VARCHAR Bytes BINARY, VARBINARY Bool BOOLEAN Long INTEGER, TINYINT, SMALLINT, BIGINT Double FLOAT, DECIMAL, DOUBLE, Date DATE, TIME, TIMESTAMP","title":"hbase11xsql reader"},{"location":"reader/hbase11xsqlreader/#hbase11xsql-reader","text":"hbase11xsqlreader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ecePhoenix(HBase SQL)\u8bfb\u53d6\u6570\u636e, \u652f\u6301\u7684 HBase \u7248\u672c\u4e3a 1.x","title":"hbase11xsql reader"},{"location":"reader/hbase11xsqlreader/#_1","text":"\u914d\u7f6e\u4e00\u4e2a\u4ecePhoenix\u540c\u6b65\u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a: { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : [ { \"reader\" : { \"name\" : \"hbase11xsqlreader\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"node1,node2,node3\" }, \"table\" : \"US_POPULATION\" , \"column\" : [], \"where\" : \"1=1\" , \"querySql\" : \"\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true , \"encoding\" : \"UTF-8\" } } } ] } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"reader/hbase11xsqlreader/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 hbaseConfig \u662f \u65e0 \u9700\u8981\u901a\u8fc7 Phoenix \u5ba2\u6237\u7aef\u53bb\u8fde\u63a5 hbase \u96c6\u7fa4\uff0c\u56e0\u6b64\u8fd9\u91cc\u9700\u8981\u586b\u5199\u5bf9\u5e94 hbase \u96c6\u7fa4\u7684 zkurl \u5730\u5740 table \u662f \u65e0 \u6307\u5b9a Phoenix \u4e2d\u7684\u8868\u540d,\u5982\u679c\u6709 namespace\uff0c\u8be5\u503c\u8bbe\u7f6e\u4e3a namespace.tablename querySql \u5426 \u65e0 \u4e0d\u662f\u76f4\u63a5\u67e5\u8be2\u8868\uff0c\u800c\u662f\u63d0\u4f9b\u5177\u4f53\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u5982\u679c\u8be5\u53c2\u6570\u548c table \u53c2\u6570\u540c\u65f6\u5b58\u5728\uff0c\u5219\u4f18\u5148\u4f7f\u7528\u8be5\u53c2\u6570 column \u662f \u65e0 \u586b\u5199\u9700\u8981\u4ecephoenix\u8868\u4e2d\u8bfb\u53d6\u7684\u5217\u540d\u96c6\u5408\uff0c\u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\uff0c\u7a7a\u503c\u6216 \"*\" \u8868\u793a\u8bfb\u53d6\u6240\u6709\u5217 where \u5426 \u65e0 where \u6761\u4ef6","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/hbase11xsqlreader/#_3","text":"\u76ee\u524d\u652f\u6301\u5927\u90e8\u5206 Phoenix\u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51fa\u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b Phoenix \u6570\u636e\u7c7b\u578b String CHAR, VARCHAR Bytes BINARY, VARBINARY Bool BOOLEAN Long INTEGER, TINYINT, SMALLINT, BIGINT Double FLOAT, DECIMAL, DOUBLE, Date DATE, TIME, TIMESTAMP","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/hbase20xreader/","text":"Hbase20XReader \u00b6 Hbase20X Reader \u63d2\u4ef6\u652f\u6301\u4ece HBase 2.x \u7248\u672c\u8bfb\u53d6\u6570\u636e\uff0c \u5176\u5b9e\u73b0\u65b9\u5f0f\u4e3a \u901a\u8fc7 HBase \u7684 Java \u5ba2\u6237\u7aef\u8fde\u63a5\u8fdc\u7a0b HBase \u670d\u52a1\uff0c\u5e76\u901a\u8fc7 Scan \u65b9\u5f0f\u8bfb\u53d6\u4f60\u6307\u5b9a rowkey \u8303\u56f4\u5185\u7684\u6570\u636e\u3002 \u914d\u7f6e \u00b6 \u4ee5\u4e0b\u6f14\u793a\u57fa\u4e8e\u4e0b\u9762\u521b\u5efa\u7684\u8868\u4ee5\u53ca\u6570\u636e create 'users' , { NAME = > 'address' , VERSIONS = >100 } , { NAME = > 'info' ,VERSIONS = >1000 } put 'users' , 'lisi' , 'address:country' , 'china1' , 20200101 put 'users' , 'lisi' , 'address:province' , 'beijing1' , 20200101 put 'users' , 'lisi' , 'info:age' , 27 , 20200101 put 'users' , 'lisi' , 'info:birthday' , '1987-06-17' , 20200101 put 'users' , 'lisi' , 'info:company' , 'baidu1' , 20200101 put 'users' , 'xiaoming' , 'address:city' , 'hangzhou1' , 20200101 put 'users' , 'xiaoming' , 'address:country' , 'china1' , 20200101 put 'users' , 'xiaoming' , 'address:province' , 'zhejiang1' ,20200101 put 'users' , 'xiaoming' , 'info:age' , 29 , 20200101 put 'users' , 'xiaoming' , 'info:birthday' , '1987-06-17' ,20200101 put 'users' , 'xiaoming' , 'info:company' , 'alibaba1' , 20200101 put 'users' , 'lisi' , 'address:country' , 'china2' , 20200102 put 'users' , 'lisi' , 'address:province' , 'beijing2' , 20200102 put 'users' , 'lisi' , 'info:age' , 27 , 20200102 put 'users' , 'lisi' , 'info:birthday' , '1987-06-17' , 20200102 put 'users' , 'lisi' , 'info:company' , 'baidu2' , 20200102 put 'users' , 'xiaoming' , 'address:city' , 'hangzhou2' , 20200102 put 'users' , 'xiaoming' , 'address:country' , 'china2' , 20200102 put 'users' , 'xiaoming' , 'address:province' , 'zhejiang2' , 20200102 put 'users' , 'xiaoming' , 'info:age' , 29 , 20200102 put 'users' , 'xiaoming' , 'info:birthday' , '1987-06-17' , 20200102 put 'users' , 'xiaoming' , 'info:company' , 'alibaba2' , 20200102 normal \u6a21\u5f0f \u00b6 \u628aHBase\u4e2d\u7684\u8868\uff0c\u5f53\u6210\u666e\u901a\u4e8c\u7ef4\u8868\uff08\u6a2a\u8868\uff09\u8fdb\u884c\u8bfb\u53d6,\u8bfb\u53d6\u6700\u65b0\u7248\u672c\u6570\u636e\u3002\u5982\uff1a hbase ( main ) :017:0> scan 'users' ROW COLUMN+CELL lisi column = address:city, timestamp = 1457101972764 , value = beijing lisi column = address:country, timestamp = 1457102773908 , value = china lisi column = address:province, timestamp = 1457101972736 , value = beijing lisi column = info:age, timestamp = 1457101972548 , value = 27 lisi column = info:birthday, timestamp = 1457101972604 , value = 1987 -06-17 lisi column = info:company, timestamp = 1457101972653 , value = baidu xiaoming column = address:city, timestamp = 1457082196082 , value = hangzhou xiaoming column = address:country, timestamp = 1457082195729 , value = china xiaoming column = address:province, timestamp = 1457082195773 , value = zhejiang xiaoming column = info:age, timestamp = 1457082218735 , value = 29 xiaoming column = info:birthday, timestamp = 1457082186830 , value = 1987 -06-17 xiaoming column = info:company, timestamp = 1457082189826 , value = alibaba 2 row ( s ) in 0 .0580 seconds \u8bfb\u53d6\u540e\u6570\u636e rowKey addres:city address:country address:province info:age info:birthday info:company lisi beijing china beijing 27 1987-06-17 baidu xiaoming hangzhou china zhejiang 29 1987-06-17 alibaba multiVersionFixedColumn \u6a21\u5f0f \u00b6 \u628aHBase\u4e2d\u7684\u8868\uff0c\u5f53\u6210\u7ad6\u8868\u8fdb\u884c\u8bfb\u53d6\u3002\u8bfb\u51fa\u7684\u6bcf\u6761\u8bb0\u5f55\u4e00\u5b9a\u662f\u56db\u5217\u5f62\u5f0f\uff0c\u4f9d\u6b21\u4e3a\uff1a rowKey \uff0c family:qualifier \uff0c timestamp \uff0c value \u3002 \u8bfb\u53d6\u65f6\u9700\u8981\u660e\u786e\u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u5217\uff0c\u628a\u6bcf\u4e00\u4e2a cell \u4e2d\u7684\u503c\uff0c\u4f5c\u4e3a\u4e00\u6761\u8bb0\u5f55\uff08record\uff09\uff0c\u82e5\u6709\u591a\u4e2a\u7248\u672c\u5c31\u6709\u591a\u6761\u8bb0\u5f55\uff08record\uff09\u3002\u5982\uff1a hbase ( main ) :018:0> scan 'users' , { VERSIONS = >5 } ROW COLUMN+CELL lisi column = address:city, timestamp = 1457101972764 , value = beijing lisi column = address:contry, timestamp = 1457102773908 , value = china lisi column = address:province, timestamp = 1457101972736 , value = beijing lisi column = info:age, timestamp = 1457101972548 , value = 27 lisi column = info:birthday, timestamp = 1457101972604 , value = 1987 -06-17 lisi column = info:company, timestamp = 1457101972653 , value = baidu xiaoming column = address:city, timestamp = 1457082196082 , value = hangzhou xiaoming column = address:contry, timestamp = 1457082195729 , value = china xiaoming column = address:province, timestamp = 1457082195773 , value = zhejiang xiaoming column = info:age, timestamp = 1457082218735 , value = 29 xiaoming column = info:age, timestamp = 1457082178630 , value = 24 xiaoming column = info:birthday, timestamp = 1457082186830 , value = 1987 -06-17 xiaoming column = info:company, timestamp = 1457082189826 , value = alibaba 2 row ( s ) in 0 .0260 seconds \u8bfb\u53d6\u540e\u6570\u636e(4\u5217) rowKey column:qualifier timestamp value lisi address:city 1457101972764 beijing lisi address:contry 1457102773908 china lisi address:province 1457101972736 beijing lisi info:age 1457101972548 27 lisi info:birthday 1457101972604 1987-06-17 lisi info:company 1457101972653 beijing xiaoming address:city 1457082196082 hangzhou xiaoming address:contry 1457082195729 china xiaoming address:province 1457082195773 zhejiang xiaoming info:age 1457082218735 29 xiaoming info:age 1457082178630 24 xiaoming info:birthday 1457082186830 1987-06-17 xiaoming info:company 1457082189826 alibaba \u914d\u7f6e\u4e00\u4e2a\u4ece HBase \u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a\uff0c\u5206\u522b\u4e3a\u6807\u51c6\u6a21\u5f0f\u548c\u591a\u7248\u672c\u6a21\u5f0f hbase20x2stream_normal.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"hbase11xreader\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"xxxf\" }, \"table\" : \"users\" , \"encoding\" : \"utf-8\" , \"mode\" : \"normal\" , \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" }, { \"name\" : \"info: birthday\" , \"type\" : \"date\" , \"format\" : \"yyyy-MM-dd\" }, { \"name\" : \"info: company\" , \"type\" : \"string\" }, { \"name\" : \"address: country\" , \"type\" : \"string\" }, { \"name\" : \"address: province\" , \"type\" : \"string\" }, { \"name\" : \"address: city\" , \"type\" : \"string\" } ], \"range\" : { \"startRowkey\" : \"\" , \"endRowkey\" : \"\" , \"isBinaryRowkey\" : true } } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/Users/shf/workplace/addax_test/hbase11xreader/result\" , \"fileName\" : \"qiran\" , \"writeMode\" : \"truncate\" } } } } } hbase20x2stream_version.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"hbase11xreader\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"xxx\" }, \"table\" : \"users\" , \"encoding\" : \"utf-8\" , \"mode\" : \"multiVersionFixedColumn\" , \"maxVersion\" : \"-1\" , \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" }, { \"name\" : \"info: birthday\" , \"type\" : \"date\" , \"format\" : \"yyyy-MM-dd\" }, { \"name\" : \"info: company\" , \"type\" : \"string\" }, { \"name\" : \"address: contry\" , \"type\" : \"string\" }, { \"name\" : \"address: province\" , \"type\" : \"string\" }, { \"name\" : \"address: city\" , \"type\" : \"string\" } ], \"range\" : { \"startRowkey\" : \"\" , \"endRowkey\" : \"\" } } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/Users/shf/workplace/addax_test/hbase11xreader/result\" , \"fileName\" : \"qiran\" , \"writeMode\" : \"truncate\" } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 hbaseConfig \u662f \u65e0 \u8fde\u63a5HBase\u96c6\u7fa4\u9700\u8981\u7684\u914d\u7f6e\u4fe1\u606f, hbase.zookeeper.quorum \u4e3a\u5fc5\u586b\u9879\uff0c\u5176\u4ed6 HBase client\u7684\u914d\u7f6e\u4e3a\u53ef\u9009\u9879 mode \u662f \u65e0 \u8bfb\u53d6hbase\u7684\u6a21\u5f0f\uff0c\u53ef\u586b\u5199 normal \u6216 multiVersionFixedColumn table \u662f \u65e0 \u8981\u8bfb\u53d6\u7684 hbase \u8868\u540d\uff08\u5927\u5c0f\u5199\u654f\u611f\uff09 encoding \u5426 UTF-8 \u7f16\u7801\u65b9\u5f0f\uff0c UTF-8 \u6216\u662f GBK \uff0c\u7528\u4e8e\u5bf9\u4e8c\u8fdb\u5236\u5b58\u50a8\u7684 HBase byte[] \u8f6c\u4e3a String \u65f6\u7684\u7f16\u7801 column \u662f \u65e0 \u8981\u8bfb\u53d6\u7684\u5b57\u6bb5\uff0c normal \u6a21\u5f0f\u4e0e multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b\u9879, \u8be6\u7ec6\u8bf4\u660e\u89c1\u4e0b\u6587 maxVersion \u662f \u65e0 \u6307\u5b9a\u5728\u591a\u7248\u672c\u6a21\u5f0f\u4e0b\u8bfb\u53d6\u7684\u7248\u672c\u6570\uff0c -1 \u8868\u793a\u8bfb\u53d6\u6240\u6709\u7248\u672c, multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b range \u5426 \u65e0 \u6307\u5b9a\u8bfb\u53d6\u7684 rowkey \u8303\u56f4, \u8be6\u89c1\u4e0b\u6587 scanCacheSize \u5426 256 \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u884c\u6570 scanBatchSize \u5426 100 \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u5217\u6570 column \u00b6 \u63cf\u8ff0\uff1a\u8981\u8bfb\u53d6\u7684\u5b57\u6bb5\uff0c normal \u6a21\u5f0f\u4e0e multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b\u9879\u3002 normal \u6a21\u5f0f \u00b6 name \u6307\u5b9a\u8bfb\u53d6\u7684 hbase \u5217\uff0c\u9664\u4e86 rowkey \u5916\uff0c\u5fc5\u987b\u4e3a \u5217\u65cf:\u5217\u540d \u7684\u683c\u5f0f\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c format \u6307\u5b9a\u65e5\u671f\u7c7b\u578b\u7684\u683c\u5f0f\uff0c value \u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece hbase \u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636e value \u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"value\" : \"test\" , \"type\" : \"string\" } ] } normal \u6a21\u5f0f\u4e0b\uff0c\u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cname/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002 multiVersionFixedColumn \u6a21\u5f0f \u00b6 name \u6307\u5b9a\u8bfb\u53d6\u7684 hbase \u5217\uff0c\u9664\u4e86 rowkey \u5916\uff0c\u5fc5\u987b\u4e3a \u5217\u65cf:\u5217\u540d \u7684\u683c\u5f0f\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c format \u6307\u5b9a\u65e5\u671f\u7c7b\u578b\u7684\u683c\u5f0f \u3002 multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u4e0d\u652f\u6301\u5e38\u91cf\u5217\u3002 \u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"mode\" : \"multiVersionFixedColumn\" , \"maxVersion\" : 3 , \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" } ] } range \u00b6 \u6307\u5b9a\u8bfb\u53d6\u7684 rowkey \u8303\u56f4 startRowkey \uff1a\u6307\u5b9a\u5f00\u59cb rowkey endRowkey : \u6307\u5b9a\u7ed3\u675f rowkey isBinaryRowkey \uff1a\u6307\u5b9a\u914d\u7f6e\u7684 startRowkey \u548c endRowkey \u8f6c\u6362\u4e3a byte[] \u65f6\u7684\u65b9\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3afalse,\u82e5\u4e3atrue\uff0c\u5219\u8c03\u7528 Bytes.toBytesBinary(rowkey) \u65b9\u6cd5\u8fdb\u884c\u8f6c\u6362;\u82e5\u4e3afalse\uff1a\u5219\u8c03\u7528 Bytes.toBytes(rowkey) \u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"range\" : { \"startRowkey\" : \"aaa\" , \"endRowkey\" : \"ccc\" , \"isBinaryRowkey\" : false } } \u7c7b\u578b\u8f6c\u6362 \u00b6 \u4e0b\u9762\u5217\u51fa\u652f\u6301\u7684\u8bfb\u53d6HBase\u6570\u636e\u7c7b\u578b: Addax \u5185\u90e8\u7c7b\u578b HBase \u6570\u636e\u7c7b\u578b Long int, short ,long Double float, double String string, binarystring Date date Boolean boolean \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301 \u9650\u5236 \u00b6 \u76ee\u524d\u4e0d\u652f\u6301\u52a8\u6001\u5217\u7684\u8bfb\u53d6\u3002\u8003\u8651\u7f51\u7edc\u4f20\u8f93\u6d41\u91cf\uff08\u652f\u6301\u52a8\u6001\u5217\uff0c\u9700\u8981\u5148\u5c06hbase\u6240\u6709\u5217\u7684\u6570\u636e\u8bfb\u53d6\u51fa\u6765\uff0c\u518d\u6309\u89c4\u5219\u8fdb\u884c\u8fc7\u6ee4\uff09\uff0c\u73b0\u652f\u6301\u7684\u4e24\u79cd\u8bfb\u53d6\u6a21\u5f0f\u4e2d\u9700\u8981\u7528\u6237\u660e\u786e\u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u5217\u3002 \u5173\u4e8e\u540c\u6b65\u4f5c\u4e1a\u7684\u5207\u5206\uff1a\u76ee\u524d\u7684\u5207\u5206\u65b9\u5f0f\u662f\u6839\u636e\u7528\u6237hbase\u8868\u6570\u636e\u7684region\u5206\u5e03\u8fdb\u884c\u5207\u5206\u3002\u5373\uff1a\u5728\u7528\u6237\u586b\u5199\u7684 [startrowkey\uff0cendrowkey\uff3d \u8303\u56f4\u5185\uff0c\u4e00\u4e2aregion\u4f1a\u5207\u5206\u6210\u4e00\u4e2atask\uff0c\u5355\u4e2aregion\u4e0d\u8fdb\u884c\u5207\u5206\u3002 multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u4e0d\u652f\u6301\u589e\u52a0\u5e38\u91cf\u5217","title":"Hbase20XReader"},{"location":"reader/hbase20xreader/#hbase20xreader","text":"Hbase20X Reader \u63d2\u4ef6\u652f\u6301\u4ece HBase 2.x \u7248\u672c\u8bfb\u53d6\u6570\u636e\uff0c \u5176\u5b9e\u73b0\u65b9\u5f0f\u4e3a \u901a\u8fc7 HBase \u7684 Java \u5ba2\u6237\u7aef\u8fde\u63a5\u8fdc\u7a0b HBase \u670d\u52a1\uff0c\u5e76\u901a\u8fc7 Scan \u65b9\u5f0f\u8bfb\u53d6\u4f60\u6307\u5b9a rowkey \u8303\u56f4\u5185\u7684\u6570\u636e\u3002","title":"Hbase20XReader"},{"location":"reader/hbase20xreader/#_1","text":"\u4ee5\u4e0b\u6f14\u793a\u57fa\u4e8e\u4e0b\u9762\u521b\u5efa\u7684\u8868\u4ee5\u53ca\u6570\u636e create 'users' , { NAME = > 'address' , VERSIONS = >100 } , { NAME = > 'info' ,VERSIONS = >1000 } put 'users' , 'lisi' , 'address:country' , 'china1' , 20200101 put 'users' , 'lisi' , 'address:province' , 'beijing1' , 20200101 put 'users' , 'lisi' , 'info:age' , 27 , 20200101 put 'users' , 'lisi' , 'info:birthday' , '1987-06-17' , 20200101 put 'users' , 'lisi' , 'info:company' , 'baidu1' , 20200101 put 'users' , 'xiaoming' , 'address:city' , 'hangzhou1' , 20200101 put 'users' , 'xiaoming' , 'address:country' , 'china1' , 20200101 put 'users' , 'xiaoming' , 'address:province' , 'zhejiang1' ,20200101 put 'users' , 'xiaoming' , 'info:age' , 29 , 20200101 put 'users' , 'xiaoming' , 'info:birthday' , '1987-06-17' ,20200101 put 'users' , 'xiaoming' , 'info:company' , 'alibaba1' , 20200101 put 'users' , 'lisi' , 'address:country' , 'china2' , 20200102 put 'users' , 'lisi' , 'address:province' , 'beijing2' , 20200102 put 'users' , 'lisi' , 'info:age' , 27 , 20200102 put 'users' , 'lisi' , 'info:birthday' , '1987-06-17' , 20200102 put 'users' , 'lisi' , 'info:company' , 'baidu2' , 20200102 put 'users' , 'xiaoming' , 'address:city' , 'hangzhou2' , 20200102 put 'users' , 'xiaoming' , 'address:country' , 'china2' , 20200102 put 'users' , 'xiaoming' , 'address:province' , 'zhejiang2' , 20200102 put 'users' , 'xiaoming' , 'info:age' , 29 , 20200102 put 'users' , 'xiaoming' , 'info:birthday' , '1987-06-17' , 20200102 put 'users' , 'xiaoming' , 'info:company' , 'alibaba2' , 20200102","title":"\u914d\u7f6e"},{"location":"reader/hbase20xreader/#normal","text":"\u628aHBase\u4e2d\u7684\u8868\uff0c\u5f53\u6210\u666e\u901a\u4e8c\u7ef4\u8868\uff08\u6a2a\u8868\uff09\u8fdb\u884c\u8bfb\u53d6,\u8bfb\u53d6\u6700\u65b0\u7248\u672c\u6570\u636e\u3002\u5982\uff1a hbase ( main ) :017:0> scan 'users' ROW COLUMN+CELL lisi column = address:city, timestamp = 1457101972764 , value = beijing lisi column = address:country, timestamp = 1457102773908 , value = china lisi column = address:province, timestamp = 1457101972736 , value = beijing lisi column = info:age, timestamp = 1457101972548 , value = 27 lisi column = info:birthday, timestamp = 1457101972604 , value = 1987 -06-17 lisi column = info:company, timestamp = 1457101972653 , value = baidu xiaoming column = address:city, timestamp = 1457082196082 , value = hangzhou xiaoming column = address:country, timestamp = 1457082195729 , value = china xiaoming column = address:province, timestamp = 1457082195773 , value = zhejiang xiaoming column = info:age, timestamp = 1457082218735 , value = 29 xiaoming column = info:birthday, timestamp = 1457082186830 , value = 1987 -06-17 xiaoming column = info:company, timestamp = 1457082189826 , value = alibaba 2 row ( s ) in 0 .0580 seconds \u8bfb\u53d6\u540e\u6570\u636e rowKey addres:city address:country address:province info:age info:birthday info:company lisi beijing china beijing 27 1987-06-17 baidu xiaoming hangzhou china zhejiang 29 1987-06-17 alibaba","title":"normal \u6a21\u5f0f"},{"location":"reader/hbase20xreader/#multiversionfixedcolumn","text":"\u628aHBase\u4e2d\u7684\u8868\uff0c\u5f53\u6210\u7ad6\u8868\u8fdb\u884c\u8bfb\u53d6\u3002\u8bfb\u51fa\u7684\u6bcf\u6761\u8bb0\u5f55\u4e00\u5b9a\u662f\u56db\u5217\u5f62\u5f0f\uff0c\u4f9d\u6b21\u4e3a\uff1a rowKey \uff0c family:qualifier \uff0c timestamp \uff0c value \u3002 \u8bfb\u53d6\u65f6\u9700\u8981\u660e\u786e\u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u5217\uff0c\u628a\u6bcf\u4e00\u4e2a cell \u4e2d\u7684\u503c\uff0c\u4f5c\u4e3a\u4e00\u6761\u8bb0\u5f55\uff08record\uff09\uff0c\u82e5\u6709\u591a\u4e2a\u7248\u672c\u5c31\u6709\u591a\u6761\u8bb0\u5f55\uff08record\uff09\u3002\u5982\uff1a hbase ( main ) :018:0> scan 'users' , { VERSIONS = >5 } ROW COLUMN+CELL lisi column = address:city, timestamp = 1457101972764 , value = beijing lisi column = address:contry, timestamp = 1457102773908 , value = china lisi column = address:province, timestamp = 1457101972736 , value = beijing lisi column = info:age, timestamp = 1457101972548 , value = 27 lisi column = info:birthday, timestamp = 1457101972604 , value = 1987 -06-17 lisi column = info:company, timestamp = 1457101972653 , value = baidu xiaoming column = address:city, timestamp = 1457082196082 , value = hangzhou xiaoming column = address:contry, timestamp = 1457082195729 , value = china xiaoming column = address:province, timestamp = 1457082195773 , value = zhejiang xiaoming column = info:age, timestamp = 1457082218735 , value = 29 xiaoming column = info:age, timestamp = 1457082178630 , value = 24 xiaoming column = info:birthday, timestamp = 1457082186830 , value = 1987 -06-17 xiaoming column = info:company, timestamp = 1457082189826 , value = alibaba 2 row ( s ) in 0 .0260 seconds \u8bfb\u53d6\u540e\u6570\u636e(4\u5217) rowKey column:qualifier timestamp value lisi address:city 1457101972764 beijing lisi address:contry 1457102773908 china lisi address:province 1457101972736 beijing lisi info:age 1457101972548 27 lisi info:birthday 1457101972604 1987-06-17 lisi info:company 1457101972653 beijing xiaoming address:city 1457082196082 hangzhou xiaoming address:contry 1457082195729 china xiaoming address:province 1457082195773 zhejiang xiaoming info:age 1457082218735 29 xiaoming info:age 1457082178630 24 xiaoming info:birthday 1457082186830 1987-06-17 xiaoming info:company 1457082189826 alibaba \u914d\u7f6e\u4e00\u4e2a\u4ece HBase \u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a\uff0c\u5206\u522b\u4e3a\u6807\u51c6\u6a21\u5f0f\u548c\u591a\u7248\u672c\u6a21\u5f0f hbase20x2stream_normal.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"hbase11xreader\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"xxxf\" }, \"table\" : \"users\" , \"encoding\" : \"utf-8\" , \"mode\" : \"normal\" , \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" }, { \"name\" : \"info: birthday\" , \"type\" : \"date\" , \"format\" : \"yyyy-MM-dd\" }, { \"name\" : \"info: company\" , \"type\" : \"string\" }, { \"name\" : \"address: country\" , \"type\" : \"string\" }, { \"name\" : \"address: province\" , \"type\" : \"string\" }, { \"name\" : \"address: city\" , \"type\" : \"string\" } ], \"range\" : { \"startRowkey\" : \"\" , \"endRowkey\" : \"\" , \"isBinaryRowkey\" : true } } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/Users/shf/workplace/addax_test/hbase11xreader/result\" , \"fileName\" : \"qiran\" , \"writeMode\" : \"truncate\" } } } } } hbase20x2stream_version.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"hbase11xreader\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"xxx\" }, \"table\" : \"users\" , \"encoding\" : \"utf-8\" , \"mode\" : \"multiVersionFixedColumn\" , \"maxVersion\" : \"-1\" , \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" }, { \"name\" : \"info: birthday\" , \"type\" : \"date\" , \"format\" : \"yyyy-MM-dd\" }, { \"name\" : \"info: company\" , \"type\" : \"string\" }, { \"name\" : \"address: contry\" , \"type\" : \"string\" }, { \"name\" : \"address: province\" , \"type\" : \"string\" }, { \"name\" : \"address: city\" , \"type\" : \"string\" } ], \"range\" : { \"startRowkey\" : \"\" , \"endRowkey\" : \"\" } } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/Users/shf/workplace/addax_test/hbase11xreader/result\" , \"fileName\" : \"qiran\" , \"writeMode\" : \"truncate\" } } } } }","title":"multiVersionFixedColumn \u6a21\u5f0f"},{"location":"reader/hbase20xreader/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 hbaseConfig \u662f \u65e0 \u8fde\u63a5HBase\u96c6\u7fa4\u9700\u8981\u7684\u914d\u7f6e\u4fe1\u606f, hbase.zookeeper.quorum \u4e3a\u5fc5\u586b\u9879\uff0c\u5176\u4ed6 HBase client\u7684\u914d\u7f6e\u4e3a\u53ef\u9009\u9879 mode \u662f \u65e0 \u8bfb\u53d6hbase\u7684\u6a21\u5f0f\uff0c\u53ef\u586b\u5199 normal \u6216 multiVersionFixedColumn table \u662f \u65e0 \u8981\u8bfb\u53d6\u7684 hbase \u8868\u540d\uff08\u5927\u5c0f\u5199\u654f\u611f\uff09 encoding \u5426 UTF-8 \u7f16\u7801\u65b9\u5f0f\uff0c UTF-8 \u6216\u662f GBK \uff0c\u7528\u4e8e\u5bf9\u4e8c\u8fdb\u5236\u5b58\u50a8\u7684 HBase byte[] \u8f6c\u4e3a String \u65f6\u7684\u7f16\u7801 column \u662f \u65e0 \u8981\u8bfb\u53d6\u7684\u5b57\u6bb5\uff0c normal \u6a21\u5f0f\u4e0e multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b\u9879, \u8be6\u7ec6\u8bf4\u660e\u89c1\u4e0b\u6587 maxVersion \u662f \u65e0 \u6307\u5b9a\u5728\u591a\u7248\u672c\u6a21\u5f0f\u4e0b\u8bfb\u53d6\u7684\u7248\u672c\u6570\uff0c -1 \u8868\u793a\u8bfb\u53d6\u6240\u6709\u7248\u672c, multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b range \u5426 \u65e0 \u6307\u5b9a\u8bfb\u53d6\u7684 rowkey \u8303\u56f4, \u8be6\u89c1\u4e0b\u6587 scanCacheSize \u5426 256 \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u884c\u6570 scanBatchSize \u5426 100 \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u5217\u6570","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/hbase20xreader/#column","text":"\u63cf\u8ff0\uff1a\u8981\u8bfb\u53d6\u7684\u5b57\u6bb5\uff0c normal \u6a21\u5f0f\u4e0e multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b\u9879\u3002","title":"column"},{"location":"reader/hbase20xreader/#normal_1","text":"name \u6307\u5b9a\u8bfb\u53d6\u7684 hbase \u5217\uff0c\u9664\u4e86 rowkey \u5916\uff0c\u5fc5\u987b\u4e3a \u5217\u65cf:\u5217\u540d \u7684\u683c\u5f0f\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c format \u6307\u5b9a\u65e5\u671f\u7c7b\u578b\u7684\u683c\u5f0f\uff0c value \u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece hbase \u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636e value \u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"value\" : \"test\" , \"type\" : \"string\" } ] } normal \u6a21\u5f0f\u4e0b\uff0c\u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cname/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002","title":"normal \u6a21\u5f0f"},{"location":"reader/hbase20xreader/#multiversionfixedcolumn_1","text":"name \u6307\u5b9a\u8bfb\u53d6\u7684 hbase \u5217\uff0c\u9664\u4e86 rowkey \u5916\uff0c\u5fc5\u987b\u4e3a \u5217\u65cf:\u5217\u540d \u7684\u683c\u5f0f\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c format \u6307\u5b9a\u65e5\u671f\u7c7b\u578b\u7684\u683c\u5f0f \u3002 multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u4e0d\u652f\u6301\u5e38\u91cf\u5217\u3002 \u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"mode\" : \"multiVersionFixedColumn\" , \"maxVersion\" : 3 , \"column\" : [ { \"name\" : \"rowkey\" , \"type\" : \"string\" }, { \"name\" : \"info: age\" , \"type\" : \"string\" } ] }","title":"multiVersionFixedColumn \u6a21\u5f0f"},{"location":"reader/hbase20xreader/#range","text":"\u6307\u5b9a\u8bfb\u53d6\u7684 rowkey \u8303\u56f4 startRowkey \uff1a\u6307\u5b9a\u5f00\u59cb rowkey endRowkey : \u6307\u5b9a\u7ed3\u675f rowkey isBinaryRowkey \uff1a\u6307\u5b9a\u914d\u7f6e\u7684 startRowkey \u548c endRowkey \u8f6c\u6362\u4e3a byte[] \u65f6\u7684\u65b9\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3afalse,\u82e5\u4e3atrue\uff0c\u5219\u8c03\u7528 Bytes.toBytesBinary(rowkey) \u65b9\u6cd5\u8fdb\u884c\u8f6c\u6362;\u82e5\u4e3afalse\uff1a\u5219\u8c03\u7528 Bytes.toBytes(rowkey) \u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"range\" : { \"startRowkey\" : \"aaa\" , \"endRowkey\" : \"ccc\" , \"isBinaryRowkey\" : false } }","title":"range"},{"location":"reader/hbase20xreader/#_3","text":"\u4e0b\u9762\u5217\u51fa\u652f\u6301\u7684\u8bfb\u53d6HBase\u6570\u636e\u7c7b\u578b: Addax \u5185\u90e8\u7c7b\u578b HBase \u6570\u636e\u7c7b\u578b Long int, short ,long Double float, double String string, binarystring Date date Boolean boolean \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/hbase20xreader/#_4","text":"\u76ee\u524d\u4e0d\u652f\u6301\u52a8\u6001\u5217\u7684\u8bfb\u53d6\u3002\u8003\u8651\u7f51\u7edc\u4f20\u8f93\u6d41\u91cf\uff08\u652f\u6301\u52a8\u6001\u5217\uff0c\u9700\u8981\u5148\u5c06hbase\u6240\u6709\u5217\u7684\u6570\u636e\u8bfb\u53d6\u51fa\u6765\uff0c\u518d\u6309\u89c4\u5219\u8fdb\u884c\u8fc7\u6ee4\uff09\uff0c\u73b0\u652f\u6301\u7684\u4e24\u79cd\u8bfb\u53d6\u6a21\u5f0f\u4e2d\u9700\u8981\u7528\u6237\u660e\u786e\u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u5217\u3002 \u5173\u4e8e\u540c\u6b65\u4f5c\u4e1a\u7684\u5207\u5206\uff1a\u76ee\u524d\u7684\u5207\u5206\u65b9\u5f0f\u662f\u6839\u636e\u7528\u6237hbase\u8868\u6570\u636e\u7684region\u5206\u5e03\u8fdb\u884c\u5207\u5206\u3002\u5373\uff1a\u5728\u7528\u6237\u586b\u5199\u7684 [startrowkey\uff0cendrowkey\uff3d \u8303\u56f4\u5185\uff0c\u4e00\u4e2aregion\u4f1a\u5207\u5206\u6210\u4e00\u4e2atask\uff0c\u5355\u4e2aregion\u4e0d\u8fdb\u884c\u5207\u5206\u3002 multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u4e0d\u652f\u6301\u589e\u52a0\u5e38\u91cf\u5217","title":"\u9650\u5236"},{"location":"reader/hbase20xsqlreader/","text":"hbase20xsql Reader \u00b6 hbase20xsqlreade r\u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ecePhoenix(HBase SQL)\u8bfb\u53d6\u6570\u636e\uff0c\u5bf9\u5e94\u7248\u672c\u4e3a HBase2.X \u548c Phoenix5.X\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 \u914d\u7f6e\u4e00\u4e2a\u4ecePhoenix\u540c\u6b65\u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a: { \"job\" : { \"content\" : [ { \"reader\" : { \"name\" : \"hbase20xsqlreader\" , \"parameter\" : { \"queryServerAddress\" : \"http://127.0.0.1:8765\" , \"serialization\" : \"PROTOBUF\" , \"table\" : \"TEST\" , \"column\" : [ \"ID\" , \"NAME\" ], \"splitKey\" : \"ID\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"encoding\" : \"UTF-8\" , \"print\" : true } } } ], \"setting\" : { \"speed\" : { \"channel\" : 3 , \"bytes\" : -1 } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 queryServerAddress \u662f \u65e0 Phoenix QueryServer \u5730\u5740, \u8be5\u63d2\u4ef6\u901a\u8fc7 PQS \u8fdb\u884c\u8fde\u63a5 serialization \u5426 PROTOBUF QueryServer\u4f7f\u7528\u7684\u5e8f\u5217\u5316\u534f\u8bae table \u662f \u65e0 \u6240\u8981\u8bfb\u53d6\u8868\u540d schema \u5426 \u65e0 \u8868\u6240\u5728\u7684schema column \u5426 \u5168\u90e8\u5217 \u586b\u5199\u9700\u8981\u4ecephoenix\u8868\u4e2d\u8bfb\u53d6\u7684\u5217\u540d\u96c6\u5408\uff0c\u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\uff0c\u7a7a\u503c\u8868\u793a\u8bfb\u53d6\u6240\u6709\u5217 splitKey \u662f \u65e0 \u6839\u636e\u6570\u636e\u7279\u5f81\u52a8\u6001\u6307\u5b9a\u5207\u5206\u70b9\uff0c\u5bf9\u8868\u6570\u636e\u6309\u7167\u6307\u5b9a\u7684\u5217\u7684\u6700\u5927\u3001\u6700\u5c0f\u503c\u8fdb\u884c\u5207\u5206,\u4ec5\u652f\u6301\u6574\u578b\u548c\u5b57\u7b26\u4e32\u7c7b\u578b splitPoints \u5426 \u65e0 \u6309\u7167\u8868\u7684split\u8fdb\u884c\u5207\u5206 where \u5426 \u65e0 \u652f\u6301\u5bf9\u8868\u67e5\u8be2\u589e\u52a0\u8fc7\u6ee4\u6761\u4ef6\uff0c\u6bcf\u4e2a\u5207\u5206\u90fd\u4f1a\u643a\u5e26\u8be5\u8fc7\u6ee4\u6761\u4ef6 querySql \u5426 \u65e0 \u652f\u6301\u6307\u5b9a\u591a\u4e2a\u67e5\u8be2\u8bed\u53e5\uff0c\u4f46\u67e5\u8be2\u5217\u7c7b\u578b\u548c\u6570\u76ee\u5fc5\u987b\u4fdd\u6301\u4e00\u81f4 \u7c7b\u578b\u8f6c\u6362 \u00b6 \u76ee\u524d\u652f\u6301\u5927\u90e8\u5206 Phoenix \u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 Addax \u5185\u90e8\u7c7b\u578b Phoenix \u6570\u636e\u7c7b\u578b String CHAR, VARCHAR Bytes BINARY, VARBINARY Bool BOOLEAN Long INTEGER, TINYINT, SMALLINT, BIGINT Double FLOAT, DECIMAL, DOUBLE, Date DATE, TIME, TIMESTAMP \u7ea6\u675f\u9650\u5236 \u00b6 \u5207\u5206\u8868\u65f6\u5207\u5206\u5217\u4ec5\u652f\u6301\u5355\u4e2a\u5217\uff0c\u4e14\u8be5\u5217\u5fc5\u987b\u662f\u8868\u4e3b\u952e \u4e0d\u8bbe\u7f6e splitPoint \u9ed8\u8ba4\u4f7f\u7528\u81ea\u52a8\u5207\u5206\uff0c\u6b64\u65f6\u5207\u5206\u5217\u4ec5\u652f\u6301\u6574\u5f62\u548c\u5b57\u7b26\u578b \u8868\u540d\u548c SCHEMA \u540d\u53ca\u5217\u540d\u5927\u5c0f\u5199\u654f\u611f\uff0c\u8bf7\u4e0e Phoenix \u8868\u5b9e\u9645\u5927\u5c0f\u5199\u4fdd\u6301\u4e00\u81f4 \u4ec5\u652f\u6301\u901a\u8fc7 Phoenix QueryServer \u8bfb\u53d6\u6570\u636e\uff0c\u56e0\u6b64\u60a8\u7684 Phoenix \u5fc5\u987b\u542f\u52a8 QueryServer \u670d\u52a1\u624d\u80fd\u4f7f\u7528\u672c\u63d2\u4ef6","title":"hbase20xsql Reader"},{"location":"reader/hbase20xsqlreader/#hbase20xsql-reader","text":"hbase20xsqlreade r\u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ecePhoenix(HBase SQL)\u8bfb\u53d6\u6570\u636e\uff0c\u5bf9\u5e94\u7248\u672c\u4e3a HBase2.X \u548c Phoenix5.X\u3002","title":"hbase20xsql Reader"},{"location":"reader/hbase20xsqlreader/#_1","text":"\u914d\u7f6e\u4e00\u4e2a\u4ecePhoenix\u540c\u6b65\u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a: { \"job\" : { \"content\" : [ { \"reader\" : { \"name\" : \"hbase20xsqlreader\" , \"parameter\" : { \"queryServerAddress\" : \"http://127.0.0.1:8765\" , \"serialization\" : \"PROTOBUF\" , \"table\" : \"TEST\" , \"column\" : [ \"ID\" , \"NAME\" ], \"splitKey\" : \"ID\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"encoding\" : \"UTF-8\" , \"print\" : true } } } ], \"setting\" : { \"speed\" : { \"channel\" : 3 , \"bytes\" : -1 } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"reader/hbase20xsqlreader/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 queryServerAddress \u662f \u65e0 Phoenix QueryServer \u5730\u5740, \u8be5\u63d2\u4ef6\u901a\u8fc7 PQS \u8fdb\u884c\u8fde\u63a5 serialization \u5426 PROTOBUF QueryServer\u4f7f\u7528\u7684\u5e8f\u5217\u5316\u534f\u8bae table \u662f \u65e0 \u6240\u8981\u8bfb\u53d6\u8868\u540d schema \u5426 \u65e0 \u8868\u6240\u5728\u7684schema column \u5426 \u5168\u90e8\u5217 \u586b\u5199\u9700\u8981\u4ecephoenix\u8868\u4e2d\u8bfb\u53d6\u7684\u5217\u540d\u96c6\u5408\uff0c\u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\uff0c\u7a7a\u503c\u8868\u793a\u8bfb\u53d6\u6240\u6709\u5217 splitKey \u662f \u65e0 \u6839\u636e\u6570\u636e\u7279\u5f81\u52a8\u6001\u6307\u5b9a\u5207\u5206\u70b9\uff0c\u5bf9\u8868\u6570\u636e\u6309\u7167\u6307\u5b9a\u7684\u5217\u7684\u6700\u5927\u3001\u6700\u5c0f\u503c\u8fdb\u884c\u5207\u5206,\u4ec5\u652f\u6301\u6574\u578b\u548c\u5b57\u7b26\u4e32\u7c7b\u578b splitPoints \u5426 \u65e0 \u6309\u7167\u8868\u7684split\u8fdb\u884c\u5207\u5206 where \u5426 \u65e0 \u652f\u6301\u5bf9\u8868\u67e5\u8be2\u589e\u52a0\u8fc7\u6ee4\u6761\u4ef6\uff0c\u6bcf\u4e2a\u5207\u5206\u90fd\u4f1a\u643a\u5e26\u8be5\u8fc7\u6ee4\u6761\u4ef6 querySql \u5426 \u65e0 \u652f\u6301\u6307\u5b9a\u591a\u4e2a\u67e5\u8be2\u8bed\u53e5\uff0c\u4f46\u67e5\u8be2\u5217\u7c7b\u578b\u548c\u6570\u76ee\u5fc5\u987b\u4fdd\u6301\u4e00\u81f4","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/hbase20xsqlreader/#_3","text":"\u76ee\u524d\u652f\u6301\u5927\u90e8\u5206 Phoenix \u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 Addax \u5185\u90e8\u7c7b\u578b Phoenix \u6570\u636e\u7c7b\u578b String CHAR, VARCHAR Bytes BINARY, VARBINARY Bool BOOLEAN Long INTEGER, TINYINT, SMALLINT, BIGINT Double FLOAT, DECIMAL, DOUBLE, Date DATE, TIME, TIMESTAMP","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/hbase20xsqlreader/#_4","text":"\u5207\u5206\u8868\u65f6\u5207\u5206\u5217\u4ec5\u652f\u6301\u5355\u4e2a\u5217\uff0c\u4e14\u8be5\u5217\u5fc5\u987b\u662f\u8868\u4e3b\u952e \u4e0d\u8bbe\u7f6e splitPoint \u9ed8\u8ba4\u4f7f\u7528\u81ea\u52a8\u5207\u5206\uff0c\u6b64\u65f6\u5207\u5206\u5217\u4ec5\u652f\u6301\u6574\u5f62\u548c\u5b57\u7b26\u578b \u8868\u540d\u548c SCHEMA \u540d\u53ca\u5217\u540d\u5927\u5c0f\u5199\u654f\u611f\uff0c\u8bf7\u4e0e Phoenix \u8868\u5b9e\u9645\u5927\u5c0f\u5199\u4fdd\u6301\u4e00\u81f4 \u4ec5\u652f\u6301\u901a\u8fc7 Phoenix QueryServer \u8bfb\u53d6\u6570\u636e\uff0c\u56e0\u6b64\u60a8\u7684 Phoenix \u5fc5\u987b\u542f\u52a8 QueryServer \u670d\u52a1\u624d\u80fd\u4f7f\u7528\u672c\u63d2\u4ef6","title":"\u7ea6\u675f\u9650\u5236"},{"location":"reader/hdfsreader/","text":"HDFS Reader \u00b6 HdfsReade r\u63d0\u4f9b\u4e86\u8bfb\u53d6\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u6570\u636e\u5b58\u50a8\u7684\u80fd\u529b\u3002 \u76ee\u524dHdfsReader\u652f\u6301\u7684\u6587\u4ef6\u683c\u5f0f\u5982\u4e0b\uff1a textfile\uff08text\uff09 orcfile\uff08orc\uff09 rcfile\uff08rc\uff09 sequence file\uff08seq\uff09 Csv(csv) parquet \u529f\u80fd\u4e0e\u9650\u5236 \u00b6 \u652f\u6301textfile\u3001orcfile\u3001parquet\u3001rcfile\u3001sequence file\u548ccsv\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u4e14\u8981\u6c42\u6587\u4ef6\u5185\u5bb9\u5b58\u653e\u7684\u662f\u4e00\u5f20\u903b\u8f91\u610f\u4e49\u4e0a\u7684\u4e8c\u7ef4\u8868\u3002 \u652f\u6301\u591a\u79cd\u7c7b\u578b\u6570\u636e\u8bfb\u53d6(\u4f7f\u7528String\u8868\u793a)\uff0c\u652f\u6301\u5217\u88c1\u526a\uff0c\u652f\u6301\u5217\u5e38\u91cf \u652f\u6301\u9012\u5f52\u8bfb\u53d6\u3001\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\uff08 * \u548c ? \uff09\u3002 \u652f\u6301\u5e38\u89c1\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u5305\u62ec GZIP\uff0c SNAPPY\uff0c ZLIB\u7b49\u3002 \u591a\u4e2aFile\u53ef\u4ee5\u652f\u6301\u5e76\u53d1\u8bfb\u53d6\u3002 \u652f\u6301sequence file\u6570\u636e\u538b\u7f29\uff0c\u76ee\u524d\u652f\u6301lzo\u538b\u7f29\u65b9\u5f0f\u3002 csv\u7c7b\u578b\u652f\u6301\u538b\u7f29\u683c\u5f0f\u6709\uff1agzip\u3001bz2\u3001zip\u3001lzo\u3001lzo_deflate\u3001snappy\u3002 \u76ee\u524d\u63d2\u4ef6\u4e2dHive\u7248\u672c\u4e3a 3.1.1 \uff0cHadoop\u7248\u672c\u4e3a 3.1.1 , \u5728Hadoop 2.7.x , Hadoop 3.1.x \u548cHive 2.x , hive 3.1.x \u6d4b\u8bd5\u73af\u5883\u4e2d\u5199\u5165\u6b63\u5e38\uff1b\u5176\u5b83\u7248\u672c\u7406\u8bba\u4e0a\u90fd\u652f\u6301\uff0c\u4f46\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u524d\uff0c\u8bf7\u8fdb\u4e00\u6b65\u6d4b\u8bd5\uff1b \u652f\u6301 kerberos \u8ba4\u8bc1 \u914d\u7f6e\u6837\u4f8b \u00b6 { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 3 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"hdfsreader\" , \"parameter\" : { \"path\" : \"/user/hive/warehouse/mytable01/*\" , \"defaultFS\" : \"hdfs://xxx:port\" , \"column\" : [ { \"index\" : 0 , \"type\" : \"long\" }, { \"index\" : 1 , \"type\" : \"boolean\" }, { \"type\" : \"string\" , \"value\" : \"hello\" }, { \"index\" : 2 , \"type\" : \"double\" } ], \"fileType\" : \"orc\" , \"encoding\" : \"UTF-8\" , \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u914d\u7f6e\u9879\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u8bf4\u660e path \u662f \u65e0 \u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u8def\u5f84 defaultFS \u662f \u65e0 Hadoop hdfs \u6587\u4ef6\u7cfb\u7edf NAMENODE \u8282\u70b9\u5730\u5740\uff0c\u5982\u679c\u914d\u7f6e\u4e86 HA \u6a21\u5f0f\uff0c\u5219\u4e3a defaultFS \u7684\u503c fileType \u662f \u65e0 \u6587\u4ef6\u7684\u7c7b\u578b column \u662f \u65e0 \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868 fieldDelimiter \u5426 , \u6307\u5b9a\u6587\u672c\u6587\u4ef6\u7684\u5b57\u6bb5\u5206\u9694\u7b26\uff0c\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0d\u9700\u8981\u6307\u5b9a\u8be5\u9879 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e\uff0c \u76ee\u524d\u4ec5\u652f\u6301 utf-8 nullFormat \u5426 \u65e0 \u81ea\u5b9a\u4e49\u54ea\u4e9b\u5b57\u7b26\u53ef\u4ee5\u8868\u793a\u4e3a\u7a7a,\u4f8b\u5982\u5982\u679c\u7528\u6237\u914d\u7f6e: \"\\\\N\" \uff0c\u90a3\u4e48\u5982\u679c\u6e90\u5934\u6570\u636e\u662f \"\\N\" \uff0c\u89c6\u4f5c null \u5b57\u6bb5 haveKerberos \u5426 \u65e0 \u662f\u5426\u542f\u7528 Kerberos \u8ba4\u8bc1\uff0c\u5982\u679c\u542f\u7528\uff0c\u5219\u9700\u8981\u540c\u65f6\u914d\u7f6e kerberosKeytabFilePath \uff0c kerberosPrincipal kerberosKeytabFilePath \u5426 \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u6587\u4ef6\u8def\u5f84, \u6bd4\u5982 /your/path/addax.service.keytab kerberosPrincipal \u5426 \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u4e3b\u4f53, \u6bd4\u5982 addax/node1@WGZHAO.COM compress \u5426 \u65e0 \u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u7684\u538b\u7f29\u683c\u5f0f hadoopConfig \u5426 \u65e0 \u91cc\u53ef\u4ee5\u914d\u7f6e\u4e0e Hadoop \u76f8\u5173\u7684\u4e00\u4e9b\u9ad8\u7ea7\u53c2\u6570\uff0c\u6bd4\u5982HA\u7684\u914d\u7f6e path \u00b6 \u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u8def\u5f84\uff0c\u5982\u679c\u8981\u8bfb\u53d6\u591a\u4e2a\u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f * \uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84\uff1a \u5f53\u6307\u5b9a\u5355\u4e2aHdfs\u6587\u4ef6\uff0cHdfsReader\u6682\u65f6\u53ea\u80fd\u4f7f\u7528\u5355\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u4e8c\u671f\u8003\u8651\u5728\u975e\u538b\u7f29\u6587\u4ef6\u60c5\u51b5\u4e0b\u9488\u5bf9\u5355\u4e2aFile\u53ef\u4ee5\u8fdb\u884c\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6\u3002 \u5f53\u6307\u5b9a\u591a\u4e2aHdfs\u6587\u4ef6\uff0cHdfsReader\u652f\u6301\u4f7f\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u7ebf\u7a0b\u5e76\u53d1\u6570\u901a\u8fc7\u901a\u9053\u6570\u6307\u5b9a\u3002 \u5f53\u6307\u5b9a\u901a\u914d\u7b26\uff0cHdfsReader\u5c1d\u8bd5\u904d\u5386\u51fa\u591a\u4e2a\u6587\u4ef6\u4fe1\u606f\u3002\u4f8b\u5982: \u6307\u5b9a /* \u4ee3\u8868\u8bfb\u53d6 / \u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\uff0c\u6307\u5b9a /bazhen/* \u4ee3\u8868\u8bfb\u53d6 bazhen \u76ee\u5f55\u4e0b\u6e38\u6240\u6709\u7684\u6587\u4ef6\u3002HdfsReader\u76ee\u524d\u53ea\u652f\u6301 * \u548c ? \u4f5c\u4e3a\u6587\u4ef6\u901a\u914d\u7b26\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cAddax \u4f1a\u5c06\u4e00\u4e2a\u4f5c\u4e1a\u4e0b\u540c\u6b65\u7684\u6240\u6709\u7684\u6587\u4ef6\u89c6\u4f5c\u540c\u4e00\u5f20\u6570\u636e\u8868\u3002\u7528\u6237\u5fc5\u987b\u81ea\u5df1\u4fdd\u8bc1\u6240\u6709\u7684File\u80fd\u591f\u9002\u914d\u540c\u4e00\u5957schema\u4fe1\u606f\u3002\u5e76\u4e14\u63d0\u4f9b\u7ed9Addax\u6743\u9650\u53ef\u8bfb\u3002 fileType \u00b6 \u63cf\u8ff0\uff1a\u6587\u4ef6\u7684\u7c7b\u578b\uff0c\u76ee\u524d\u53ea\u652f\u6301\u7528\u6237\u914d\u7f6e\u4e3a text \u8868\u793a textfile \u6587\u4ef6\u683c\u5f0f orc \u8868\u793a orcfile \u6587\u4ef6\u683c\u5f0f rc \u8868\u793a rcfile \u6587\u4ef6\u683c\u5f0f seq \u8868\u793a sequence file \u6587\u4ef6\u683c\u5f0f csv \u8868\u793a\u666e\u901a hdfs \u6587\u4ef6\u683c\u5f0f\uff08\u903b\u8f91\u4e8c\u7ef4\u8868\uff09 parquet \u8868\u793a parquet \u6587\u4ef6\u683c\u5f0f \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cHdfsReader\u80fd\u591f\u81ea\u52a8\u8bc6\u522b\u6587\u4ef6\u662f orcfile \u3001 textfile \u6216\u8005\u8fd8\u662f\u5176\u5b83\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u4f46\u8be5\u9879\u662f\u5fc5\u586b\u9879\uff0cHdfsReader\u5219\u4f1a\u53ea\u8bfb\u53d6\u7528\u6237\u914d\u7f6e\u7684\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u5ffd\u7565\u8def\u5f84\u4e0b\u5176\u4ed6\u683c\u5f0f\u7684\u6587\u4ef6 \u53e6\u5916\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e textfile \u548c orcfile \u662f\u4e24\u79cd\u5b8c\u5168\u4e0d\u540c\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u6240\u4ee5HdfsReader\u5bf9\u8fd9\u4e24\u79cd\u6587\u4ef6\u7684\u89e3\u6790\u65b9\u5f0f\u4e5f\u5b58\u5728\u5dee\u5f02\uff0c\u8fd9\u79cd\u5dee\u5f02\u5bfc\u81f4hive\u652f\u6301\u7684\u590d\u6742\u590d\u5408\u7c7b\u578b(\u6bd4\u5982map,array,struct,union)\u5728\u8f6c\u6362\u4e3a\u652f\u6301\u7684String\u7c7b\u578b\u65f6\uff0c\u8f6c\u6362\u7684\u7ed3\u679c\u683c\u5f0f\u7565\u6709\u5dee\u5f02\uff0c\u6bd4\u5982\u4ee5map\u7c7b\u578b\u4e3a\u4f8b\uff1a orcfile : map\u7c7b\u578b\u8f6c\u6362\u6210 string \u7c7b\u578b\u540e\uff0c\u7ed3\u679c\u4e3a {job=80, team=60, person=70} textfile : map\u7c7b\u578b\u8f6c\u6362\u6210 string \u7c7b\u578b\u540e\uff0c\u7ed3\u679c\u4e3a job:80,team:60,person:70 \u4ece\u4e0a\u9762\u7684\u8f6c\u6362\u7ed3\u679c\u53ef\u4ee5\u770b\u51fa\uff0c\u6570\u636e\u672c\u8eab\u6ca1\u6709\u53d8\u5316\uff0c\u4f46\u662f\u8868\u793a\u7684\u683c\u5f0f\u7565\u6709\u5dee\u5f02\uff0c\u6240\u4ee5\u5982\u679c\u7528\u6237\u914d\u7f6e\u7684\u6587\u4ef6\u8def\u5f84\u4e2d\u8981\u540c\u6b65\u7684\u5b57\u6bb5\u5728Hive\u4e2d\u662f\u590d\u5408\u7c7b\u578b\u7684\u8bdd\uff0c\u5efa\u8bae\u914d\u7f6e\u7edf\u4e00\u7684\u6587\u4ef6\u683c\u5f0f\u3002 \u5982\u679c\u9700\u8981\u7edf\u4e00\u590d\u5408\u7c7b\u578b\u89e3\u6790\u51fa\u6765\u7684\u683c\u5f0f\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u5728hive\u5ba2\u6237\u7aef\u5c06 textfile \u683c\u5f0f\u7684\u8868\u5bfc\u6210 orcfile \u683c\u5f0f\u7684\u8868 column \u00b6 \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c index \u6307\u5b9a\u5f53\u524d\u5217\u6765\u81ea\u4e8e\u6587\u672c\u7b2c\u51e0\u5217(\u4ee50\u5f00\u59cb)\uff0c value \u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece\u6e90\u5934\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636e value \u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u53ef\u4ee5\u5168\u90e8\u6309\u7167String\u7c7b\u578b\u8bfb\u53d6\u6570\u636e\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"column\" : [ \"*\" ] } \u7528\u6237\u53ef\u4ee5\u6307\u5b9aColumn\u5b57\u6bb5\u4fe1\u606f\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a [ { \"type\" : \"long\" , \"index\" : 0 , \"description\" : \"\u4ece\u672c\u5730\u6587\u4ef6\u6587\u672c\u7b2c\u4e00\u5217\u83b7\u53d6int\u5b57\u6bb5\" }, { \"type\" : \"string\" , \"value\" : \"addax\" , \"description\" : \"HdfsReader\u5185\u90e8\u751f\u6210alibaba\u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\u4f5c\u4e3a\u5f53\u524d\u5b57\u6bb5\" } ] \u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cindex/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002 compress \u00b6 \u5f53fileType\uff08\u6587\u4ef6\u7c7b\u578b\uff09\u4e3acsv\u4e0b\u7684\u6587\u4ef6\u538b\u7f29\u65b9\u5f0f\uff0c\u76ee\u524d\u4ec5\u652f\u6301 gzip\u3001bz2\u3001zip\u3001lzo\u3001lzo_deflate\u3001hadoop-snappy\u3001framing-snappy\u538b\u7f29\uff1b \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0clzo\u5b58\u5728\u4e24\u79cd\u538b\u7f29\u683c\u5f0f\uff1alzo\u548clzo_deflate\uff0c\u7528\u6237\u5728\u914d\u7f6e\u7684\u65f6\u5019\u9700\u8981\u7559\u5fc3\uff0c\u4e0d\u8981\u914d\u9519\u4e86\uff1b\u53e6\u5916\uff0c\u7531\u4e8esnappy\u76ee\u524d\u6ca1\u6709\u7edf\u4e00\u7684stream format\uff0caddax\u76ee\u524d\u53ea\u652f\u6301\u6700\u4e3b\u6d41\u7684\u4e24\u79cd\uff1ahadoop-snappy\uff08hadoop\u4e0a\u7684snappy stream format\uff09\u548c framing-snappy\uff08google\u5efa\u8bae\u7684snappy stream format\uff09; hadoopConfig \u00b6 hadoopConfig \u91cc\u53ef\u4ee5\u914d\u7f6e\u4e0e Hadoop \u76f8\u5173\u7684\u4e00\u4e9b\u9ad8\u7ea7\u53c2\u6570\uff0c\u6bd4\u5982HA\u7684\u914d\u7f6e { \"hadoopConfig\" : { \"dfs.nameservices\" : \"cluster\" , \"dfs.ha.namenodes.cluster\" : \"nn1,nn2\" , \"dfs.namenode.rpc-address.cluster.nn1\" : \"node1.example.com:8020\" , \"dfs.namenode.rpc-address.cluster.nn2\" : \"node2.example.com:8020\" , \"dfs.client.failover.proxy.provider.cluster\" : \"org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider\" } } \u8fd9\u91cc\u7684 cluster \u8868\u793a HDFS \u914d\u7f6e\u6210HA\u65f6\u7684\u540d\u5b57\uff0c\u4e5f\u662f defaultFS \u914d\u7f6e\u9879\u4e2d\u7684\u540d\u5b57 \u5982\u679c\u5b9e\u9645\u73af\u5883\u4e2d\u7684\u540d\u5b57\u4e0d\u662f cluster \uff0c\u5219\u4e0a\u8ff0\u914d\u7f6e\u4e2d\u6240\u6709\u5199\u6709 cluster \u90fd\u9700\u8981\u66ff\u6362 csvReaderConfig \u00b6 \u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u53c2\u6570\u914d\u7f6e\uff0cMap\u7c7b\u578b\u3002\u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u4f7f\u7528\u7684CsvReader\u8fdb\u884c\u8bfb\u53d6\uff0c\u4f1a\u6709\u5f88\u591a\u914d\u7f6e\uff0c\u4e0d\u914d\u7f6e\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 \u5e38\u89c1\u914d\u7f6e\uff1a { \"csvReaderConfig\" : { \"safetySwitch\" : false , \"skipEmptyRecords\" : false , \"useTextQualifier\" : false } } \u6240\u6709\u914d\u7f6e\u9879\u53ca\u9ed8\u8ba4\u503c,\u914d\u7f6e\u65f6 csvReaderConfig \u7684map\u4e2d\u8bf7 \u4e25\u683c\u6309\u7167\u4ee5\u4e0b\u5b57\u6bb5\u540d\u5b57\u8fdb\u884c\u914d\u7f6e \uff1a boolean caseSensitive = true; char textQualifier = 34; boolean trimWhitespace = true; boolean useTextQualifier = true;//\u662f\u5426\u4f7f\u7528csv\u8f6c\u4e49\u5b57\u7b26 char delimiter = 44;//\u5206\u9694\u7b26 char recordDelimiter = 0; char comment = 35; boolean useComments = false; int escapeMode = 1; boolean safetySwitch = true;//\u5355\u5217\u957f\u5ea6\u662f\u5426\u9650\u5236100000\u5b57\u7b26 boolean skipEmptyRecords = true;//\u662f\u5426\u8df3\u8fc7\u7a7a\u884c boolean captureRawRecord = true; \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b Hive\u8868 \u6570\u636e\u7c7b\u578b Long TINYINT, SMALLINT, INT, BIGINT Double FLOAT, DOUBLE String String, CHAR, VARCHAR, STRUCT, MAP, ARRAY, UNION, BINARY Boolean BOOLEAN Date Date, TIMESTAMP Bytes BINARY \u5176\u4e2d\uff1a Long \u662f\u6307Hdfs\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528\u6574\u5f62\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 123456789 Double \u662f\u6307Hdfs\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Double\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 3.1415 Boolean \u662f\u6307Hdfs\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Boolean\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 true \u3001 false \u3002\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002 Date \u662f\u6307Hdfs\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Date\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 2014-12-31 Bytes \u662f\u6307HDFS\u6587\u4ef6\u4e2d\u4f7f\u7528\u4e8c\u8fdb\u5236\u5b58\u50a8\u7684\u5185\u5bb9\uff0c\u6bd4\u5982\u4e00\u5f20\u56fe\u7247\u7684\u6570\u636e \u7279\u522b\u63d0\u9192\uff1a Hive\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b TIMESTAMP \u53ef\u4ee5\u7cbe\u786e\u5230\u7eb3\u79d2\u7ea7\u522b\uff0c\u6240\u4ee5 textfile \u3001 orcfile \u4e2d TIMESTAMP \u5b58\u653e\u7684\u6570\u636e\u7c7b\u4f3c\u4e8e 2015-08-21 22:40:47.397898389 \uff0c \u5982\u679c\u8f6c\u6362\u7684\u7c7b\u578b\u914d\u7f6e\u4e3aAddax\u7684Date\uff0c\u8f6c\u6362\u4e4b\u540e\u4f1a\u5bfc\u81f4\u7eb3\u79d2\u90e8\u5206\u4e22\u5931\uff0c\u6240\u4ee5\u5982\u679c\u9700\u8981\u4fdd\u7559\u7eb3\u79d2\u90e8\u5206\u7684\u6570\u636e\uff0c\u8bf7\u914d\u7f6e\u8f6c\u6362\u7c7b\u578b\u4e3a String \u7c7b\u578b\u3002 FAQ \u00b6 Q: \u5982\u679c\u62a5java.io.IOException: Maximum column length of 100,000 exceeded in column...\u5f02\u5e38\u4fe1\u606f\uff0c\u8bf4\u660e\u6570\u636e\u6e90column\u5b57\u6bb5\u957f\u5ea6\u8d85\u8fc7\u4e86100000\u5b57\u7b26\u3002 A: \u9700\u8981\u5728json\u7684reader\u91cc\u589e\u52a0\u5982\u4e0b\u914d\u7f6e { \"csvReaderConfig\" : { \"safetySwitch\" : false , \"skipEmptyRecords\" : false , \"useTextQualifier\" : false } } safetySwitch = false \u8868\u793a\u5355\u5217\u957f\u5ea6\u4e0d\u9650\u5236100000\u5b57\u7b26","title":"HDFS Reader"},{"location":"reader/hdfsreader/#hdfs-reader","text":"HdfsReade r\u63d0\u4f9b\u4e86\u8bfb\u53d6\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u6570\u636e\u5b58\u50a8\u7684\u80fd\u529b\u3002 \u76ee\u524dHdfsReader\u652f\u6301\u7684\u6587\u4ef6\u683c\u5f0f\u5982\u4e0b\uff1a textfile\uff08text\uff09 orcfile\uff08orc\uff09 rcfile\uff08rc\uff09 sequence file\uff08seq\uff09 Csv(csv) parquet","title":"HDFS Reader"},{"location":"reader/hdfsreader/#_1","text":"\u652f\u6301textfile\u3001orcfile\u3001parquet\u3001rcfile\u3001sequence file\u548ccsv\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u4e14\u8981\u6c42\u6587\u4ef6\u5185\u5bb9\u5b58\u653e\u7684\u662f\u4e00\u5f20\u903b\u8f91\u610f\u4e49\u4e0a\u7684\u4e8c\u7ef4\u8868\u3002 \u652f\u6301\u591a\u79cd\u7c7b\u578b\u6570\u636e\u8bfb\u53d6(\u4f7f\u7528String\u8868\u793a)\uff0c\u652f\u6301\u5217\u88c1\u526a\uff0c\u652f\u6301\u5217\u5e38\u91cf \u652f\u6301\u9012\u5f52\u8bfb\u53d6\u3001\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\uff08 * \u548c ? \uff09\u3002 \u652f\u6301\u5e38\u89c1\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u5305\u62ec GZIP\uff0c SNAPPY\uff0c ZLIB\u7b49\u3002 \u591a\u4e2aFile\u53ef\u4ee5\u652f\u6301\u5e76\u53d1\u8bfb\u53d6\u3002 \u652f\u6301sequence file\u6570\u636e\u538b\u7f29\uff0c\u76ee\u524d\u652f\u6301lzo\u538b\u7f29\u65b9\u5f0f\u3002 csv\u7c7b\u578b\u652f\u6301\u538b\u7f29\u683c\u5f0f\u6709\uff1agzip\u3001bz2\u3001zip\u3001lzo\u3001lzo_deflate\u3001snappy\u3002 \u76ee\u524d\u63d2\u4ef6\u4e2dHive\u7248\u672c\u4e3a 3.1.1 \uff0cHadoop\u7248\u672c\u4e3a 3.1.1 , \u5728Hadoop 2.7.x , Hadoop 3.1.x \u548cHive 2.x , hive 3.1.x \u6d4b\u8bd5\u73af\u5883\u4e2d\u5199\u5165\u6b63\u5e38\uff1b\u5176\u5b83\u7248\u672c\u7406\u8bba\u4e0a\u90fd\u652f\u6301\uff0c\u4f46\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u524d\uff0c\u8bf7\u8fdb\u4e00\u6b65\u6d4b\u8bd5\uff1b \u652f\u6301 kerberos \u8ba4\u8bc1","title":"\u529f\u80fd\u4e0e\u9650\u5236"},{"location":"reader/hdfsreader/#_2","text":"{ \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 3 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"hdfsreader\" , \"parameter\" : { \"path\" : \"/user/hive/warehouse/mytable01/*\" , \"defaultFS\" : \"hdfs://xxx:port\" , \"column\" : [ { \"index\" : 0 , \"type\" : \"long\" }, { \"index\" : 1 , \"type\" : \"boolean\" }, { \"type\" : \"string\" , \"value\" : \"hello\" }, { \"index\" : 2 , \"type\" : \"double\" } ], \"fileType\" : \"orc\" , \"encoding\" : \"UTF-8\" , \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"reader/hdfsreader/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u8bf4\u660e path \u662f \u65e0 \u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u8def\u5f84 defaultFS \u662f \u65e0 Hadoop hdfs \u6587\u4ef6\u7cfb\u7edf NAMENODE \u8282\u70b9\u5730\u5740\uff0c\u5982\u679c\u914d\u7f6e\u4e86 HA \u6a21\u5f0f\uff0c\u5219\u4e3a defaultFS \u7684\u503c fileType \u662f \u65e0 \u6587\u4ef6\u7684\u7c7b\u578b column \u662f \u65e0 \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868 fieldDelimiter \u5426 , \u6307\u5b9a\u6587\u672c\u6587\u4ef6\u7684\u5b57\u6bb5\u5206\u9694\u7b26\uff0c\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0d\u9700\u8981\u6307\u5b9a\u8be5\u9879 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e\uff0c \u76ee\u524d\u4ec5\u652f\u6301 utf-8 nullFormat \u5426 \u65e0 \u81ea\u5b9a\u4e49\u54ea\u4e9b\u5b57\u7b26\u53ef\u4ee5\u8868\u793a\u4e3a\u7a7a,\u4f8b\u5982\u5982\u679c\u7528\u6237\u914d\u7f6e: \"\\\\N\" \uff0c\u90a3\u4e48\u5982\u679c\u6e90\u5934\u6570\u636e\u662f \"\\N\" \uff0c\u89c6\u4f5c null \u5b57\u6bb5 haveKerberos \u5426 \u65e0 \u662f\u5426\u542f\u7528 Kerberos \u8ba4\u8bc1\uff0c\u5982\u679c\u542f\u7528\uff0c\u5219\u9700\u8981\u540c\u65f6\u914d\u7f6e kerberosKeytabFilePath \uff0c kerberosPrincipal kerberosKeytabFilePath \u5426 \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u6587\u4ef6\u8def\u5f84, \u6bd4\u5982 /your/path/addax.service.keytab kerberosPrincipal \u5426 \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u4e3b\u4f53, \u6bd4\u5982 addax/node1@WGZHAO.COM compress \u5426 \u65e0 \u6307\u5b9a\u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u7684\u538b\u7f29\u683c\u5f0f hadoopConfig \u5426 \u65e0 \u91cc\u53ef\u4ee5\u914d\u7f6e\u4e0e Hadoop \u76f8\u5173\u7684\u4e00\u4e9b\u9ad8\u7ea7\u53c2\u6570\uff0c\u6bd4\u5982HA\u7684\u914d\u7f6e","title":"\u914d\u7f6e\u9879\u8bf4\u660e"},{"location":"reader/hdfsreader/#path","text":"\u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u8def\u5f84\uff0c\u5982\u679c\u8981\u8bfb\u53d6\u591a\u4e2a\u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f * \uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84\uff1a \u5f53\u6307\u5b9a\u5355\u4e2aHdfs\u6587\u4ef6\uff0cHdfsReader\u6682\u65f6\u53ea\u80fd\u4f7f\u7528\u5355\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u4e8c\u671f\u8003\u8651\u5728\u975e\u538b\u7f29\u6587\u4ef6\u60c5\u51b5\u4e0b\u9488\u5bf9\u5355\u4e2aFile\u53ef\u4ee5\u8fdb\u884c\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6\u3002 \u5f53\u6307\u5b9a\u591a\u4e2aHdfs\u6587\u4ef6\uff0cHdfsReader\u652f\u6301\u4f7f\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u7ebf\u7a0b\u5e76\u53d1\u6570\u901a\u8fc7\u901a\u9053\u6570\u6307\u5b9a\u3002 \u5f53\u6307\u5b9a\u901a\u914d\u7b26\uff0cHdfsReader\u5c1d\u8bd5\u904d\u5386\u51fa\u591a\u4e2a\u6587\u4ef6\u4fe1\u606f\u3002\u4f8b\u5982: \u6307\u5b9a /* \u4ee3\u8868\u8bfb\u53d6 / \u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\uff0c\u6307\u5b9a /bazhen/* \u4ee3\u8868\u8bfb\u53d6 bazhen \u76ee\u5f55\u4e0b\u6e38\u6240\u6709\u7684\u6587\u4ef6\u3002HdfsReader\u76ee\u524d\u53ea\u652f\u6301 * \u548c ? \u4f5c\u4e3a\u6587\u4ef6\u901a\u914d\u7b26\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cAddax \u4f1a\u5c06\u4e00\u4e2a\u4f5c\u4e1a\u4e0b\u540c\u6b65\u7684\u6240\u6709\u7684\u6587\u4ef6\u89c6\u4f5c\u540c\u4e00\u5f20\u6570\u636e\u8868\u3002\u7528\u6237\u5fc5\u987b\u81ea\u5df1\u4fdd\u8bc1\u6240\u6709\u7684File\u80fd\u591f\u9002\u914d\u540c\u4e00\u5957schema\u4fe1\u606f\u3002\u5e76\u4e14\u63d0\u4f9b\u7ed9Addax\u6743\u9650\u53ef\u8bfb\u3002","title":"path"},{"location":"reader/hdfsreader/#filetype","text":"\u63cf\u8ff0\uff1a\u6587\u4ef6\u7684\u7c7b\u578b\uff0c\u76ee\u524d\u53ea\u652f\u6301\u7528\u6237\u914d\u7f6e\u4e3a text \u8868\u793a textfile \u6587\u4ef6\u683c\u5f0f orc \u8868\u793a orcfile \u6587\u4ef6\u683c\u5f0f rc \u8868\u793a rcfile \u6587\u4ef6\u683c\u5f0f seq \u8868\u793a sequence file \u6587\u4ef6\u683c\u5f0f csv \u8868\u793a\u666e\u901a hdfs \u6587\u4ef6\u683c\u5f0f\uff08\u903b\u8f91\u4e8c\u7ef4\u8868\uff09 parquet \u8868\u793a parquet \u6587\u4ef6\u683c\u5f0f \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cHdfsReader\u80fd\u591f\u81ea\u52a8\u8bc6\u522b\u6587\u4ef6\u662f orcfile \u3001 textfile \u6216\u8005\u8fd8\u662f\u5176\u5b83\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u4f46\u8be5\u9879\u662f\u5fc5\u586b\u9879\uff0cHdfsReader\u5219\u4f1a\u53ea\u8bfb\u53d6\u7528\u6237\u914d\u7f6e\u7684\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u5ffd\u7565\u8def\u5f84\u4e0b\u5176\u4ed6\u683c\u5f0f\u7684\u6587\u4ef6 \u53e6\u5916\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e textfile \u548c orcfile \u662f\u4e24\u79cd\u5b8c\u5168\u4e0d\u540c\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u6240\u4ee5HdfsReader\u5bf9\u8fd9\u4e24\u79cd\u6587\u4ef6\u7684\u89e3\u6790\u65b9\u5f0f\u4e5f\u5b58\u5728\u5dee\u5f02\uff0c\u8fd9\u79cd\u5dee\u5f02\u5bfc\u81f4hive\u652f\u6301\u7684\u590d\u6742\u590d\u5408\u7c7b\u578b(\u6bd4\u5982map,array,struct,union)\u5728\u8f6c\u6362\u4e3a\u652f\u6301\u7684String\u7c7b\u578b\u65f6\uff0c\u8f6c\u6362\u7684\u7ed3\u679c\u683c\u5f0f\u7565\u6709\u5dee\u5f02\uff0c\u6bd4\u5982\u4ee5map\u7c7b\u578b\u4e3a\u4f8b\uff1a orcfile : map\u7c7b\u578b\u8f6c\u6362\u6210 string \u7c7b\u578b\u540e\uff0c\u7ed3\u679c\u4e3a {job=80, team=60, person=70} textfile : map\u7c7b\u578b\u8f6c\u6362\u6210 string \u7c7b\u578b\u540e\uff0c\u7ed3\u679c\u4e3a job:80,team:60,person:70 \u4ece\u4e0a\u9762\u7684\u8f6c\u6362\u7ed3\u679c\u53ef\u4ee5\u770b\u51fa\uff0c\u6570\u636e\u672c\u8eab\u6ca1\u6709\u53d8\u5316\uff0c\u4f46\u662f\u8868\u793a\u7684\u683c\u5f0f\u7565\u6709\u5dee\u5f02\uff0c\u6240\u4ee5\u5982\u679c\u7528\u6237\u914d\u7f6e\u7684\u6587\u4ef6\u8def\u5f84\u4e2d\u8981\u540c\u6b65\u7684\u5b57\u6bb5\u5728Hive\u4e2d\u662f\u590d\u5408\u7c7b\u578b\u7684\u8bdd\uff0c\u5efa\u8bae\u914d\u7f6e\u7edf\u4e00\u7684\u6587\u4ef6\u683c\u5f0f\u3002 \u5982\u679c\u9700\u8981\u7edf\u4e00\u590d\u5408\u7c7b\u578b\u89e3\u6790\u51fa\u6765\u7684\u683c\u5f0f\uff0c\u6211\u4eec\u5efa\u8bae\u7528\u6237\u5728hive\u5ba2\u6237\u7aef\u5c06 textfile \u683c\u5f0f\u7684\u8868\u5bfc\u6210 orcfile \u683c\u5f0f\u7684\u8868","title":"fileType"},{"location":"reader/hdfsreader/#column","text":"\u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0c type \u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c index \u6307\u5b9a\u5f53\u524d\u5217\u6765\u81ea\u4e8e\u6587\u672c\u7b2c\u51e0\u5217(\u4ee50\u5f00\u59cb)\uff0c value \u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece\u6e90\u5934\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636e value \u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u53ef\u4ee5\u5168\u90e8\u6309\u7167String\u7c7b\u578b\u8bfb\u53d6\u6570\u636e\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"column\" : [ \"*\" ] } \u7528\u6237\u53ef\u4ee5\u6307\u5b9aColumn\u5b57\u6bb5\u4fe1\u606f\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a [ { \"type\" : \"long\" , \"index\" : 0 , \"description\" : \"\u4ece\u672c\u5730\u6587\u4ef6\u6587\u672c\u7b2c\u4e00\u5217\u83b7\u53d6int\u5b57\u6bb5\" }, { \"type\" : \"string\" , \"value\" : \"addax\" , \"description\" : \"HdfsReader\u5185\u90e8\u751f\u6210alibaba\u7684\u5b57\u7b26\u4e32\u5b57\u6bb5\u4f5c\u4e3a\u5f53\u524d\u5b57\u6bb5\" } ] \u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cindex/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002","title":"column"},{"location":"reader/hdfsreader/#compress","text":"\u5f53fileType\uff08\u6587\u4ef6\u7c7b\u578b\uff09\u4e3acsv\u4e0b\u7684\u6587\u4ef6\u538b\u7f29\u65b9\u5f0f\uff0c\u76ee\u524d\u4ec5\u652f\u6301 gzip\u3001bz2\u3001zip\u3001lzo\u3001lzo_deflate\u3001hadoop-snappy\u3001framing-snappy\u538b\u7f29\uff1b \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0clzo\u5b58\u5728\u4e24\u79cd\u538b\u7f29\u683c\u5f0f\uff1alzo\u548clzo_deflate\uff0c\u7528\u6237\u5728\u914d\u7f6e\u7684\u65f6\u5019\u9700\u8981\u7559\u5fc3\uff0c\u4e0d\u8981\u914d\u9519\u4e86\uff1b\u53e6\u5916\uff0c\u7531\u4e8esnappy\u76ee\u524d\u6ca1\u6709\u7edf\u4e00\u7684stream format\uff0caddax\u76ee\u524d\u53ea\u652f\u6301\u6700\u4e3b\u6d41\u7684\u4e24\u79cd\uff1ahadoop-snappy\uff08hadoop\u4e0a\u7684snappy stream format\uff09\u548c framing-snappy\uff08google\u5efa\u8bae\u7684snappy stream format\uff09;","title":"compress"},{"location":"reader/hdfsreader/#hadoopconfig","text":"hadoopConfig \u91cc\u53ef\u4ee5\u914d\u7f6e\u4e0e Hadoop \u76f8\u5173\u7684\u4e00\u4e9b\u9ad8\u7ea7\u53c2\u6570\uff0c\u6bd4\u5982HA\u7684\u914d\u7f6e { \"hadoopConfig\" : { \"dfs.nameservices\" : \"cluster\" , \"dfs.ha.namenodes.cluster\" : \"nn1,nn2\" , \"dfs.namenode.rpc-address.cluster.nn1\" : \"node1.example.com:8020\" , \"dfs.namenode.rpc-address.cluster.nn2\" : \"node2.example.com:8020\" , \"dfs.client.failover.proxy.provider.cluster\" : \"org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider\" } } \u8fd9\u91cc\u7684 cluster \u8868\u793a HDFS \u914d\u7f6e\u6210HA\u65f6\u7684\u540d\u5b57\uff0c\u4e5f\u662f defaultFS \u914d\u7f6e\u9879\u4e2d\u7684\u540d\u5b57 \u5982\u679c\u5b9e\u9645\u73af\u5883\u4e2d\u7684\u540d\u5b57\u4e0d\u662f cluster \uff0c\u5219\u4e0a\u8ff0\u914d\u7f6e\u4e2d\u6240\u6709\u5199\u6709 cluster \u90fd\u9700\u8981\u66ff\u6362","title":"hadoopConfig"},{"location":"reader/hdfsreader/#csvreaderconfig","text":"\u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u53c2\u6570\u914d\u7f6e\uff0cMap\u7c7b\u578b\u3002\u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u4f7f\u7528\u7684CsvReader\u8fdb\u884c\u8bfb\u53d6\uff0c\u4f1a\u6709\u5f88\u591a\u914d\u7f6e\uff0c\u4e0d\u914d\u7f6e\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 \u5e38\u89c1\u914d\u7f6e\uff1a { \"csvReaderConfig\" : { \"safetySwitch\" : false , \"skipEmptyRecords\" : false , \"useTextQualifier\" : false } } \u6240\u6709\u914d\u7f6e\u9879\u53ca\u9ed8\u8ba4\u503c,\u914d\u7f6e\u65f6 csvReaderConfig \u7684map\u4e2d\u8bf7 \u4e25\u683c\u6309\u7167\u4ee5\u4e0b\u5b57\u6bb5\u540d\u5b57\u8fdb\u884c\u914d\u7f6e \uff1a boolean caseSensitive = true; char textQualifier = 34; boolean trimWhitespace = true; boolean useTextQualifier = true;//\u662f\u5426\u4f7f\u7528csv\u8f6c\u4e49\u5b57\u7b26 char delimiter = 44;//\u5206\u9694\u7b26 char recordDelimiter = 0; char comment = 35; boolean useComments = false; int escapeMode = 1; boolean safetySwitch = true;//\u5355\u5217\u957f\u5ea6\u662f\u5426\u9650\u5236100000\u5b57\u7b26 boolean skipEmptyRecords = true;//\u662f\u5426\u8df3\u8fc7\u7a7a\u884c boolean captureRawRecord = true;","title":"csvReaderConfig"},{"location":"reader/hdfsreader/#_4","text":"Addax \u5185\u90e8\u7c7b\u578b Hive\u8868 \u6570\u636e\u7c7b\u578b Long TINYINT, SMALLINT, INT, BIGINT Double FLOAT, DOUBLE String String, CHAR, VARCHAR, STRUCT, MAP, ARRAY, UNION, BINARY Boolean BOOLEAN Date Date, TIMESTAMP Bytes BINARY \u5176\u4e2d\uff1a Long \u662f\u6307Hdfs\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528\u6574\u5f62\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 123456789 Double \u662f\u6307Hdfs\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Double\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 3.1415 Boolean \u662f\u6307Hdfs\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Boolean\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 true \u3001 false \u3002\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002 Date \u662f\u6307Hdfs\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Date\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 2014-12-31 Bytes \u662f\u6307HDFS\u6587\u4ef6\u4e2d\u4f7f\u7528\u4e8c\u8fdb\u5236\u5b58\u50a8\u7684\u5185\u5bb9\uff0c\u6bd4\u5982\u4e00\u5f20\u56fe\u7247\u7684\u6570\u636e \u7279\u522b\u63d0\u9192\uff1a Hive\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b TIMESTAMP \u53ef\u4ee5\u7cbe\u786e\u5230\u7eb3\u79d2\u7ea7\u522b\uff0c\u6240\u4ee5 textfile \u3001 orcfile \u4e2d TIMESTAMP \u5b58\u653e\u7684\u6570\u636e\u7c7b\u4f3c\u4e8e 2015-08-21 22:40:47.397898389 \uff0c \u5982\u679c\u8f6c\u6362\u7684\u7c7b\u578b\u914d\u7f6e\u4e3aAddax\u7684Date\uff0c\u8f6c\u6362\u4e4b\u540e\u4f1a\u5bfc\u81f4\u7eb3\u79d2\u90e8\u5206\u4e22\u5931\uff0c\u6240\u4ee5\u5982\u679c\u9700\u8981\u4fdd\u7559\u7eb3\u79d2\u90e8\u5206\u7684\u6570\u636e\uff0c\u8bf7\u914d\u7f6e\u8f6c\u6362\u7c7b\u578b\u4e3a String \u7c7b\u578b\u3002","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/hdfsreader/#faq","text":"Q: \u5982\u679c\u62a5java.io.IOException: Maximum column length of 100,000 exceeded in column...\u5f02\u5e38\u4fe1\u606f\uff0c\u8bf4\u660e\u6570\u636e\u6e90column\u5b57\u6bb5\u957f\u5ea6\u8d85\u8fc7\u4e86100000\u5b57\u7b26\u3002 A: \u9700\u8981\u5728json\u7684reader\u91cc\u589e\u52a0\u5982\u4e0b\u914d\u7f6e { \"csvReaderConfig\" : { \"safetySwitch\" : false , \"skipEmptyRecords\" : false , \"useTextQualifier\" : false } } safetySwitch = false \u8868\u793a\u5355\u5217\u957f\u5ea6\u4e0d\u9650\u5236100000\u5b57\u7b26","title":"FAQ"},{"location":"reader/hivereader/","text":"Hive Reader \u00b6 HiveReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece Apache Hive \u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\u7684\u80fd\u529b \u65b0\u589e\u8be5\u63d2\u4ef6\u7684\u4e3b\u8981\u76ee\u7684\u662f\u89e3\u51b3\u4f7f\u7528 RDBMS Reader \u63d2\u4ef6\u8bfb\u53d6 Hive \u6570\u636e\u5e93\u65f6\u4e0d\u80fd\u89e3\u51b3 Kerberos \u8ba4\u8bc1\u7684\u95ee\u9898\uff0c \u5982\u679c\u4f60\u7684 Hive \u6570\u636e\u5e93\u6ca1\u6709\u542f\u7528 Kerberos \u8ba4\u8bc1\uff0c\u90a3\u4e48\u76f4\u63a5\u4f7f\u7528 RDBMS Reader \u4e5f\u53ef\u4ee5\u3002 \u5982\u679c\u542f\u7528\u4e86 Kerberos \u8ba4\u8bc1\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u8be5\u63d2\u4ef6\u3002 \u793a\u4f8b \u00b6 \u6211\u4eec\u5728 Hive \u7684 test \u5e93\u4e0a\u521b\u5efa\u5982\u4e0b\u8868\uff0c\u5e76\u63d2\u5165\u4e00\u6761\u8bb0\u5f55 create table default . hive_reader ( col1 int , col2 string , col3 timestamp ) stored as orc ; insert into hive_reader values ( 1 , 'hello' , current_timestamp ()), ( 2 , 'world' , current_timestamp ()); \u4e0b\u9762\u7684\u914d\u7f6e\u662f\u8bfb\u53d6\u8be5\u8868\u5230\u7ec8\u7aef\u7684\u4f5c\u4e1a: job/hive2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0 } }, \"content\" : { \"reader\" : { \"name\" : \"hivereader\" , \"parameter\" : { \"column\" : [ \"*\" ], \"username\" : \"hive\" , \"password\" : \"\" , \"connection\" : [ { \"jdbcUrl\" : [ \"jdbc:hive2://localhost:10000/default;principal=hive/_HOST@EXAMPLE.COM\" ], \"table\" : [ \"hive_reader\" ] } ], \"where\" : \"logdate='20211013'\" , \"haveKerberos\" : true , \"kerberosKeytabFilePath\" : \"/etc/security/keytabs/hive.headless.keytab\" , \"kerberosPrincipal\" : \"hive@EXAMPLE.COM\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/hive2stream.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/hive2stream.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f driver \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801\uff0c\u82e5\u65e0\u5bc6\u7801\uff0c\u53ef\u4e0d\u6307\u5b9a table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0 rdbmreader splitPk \u5426 string \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmreader where \u5426 string \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 list \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 haveKerberos \u5426 string \u65e0 \u662f\u5426\u542f\u7528 Kerberos \u8ba4\u8bc1\uff0c\u5982\u679c\u542f\u7528\uff0c\u5219\u9700\u8981\u540c\u65f6\u914d\u7f6e kerberosKeytabFilePath \uff0c kerberosPrincipal kerberosKeytabFilePath \u5426 string \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u6587\u4ef6\u8def\u5f84, \u6bd4\u5982 /your/path/addax.service.keytab kerberosPrincipal \u5426 string \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u4e3b\u4f53, \u6bd4\u5982 addax/node1@EXAMPLE.COM jdbcUrl \u00b6 \u8fde\u63a5 Hive \u7684 JDBC URL \u6709\u591a\u79cd\u5199\u6cd5\uff0c\u4e00\u79cd\u662f\u76f4\u63a5\u6307\u5b9a HiveServer/HiveServer2 \u670d\u52a1\u7684\u4e3b\u673a\u540d\u548c\u7aef\u53e3\u5373\u53ef\uff0c\u6bd4\u5982\uff1a jdbc:hive2://node1:10000/default \u5982\u679c\u4f60\u6709\u591a\u4e2a HiveServer/HiveServer2 \u670d\u52a1\uff0c\u5e76\u91c7\u53d6\u7528\u4e86\u670d\u52a1\u53d1\u73b0\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a zookeeper \u7684\u65b9\u5f0f\u6765\u83b7\u5f97\u6545\u969c\u8f6c\u79fb\u529f\u80fd\uff0c\u7c7b\u4f3c\u5982\u4e0b\uff1a jdbc:hive2://node1:2181,node2:2181,node3:2181/;serviceDiscoveryMode=zooKeeper;zooKeeperNamespace=hiveserver2 \u5982\u679c\u4f60\u7684 Hive \u542f\u7528\u4e86 Kerberos \u8ba4\u8bc1\uff0c\u8fd8\u9700\u8981\u5728 URL \u540e\u6307\u5b9a principal \u53c2\u6570\uff0c\u4e00\u822c\u4e3a principal=hive/_HOST@EXAMPLE.COM \uff0c\u5176\u4e2d EXAMPLE.COM \u4e3a realm \u503c\u3002 driver \u00b6 \u5f53\u524d Addax \u91c7\u7528\u7684 Hive JDBC \u9a71\u52a8\u4e3a 3.1.0 \u4ee5\u4e0a\u7248\u672c\uff0c\u9a71\u52a8\u7c7b\u540d\u4f7f\u7528\u7684 org.apache.hive.jdbc.HiveDriver \uff0c \u5982\u679c\u5f53\u524d\u7684 Hive JDBC \u9a71\u52a8\u4e0d\u517c\u5bb9 Hive \u6570\u636e\u5e93\uff0c \u5219\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u66ff\u6362\u9a71\u52a8\u3002 \u66ff\u6362\u63d2\u4ef6\u5185\u7f6e\u7684\u9a71\u52a8 rm -f plugin/reader/hivereader/lib/hive-jdbc-*.jar \u62f7\u8d1d\u517c\u5bb9\u9a71\u52a8\u5230\u63d2\u4ef6\u76ee\u5f55 cp hive-jdbc-<version>.jar plugin/reader/hivereader/lib/ \u6307\u5b9a\u9a71\u52a8\u7c7b\u540d\u79f0 \u5728\u4f60\u7684 json \u6587\u4ef6\u7c7b\uff0c\u914d\u7f6e \"driver\": \"<your jdbc class name>\" \u7c7b\u578b\u8f6c\u6362 \u00b6 \u76ee\u524d HiveReader \u652f\u6301\u5927\u90e8\u5206 Hive \u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51fa HiveReader \u9488\u5bf9 Hive \u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b Hive \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint, mediumint, int, bigint Double float, double, decimal String varchar, char, string Date date, timestamp Boolean boolean Bytes binary","title":"Hive Reader"},{"location":"reader/hivereader/#hive-reader","text":"HiveReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece Apache Hive \u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\u7684\u80fd\u529b \u65b0\u589e\u8be5\u63d2\u4ef6\u7684\u4e3b\u8981\u76ee\u7684\u662f\u89e3\u51b3\u4f7f\u7528 RDBMS Reader \u63d2\u4ef6\u8bfb\u53d6 Hive \u6570\u636e\u5e93\u65f6\u4e0d\u80fd\u89e3\u51b3 Kerberos \u8ba4\u8bc1\u7684\u95ee\u9898\uff0c \u5982\u679c\u4f60\u7684 Hive \u6570\u636e\u5e93\u6ca1\u6709\u542f\u7528 Kerberos \u8ba4\u8bc1\uff0c\u90a3\u4e48\u76f4\u63a5\u4f7f\u7528 RDBMS Reader \u4e5f\u53ef\u4ee5\u3002 \u5982\u679c\u542f\u7528\u4e86 Kerberos \u8ba4\u8bc1\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u8be5\u63d2\u4ef6\u3002","title":"Hive Reader"},{"location":"reader/hivereader/#_1","text":"\u6211\u4eec\u5728 Hive \u7684 test \u5e93\u4e0a\u521b\u5efa\u5982\u4e0b\u8868\uff0c\u5e76\u63d2\u5165\u4e00\u6761\u8bb0\u5f55 create table default . hive_reader ( col1 int , col2 string , col3 timestamp ) stored as orc ; insert into hive_reader values ( 1 , 'hello' , current_timestamp ()), ( 2 , 'world' , current_timestamp ()); \u4e0b\u9762\u7684\u914d\u7f6e\u662f\u8bfb\u53d6\u8be5\u8868\u5230\u7ec8\u7aef\u7684\u4f5c\u4e1a: job/hive2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0 } }, \"content\" : { \"reader\" : { \"name\" : \"hivereader\" , \"parameter\" : { \"column\" : [ \"*\" ], \"username\" : \"hive\" , \"password\" : \"\" , \"connection\" : [ { \"jdbcUrl\" : [ \"jdbc:hive2://localhost:10000/default;principal=hive/_HOST@EXAMPLE.COM\" ], \"table\" : [ \"hive_reader\" ] } ], \"where\" : \"logdate='20211013'\" , \"haveKerberos\" : true , \"kerberosKeytabFilePath\" : \"/etc/security/keytabs/hive.headless.keytab\" , \"kerberosPrincipal\" : \"hive@EXAMPLE.COM\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/hive2stream.json","title":"\u793a\u4f8b"},{"location":"reader/hivereader/#_2","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/hive2stream.json","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"reader/hivereader/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f driver \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801\uff0c\u82e5\u65e0\u5bc6\u7801\uff0c\u53ef\u4e0d\u6307\u5b9a table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0 rdbmreader splitPk \u5426 string \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmreader where \u5426 string \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 list \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 haveKerberos \u5426 string \u65e0 \u662f\u5426\u542f\u7528 Kerberos \u8ba4\u8bc1\uff0c\u5982\u679c\u542f\u7528\uff0c\u5219\u9700\u8981\u540c\u65f6\u914d\u7f6e kerberosKeytabFilePath \uff0c kerberosPrincipal kerberosKeytabFilePath \u5426 string \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u6587\u4ef6\u8def\u5f84, \u6bd4\u5982 /your/path/addax.service.keytab kerberosPrincipal \u5426 string \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u4e3b\u4f53, \u6bd4\u5982 addax/node1@EXAMPLE.COM","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/hivereader/#jdbcurl","text":"\u8fde\u63a5 Hive \u7684 JDBC URL \u6709\u591a\u79cd\u5199\u6cd5\uff0c\u4e00\u79cd\u662f\u76f4\u63a5\u6307\u5b9a HiveServer/HiveServer2 \u670d\u52a1\u7684\u4e3b\u673a\u540d\u548c\u7aef\u53e3\u5373\u53ef\uff0c\u6bd4\u5982\uff1a jdbc:hive2://node1:10000/default \u5982\u679c\u4f60\u6709\u591a\u4e2a HiveServer/HiveServer2 \u670d\u52a1\uff0c\u5e76\u91c7\u53d6\u7528\u4e86\u670d\u52a1\u53d1\u73b0\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a zookeeper \u7684\u65b9\u5f0f\u6765\u83b7\u5f97\u6545\u969c\u8f6c\u79fb\u529f\u80fd\uff0c\u7c7b\u4f3c\u5982\u4e0b\uff1a jdbc:hive2://node1:2181,node2:2181,node3:2181/;serviceDiscoveryMode=zooKeeper;zooKeeperNamespace=hiveserver2 \u5982\u679c\u4f60\u7684 Hive \u542f\u7528\u4e86 Kerberos \u8ba4\u8bc1\uff0c\u8fd8\u9700\u8981\u5728 URL \u540e\u6307\u5b9a principal \u53c2\u6570\uff0c\u4e00\u822c\u4e3a principal=hive/_HOST@EXAMPLE.COM \uff0c\u5176\u4e2d EXAMPLE.COM \u4e3a realm \u503c\u3002","title":"jdbcUrl"},{"location":"reader/hivereader/#driver","text":"\u5f53\u524d Addax \u91c7\u7528\u7684 Hive JDBC \u9a71\u52a8\u4e3a 3.1.0 \u4ee5\u4e0a\u7248\u672c\uff0c\u9a71\u52a8\u7c7b\u540d\u4f7f\u7528\u7684 org.apache.hive.jdbc.HiveDriver \uff0c \u5982\u679c\u5f53\u524d\u7684 Hive JDBC \u9a71\u52a8\u4e0d\u517c\u5bb9 Hive \u6570\u636e\u5e93\uff0c \u5219\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u66ff\u6362\u9a71\u52a8\u3002 \u66ff\u6362\u63d2\u4ef6\u5185\u7f6e\u7684\u9a71\u52a8 rm -f plugin/reader/hivereader/lib/hive-jdbc-*.jar \u62f7\u8d1d\u517c\u5bb9\u9a71\u52a8\u5230\u63d2\u4ef6\u76ee\u5f55 cp hive-jdbc-<version>.jar plugin/reader/hivereader/lib/ \u6307\u5b9a\u9a71\u52a8\u7c7b\u540d\u79f0 \u5728\u4f60\u7684 json \u6587\u4ef6\u7c7b\uff0c\u914d\u7f6e \"driver\": \"<your jdbc class name>\"","title":"driver"},{"location":"reader/hivereader/#_4","text":"\u76ee\u524d HiveReader \u652f\u6301\u5927\u90e8\u5206 Hive \u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51fa HiveReader \u9488\u5bf9 Hive \u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b Hive \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint, mediumint, int, bigint Double float, double, decimal String varchar, char, string Date date, timestamp Boolean boolean Bytes binary","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/httpreader/","text":"Http Reader \u00b6 HttpReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u8bfb\u53d6 Restful API \u6570\u636e\u7684\u80fd\u529b \u793a\u4f8b \u00b6 \u793a\u4f8b\u63a5\u53e3\u4e0e\u6570\u636e \u00b6 \u4ee5\u4e0b\u914d\u7f6e\u6f14\u793a\u4e86\u5982\u4f55\u4ece\u4e00\u4e2a\u6307\u5b9a\u7684 API \u4e2d\u83b7\u53d6\u6570\u636e\uff0c\u5047\u5b9a\u8bbf\u95ee\u7684\u63a5\u53e3\u4e3a\uff1a http://127.0.0.1:9090/mock/17/LDJSC/ASSET \u8d70 GET \u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684\u53c2\u6570\u6709 \u53c2\u6570\u540d\u79f0 \u53c2\u6570\u503c\u793a\u4f8b CURR_DATE 2021-01-17 DEPT 9400 USERNAME andi \u4ee5\u4e0b\u662f\u8bbf\u95ee\u7684\u6570\u636e\u6837\u4f8b\uff0c\uff08\u5b9e\u9645\u8fd4\u56de\u6570\u636e\u7565\u6709\u4e0d\u540c\uff09 { \"result\" : [ { \"CURR_DATE\" : \"2019-12-09\" , \"DEPT\" : \"9700\" , \"TOTAL_MANAGED_MARKET_VALUE\" : 1581.03 , \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" : 36.75 , \"TMMARKET_VALUE_DOD_GROWTH_RATE\" : -0.009448781026677719 , \"TMMARKET_VALUE_GROWTH_MON\" : -0.015153586011995693 , \"TMMARKET_VALUE_GROWTH_YEAR\" : 0.0652347643813081 , \"TMMARKET_VALUE_SHARECOM\" : 0.024853621341525287 , \"TMMARKET_VALUE_SHARE_GROWTH_RATE\" : -0.005242133578517903 , \"AVERAGE_NEW_ASSETS_DAYINMON\" : 1645.1193961136973 , \"YEAR_NEW_ASSET_SSHARECOM\" : 0.16690149257388515 , \"YN_ASSET_SSHARECOM_GROWTH_RATE\" : 0.017886267801303465 , \"POTENTIAL_LOST_ASSETS\" : 56.76 , \"TOTAL_LIABILITIES\" : 57.81 , \"TOTAL_ASSETS\" : 1306.33 , \"TOTAL_ASSETS_DOD_GROWTH\" : 4.79 , \"TOTAL_ASSETS_DOD_GROWTH_RATE\" : -0.006797058194980485 , \"NEW_ASSETS_DAY\" : 14.92 , \"NEW_ASSETS_MON\" : 90.29 , \"NEW_ASSETS_YEAR\" : 297.32 , \"NEW_ASSETS_DOD_GROWTH_RATE\" : -0.04015576541561927 , \"NEW_FUNDS_DAY\" : 18.16 , \"INFLOW_FUNDS_DAY\" : 2.12 , \"OUTFLOW_FUNDS_DAY\" : 9.73 , \"OVERALL_POSITION\" : 0.810298404938773 , \"OVERALL_POSITION_DOD_GROWTH_RATE\" : -0.03521615634095476 , \"NEW_CUST_FUNDS_MON\" : 69.44 , \"INFLOW_FUNDS_MONTH\" : 62.26 , \"OUTFLOW_FUNDS_MONTH\" : 32.59 }, { \"CURR_DATE\" : \"2019-08-30\" , \"DEPT\" : \"8700\" , \"TOTAL_MANAGED_MARKET_VALUE\" : 1596.74 , \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" : 41.86 , \"TMMARKET_VALUE_DOD_GROWTH_RATE\" : 0.03470208565515685 , \"TMMARKET_VALUE_GROWTH_MON\" : 0.07818120801111743 , \"TMMARKET_VALUE_GROWTH_YEAR\" : -0.05440250244736409 , \"TMMARKET_VALUE_SHARECOM\" : 0.09997733019626448 , \"TMMARKET_VALUE_SHARE_GROWTH_RATE\" : -0.019726478499825697 , \"AVERAGE_NEW_ASSETS_DAYINMON\" : 1007.9314679742108 , \"YEAR_NEW_ASSET_SSHARECOM\" : 0.15123738798885086 , \"YN_ASSET_SSHARECOM_GROWTH_RATE\" : 0.04694052069678048 , \"POTENTIAL_LOST_ASSETS\" : 52.48 , \"TOTAL_LIABILITIES\" : 55.28 , \"TOTAL_ASSETS\" : 1366.72 , \"TOTAL_ASSETS_DOD_GROWTH\" : 10.12 , \"TOTAL_ASSETS_DOD_GROWTH_RATE\" : 0.009708491982487952 , \"NEW_ASSETS_DAY\" : 12.42 , \"NEW_ASSETS_MON\" : 41.14 , \"NEW_ASSETS_YEAR\" : 279.32 , \"NEW_ASSETS_DOD_GROWTH_RATE\" : -0.025878627161898062 , \"NEW_FUNDS_DAY\" : 3.65 , \"INFLOW_FUNDS_DAY\" : 14.15 , \"OUTFLOW_FUNDS_DAY\" : 17.08 , \"OVERALL_POSITION\" : 0.9098432997243932 , \"OVERALL_POSITION_DOD_GROWTH_RATE\" : 0.02111922282868306 , \"NEW_CUST_FUNDS_MON\" : 57.21 , \"INFLOW_FUNDS_MONTH\" : 61.16 , \"OUTFLOW_FUNDS_MONTH\" : 15.83 }, { \"CURR_DATE\" : \"2019-06-30\" , \"DEPT\" : \"6501\" , \"TOTAL_MANAGED_MARKET_VALUE\" : 1506.72 , \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" : -13.23 , \"TMMARKET_VALUE_DOD_GROWTH_RATE\" : -0.0024973354204176554 , \"TMMARKET_VALUE_GROWTH_MON\" : -0.015530793150701896 , \"TMMARKET_VALUE_GROWTH_YEAR\" : -0.08556724628979398 , \"TMMARKET_VALUE_SHARECOM\" : 0.15000077963967678 , \"TMMARKET_VALUE_SHARE_GROWTH_RATE\" : -0.049629446804825755 , \"AVERAGE_NEW_ASSETS_DAYINMON\" : 1250.1040863177336 , \"YEAR_NEW_ASSET_SSHARECOM\" : 0.19098445630488178 , \"YN_ASSET_SSHARECOM_GROWTH_RATE\" : -0.007881179708853471 , \"POTENTIAL_LOST_ASSETS\" : 50.53 , \"TOTAL_LIABILITIES\" : 56.62 , \"TOTAL_ASSETS\" : 1499.53 , \"TOTAL_ASSETS_DOD_GROWTH\" : 29.56 , \"TOTAL_ASSETS_DOD_GROWTH_RATE\" : -0.02599813232345556 , \"NEW_ASSETS_DAY\" : 28.81 , \"NEW_ASSETS_MON\" : 123.24 , \"NEW_ASSETS_YEAR\" : 263.63 , \"NEW_ASSETS_DOD_GROWTH_RATE\" : 0.0073986669331394875 , \"NEW_FUNDS_DAY\" : 18.52 , \"INFLOW_FUNDS_DAY\" : 3.26 , \"OUTFLOW_FUNDS_DAY\" : 6.92 , \"OVERALL_POSITION\" : 0.8713692113306709 , \"OVERALL_POSITION_DOD_GROWTH_RATE\" : 0.02977644553289545 , \"NEW_CUST_FUNDS_MON\" : 85.14 , \"INFLOW_FUNDS_MONTH\" : 23.35 , \"OUTFLOW_FUNDS_MONTH\" : 92.95 }, { \"CURR_DATE\" : \"2019-12-07\" , \"DEPT\" : \"8705\" , \"TOTAL_MANAGED_MARKET_VALUE\" : 1575.85 , \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" : 8.94 , \"TMMARKET_VALUE_DOD_GROWTH_RATE\" : -0.04384846980627058 , \"TMMARKET_VALUE_GROWTH_MON\" : -0.022962456288549656 , \"TMMARKET_VALUE_GROWTH_YEAR\" : -0.005047009316021089 , \"TMMARKET_VALUE_SHARECOM\" : 0.07819484815809447 , \"TMMARKET_VALUE_SHARE_GROWTH_RATE\" : -0.008534369960890256 , \"AVERAGE_NEW_ASSETS_DAYINMON\" : 1340.0339240689955 , \"YEAR_NEW_ASSET_SSHARECOM\" : 0.19019952857677042 , \"YN_ASSET_SSHARECOM_GROWTH_RATE\" : 0.01272353909992914 , \"POTENTIAL_LOST_ASSETS\" : 54.63 , \"TOTAL_LIABILITIES\" : 53.17 , \"TOTAL_ASSETS\" : 1315.08 , \"TOTAL_ASSETS_DOD_GROWTH\" : 49.31 , \"TOTAL_ASSETS_DOD_GROWTH_RATE\" : 0.0016538407028265922 , \"NEW_ASSETS_DAY\" : 29.17 , \"NEW_ASSETS_MON\" : 44.75 , \"NEW_ASSETS_YEAR\" : 172.87 , \"NEW_ASSETS_DOD_GROWTH_RATE\" : 0.045388692595736746 , \"NEW_FUNDS_DAY\" : 18.46 , \"INFLOW_FUNDS_DAY\" : 12.93 , \"OUTFLOW_FUNDS_DAY\" : 10.38 , \"OVERALL_POSITION\" : 0.8083127036694828 , \"OVERALL_POSITION_DOD_GROWTH_RATE\" : -0.02847453515632541 , \"NEW_CUST_FUNDS_MON\" : 49.74 , \"INFLOW_FUNDS_MONTH\" : 81.93 , \"OUTFLOW_FUNDS_MONTH\" : 18.17 } ] } \u6211\u4eec\u9700\u8981\u628a result \u7ed3\u679c\u4e2d\u7684\u90e8\u5206 key \u503c\u6570\u636e\u83b7\u53d6 \u914d\u7f6e \u00b6 \u4ee5\u4e0b\u914d\u7f6e\u5b9e\u73b0\u4ece\u63a5\u53e3\u83b7\u53d6\u6570\u636e\u5e76\u6253\u5370\u5230\u7ec8\u7aef job/httpreader2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"httpreader\" , \"parameter\" : { \"connection\" : [ { \"url\" : \"http://127.0.0.1:9090/mock/17/LDJSC/ASSET\" , \"proxy\" : { \"host\" : \"http://127.0.0.1:3128\" , \"auth\" : \"user:pass\" } } ], \"reqParams\" : { \"CURR_DATE\" : \"2021-01-18\" , \"DEPT\" : \"9700\" }, \"resultKey\" : \"result\" , \"method\" : \"GET\" , \"column\" : [ \"CURR_DATE\" , \"DEPT\" , \"TOTAL_MANAGED_MARKET_VALUE\" , \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" ], \"username\" : \"user\" , \"password\" : \"passw0rd\" , \"headers\" : { \"X-Powered-by\" : \"Addax\" } } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } } } } } \u5c06\u4e0a\u8ff0\u5185\u5bb9\u4fdd\u5b58\u4e3a job/httpreader2stream.json \u6587\u4ef6\u3002 \u6267\u884c \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u8fdb\u884c\u91c7\u96c6 bin/addax.sh job/httpreader2stream.json \u4e0a\u8ff0\u547d\u4ee4\u7684\u8f93\u51fa\u7ed3\u679c\u5927\u81f4\u5982\u4e0b\uff1a 2021-01-20 09:07:41.864 [main] INFO VMInfo - VMInfo# operatingSystem class => com.sun.management.internal.OperatingSystemImpl 2021-01-20 09:07:41.877 [main] INFO Engine - the machine info => osInfo: Mac OS X x86_64 10.15.1 jvmInfo: AdoptOpenJDK 14 14.0.2+12 cpu num: 8 totalPhysicalMemory: -0.00G freePhysicalMemory: -0.00G maxFileDescriptorCount: -1 currentOpenFileDescriptorCount: -1 GC Names [G1 Young Generation, G1 Old Generation] MEMORY_NAME | allocation_size | init_size CodeHeap 'profiled nmethods' | 117.21MB | 2.44MB G1 Old Gen | 2,048.00MB | 39.00MB G1 Survivor Space | -0.00MB | 0.00MB CodeHeap 'non-profiled nmethods' | 117.21MB | 2.44MB Compressed Class Space | 1,024.00MB | 0.00MB Metaspace | -0.00MB | 0.00MB G1 Eden Space | -0.00MB | 25.00MB CodeHeap 'non-nmethods' | 5.57MB | 2.44MB 2021-01-20 09:07:41.903 [main] INFO Engine - { \"content\": { \"reader\":{ \"parameter\":{ \"reqParams\":{ \"CURR_DATE\":\"2021-01-18\", \"DEPT\":\"9700\" }, \"method\":\"GET\", \"column\":[ \"CURR_DATE\", \"DEPT\", \"TOTAL_MANAGED_MARKET_VALUE\", \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" ], \"resultKey\":\"result\", \"connection\":[ { \"url\":\"http://127.0.0.1:9090/mock/17/LDJSC/ASSET\" } ] }, \"name\":\"httpreader\" }, \"writer\":{ \"parameter\":{ \"print\":\"true\" }, \"name\":\"streamwriter\" } }, \"setting\":{ \"speed\":{ \"bytes\":-1, \"channel\":1 } } } 2021-01-20 09:07:41.926 [main] INFO PerfTrace - PerfTrace traceId=job_-1, isEnable=false, priority=0 2021-01-20 09:07:41.927 [main] INFO JobContainer - Addax jobContainer starts job. 2021-01-20 09:07:41.928 [main] INFO JobContainer - Set jobId = 0 2021-01-20 09:07:42.002 [taskGroup-0] INFO TaskGroupContainer - taskGroup[0] taskId[0] attemptCount[1] is started 2019-08-30 9700 1539.85 -14.78 2019-10-01 9700 1531.71 47.66 2020-12-03 9700 1574.38 7.34 2020-11-31 9700 1528.13 41.62 2019-03-01 9700 1554.28 -9.29 2021-01-20 09:07:45.006 [job-0] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-01-20 09:07:41 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-01-20 09:07:44 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 42B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 1rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 5 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u8bf4\u660e url \u662f string \u65e0 \u8981\u8bbf\u95ee\u7684HTTP\u5730\u5740 reqParams \u5426 map \u65e0 \u63a5\u53e3\u8bf7\u6c42\u53c2\u6570 resultKey \u5426 string \u65e0 \u8981\u83b7\u53d6\u7ed3\u679c\u7684\u90a3\u4e2akey\u503c\uff0c\u5982\u679c\u662f\u83b7\u53d6\u6574\u4e2a\u8fd4\u56de\u503c\uff0c\u5219\u53ef\u4ee5\u4e0d\u7528\u586b\u5199 method \u5426 string get \u8bf7\u6c42\u6a21\u5f0f\uff0c\u4ec5\u652f\u6301GET\uff0cPOST\u4e24\u79cd\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199 column \u662f list \u65e0 \u8981\u83b7\u53d6\u7684key\uff0c\u5982\u679c\u914d\u7f6e\u4e3a \"*\" \uff0c\u5219\u8868\u793a\u83b7\u53d6\u6240\u6709key\u7684\u503c username \u5426 string \u65e0 \u63a5\u53e3\u8bf7\u6c42\u9700\u8981\u7684\u8ba4\u8bc1\u5e10\u53f7\uff08\u5982\u6709) password \u5426 string \u65e0 \u63a5\u53e3\u8bf7\u6c42\u9700\u8981\u7684\u5bc6\u7801\uff08\u5982\u6709) proxy \u5426 map \u65e0 \u4ee3\u7406\u5730\u5740,\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 headers \u5426 map \u65e0 \u5b9a\u5236\u7684\u8bf7\u6c42\u5934\u4fe1\u606f proxy \u00b6 \u5982\u679c\u8bbf\u95ee\u7684\u63a5\u53e3\u9700\u8981\u901a\u8fc7\u4ee3\u7406\uff0c\u5219\u53ef\u4ee5\u914d\u7f6e proxy \u914d\u7f6e\u9879\uff0c\u8be5\u914d\u7f6e\u9879\u662f\u4e00\u4e2a json \u5b57\u5178\uff0c\u5305\u542b\u4e00\u4e2a\u5fc5\u9009\u7684 host \u5b57\u6bb5\u548c\u4e00\u4e2a\u53ef\u9009\u7684 auth \u5b57\u6bb5\u3002 { \"proxy\" : { \"host\" : \"http://127.0.0.1:8080\" , \"auth\" : \"user:pass\" } } \u5982\u679c\u662f sock \u4ee3\u7406 (V4,v5)\uff0c\u5219\u53ef\u4ee5\u5199 { \"proxy\" : { \"host\" : \"socks://127.0.0.1:8080\" , \"auth\" : \"user:pass\" } } host \u662f\u4ee3\u7406\u5730\u5740\uff0c\u5305\u542b\u4ee3\u7406\u7c7b\u578b\uff0c\u76ee\u524d\u4ec5\u652f\u6301 http \u4ee3\u7406\u548c socks (V4, V5\u5747\u53ef) \u4ee3\u7406\u3002 \u5982\u679c\u4ee3\u7406\u9700\u8981\u8ba4\u8bc1\uff0c\u5219\u53ef\u4ee5\u914d\u7f6e auth , \u5b83\u7531 \u7528\u6237\u540d\u548c\u5bc6\u7801\u7ec4\u6210\uff0c\u4e24\u8005\u4e4b\u95f4\u7528\u5192\u53f7(:) \u9694\u5f00\u3002 column \u00b6 column \u9664\u4e86\u76f4\u63a5\u6307\u5b9a key \u4e4b\u5916\uff0c\u8fd8\u5141\u8bb8\u7528 JSON Xpath \u98ce\u683c\u6765\u6307\u5b9a\u9700\u8981\u83b7\u53d6\u7684 key \u503c\uff0c\u5047\u5b9a\u4f60\u8981\u8bfb\u53d6\u7684 JSON \u6587\u4ef6\u5982\u4e0b\uff1a { \"result\" : [ { \"CURR_DATE\" : \"2019-12-09\" , \"DEPT\" : { \"ID\" : \"9700\" }, \"KK\" : [ { \"COL1\" : 1 }, { \"COL2\" : 2 } ] }, { \"CURR_DATE\" : \"2021-11-09\" , \"DEPT\" : { \"ID\" : \"6500\" }, \"KK\" : [ { \"COL1\" : 3 }, { \"COL2\" : 4 } ] } ] } \u6211\u4eec\u5e0c\u671b\u628a CURR_DATE , ID , COL1 , COL2 \u5f53\u4f5c\u56db\u4e2a\u5b57\u6bb5\u8bfb\u53d6\uff0c\u90a3\u4e48\u4f60\u7684 column \u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e\uff1a { \"column\" : [ \"CURR_DATE\" , \"DEPT.ID\" , \"KK[0].COL1\" , \"KK[1].COL2\" ] } \u5176\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a ... 2021 -10-30 14 :01:50.273 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 2019 -12-09 9700 1 2 2021 -11-09 6500 3 4 2021 -10-30 14 :01:53.283 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -10-30 14 :01:53.284 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do post work. 2021 -10-30 14 :01:53.284 [ job-0 ] INFO JobContainer - Addax Reader.Job [ httpreader ] do post work. 2021 -10-30 14 :01:53.286 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -10-30 14 :01:53.289 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -10-30 14 :01:50 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -10-30 14 :01:53 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 10B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 0rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 2 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 \u6ce8\u610f\uff1a \u5982\u679c\u4f60\u6307\u5b9a\u4e86\u4e0d\u5b58\u5728\u7684 Key\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u4e3a NULL \u503c\u3002 \u9650\u5236\u8bf4\u660e \u00b6 \u8fd4\u56de\u7684\u7ed3\u679c\u5fc5\u987b\u662fJSON\u7c7b\u578b \u5f53\u524d\u6240\u6709key\u7684\u503c\u5747\u5f53\u4f5c\u5b57\u7b26\u4e32\u7c7b\u578b \u6682\u4e0d\u652f\u6301\u63a5\u53e3Token\u9274\u6743\u6a21\u5f0f \u6682\u4e0d\u652f\u6301\u5206\u9875\u83b7\u53d6 \u4ee3\u7406\u4ec5\u652f\u6301 http \u6a21\u5f0f","title":"Http Reader"},{"location":"reader/httpreader/#http-reader","text":"HttpReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u8bfb\u53d6 Restful API \u6570\u636e\u7684\u80fd\u529b","title":"Http Reader"},{"location":"reader/httpreader/#_1","text":"","title":"\u793a\u4f8b"},{"location":"reader/httpreader/#_2","text":"\u4ee5\u4e0b\u914d\u7f6e\u6f14\u793a\u4e86\u5982\u4f55\u4ece\u4e00\u4e2a\u6307\u5b9a\u7684 API \u4e2d\u83b7\u53d6\u6570\u636e\uff0c\u5047\u5b9a\u8bbf\u95ee\u7684\u63a5\u53e3\u4e3a\uff1a http://127.0.0.1:9090/mock/17/LDJSC/ASSET \u8d70 GET \u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684\u53c2\u6570\u6709 \u53c2\u6570\u540d\u79f0 \u53c2\u6570\u503c\u793a\u4f8b CURR_DATE 2021-01-17 DEPT 9400 USERNAME andi \u4ee5\u4e0b\u662f\u8bbf\u95ee\u7684\u6570\u636e\u6837\u4f8b\uff0c\uff08\u5b9e\u9645\u8fd4\u56de\u6570\u636e\u7565\u6709\u4e0d\u540c\uff09 { \"result\" : [ { \"CURR_DATE\" : \"2019-12-09\" , \"DEPT\" : \"9700\" , \"TOTAL_MANAGED_MARKET_VALUE\" : 1581.03 , \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" : 36.75 , \"TMMARKET_VALUE_DOD_GROWTH_RATE\" : -0.009448781026677719 , \"TMMARKET_VALUE_GROWTH_MON\" : -0.015153586011995693 , \"TMMARKET_VALUE_GROWTH_YEAR\" : 0.0652347643813081 , \"TMMARKET_VALUE_SHARECOM\" : 0.024853621341525287 , \"TMMARKET_VALUE_SHARE_GROWTH_RATE\" : -0.005242133578517903 , \"AVERAGE_NEW_ASSETS_DAYINMON\" : 1645.1193961136973 , \"YEAR_NEW_ASSET_SSHARECOM\" : 0.16690149257388515 , \"YN_ASSET_SSHARECOM_GROWTH_RATE\" : 0.017886267801303465 , \"POTENTIAL_LOST_ASSETS\" : 56.76 , \"TOTAL_LIABILITIES\" : 57.81 , \"TOTAL_ASSETS\" : 1306.33 , \"TOTAL_ASSETS_DOD_GROWTH\" : 4.79 , \"TOTAL_ASSETS_DOD_GROWTH_RATE\" : -0.006797058194980485 , \"NEW_ASSETS_DAY\" : 14.92 , \"NEW_ASSETS_MON\" : 90.29 , \"NEW_ASSETS_YEAR\" : 297.32 , \"NEW_ASSETS_DOD_GROWTH_RATE\" : -0.04015576541561927 , \"NEW_FUNDS_DAY\" : 18.16 , \"INFLOW_FUNDS_DAY\" : 2.12 , \"OUTFLOW_FUNDS_DAY\" : 9.73 , \"OVERALL_POSITION\" : 0.810298404938773 , \"OVERALL_POSITION_DOD_GROWTH_RATE\" : -0.03521615634095476 , \"NEW_CUST_FUNDS_MON\" : 69.44 , \"INFLOW_FUNDS_MONTH\" : 62.26 , \"OUTFLOW_FUNDS_MONTH\" : 32.59 }, { \"CURR_DATE\" : \"2019-08-30\" , \"DEPT\" : \"8700\" , \"TOTAL_MANAGED_MARKET_VALUE\" : 1596.74 , \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" : 41.86 , \"TMMARKET_VALUE_DOD_GROWTH_RATE\" : 0.03470208565515685 , \"TMMARKET_VALUE_GROWTH_MON\" : 0.07818120801111743 , \"TMMARKET_VALUE_GROWTH_YEAR\" : -0.05440250244736409 , \"TMMARKET_VALUE_SHARECOM\" : 0.09997733019626448 , \"TMMARKET_VALUE_SHARE_GROWTH_RATE\" : -0.019726478499825697 , \"AVERAGE_NEW_ASSETS_DAYINMON\" : 1007.9314679742108 , \"YEAR_NEW_ASSET_SSHARECOM\" : 0.15123738798885086 , \"YN_ASSET_SSHARECOM_GROWTH_RATE\" : 0.04694052069678048 , \"POTENTIAL_LOST_ASSETS\" : 52.48 , \"TOTAL_LIABILITIES\" : 55.28 , \"TOTAL_ASSETS\" : 1366.72 , \"TOTAL_ASSETS_DOD_GROWTH\" : 10.12 , \"TOTAL_ASSETS_DOD_GROWTH_RATE\" : 0.009708491982487952 , \"NEW_ASSETS_DAY\" : 12.42 , \"NEW_ASSETS_MON\" : 41.14 , \"NEW_ASSETS_YEAR\" : 279.32 , \"NEW_ASSETS_DOD_GROWTH_RATE\" : -0.025878627161898062 , \"NEW_FUNDS_DAY\" : 3.65 , \"INFLOW_FUNDS_DAY\" : 14.15 , \"OUTFLOW_FUNDS_DAY\" : 17.08 , \"OVERALL_POSITION\" : 0.9098432997243932 , \"OVERALL_POSITION_DOD_GROWTH_RATE\" : 0.02111922282868306 , \"NEW_CUST_FUNDS_MON\" : 57.21 , \"INFLOW_FUNDS_MONTH\" : 61.16 , \"OUTFLOW_FUNDS_MONTH\" : 15.83 }, { \"CURR_DATE\" : \"2019-06-30\" , \"DEPT\" : \"6501\" , \"TOTAL_MANAGED_MARKET_VALUE\" : 1506.72 , \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" : -13.23 , \"TMMARKET_VALUE_DOD_GROWTH_RATE\" : -0.0024973354204176554 , \"TMMARKET_VALUE_GROWTH_MON\" : -0.015530793150701896 , \"TMMARKET_VALUE_GROWTH_YEAR\" : -0.08556724628979398 , \"TMMARKET_VALUE_SHARECOM\" : 0.15000077963967678 , \"TMMARKET_VALUE_SHARE_GROWTH_RATE\" : -0.049629446804825755 , \"AVERAGE_NEW_ASSETS_DAYINMON\" : 1250.1040863177336 , \"YEAR_NEW_ASSET_SSHARECOM\" : 0.19098445630488178 , \"YN_ASSET_SSHARECOM_GROWTH_RATE\" : -0.007881179708853471 , \"POTENTIAL_LOST_ASSETS\" : 50.53 , \"TOTAL_LIABILITIES\" : 56.62 , \"TOTAL_ASSETS\" : 1499.53 , \"TOTAL_ASSETS_DOD_GROWTH\" : 29.56 , \"TOTAL_ASSETS_DOD_GROWTH_RATE\" : -0.02599813232345556 , \"NEW_ASSETS_DAY\" : 28.81 , \"NEW_ASSETS_MON\" : 123.24 , \"NEW_ASSETS_YEAR\" : 263.63 , \"NEW_ASSETS_DOD_GROWTH_RATE\" : 0.0073986669331394875 , \"NEW_FUNDS_DAY\" : 18.52 , \"INFLOW_FUNDS_DAY\" : 3.26 , \"OUTFLOW_FUNDS_DAY\" : 6.92 , \"OVERALL_POSITION\" : 0.8713692113306709 , \"OVERALL_POSITION_DOD_GROWTH_RATE\" : 0.02977644553289545 , \"NEW_CUST_FUNDS_MON\" : 85.14 , \"INFLOW_FUNDS_MONTH\" : 23.35 , \"OUTFLOW_FUNDS_MONTH\" : 92.95 }, { \"CURR_DATE\" : \"2019-12-07\" , \"DEPT\" : \"8705\" , \"TOTAL_MANAGED_MARKET_VALUE\" : 1575.85 , \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" : 8.94 , \"TMMARKET_VALUE_DOD_GROWTH_RATE\" : -0.04384846980627058 , \"TMMARKET_VALUE_GROWTH_MON\" : -0.022962456288549656 , \"TMMARKET_VALUE_GROWTH_YEAR\" : -0.005047009316021089 , \"TMMARKET_VALUE_SHARECOM\" : 0.07819484815809447 , \"TMMARKET_VALUE_SHARE_GROWTH_RATE\" : -0.008534369960890256 , \"AVERAGE_NEW_ASSETS_DAYINMON\" : 1340.0339240689955 , \"YEAR_NEW_ASSET_SSHARECOM\" : 0.19019952857677042 , \"YN_ASSET_SSHARECOM_GROWTH_RATE\" : 0.01272353909992914 , \"POTENTIAL_LOST_ASSETS\" : 54.63 , \"TOTAL_LIABILITIES\" : 53.17 , \"TOTAL_ASSETS\" : 1315.08 , \"TOTAL_ASSETS_DOD_GROWTH\" : 49.31 , \"TOTAL_ASSETS_DOD_GROWTH_RATE\" : 0.0016538407028265922 , \"NEW_ASSETS_DAY\" : 29.17 , \"NEW_ASSETS_MON\" : 44.75 , \"NEW_ASSETS_YEAR\" : 172.87 , \"NEW_ASSETS_DOD_GROWTH_RATE\" : 0.045388692595736746 , \"NEW_FUNDS_DAY\" : 18.46 , \"INFLOW_FUNDS_DAY\" : 12.93 , \"OUTFLOW_FUNDS_DAY\" : 10.38 , \"OVERALL_POSITION\" : 0.8083127036694828 , \"OVERALL_POSITION_DOD_GROWTH_RATE\" : -0.02847453515632541 , \"NEW_CUST_FUNDS_MON\" : 49.74 , \"INFLOW_FUNDS_MONTH\" : 81.93 , \"OUTFLOW_FUNDS_MONTH\" : 18.17 } ] } \u6211\u4eec\u9700\u8981\u628a result \u7ed3\u679c\u4e2d\u7684\u90e8\u5206 key \u503c\u6570\u636e\u83b7\u53d6","title":"\u793a\u4f8b\u63a5\u53e3\u4e0e\u6570\u636e"},{"location":"reader/httpreader/#_3","text":"\u4ee5\u4e0b\u914d\u7f6e\u5b9e\u73b0\u4ece\u63a5\u53e3\u83b7\u53d6\u6570\u636e\u5e76\u6253\u5370\u5230\u7ec8\u7aef job/httpreader2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"httpreader\" , \"parameter\" : { \"connection\" : [ { \"url\" : \"http://127.0.0.1:9090/mock/17/LDJSC/ASSET\" , \"proxy\" : { \"host\" : \"http://127.0.0.1:3128\" , \"auth\" : \"user:pass\" } } ], \"reqParams\" : { \"CURR_DATE\" : \"2021-01-18\" , \"DEPT\" : \"9700\" }, \"resultKey\" : \"result\" , \"method\" : \"GET\" , \"column\" : [ \"CURR_DATE\" , \"DEPT\" , \"TOTAL_MANAGED_MARKET_VALUE\" , \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" ], \"username\" : \"user\" , \"password\" : \"passw0rd\" , \"headers\" : { \"X-Powered-by\" : \"Addax\" } } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } } } } } \u5c06\u4e0a\u8ff0\u5185\u5bb9\u4fdd\u5b58\u4e3a job/httpreader2stream.json \u6587\u4ef6\u3002","title":"\u914d\u7f6e"},{"location":"reader/httpreader/#_4","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u8fdb\u884c\u91c7\u96c6 bin/addax.sh job/httpreader2stream.json \u4e0a\u8ff0\u547d\u4ee4\u7684\u8f93\u51fa\u7ed3\u679c\u5927\u81f4\u5982\u4e0b\uff1a 2021-01-20 09:07:41.864 [main] INFO VMInfo - VMInfo# operatingSystem class => com.sun.management.internal.OperatingSystemImpl 2021-01-20 09:07:41.877 [main] INFO Engine - the machine info => osInfo: Mac OS X x86_64 10.15.1 jvmInfo: AdoptOpenJDK 14 14.0.2+12 cpu num: 8 totalPhysicalMemory: -0.00G freePhysicalMemory: -0.00G maxFileDescriptorCount: -1 currentOpenFileDescriptorCount: -1 GC Names [G1 Young Generation, G1 Old Generation] MEMORY_NAME | allocation_size | init_size CodeHeap 'profiled nmethods' | 117.21MB | 2.44MB G1 Old Gen | 2,048.00MB | 39.00MB G1 Survivor Space | -0.00MB | 0.00MB CodeHeap 'non-profiled nmethods' | 117.21MB | 2.44MB Compressed Class Space | 1,024.00MB | 0.00MB Metaspace | -0.00MB | 0.00MB G1 Eden Space | -0.00MB | 25.00MB CodeHeap 'non-nmethods' | 5.57MB | 2.44MB 2021-01-20 09:07:41.903 [main] INFO Engine - { \"content\": { \"reader\":{ \"parameter\":{ \"reqParams\":{ \"CURR_DATE\":\"2021-01-18\", \"DEPT\":\"9700\" }, \"method\":\"GET\", \"column\":[ \"CURR_DATE\", \"DEPT\", \"TOTAL_MANAGED_MARKET_VALUE\", \"TOTAL_MANAGED_MARKET_VALUE_GROWTH\" ], \"resultKey\":\"result\", \"connection\":[ { \"url\":\"http://127.0.0.1:9090/mock/17/LDJSC/ASSET\" } ] }, \"name\":\"httpreader\" }, \"writer\":{ \"parameter\":{ \"print\":\"true\" }, \"name\":\"streamwriter\" } }, \"setting\":{ \"speed\":{ \"bytes\":-1, \"channel\":1 } } } 2021-01-20 09:07:41.926 [main] INFO PerfTrace - PerfTrace traceId=job_-1, isEnable=false, priority=0 2021-01-20 09:07:41.927 [main] INFO JobContainer - Addax jobContainer starts job. 2021-01-20 09:07:41.928 [main] INFO JobContainer - Set jobId = 0 2021-01-20 09:07:42.002 [taskGroup-0] INFO TaskGroupContainer - taskGroup[0] taskId[0] attemptCount[1] is started 2019-08-30 9700 1539.85 -14.78 2019-10-01 9700 1531.71 47.66 2020-12-03 9700 1574.38 7.34 2020-11-31 9700 1528.13 41.62 2019-03-01 9700 1554.28 -9.29 2021-01-20 09:07:45.006 [job-0] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-01-20 09:07:41 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-01-20 09:07:44 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 42B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 1rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 5 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0","title":"\u6267\u884c"},{"location":"reader/httpreader/#_5","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u8bf4\u660e url \u662f string \u65e0 \u8981\u8bbf\u95ee\u7684HTTP\u5730\u5740 reqParams \u5426 map \u65e0 \u63a5\u53e3\u8bf7\u6c42\u53c2\u6570 resultKey \u5426 string \u65e0 \u8981\u83b7\u53d6\u7ed3\u679c\u7684\u90a3\u4e2akey\u503c\uff0c\u5982\u679c\u662f\u83b7\u53d6\u6574\u4e2a\u8fd4\u56de\u503c\uff0c\u5219\u53ef\u4ee5\u4e0d\u7528\u586b\u5199 method \u5426 string get \u8bf7\u6c42\u6a21\u5f0f\uff0c\u4ec5\u652f\u6301GET\uff0cPOST\u4e24\u79cd\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199 column \u662f list \u65e0 \u8981\u83b7\u53d6\u7684key\uff0c\u5982\u679c\u914d\u7f6e\u4e3a \"*\" \uff0c\u5219\u8868\u793a\u83b7\u53d6\u6240\u6709key\u7684\u503c username \u5426 string \u65e0 \u63a5\u53e3\u8bf7\u6c42\u9700\u8981\u7684\u8ba4\u8bc1\u5e10\u53f7\uff08\u5982\u6709) password \u5426 string \u65e0 \u63a5\u53e3\u8bf7\u6c42\u9700\u8981\u7684\u5bc6\u7801\uff08\u5982\u6709) proxy \u5426 map \u65e0 \u4ee3\u7406\u5730\u5740,\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 headers \u5426 map \u65e0 \u5b9a\u5236\u7684\u8bf7\u6c42\u5934\u4fe1\u606f","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/httpreader/#proxy","text":"\u5982\u679c\u8bbf\u95ee\u7684\u63a5\u53e3\u9700\u8981\u901a\u8fc7\u4ee3\u7406\uff0c\u5219\u53ef\u4ee5\u914d\u7f6e proxy \u914d\u7f6e\u9879\uff0c\u8be5\u914d\u7f6e\u9879\u662f\u4e00\u4e2a json \u5b57\u5178\uff0c\u5305\u542b\u4e00\u4e2a\u5fc5\u9009\u7684 host \u5b57\u6bb5\u548c\u4e00\u4e2a\u53ef\u9009\u7684 auth \u5b57\u6bb5\u3002 { \"proxy\" : { \"host\" : \"http://127.0.0.1:8080\" , \"auth\" : \"user:pass\" } } \u5982\u679c\u662f sock \u4ee3\u7406 (V4,v5)\uff0c\u5219\u53ef\u4ee5\u5199 { \"proxy\" : { \"host\" : \"socks://127.0.0.1:8080\" , \"auth\" : \"user:pass\" } } host \u662f\u4ee3\u7406\u5730\u5740\uff0c\u5305\u542b\u4ee3\u7406\u7c7b\u578b\uff0c\u76ee\u524d\u4ec5\u652f\u6301 http \u4ee3\u7406\u548c socks (V4, V5\u5747\u53ef) \u4ee3\u7406\u3002 \u5982\u679c\u4ee3\u7406\u9700\u8981\u8ba4\u8bc1\uff0c\u5219\u53ef\u4ee5\u914d\u7f6e auth , \u5b83\u7531 \u7528\u6237\u540d\u548c\u5bc6\u7801\u7ec4\u6210\uff0c\u4e24\u8005\u4e4b\u95f4\u7528\u5192\u53f7(:) \u9694\u5f00\u3002","title":"proxy"},{"location":"reader/httpreader/#column","text":"column \u9664\u4e86\u76f4\u63a5\u6307\u5b9a key \u4e4b\u5916\uff0c\u8fd8\u5141\u8bb8\u7528 JSON Xpath \u98ce\u683c\u6765\u6307\u5b9a\u9700\u8981\u83b7\u53d6\u7684 key \u503c\uff0c\u5047\u5b9a\u4f60\u8981\u8bfb\u53d6\u7684 JSON \u6587\u4ef6\u5982\u4e0b\uff1a { \"result\" : [ { \"CURR_DATE\" : \"2019-12-09\" , \"DEPT\" : { \"ID\" : \"9700\" }, \"KK\" : [ { \"COL1\" : 1 }, { \"COL2\" : 2 } ] }, { \"CURR_DATE\" : \"2021-11-09\" , \"DEPT\" : { \"ID\" : \"6500\" }, \"KK\" : [ { \"COL1\" : 3 }, { \"COL2\" : 4 } ] } ] } \u6211\u4eec\u5e0c\u671b\u628a CURR_DATE , ID , COL1 , COL2 \u5f53\u4f5c\u56db\u4e2a\u5b57\u6bb5\u8bfb\u53d6\uff0c\u90a3\u4e48\u4f60\u7684 column \u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e\uff1a { \"column\" : [ \"CURR_DATE\" , \"DEPT.ID\" , \"KK[0].COL1\" , \"KK[1].COL2\" ] } \u5176\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a ... 2021 -10-30 14 :01:50.273 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 2019 -12-09 9700 1 2 2021 -11-09 6500 3 4 2021 -10-30 14 :01:53.283 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -10-30 14 :01:53.284 [ job-0 ] INFO JobContainer - Addax Writer.Job [ streamwriter ] do post work. 2021 -10-30 14 :01:53.284 [ job-0 ] INFO JobContainer - Addax Reader.Job [ httpreader ] do post work. 2021 -10-30 14 :01:53.286 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -10-30 14 :01:53.289 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -10-30 14 :01:50 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -10-30 14 :01:53 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 10B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 0rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 2 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 \u6ce8\u610f\uff1a \u5982\u679c\u4f60\u6307\u5b9a\u4e86\u4e0d\u5b58\u5728\u7684 Key\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u4e3a NULL \u503c\u3002","title":"column"},{"location":"reader/httpreader/#_6","text":"\u8fd4\u56de\u7684\u7ed3\u679c\u5fc5\u987b\u662fJSON\u7c7b\u578b \u5f53\u524d\u6240\u6709key\u7684\u503c\u5747\u5f53\u4f5c\u5b57\u7b26\u4e32\u7c7b\u578b \u6682\u4e0d\u652f\u6301\u63a5\u53e3Token\u9274\u6743\u6a21\u5f0f \u6682\u4e0d\u652f\u6301\u5206\u9875\u83b7\u53d6 \u4ee3\u7406\u4ec5\u652f\u6301 http \u6a21\u5f0f","title":"\u9650\u5236\u8bf4\u660e"},{"location":"reader/influxdb2reader/","text":"InfluxDB2 Reader \u00b6 InfluxDB2Reader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece InfluxDB 2.0 \u53ca\u4ee5\u4e0a\u7248\u672c\u8bfb\u53d6\u6570\u636e\u3002 \u6ce8\u610f\uff0c\u5982\u679c\u4f60\u7684 InfluxDB \u662f 1.8\u53ca\u4ee5\u4e0b\u7248\u672c\uff0c\u5219\u5e94\u8be5\u4f7f\u7528 InfluxDBReader \u63d2\u4ef6 \u793a\u4f8b \u00b6 \u4ee5\u4e0b\u793a\u4f8b\u7528\u6765\u6f14\u793a\u8be5\u63d2\u4ef6\u5982\u4f55\u4ece\u6307\u5b9a\u8868(\u5373\u6307\u6807)\u4e0a\u8bfb\u53d6\u6570\u636e\u5e76\u8f93\u51fa\u5230\u7ec8\u7aef \u521b\u5efa job \u6587\u4ef6 \u00b6 \u521b\u5efa job/influx2stream.json \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/influx2stream.json { \"job\" : { \"content\" : { \"reader\" : { \"name\" : \"influxdb2reader\" , \"parameter\" : { \"column\" : [ \"location\" , \"height\" , \"wet\" ], \"connection\" : [ { \"endpoint\" : \"http://localhost:8086\" , \"bucket\" : \"test\" , \"table\" : [ \"temperature\" ], \"org\" : \"com.wgzhao\" } ], \"token\" : \"YOUR_SECURE_TOKEN\" , \"range\" : [ \"-1h\" , \"-5m\" ], \"limit\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } } }, \"setting\" : { \"speed\" : { \"bytes\" : -1 , \"channel\" : 1 } } } } \u8fd0\u884c \u00b6 \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/influx2stream.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 token \u662f string \u65e0 \u8bbf\u95ee\u6570\u636e\u5e93\u7684 token table \u5426 list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d\uff08\u5373\u6307\u6807) org \u662f string \u65e0 \u6307\u5b9a InfluxDB \u7684 org \u540d\u79f0 bucket \u662f string \u65e0 \u6307\u5b9a InfluxDB \u7684 bucket \u540d\u79f0 column \u5426 list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmreader range \u662f list \u65e0 \u8bfb\u53d6\u6570\u636e\u7684\u65f6\u95f4\u8303\u56f4 limit \u5426 int \u65e0 \u9650\u5236\u83b7\u53d6\u8bb0\u5f55\u6570 column \u00b6 \u5982\u679c\u4e0d\u6307\u5b9a column , \u6216\u8005\u6307\u5b9a column \u4e3a [\"*\"] \uff0c \u5219\u4f1a\u8bfb\u53d6\u6240\u6709\u6709\u6548\u7684 _field \u5b57\u6bb5\u4ee5\u53ca _time \u5b57\u6bb5 \u5426\u5219\u6309\u7167\u6307\u5b9a\u5b57\u6bb5\u8bfb\u53d6 range \u00b6 range \u7528\u6765\u6307\u5b9a\u8bfb\u53d6\u6307\u6807\u7684\u65f6\u95f4\u8303\u56f4\uff0c\u5176\u683c\u5f0f\u5982\u4e0b: { \"range\" : [ \"start_time\" , \"end_time\" ] } range \u7531\u4e24\u4e2a\u5b57\u7b26\u4e32\u7ec4\u6210\u7684\u5217\u8868\u7ec4\u6210\uff0c\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32\u8868\u793a\u5f00\u59cb\u65f6\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u8868\u793a\u7ed3\u675f\u65f6\u95f4\u3002\u5176\u65f6\u95f4\u8868\u8fbe\u65b9\u5f0f\u8981\u6c42\u7b26\u5408 Flux \u683c\u5f0f\u8981\u6c42 ,\u7c7b\u4f3c\u8fd9\u6837: { \"range\" : [ \"-15h\" , \"-2h\" ] } \u5176\u4e2d\u7b2c\u4e8c\u4e2a\u7ed3\u675f\u65f6\u95f4\u5982\u679c\u4e0d\u60f3\u6307\u5b9a\uff0c\u53ef\u4ee5\u4e0d\u5199\uff0c\u7c7b\u4f3c\u8fd9\u6837\uff1a { \"range\" : [ \"-15h\" ] } \u7c7b\u578b\u8f6c\u6362 \u00b6 \u5f53\u524d\u5b9e\u73b0\u662f\u5c06\u6240\u6709\u5b57\u6bb5\u5f53\u4f5c\u5b57\u7b26\u4e32\u5904\u7406 \u9650\u5236 \u00b6 \u5f53\u524d\u63d2\u4ef6\u4ec5\u652f\u6301 2.0 \u53ca\u4ee5\u4e0a\u7248\u672c","title":"InfluxDB2 Reader"},{"location":"reader/influxdb2reader/#influxdb2-reader","text":"InfluxDB2Reader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece InfluxDB 2.0 \u53ca\u4ee5\u4e0a\u7248\u672c\u8bfb\u53d6\u6570\u636e\u3002 \u6ce8\u610f\uff0c\u5982\u679c\u4f60\u7684 InfluxDB \u662f 1.8\u53ca\u4ee5\u4e0b\u7248\u672c\uff0c\u5219\u5e94\u8be5\u4f7f\u7528 InfluxDBReader \u63d2\u4ef6","title":"InfluxDB2 Reader"},{"location":"reader/influxdb2reader/#_1","text":"\u4ee5\u4e0b\u793a\u4f8b\u7528\u6765\u6f14\u793a\u8be5\u63d2\u4ef6\u5982\u4f55\u4ece\u6307\u5b9a\u8868(\u5373\u6307\u6807)\u4e0a\u8bfb\u53d6\u6570\u636e\u5e76\u8f93\u51fa\u5230\u7ec8\u7aef","title":"\u793a\u4f8b"},{"location":"reader/influxdb2reader/#job","text":"\u521b\u5efa job/influx2stream.json \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/influx2stream.json { \"job\" : { \"content\" : { \"reader\" : { \"name\" : \"influxdb2reader\" , \"parameter\" : { \"column\" : [ \"location\" , \"height\" , \"wet\" ], \"connection\" : [ { \"endpoint\" : \"http://localhost:8086\" , \"bucket\" : \"test\" , \"table\" : [ \"temperature\" ], \"org\" : \"com.wgzhao\" } ], \"token\" : \"YOUR_SECURE_TOKEN\" , \"range\" : [ \"-1h\" , \"-5m\" ], \"limit\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } } }, \"setting\" : { \"speed\" : { \"bytes\" : -1 , \"channel\" : 1 } } } }","title":"\u521b\u5efa job \u6587\u4ef6"},{"location":"reader/influxdb2reader/#_2","text":"\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/influx2stream.json","title":"\u8fd0\u884c"},{"location":"reader/influxdb2reader/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 token \u662f string \u65e0 \u8bbf\u95ee\u6570\u636e\u5e93\u7684 token table \u5426 list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d\uff08\u5373\u6307\u6807) org \u662f string \u65e0 \u6307\u5b9a InfluxDB \u7684 org \u540d\u79f0 bucket \u662f string \u65e0 \u6307\u5b9a InfluxDB \u7684 bucket \u540d\u79f0 column \u5426 list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmreader range \u662f list \u65e0 \u8bfb\u53d6\u6570\u636e\u7684\u65f6\u95f4\u8303\u56f4 limit \u5426 int \u65e0 \u9650\u5236\u83b7\u53d6\u8bb0\u5f55\u6570","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/influxdb2reader/#column","text":"\u5982\u679c\u4e0d\u6307\u5b9a column , \u6216\u8005\u6307\u5b9a column \u4e3a [\"*\"] \uff0c \u5219\u4f1a\u8bfb\u53d6\u6240\u6709\u6709\u6548\u7684 _field \u5b57\u6bb5\u4ee5\u53ca _time \u5b57\u6bb5 \u5426\u5219\u6309\u7167\u6307\u5b9a\u5b57\u6bb5\u8bfb\u53d6","title":"column"},{"location":"reader/influxdb2reader/#range","text":"range \u7528\u6765\u6307\u5b9a\u8bfb\u53d6\u6307\u6807\u7684\u65f6\u95f4\u8303\u56f4\uff0c\u5176\u683c\u5f0f\u5982\u4e0b: { \"range\" : [ \"start_time\" , \"end_time\" ] } range \u7531\u4e24\u4e2a\u5b57\u7b26\u4e32\u7ec4\u6210\u7684\u5217\u8868\u7ec4\u6210\uff0c\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32\u8868\u793a\u5f00\u59cb\u65f6\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u8868\u793a\u7ed3\u675f\u65f6\u95f4\u3002\u5176\u65f6\u95f4\u8868\u8fbe\u65b9\u5f0f\u8981\u6c42\u7b26\u5408 Flux \u683c\u5f0f\u8981\u6c42 ,\u7c7b\u4f3c\u8fd9\u6837: { \"range\" : [ \"-15h\" , \"-2h\" ] } \u5176\u4e2d\u7b2c\u4e8c\u4e2a\u7ed3\u675f\u65f6\u95f4\u5982\u679c\u4e0d\u60f3\u6307\u5b9a\uff0c\u53ef\u4ee5\u4e0d\u5199\uff0c\u7c7b\u4f3c\u8fd9\u6837\uff1a { \"range\" : [ \"-15h\" ] }","title":"range"},{"location":"reader/influxdb2reader/#_4","text":"\u5f53\u524d\u5b9e\u73b0\u662f\u5c06\u6240\u6709\u5b57\u6bb5\u5f53\u4f5c\u5b57\u7b26\u4e32\u5904\u7406","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/influxdb2reader/#_5","text":"\u5f53\u524d\u63d2\u4ef6\u4ec5\u652f\u6301 2.0 \u53ca\u4ee5\u4e0a\u7248\u672c","title":"\u9650\u5236"},{"location":"reader/influxdbreader/","text":"InfluxDB Reader \u00b6 InfluxDBReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece InfluxDB \u8bfb\u53d6\u6570\u636e\u3002\u5e95\u5c42\u5b9e\u73b0\u4e0a\uff0c\u662f\u901a\u8fc7\u8c03\u7528 InfluQL \u8bed\u8a00\u67e5\u8be2\u8868\uff0c\u7136\u540e\u83b7\u5f97\u8fd4\u56de\u6570\u636e\u3002 \u793a\u4f8b \u00b6 \u4ee5\u4e0b\u793a\u4f8b\u7528\u6765\u6f14\u793a\u8be5\u63d2\u4ef6\u5982\u4f55\u4ece\u6307\u5b9a\u8868(\u5373\u6307\u6807)\u4e0a\u8bfb\u53d6\u6570\u636e\u5e76\u8f93\u51fa\u5230\u7ec8\u7aef \u521b\u5efa\u9700\u8981\u7684\u5e93\u8868\u548c\u6570\u636e \u00b6 \u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u6765\u521b\u5efa\u9700\u8981\u8bfb\u53d6\u7684\u8868\u4ee5\u53ca\u6570\u636e # create database influx --execute \"CREATE DATABASE NOAA_water_database\" # download sample data curl https://s3.amazonaws.com/noaa.water-database/NOAA_data.txt -o NOAA_data.txt # import data via influx-cli influx -import -path = NOAA_data.txt -precision = s -database = NOAA_water_database \u521b\u5efa job \u6587\u4ef6 \u00b6 \u521b\u5efa job/influxdb2stream.json \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/influxdb2stream.json { \"job\" : { \"content\" : { \"reader\" : { \"name\" : \"influxdbreader\" , \"parameter\" : { \"column\" : [ \"*\" ], \"connection\" : [ { \"endpoint\" : \"http://localhost:8086\" , \"database\" : \"NOAA_water_database\" , \"table\" : \"h2o_feet\" , \"where\" : \"1=1\" } ], \"connTimeout\" : 15 , \"readTimeout\" : 20 , \"writeTimeout\" : 20 , \"username\" : \"influx\" , \"password\" : \"influx123\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } } }, \"setting\" : { \"speed\" : { \"bytes\" : -1 , \"channel\" : 1 } } } } \u8fd0\u884c \u00b6 \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/influxdb2stream.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 database \u662f string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7684\u6570\u636e\u5e93 table \u662f string \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmreader connTimeout \u5426 int 15 \u8bbe\u7f6e\u8fde\u63a5\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 readTimeout \u5426 int 20 \u8bbe\u7f6e\u8bfb\u53d6\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 writeTimeout \u5426 int 20 \u8bbe\u7f6e\u5199\u5165\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 where \u5426 \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 \u7c7b\u578b\u8f6c\u6362 \u00b6 \u5f53\u524d\u5b9e\u73b0\u662f\u5c06\u6240\u6709\u5b57\u6bb5\u5f53\u4f5c\u5b57\u7b26\u4e32\u5904\u7406 \u9650\u5236 \u00b6 \u5f53\u524d\u63d2\u4ef6\u4ec5\u652f\u6301 1.x \u7248\u672c\uff0c2.0 \u53ca\u4ee5\u4e0a\u5e76\u4e0d\u652f\u6301","title":"InfluxDB Reader"},{"location":"reader/influxdbreader/#influxdb-reader","text":"InfluxDBReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece InfluxDB \u8bfb\u53d6\u6570\u636e\u3002\u5e95\u5c42\u5b9e\u73b0\u4e0a\uff0c\u662f\u901a\u8fc7\u8c03\u7528 InfluQL \u8bed\u8a00\u67e5\u8be2\u8868\uff0c\u7136\u540e\u83b7\u5f97\u8fd4\u56de\u6570\u636e\u3002","title":"InfluxDB Reader"},{"location":"reader/influxdbreader/#_1","text":"\u4ee5\u4e0b\u793a\u4f8b\u7528\u6765\u6f14\u793a\u8be5\u63d2\u4ef6\u5982\u4f55\u4ece\u6307\u5b9a\u8868(\u5373\u6307\u6807)\u4e0a\u8bfb\u53d6\u6570\u636e\u5e76\u8f93\u51fa\u5230\u7ec8\u7aef","title":"\u793a\u4f8b"},{"location":"reader/influxdbreader/#_2","text":"\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u6765\u521b\u5efa\u9700\u8981\u8bfb\u53d6\u7684\u8868\u4ee5\u53ca\u6570\u636e # create database influx --execute \"CREATE DATABASE NOAA_water_database\" # download sample data curl https://s3.amazonaws.com/noaa.water-database/NOAA_data.txt -o NOAA_data.txt # import data via influx-cli influx -import -path = NOAA_data.txt -precision = s -database = NOAA_water_database","title":"\u521b\u5efa\u9700\u8981\u7684\u5e93\u8868\u548c\u6570\u636e"},{"location":"reader/influxdbreader/#job","text":"\u521b\u5efa job/influxdb2stream.json \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/influxdb2stream.json { \"job\" : { \"content\" : { \"reader\" : { \"name\" : \"influxdbreader\" , \"parameter\" : { \"column\" : [ \"*\" ], \"connection\" : [ { \"endpoint\" : \"http://localhost:8086\" , \"database\" : \"NOAA_water_database\" , \"table\" : \"h2o_feet\" , \"where\" : \"1=1\" } ], \"connTimeout\" : 15 , \"readTimeout\" : 20 , \"writeTimeout\" : 20 , \"username\" : \"influx\" , \"password\" : \"influx123\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } } }, \"setting\" : { \"speed\" : { \"bytes\" : -1 , \"channel\" : 1 } } } }","title":"\u521b\u5efa job \u6587\u4ef6"},{"location":"reader/influxdbreader/#_3","text":"\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/influxdb2stream.json","title":"\u8fd0\u884c"},{"location":"reader/influxdbreader/#_4","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 database \u662f string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7684\u6570\u636e\u5e93 table \u662f string \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmreader connTimeout \u5426 int 15 \u8bbe\u7f6e\u8fde\u63a5\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 readTimeout \u5426 int 20 \u8bbe\u7f6e\u8bfb\u53d6\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 writeTimeout \u5426 int 20 \u8bbe\u7f6e\u5199\u5165\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 where \u5426 \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/influxdbreader/#_5","text":"\u5f53\u524d\u5b9e\u73b0\u662f\u5c06\u6240\u6709\u5b57\u6bb5\u5f53\u4f5c\u5b57\u7b26\u4e32\u5904\u7406","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/influxdbreader/#_6","text":"\u5f53\u524d\u63d2\u4ef6\u4ec5\u652f\u6301 1.x \u7248\u672c\uff0c2.0 \u53ca\u4ee5\u4e0a\u5e76\u4e0d\u652f\u6301","title":"\u9650\u5236"},{"location":"reader/jsonfilereader/","text":"JsonFile Reader \u00b6 JsonFileReader \u63d0\u4f9b\u4e86\u8bfb\u53d6\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u6570\u636e\u5b58\u50a8\u7684\u80fd\u529b\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 job/json2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } }, \"reader\" : { \"name\" : \"jsonfilereader\" , \"parameter\" : { \"path\" : [ \"/tmp/test*.json\" ], \"column\" : [ { \"index\" : \"$.id\" , \"type\" : \"long\" }, { \"index\" : \"$.name\" , \"type\" : \"string\" }, { \"index\" : \"$.age\" , \"type\" : \"long\" }, { \"index\" : \"$.score.math\" , \"type\" : \"double\" }, { \"index\" : \"$.score.english\" , \"type\" : \"double\" }, { \"index\" : \"$.pubdate\" , \"type\" : \"date\" }, { \"type\" : \"string\" , \"value\" : \"constant string\" } ] } } } } } \u5176\u4e2d /tmp/test*.json \u4e3a\u540c\u4e00\u4e2a json \u6587\u4ef6\u7684\u591a\u4e2a\u590d\u5236\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a { \"name\" : \"zhangshan\" , \"id\" : 19890604 , \"age\" : 12 , \"score\" : { \"math\" : 92.5 , \"english\" : 97.5 , \"chinese\" : 95 }, \"pubdate\" : \"2020-09-05\" } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f \u65e0 \u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84,\u8be6\u7ec6\u63cf\u8ff0\u89c1\u4e0b\u6587 column \u662f \u65e0 \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c\u8be6\u89c1\u4e0b\u6587 fieldDelimiter \u662f , \u63cf\u8ff0\uff1a\u8bfb\u53d6\u7684\u5b57\u6bb5\u5206\u9694\u7b26 compress \u5426 \u65e0 \u6587\u672c\u538b\u7f29\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4e0d\u586b\u5199\u610f\u5473\u7740\u6ca1\u6709\u538b\u7f29\u3002\u652f\u6301\u538b\u7f29\u7c7b\u578b\u4e3azip\u3001gzip\u3001bzip2 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e path \u00b6 \u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84 \u5f53\u6307\u5b9a\u5355\u4e2a\u672c\u5730\u6587\u4ef6\uff0cJsonFileReader\u6682\u65f6\u53ea\u80fd\u4f7f\u7528\u5355\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002 \u5f53\u6307\u5b9a\u591a\u4e2a\u672c\u5730\u6587\u4ef6\uff0cJsonFileReader\u652f\u6301\u4f7f\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u7ebf\u7a0b\u5e76\u53d1\u6570\u901a\u8fc7\u901a\u9053\u6570\u6307\u5b9a\u3002 \u5f53\u6307\u5b9a\u901a\u914d\u7b26\uff0cJsonFileReader\u5c1d\u8bd5\u904d\u5386\u51fa\u591a\u4e2a\u6587\u4ef6\u4fe1\u606f\u3002\u4f8b\u5982: \u6307\u5b9a /* \u4ee3\u8868\u8bfb\u53d6/\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\uff0c\u6307\u5b9a /bazhen/* \u4ee3\u8868\u8bfb\u53d6bazhen\u76ee\u5f55\u4e0b\u6e38\u6240\u6709\u7684\u6587\u4ef6\u3002 JsonFileReader\u76ee\u524d\u53ea\u652f\u6301 * \u4f5c\u4e3a\u6587\u4ef6\u901a\u914d\u7b26\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679cPath\u6307\u5b9a\u7684\u8def\u5f84\u4e0b\u6ca1\u6709\u7b26\u5408\u5339\u914d\u7684\u6587\u4ef6\u62bd\u53d6\uff0cAddax\u5c06\u62a5\u9519\u3002 column \u00b6 \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0cindex\u6307\u5b9a\u5f53\u524d\u5217\u6765\u81ea\u4e8ejson\u7684\u6307\u5b9a\uff0c\u8bed\u6cd5\u4e3a Jayway JsonPath \u7684\u8bed\u6cd5\uff0cvalue\u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece\u6e90\u5934\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636evalue\u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002 \u7528\u6237\u5fc5\u987b\u6307\u5b9aColumn\u5b57\u6bb5\u4fe1\u606f \u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cindex/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00 \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b \u672c\u5730\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long Double Double String String Boolean Boolean Date Date","title":"JsonFile Reader"},{"location":"reader/jsonfilereader/#jsonfile-reader","text":"JsonFileReader \u63d0\u4f9b\u4e86\u8bfb\u53d6\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u6570\u636e\u5b58\u50a8\u7684\u80fd\u529b\u3002","title":"JsonFile Reader"},{"location":"reader/jsonfilereader/#_1","text":"job/json2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } }, \"reader\" : { \"name\" : \"jsonfilereader\" , \"parameter\" : { \"path\" : [ \"/tmp/test*.json\" ], \"column\" : [ { \"index\" : \"$.id\" , \"type\" : \"long\" }, { \"index\" : \"$.name\" , \"type\" : \"string\" }, { \"index\" : \"$.age\" , \"type\" : \"long\" }, { \"index\" : \"$.score.math\" , \"type\" : \"double\" }, { \"index\" : \"$.score.english\" , \"type\" : \"double\" }, { \"index\" : \"$.pubdate\" , \"type\" : \"date\" }, { \"type\" : \"string\" , \"value\" : \"constant string\" } ] } } } } } \u5176\u4e2d /tmp/test*.json \u4e3a\u540c\u4e00\u4e2a json \u6587\u4ef6\u7684\u591a\u4e2a\u590d\u5236\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a { \"name\" : \"zhangshan\" , \"id\" : 19890604 , \"age\" : 12 , \"score\" : { \"math\" : 92.5 , \"english\" : 97.5 , \"chinese\" : 95 }, \"pubdate\" : \"2020-09-05\" }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"reader/jsonfilereader/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f \u65e0 \u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84,\u8be6\u7ec6\u63cf\u8ff0\u89c1\u4e0b\u6587 column \u662f \u65e0 \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c\u8be6\u89c1\u4e0b\u6587 fieldDelimiter \u662f , \u63cf\u8ff0\uff1a\u8bfb\u53d6\u7684\u5b57\u6bb5\u5206\u9694\u7b26 compress \u5426 \u65e0 \u6587\u672c\u538b\u7f29\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4e0d\u586b\u5199\u610f\u5473\u7740\u6ca1\u6709\u538b\u7f29\u3002\u652f\u6301\u538b\u7f29\u7c7b\u578b\u4e3azip\u3001gzip\u3001bzip2 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/jsonfilereader/#path","text":"\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84 \u5f53\u6307\u5b9a\u5355\u4e2a\u672c\u5730\u6587\u4ef6\uff0cJsonFileReader\u6682\u65f6\u53ea\u80fd\u4f7f\u7528\u5355\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002 \u5f53\u6307\u5b9a\u591a\u4e2a\u672c\u5730\u6587\u4ef6\uff0cJsonFileReader\u652f\u6301\u4f7f\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u7ebf\u7a0b\u5e76\u53d1\u6570\u901a\u8fc7\u901a\u9053\u6570\u6307\u5b9a\u3002 \u5f53\u6307\u5b9a\u901a\u914d\u7b26\uff0cJsonFileReader\u5c1d\u8bd5\u904d\u5386\u51fa\u591a\u4e2a\u6587\u4ef6\u4fe1\u606f\u3002\u4f8b\u5982: \u6307\u5b9a /* \u4ee3\u8868\u8bfb\u53d6/\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\uff0c\u6307\u5b9a /bazhen/* \u4ee3\u8868\u8bfb\u53d6bazhen\u76ee\u5f55\u4e0b\u6e38\u6240\u6709\u7684\u6587\u4ef6\u3002 JsonFileReader\u76ee\u524d\u53ea\u652f\u6301 * \u4f5c\u4e3a\u6587\u4ef6\u901a\u914d\u7b26\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679cPath\u6307\u5b9a\u7684\u8def\u5f84\u4e0b\u6ca1\u6709\u7b26\u5408\u5339\u914d\u7684\u6587\u4ef6\u62bd\u53d6\uff0cAddax\u5c06\u62a5\u9519\u3002","title":"path"},{"location":"reader/jsonfilereader/#column","text":"\u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0cindex\u6307\u5b9a\u5f53\u524d\u5217\u6765\u81ea\u4e8ejson\u7684\u6307\u5b9a\uff0c\u8bed\u6cd5\u4e3a Jayway JsonPath \u7684\u8bed\u6cd5\uff0cvalue\u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece\u6e90\u5934\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636evalue\u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002 \u7528\u6237\u5fc5\u987b\u6307\u5b9aColumn\u5b57\u6bb5\u4fe1\u606f \u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cindex/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00","title":"column"},{"location":"reader/jsonfilereader/#_3","text":"Addax \u5185\u90e8\u7c7b\u578b \u672c\u5730\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long Double Double String String Boolean Boolean Date Date","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/kudureader/","text":"Kudu Reader \u00b6 KuduReader \u63d2\u4ef6\u5229\u7528 Kudu \u7684java\u5ba2\u6237\u7aefKuduClient\u8fdb\u884cKudu\u7684\u8bfb\u64cd\u4f5c\u3002 \u914d\u7f6e\u793a\u4f8b \u00b6 \u6211\u4eec\u901a\u8fc7 Trino \u7684 kudu connector \u8fde\u63a5 kudu \u670d\u52a1\uff0c\u7136\u540e\u8fdb\u884c\u8868\u521b\u5efa\u4ee5\u53ca\u6570\u636e\u63d2\u5165 \u5efa\u8868\u8bed\u53e5\u4ee5\u53ca\u6570\u636e\u63d2\u5165\u8bed\u53e5 \u00b6 CREATE TABLE kudu . default . users ( user_id int WITH ( primary_key = true ), user_name varchar with ( nullable = true ), age int with ( nullable = true ), salary double with ( nullable = true ), longtitue decimal ( 18 , 6 ) with ( nullable = true ), latitude decimal ( 18 , 6 ) with ( nullable = true ), p decimal ( 21 , 20 ) with ( nullable = true ), mtime timestamp with ( nullable = true ) ) WITH ( partition_by_hash_columns = ARRAY [ 'user_id' ], partition_by_hash_buckets = 2 ); insert into kudu . default . users values ( 1 , cast ( 'wgzhao' as varchar ), 18 , cast ( 18888 . 88 as double ), cast ( 123 . 282424 as decimal ( 18 , 6 )), cast ( 23 . 123456 as decimal ( 18 , 6 )), cast ( 1 . 12345678912345678912 as decimal ( 21 , 20 )), timestamp '2021-01-10 14:40:41' ), ( 2 , cast ( 'anglina' as varchar ), 16 , cast ( 23456 . 12 as double ), cast ( 33 . 192123 as decimal ( 18 , 6 )), cast ( 56 . 654321 as decimal ( 18 , 6 )), cast ( 1 . 12345678912345678912 as decimal ( 21 , 20 )), timestamp '2021-01-10 03:40:41' ); -- ONLY insert primary key value insert into kudu . default . users ( user_id ) values ( 3 ); \u914d\u7f6e \u00b6 \u4ee5\u4e0b\u662f\u8bfb\u53d6kudu\u8868\u5e76\u8f93\u51fa\u5230\u7ec8\u7aef\u7684\u914d\u7f6e job/kudu2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 3 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"kudureader\" , \"parameter\" : { \"masterAddress\" : \"localhost:7051,localhost:7151,localhost:7251\" , \"table\" : \"users\" , \"splitPk\" : \"user_id\" , \"lowerBound\" : 1 , \"upperBound\" : 100 , \"readTimeout\" : 5 , \"scanTimeout\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u628a\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/kudu2stream.json \u6267\u884c \u00b6 \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u91c7\u96c6 bin/addax.sh job/kudu2stream.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 masterAddress \u5fc5\u987b string \u65e0 Kudu Master\u96c6\u7fa4RPC\u5730\u5740,\u591a\u4e2a\u5730\u5740\u7528\u9017\u53f7(,)\u5206\u9694 table \u5fc5\u987b string \u65e0 kudu \u8868\u540d splitPk \u5426 string \u65e0 \u5e76\u884c\u8bfb\u53d6\u6570\u636e\u5206\u7247\u5b57\u6bb5 lowerBound \u5426 string \u65e0 \u5e76\u884c\u8bfb\u53d6\u6570\u636e\u5206\u7247\u8303\u56f4\u4e0b\u754c upperBound \u5426 string \u65e0 \u5e76\u884c\u8bfb\u53d6\u6570\u636e\u5206\u7247\u8303\u56f4\u4e0a\u754c readTimeout \u5426 int 10 \u8bfb\u53d6\u6570\u636e\u8d85\u65f6(\u79d2) scanTimeout \u5426 int 20 \u6570\u636e\u626b\u63cf\u8bf7\u6c42\u8d85\u65f6(\u79d2) column \u5426 list \u65e0 \u6307\u5b9a\u8981\u83b7\u53d6\u7684\u5b57\u6bb5\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u9017\u53f7\u5206\u9694\uff0c\u6bd4\u5982 \"column\":[\"user_id\",\"user_name\",\"age\"] where \u5426 list \u65e0 \u6307\u5b9a\u5176\u4ed6\u8fc7\u6ee4\u6761\u4ef6\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 where \u00b6 where \u7528\u6765\u5b9a\u5236\u66f4\u591a\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u4ed6\u662f\u4e00\u4e2a\u6570\u7ec4\u7c7b\u578b\uff0c\u6570\u7ec4\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u8fc7\u6ee4\u6761\u4ef6\uff0c\u6bd4\u5982 { \"where\" : [ \"age > 1\" , \"user_name = 'wgzhao'\" ] } \u4e0a\u8ff0\u5b9a\u4e49\u4e86\u4e24\u4e2a\u8fc7\u6ee4\u6761\u4ef6\uff0c\u6bcf\u4e2a\u8fc7\u6ee4\u6761\u4ef6\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff0c\u683c\u5f0f\u4e3a column operator value column : \u8981\u8fc7\u6ee4\u7684\u5b57\u6bb5 operator : \u6bd4\u8f83\u7b26\u53f7\uff0c\u5f53\u524d\u4ec5\u652f\u6301 = , > , '>=', < , <= , \u5176\u4ed6\u64cd\u4f5c\u7b26\u53f7\u5f53\u524d\u8fd8\u4e0d\u652f\u6301 value : \u6bd4\u8f83\u503c\uff0c\u5982\u679c\u662f\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u52a0\u4e0a\u5355\u5f15\u53f7( ' ), \u4e0d\u52a0\u53ef\u4ee5\uff0c\u56e0\u4e3a\u5b9e\u9645\u7c7b\u578b\u4f1a\u4ece\u6570\u636e\u5e93\u8868\u4e2d\u83b7\u53d6\u5bf9\u5e94\u5b57\u6bb5( column )\u7684\u7c7b\u578b\uff0c\u4f46\u5982\u679c\u503c\u542b\u6709\u7a7a\u683c\uff0c\u5219\u4e00\u5b9a\u8981\u52a0\u4e0a\u5355\u5f15\u53f7 \u8fd9\u91cc\u8fd8\u6709\u5176\u4ed6\u4e00\u4e9b\u9650\u5b9a\uff0c\u5728\u4f7f\u7528\u65f6\uff0c\u8981\u7279\u522b\u6ce8\u610f\uff1a \u4e0a\u8ff0\u4e09\u4e2a\u90e8\u5206\u4e4b\u95f4\u81f3\u5c11\u6709\u4e00\u4e2a\u7a7a\u683c age>1 , age >1 \u8fd9\u79cd\u5747\u65e0\u6548\uff0c\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec\u5b9e\u9645\u4e0a\u662f\u628a SQL \u98ce\u683c\u7684\u8fc7\u6ee4\u63d0\u4ea4\u8f6c\u6362\u4e3a Kudu \u7684 KuduPredicate \u7c7b \u591a\u4e2a\u8fc7\u6ee4\u6761\u4ef6\u4e4b\u95f4\u7684\u903b\u8f91\u4e0e\u5173\u7cfb( AND )\uff0c\u6682\u4e0d\u652f\u6301\u903b\u8f91\u6216( OR )\u5173\u7cfb \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b Kudu \u6570\u636e\u7c7b\u578b Long byte, short, int, long Double float, double, decimal String string Date timestamp Boolean boolean Bytes binary","title":"Kudu Reader"},{"location":"reader/kudureader/#kudu-reader","text":"KuduReader \u63d2\u4ef6\u5229\u7528 Kudu \u7684java\u5ba2\u6237\u7aefKuduClient\u8fdb\u884cKudu\u7684\u8bfb\u64cd\u4f5c\u3002","title":"Kudu Reader"},{"location":"reader/kudureader/#_1","text":"\u6211\u4eec\u901a\u8fc7 Trino \u7684 kudu connector \u8fde\u63a5 kudu \u670d\u52a1\uff0c\u7136\u540e\u8fdb\u884c\u8868\u521b\u5efa\u4ee5\u53ca\u6570\u636e\u63d2\u5165","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"reader/kudureader/#_2","text":"CREATE TABLE kudu . default . users ( user_id int WITH ( primary_key = true ), user_name varchar with ( nullable = true ), age int with ( nullable = true ), salary double with ( nullable = true ), longtitue decimal ( 18 , 6 ) with ( nullable = true ), latitude decimal ( 18 , 6 ) with ( nullable = true ), p decimal ( 21 , 20 ) with ( nullable = true ), mtime timestamp with ( nullable = true ) ) WITH ( partition_by_hash_columns = ARRAY [ 'user_id' ], partition_by_hash_buckets = 2 ); insert into kudu . default . users values ( 1 , cast ( 'wgzhao' as varchar ), 18 , cast ( 18888 . 88 as double ), cast ( 123 . 282424 as decimal ( 18 , 6 )), cast ( 23 . 123456 as decimal ( 18 , 6 )), cast ( 1 . 12345678912345678912 as decimal ( 21 , 20 )), timestamp '2021-01-10 14:40:41' ), ( 2 , cast ( 'anglina' as varchar ), 16 , cast ( 23456 . 12 as double ), cast ( 33 . 192123 as decimal ( 18 , 6 )), cast ( 56 . 654321 as decimal ( 18 , 6 )), cast ( 1 . 12345678912345678912 as decimal ( 21 , 20 )), timestamp '2021-01-10 03:40:41' ); -- ONLY insert primary key value insert into kudu . default . users ( user_id ) values ( 3 );","title":"\u5efa\u8868\u8bed\u53e5\u4ee5\u53ca\u6570\u636e\u63d2\u5165\u8bed\u53e5"},{"location":"reader/kudureader/#_3","text":"\u4ee5\u4e0b\u662f\u8bfb\u53d6kudu\u8868\u5e76\u8f93\u51fa\u5230\u7ec8\u7aef\u7684\u914d\u7f6e job/kudu2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 3 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"kudureader\" , \"parameter\" : { \"masterAddress\" : \"localhost:7051,localhost:7151,localhost:7251\" , \"table\" : \"users\" , \"splitPk\" : \"user_id\" , \"lowerBound\" : 1 , \"upperBound\" : 100 , \"readTimeout\" : 5 , \"scanTimeout\" : 10 } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u628a\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/kudu2stream.json","title":"\u914d\u7f6e"},{"location":"reader/kudureader/#_4","text":"\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u91c7\u96c6 bin/addax.sh job/kudu2stream.json","title":"\u6267\u884c"},{"location":"reader/kudureader/#_5","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 masterAddress \u5fc5\u987b string \u65e0 Kudu Master\u96c6\u7fa4RPC\u5730\u5740,\u591a\u4e2a\u5730\u5740\u7528\u9017\u53f7(,)\u5206\u9694 table \u5fc5\u987b string \u65e0 kudu \u8868\u540d splitPk \u5426 string \u65e0 \u5e76\u884c\u8bfb\u53d6\u6570\u636e\u5206\u7247\u5b57\u6bb5 lowerBound \u5426 string \u65e0 \u5e76\u884c\u8bfb\u53d6\u6570\u636e\u5206\u7247\u8303\u56f4\u4e0b\u754c upperBound \u5426 string \u65e0 \u5e76\u884c\u8bfb\u53d6\u6570\u636e\u5206\u7247\u8303\u56f4\u4e0a\u754c readTimeout \u5426 int 10 \u8bfb\u53d6\u6570\u636e\u8d85\u65f6(\u79d2) scanTimeout \u5426 int 20 \u6570\u636e\u626b\u63cf\u8bf7\u6c42\u8d85\u65f6(\u79d2) column \u5426 list \u65e0 \u6307\u5b9a\u8981\u83b7\u53d6\u7684\u5b57\u6bb5\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u9017\u53f7\u5206\u9694\uff0c\u6bd4\u5982 \"column\":[\"user_id\",\"user_name\",\"age\"] where \u5426 list \u65e0 \u6307\u5b9a\u5176\u4ed6\u8fc7\u6ee4\u6761\u4ef6\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/kudureader/#where","text":"where \u7528\u6765\u5b9a\u5236\u66f4\u591a\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u4ed6\u662f\u4e00\u4e2a\u6570\u7ec4\u7c7b\u578b\uff0c\u6570\u7ec4\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u8fc7\u6ee4\u6761\u4ef6\uff0c\u6bd4\u5982 { \"where\" : [ \"age > 1\" , \"user_name = 'wgzhao'\" ] } \u4e0a\u8ff0\u5b9a\u4e49\u4e86\u4e24\u4e2a\u8fc7\u6ee4\u6761\u4ef6\uff0c\u6bcf\u4e2a\u8fc7\u6ee4\u6761\u4ef6\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff0c\u683c\u5f0f\u4e3a column operator value column : \u8981\u8fc7\u6ee4\u7684\u5b57\u6bb5 operator : \u6bd4\u8f83\u7b26\u53f7\uff0c\u5f53\u524d\u4ec5\u652f\u6301 = , > , '>=', < , <= , \u5176\u4ed6\u64cd\u4f5c\u7b26\u53f7\u5f53\u524d\u8fd8\u4e0d\u652f\u6301 value : \u6bd4\u8f83\u503c\uff0c\u5982\u679c\u662f\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u52a0\u4e0a\u5355\u5f15\u53f7( ' ), \u4e0d\u52a0\u53ef\u4ee5\uff0c\u56e0\u4e3a\u5b9e\u9645\u7c7b\u578b\u4f1a\u4ece\u6570\u636e\u5e93\u8868\u4e2d\u83b7\u53d6\u5bf9\u5e94\u5b57\u6bb5( column )\u7684\u7c7b\u578b\uff0c\u4f46\u5982\u679c\u503c\u542b\u6709\u7a7a\u683c\uff0c\u5219\u4e00\u5b9a\u8981\u52a0\u4e0a\u5355\u5f15\u53f7 \u8fd9\u91cc\u8fd8\u6709\u5176\u4ed6\u4e00\u4e9b\u9650\u5b9a\uff0c\u5728\u4f7f\u7528\u65f6\uff0c\u8981\u7279\u522b\u6ce8\u610f\uff1a \u4e0a\u8ff0\u4e09\u4e2a\u90e8\u5206\u4e4b\u95f4\u81f3\u5c11\u6709\u4e00\u4e2a\u7a7a\u683c age>1 , age >1 \u8fd9\u79cd\u5747\u65e0\u6548\uff0c\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec\u5b9e\u9645\u4e0a\u662f\u628a SQL \u98ce\u683c\u7684\u8fc7\u6ee4\u63d0\u4ea4\u8f6c\u6362\u4e3a Kudu \u7684 KuduPredicate \u7c7b \u591a\u4e2a\u8fc7\u6ee4\u6761\u4ef6\u4e4b\u95f4\u7684\u903b\u8f91\u4e0e\u5173\u7cfb( AND )\uff0c\u6682\u4e0d\u652f\u6301\u903b\u8f91\u6216( OR )\u5173\u7cfb","title":"where"},{"location":"reader/kudureader/#_6","text":"Addax \u5185\u90e8\u7c7b\u578b Kudu \u6570\u636e\u7c7b\u578b Long byte, short, int, long Double float, double, decimal String string Date timestamp Boolean boolean Bytes binary","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/mongodbreader/","text":"MongoDB Reader \u00b6 MongoDBReader \u63d2\u4ef6\u5229\u7528 MongoDB \u7684java\u5ba2\u6237\u7aefMongoClient\u8fdb\u884cMongoDB\u7684\u8bfb\u64cd\u4f5c\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 \u8be5\u793a\u4f8b\u4eceMongoDB\u4e2d\u8bfb\u4e00\u5f20\u8868\u5e76\u6253\u5370\u5230\u7ec8\u7aef job/mongo2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"mongodbreader\" , \"parameter\" : { \"connection\" : [ { \"address\" : [ \"127.0.0.1:27017\" ], \"database\" : \"tag_per_data\" , \"collection\" : \"tag_data\" , \"authDb\" : \"admin\" } ], \"username\" : \"\" , \"password\" : \"\" , \"column\" : [ \"unique_id\" , \"sid\" , \"user_id\" , \"auction_id\" , \"content_type\" , \"pool_type\" , \"frontcat_id\" , \"catagoryid\" , \"gmt_create\" , \"taglist\" , \"property\" , \"scorea\" , \"scoreb\" , \"scorec\" ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 address \u662f list \u65e0 MongoDB \u7684\u6570\u636e\u5730\u5740\u4fe1\u606f\uff0c\u56e0\u4e3a MongoDB \u53ef\u80fd\u662f\u4e2a\u96c6\u7fa4\uff0c\u5219 IP \u53ca\u7aef\u53e3\u4fe1\u606f\u9700\u8981\u4ee5 JSON \u6570\u7ec4\u7684\u5f62\u5f0f\u7ed9\u51fa username \u5426 string \u65e0 MongoDB \u7528\u6237\u540d password \u5426 string \u65e0 MongoDB \u5bc6\u7801 database \u662f string \u65e0 MongoDB \u6570\u636e\u5e93 collection \u662f string \u65e0 MongoDB \u7684\u96c6\u5408\u540d column \u662f list \u65e0 MongoDB \u7684\u6587\u6863\u5217\u540d\uff0c\u4e0d\u652f\u6301 [\"*\"] \u83b7\u53d6\u6240\u6709\u5217\u65b9\u5f0f query \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u67e5\u8be2\u6761\u4ef6 fetchSize \u5426 int 2048 \u6279\u91cf\u83b7\u53d6\u7684\u8bb0\u5f55\u6570 collection \u00b6 \u8fd9\u91cc\u7684 collection \u76ee\u524d\u53ea\u652f\u6301\u5355\u4e00 collection\uff0c\u56e0\u6b64\u8bbe\u7f6e\u7c7b\u578b\u4e3a\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u5176\u4ed6\u63d2\u4ef6\u5e38\u89c1\u7684\u6570\u7ec4\u7c7b\u578b\uff0c\u8fd9\u4e00\u70b9\u5c24\u4e3a\u6ce8\u610f\u3002 column \u00b6 column \u7528\u6765\u6307\u5b9a\u9700\u8981\u8bfb\u53d6\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u8fd9\u91cc\u6211\u4eec\u505a\u4e86\u5b57\u6bb5\u540d\u79f0\u7684\u7ec4\u6210\u4e24\u4e2a\u5047\u5b9a\uff1a \u4e0d\u53ef\u80fd\u7528\u5355\u5f15\u53f7\u5f00\u5934( ' ) \u4e0d\u53ef\u80fd\u5168\u90e8\u7531\u6570\u5b57\u548c\u70b9( . ) \u7ec4\u6210 \u57fa\u4e8e\u4ee5\u4e0a\u5047\u5b9a\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u7b80\u5316 column \u914d\u7f6e\u7684\u540c\u65f6\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e9b\u5e38\u91cf\u4f5c\u4e3a\u8865\u5145\u5b57\u6bb5\uff0c\u6bd4\u5982\u4e00\u822c\u91c7\u96c6\u4e00\u5f20\u8868\uff0c\u6211\u4eec\u9700\u8981\u589e\u52a0\u91c7\u96c6\u65f6\u95f4\uff0c\u91c7\u96c6\u6e90\u7b49\u5e38\u91cf\uff0c\u90a3\u4e48\u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e { \"column\" : [ \"col1\" , \"col2\" , \"col3\" , \"'source_mongodb'\" , \"20211026\" , \"123.12\" ] } \u4e0a\u8ff0\u914d\u7f6e\u7684\u540e\u4e09\u4e2a\u5b57\u6bb5\u5c31\u662f\u5e38\u91cf\uff0c\u5206\u522b\u5f53\u4f5c\u5b57\u7b26\u7c7b\u578b\uff0c\u6574\u578b\u548c\u6d6e\u70b9\u578b\u5904\u7406\u3002 query \u00b6 query \u662f\u53ea\u7b26\u5408 MongoDB \u67e5\u8be2\u683c\u5f0f\u7684 BSON \u5b57\u7b26\u4e32\uff0c\u6bd4\u5982\uff1a { \"query\" : \"{amount: {$gt: 140900}, oc_date: {$gt: 20190110}}\" } \u4e0a\u8ff0\u67e5\u8be2\u7c7b\u4f3c SQL \u4e2d\u7684 where amount > 140900 and oc_date > 20190110 \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b MongoDB \u6570\u636e\u7c7b\u578b Long int, Long Double double String string, array Date date Boolean boolean Bytes bytes","title":"MongoDB Reader"},{"location":"reader/mongodbreader/#mongodb-reader","text":"MongoDBReader \u63d2\u4ef6\u5229\u7528 MongoDB \u7684java\u5ba2\u6237\u7aefMongoClient\u8fdb\u884cMongoDB\u7684\u8bfb\u64cd\u4f5c\u3002","title":"MongoDB Reader"},{"location":"reader/mongodbreader/#_1","text":"\u8be5\u793a\u4f8b\u4eceMongoDB\u4e2d\u8bfb\u4e00\u5f20\u8868\u5e76\u6253\u5370\u5230\u7ec8\u7aef job/mongo2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"mongodbreader\" , \"parameter\" : { \"connection\" : [ { \"address\" : [ \"127.0.0.1:27017\" ], \"database\" : \"tag_per_data\" , \"collection\" : \"tag_data\" , \"authDb\" : \"admin\" } ], \"username\" : \"\" , \"password\" : \"\" , \"column\" : [ \"unique_id\" , \"sid\" , \"user_id\" , \"auction_id\" , \"content_type\" , \"pool_type\" , \"frontcat_id\" , \"catagoryid\" , \"gmt_create\" , \"taglist\" , \"property\" , \"scorea\" , \"scoreb\" , \"scorec\" ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : \"true\" } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"reader/mongodbreader/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 address \u662f list \u65e0 MongoDB \u7684\u6570\u636e\u5730\u5740\u4fe1\u606f\uff0c\u56e0\u4e3a MongoDB \u53ef\u80fd\u662f\u4e2a\u96c6\u7fa4\uff0c\u5219 IP \u53ca\u7aef\u53e3\u4fe1\u606f\u9700\u8981\u4ee5 JSON \u6570\u7ec4\u7684\u5f62\u5f0f\u7ed9\u51fa username \u5426 string \u65e0 MongoDB \u7528\u6237\u540d password \u5426 string \u65e0 MongoDB \u5bc6\u7801 database \u662f string \u65e0 MongoDB \u6570\u636e\u5e93 collection \u662f string \u65e0 MongoDB \u7684\u96c6\u5408\u540d column \u662f list \u65e0 MongoDB \u7684\u6587\u6863\u5217\u540d\uff0c\u4e0d\u652f\u6301 [\"*\"] \u83b7\u53d6\u6240\u6709\u5217\u65b9\u5f0f query \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u67e5\u8be2\u6761\u4ef6 fetchSize \u5426 int 2048 \u6279\u91cf\u83b7\u53d6\u7684\u8bb0\u5f55\u6570","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/mongodbreader/#collection","text":"\u8fd9\u91cc\u7684 collection \u76ee\u524d\u53ea\u652f\u6301\u5355\u4e00 collection\uff0c\u56e0\u6b64\u8bbe\u7f6e\u7c7b\u578b\u4e3a\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u5176\u4ed6\u63d2\u4ef6\u5e38\u89c1\u7684\u6570\u7ec4\u7c7b\u578b\uff0c\u8fd9\u4e00\u70b9\u5c24\u4e3a\u6ce8\u610f\u3002","title":"collection"},{"location":"reader/mongodbreader/#column","text":"column \u7528\u6765\u6307\u5b9a\u9700\u8981\u8bfb\u53d6\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u8fd9\u91cc\u6211\u4eec\u505a\u4e86\u5b57\u6bb5\u540d\u79f0\u7684\u7ec4\u6210\u4e24\u4e2a\u5047\u5b9a\uff1a \u4e0d\u53ef\u80fd\u7528\u5355\u5f15\u53f7\u5f00\u5934( ' ) \u4e0d\u53ef\u80fd\u5168\u90e8\u7531\u6570\u5b57\u548c\u70b9( . ) \u7ec4\u6210 \u57fa\u4e8e\u4ee5\u4e0a\u5047\u5b9a\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u7b80\u5316 column \u914d\u7f6e\u7684\u540c\u65f6\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e9b\u5e38\u91cf\u4f5c\u4e3a\u8865\u5145\u5b57\u6bb5\uff0c\u6bd4\u5982\u4e00\u822c\u91c7\u96c6\u4e00\u5f20\u8868\uff0c\u6211\u4eec\u9700\u8981\u589e\u52a0\u91c7\u96c6\u65f6\u95f4\uff0c\u91c7\u96c6\u6e90\u7b49\u5e38\u91cf\uff0c\u90a3\u4e48\u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e { \"column\" : [ \"col1\" , \"col2\" , \"col3\" , \"'source_mongodb'\" , \"20211026\" , \"123.12\" ] } \u4e0a\u8ff0\u914d\u7f6e\u7684\u540e\u4e09\u4e2a\u5b57\u6bb5\u5c31\u662f\u5e38\u91cf\uff0c\u5206\u522b\u5f53\u4f5c\u5b57\u7b26\u7c7b\u578b\uff0c\u6574\u578b\u548c\u6d6e\u70b9\u578b\u5904\u7406\u3002","title":"column"},{"location":"reader/mongodbreader/#query","text":"query \u662f\u53ea\u7b26\u5408 MongoDB \u67e5\u8be2\u683c\u5f0f\u7684 BSON \u5b57\u7b26\u4e32\uff0c\u6bd4\u5982\uff1a { \"query\" : \"{amount: {$gt: 140900}, oc_date: {$gt: 20190110}}\" } \u4e0a\u8ff0\u67e5\u8be2\u7c7b\u4f3c SQL \u4e2d\u7684 where amount > 140900 and oc_date > 20190110","title":"query"},{"location":"reader/mongodbreader/#_3","text":"Addax \u5185\u90e8\u7c7b\u578b MongoDB \u6570\u636e\u7c7b\u578b Long int, Long Double double String string, array Date date Boolean boolean Bytes bytes","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/mysqlreader/","text":"MySQL Reader \u00b6 MysqlReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4eceMysql\u8bfb\u53d6\u6570\u636e \u793a\u4f8b \u00b6 \u6211\u4eec\u5728 MySQL \u7684 test \u5e93\u4e0a\u521b\u5efa\u5982\u4e0b\u8868\uff0c\u5e76\u63d2\u5165\u4e00\u6761\u8bb0\u5f55 CREATE TABLE addax_reader ( c_bigint bigint , c_varchar varchar ( 100 ), c_timestamp timestamp , c_text text , c_decimal decimal ( 8 , 3 ), c_mediumtext mediumtext , c_longtext longtext , c_int int , c_time time , c_datetime datetime , c_enum enum ( 'one' , 'two' , 'three' ), c_float float , c_smallint smallint , c_bit bit , c_double double , c_blob blob , c_char char ( 5 ), c_varbinary varbinary ( 100 ), c_tinyint tinyint , c_json json , c_set SET ( 'a' , 'b' , 'c' , 'd' ), c_binary binary , c_longblob longblob , c_mediumblob mediumblob ); INSERT INTO addax_reader VALUES ( 2 E18 , 'a varchar data' , '2021-12-12 12:12:12' , 'a long text' , 12345 . 122 , 'a medium text' , 'a long text' , 2 ^ 32 - 1 , '12:13:14' , '2021-12-12 12:13:14' , 'one' , 17 . 191 , 126 , 0 , 1114 . 1114 , 'blob' , 'a123b' , 'a var binary content' , 126 , '{\"k1\":\"val1\",\"k2\":\"val2\"}' , 'b' , binary ( 1 ), x '89504E470D0A1A0A0000000D494844520000001000000010080200000090916836000000017352474200' , x '89504E470D0A1A0A0000000D' ); \u4e0b\u9762\u7684\u914d\u7f6e\u662f\u8bfb\u53d6\u8be5\u8868\u5230\u7ec8\u7aef\u7684\u4f5c\u4e1a: job/mysql2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 3 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"mysqlreader\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"addax_reader\" ], \"jdbcUrl\" : [ \"jdbc:mysql://127.0.0.1:3306/test\" ], \"driver\" : \"com.mysql.jdbc.Driver\" } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/mysql2stream.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/mysql2stream.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f driver \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0 rdbmreader splitPk \u5426 string \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmreader autoPk \u5426 bool false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 string \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 list \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 driver \u00b6 \u5f53\u524d Addax \u91c7\u7528\u7684 MySQL JDBC \u9a71\u52a8\u4e3a 8.0 \u4ee5\u4e0a\u7248\u672c\uff0c\u9a71\u52a8\u7c7b\u540d\u4f7f\u7528\u7684 com.mysql.cj.jdbc.Driver \uff0c\u800c\u4e0d\u662f com.mysql.jdbc.Driver \u3002 \u5982\u679c\u4f60\u9700\u8981\u91c7\u96c6\u7684 MySQL \u670d\u52a1\u4f4e\u4e8e 5.6 \uff0c\u9700\u8981\u4f7f\u7528\u5230 Connector/J 5.1 \u9a71\u52a8\uff0c\u5219\u53ef\u4ee5\u91c7\u53d6\u4e0b\u9762\u7684\u6b65\u9aa4\uff1a \u66ff\u6362\u63d2\u4ef6\u5185\u7f6e\u7684\u9a71\u52a8 rm -f plugin/reader/mysqlreader/lib/mysql-connector-java-*.jar \u62f7\u8d1d\u8001\u7684\u9a71\u52a8\u5230\u63d2\u4ef6\u76ee\u5f55 cp mysql-connector-java-5.1.48.jar plugin/reader/mysqlreader/lib/ \u6307\u5b9a\u9a71\u52a8\u7c7b\u540d\u79f0 \u5728\u4f60\u7684 json \u6587\u4ef6\u7c7b\uff0c\u914d\u7f6e \"driver\": \"com.mysql.jdbc.Driver\" \u7c7b\u578b\u8f6c\u6362 \u00b6 \u76ee\u524dMysqlReader\u652f\u6301\u5927\u90e8\u5206Mysql\u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51faMysqlReader\u9488\u5bf9Mysql\u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b MySQL \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint, mediumint, int, bigint Double float, double, decimal String varchar, char, tinytext, text, mediumtext, longtext, year Date date, datetime, timestamp, time Boolean bit, bool Bytes tinyblob, mediumblob, blob, longblob, varbinary \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301 tinyint(1) Addax\u89c6\u4f5c\u4e3a\u6574\u5f62 year Addax\u89c6\u4f5c\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b bit Addax\u5c5e\u4e8e\u672a\u5b9a\u4e49\u884c\u4e3a \u6570\u636e\u5e93\u7f16\u7801\u95ee\u9898 \u00b6 Mysql\u672c\u8eab\u7684\u7f16\u7801\u8bbe\u7f6e\u975e\u5e38\u7075\u6d3b\uff0c\u5305\u62ec\u6307\u5b9a\u7f16\u7801\u5230\u5e93\u3001\u8868\u3001\u5b57\u6bb5\u7ea7\u522b\uff0c\u751a\u81f3\u53ef\u4ee5\u5747\u4e0d\u540c\u7f16\u7801\u3002\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u4e3a\u5b57\u6bb5\u3001\u8868\u3001\u5e93\u3001\u5b9e\u4f8b\u3002\u6211\u4eec\u4e0d\u63a8\u8350\u6570\u636e\u5e93\u7528\u6237\u8bbe\u7f6e\u5982\u6b64\u6df7\u4e71\u7684\u7f16\u7801\uff0c\u6700\u597d\u5728\u5e93\u7ea7\u522b\u5c31\u7edf\u4e00\u5230UTF-8\u3002 MysqlReader\u5e95\u5c42\u4f7f\u7528JDBC\u8fdb\u884c\u6570\u636e\u62bd\u53d6\uff0cJDBC\u5929\u7136\u9002\u914d\u5404\u7c7b\u7f16\u7801\uff0c\u5e76\u5728\u5e95\u5c42\u8fdb\u884c\u4e86\u7f16\u7801\u8f6c\u6362\u3002\u56e0\u6b64MysqlReader\u4e0d\u9700\u7528\u6237\u6307\u5b9a\u7f16\u7801\uff0c\u53ef\u4ee5\u81ea\u52a8\u83b7\u53d6\u7f16\u7801\u5e76\u8f6c\u7801\u3002 \u5bf9\u4e8eMysql\u5e95\u5c42\u5199\u5165\u7f16\u7801\u548c\u5176\u8bbe\u5b9a\u7684\u7f16\u7801\u4e0d\u4e00\u81f4\u7684\u6df7\u4e71\u60c5\u51b5\uff0cMysqlReader\u5bf9\u6b64\u65e0\u6cd5\u8bc6\u522b\uff0c\u5bf9\u6b64\u4e5f\u65e0\u6cd5\u63d0\u4f9b\u89e3\u51b3\u65b9\u6848\uff0c\u5bf9\u4e8e\u8fd9\u7c7b\u60c5\u51b5\uff0c \u5bfc\u51fa\u6709\u53ef\u80fd\u4e3a\u4e71\u7801 \u3002","title":"MySQL Reader"},{"location":"reader/mysqlreader/#mysql-reader","text":"MysqlReader \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4eceMysql\u8bfb\u53d6\u6570\u636e","title":"MySQL Reader"},{"location":"reader/mysqlreader/#_1","text":"\u6211\u4eec\u5728 MySQL \u7684 test \u5e93\u4e0a\u521b\u5efa\u5982\u4e0b\u8868\uff0c\u5e76\u63d2\u5165\u4e00\u6761\u8bb0\u5f55 CREATE TABLE addax_reader ( c_bigint bigint , c_varchar varchar ( 100 ), c_timestamp timestamp , c_text text , c_decimal decimal ( 8 , 3 ), c_mediumtext mediumtext , c_longtext longtext , c_int int , c_time time , c_datetime datetime , c_enum enum ( 'one' , 'two' , 'three' ), c_float float , c_smallint smallint , c_bit bit , c_double double , c_blob blob , c_char char ( 5 ), c_varbinary varbinary ( 100 ), c_tinyint tinyint , c_json json , c_set SET ( 'a' , 'b' , 'c' , 'd' ), c_binary binary , c_longblob longblob , c_mediumblob mediumblob ); INSERT INTO addax_reader VALUES ( 2 E18 , 'a varchar data' , '2021-12-12 12:12:12' , 'a long text' , 12345 . 122 , 'a medium text' , 'a long text' , 2 ^ 32 - 1 , '12:13:14' , '2021-12-12 12:13:14' , 'one' , 17 . 191 , 126 , 0 , 1114 . 1114 , 'blob' , 'a123b' , 'a var binary content' , 126 , '{\"k1\":\"val1\",\"k2\":\"val2\"}' , 'b' , binary ( 1 ), x '89504E470D0A1A0A0000000D494844520000001000000010080200000090916836000000017352474200' , x '89504E470D0A1A0A0000000D' ); \u4e0b\u9762\u7684\u914d\u7f6e\u662f\u8bfb\u53d6\u8be5\u8868\u5230\u7ec8\u7aef\u7684\u4f5c\u4e1a: job/mysql2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 3 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"mysqlreader\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"addax_reader\" ], \"jdbcUrl\" : [ \"jdbc:mysql://127.0.0.1:3306/test\" ], \"driver\" : \"com.mysql.jdbc.Driver\" } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/mysql2stream.json","title":"\u793a\u4f8b"},{"location":"reader/mysqlreader/#_2","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/mysql2stream.json","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"reader/mysqlreader/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f driver \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0 rdbmreader splitPk \u5426 string \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmreader autoPk \u5426 bool false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 string \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 list \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/mysqlreader/#driver","text":"\u5f53\u524d Addax \u91c7\u7528\u7684 MySQL JDBC \u9a71\u52a8\u4e3a 8.0 \u4ee5\u4e0a\u7248\u672c\uff0c\u9a71\u52a8\u7c7b\u540d\u4f7f\u7528\u7684 com.mysql.cj.jdbc.Driver \uff0c\u800c\u4e0d\u662f com.mysql.jdbc.Driver \u3002 \u5982\u679c\u4f60\u9700\u8981\u91c7\u96c6\u7684 MySQL \u670d\u52a1\u4f4e\u4e8e 5.6 \uff0c\u9700\u8981\u4f7f\u7528\u5230 Connector/J 5.1 \u9a71\u52a8\uff0c\u5219\u53ef\u4ee5\u91c7\u53d6\u4e0b\u9762\u7684\u6b65\u9aa4\uff1a \u66ff\u6362\u63d2\u4ef6\u5185\u7f6e\u7684\u9a71\u52a8 rm -f plugin/reader/mysqlreader/lib/mysql-connector-java-*.jar \u62f7\u8d1d\u8001\u7684\u9a71\u52a8\u5230\u63d2\u4ef6\u76ee\u5f55 cp mysql-connector-java-5.1.48.jar plugin/reader/mysqlreader/lib/ \u6307\u5b9a\u9a71\u52a8\u7c7b\u540d\u79f0 \u5728\u4f60\u7684 json \u6587\u4ef6\u7c7b\uff0c\u914d\u7f6e \"driver\": \"com.mysql.jdbc.Driver\"","title":"driver"},{"location":"reader/mysqlreader/#_4","text":"\u76ee\u524dMysqlReader\u652f\u6301\u5927\u90e8\u5206Mysql\u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51faMysqlReader\u9488\u5bf9Mysql\u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b MySQL \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint, mediumint, int, bigint Double float, double, decimal String varchar, char, tinytext, text, mediumtext, longtext, year Date date, datetime, timestamp, time Boolean bit, bool Bytes tinyblob, mediumblob, blob, longblob, varbinary \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301 tinyint(1) Addax\u89c6\u4f5c\u4e3a\u6574\u5f62 year Addax\u89c6\u4f5c\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b bit Addax\u5c5e\u4e8e\u672a\u5b9a\u4e49\u884c\u4e3a","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/mysqlreader/#_5","text":"Mysql\u672c\u8eab\u7684\u7f16\u7801\u8bbe\u7f6e\u975e\u5e38\u7075\u6d3b\uff0c\u5305\u62ec\u6307\u5b9a\u7f16\u7801\u5230\u5e93\u3001\u8868\u3001\u5b57\u6bb5\u7ea7\u522b\uff0c\u751a\u81f3\u53ef\u4ee5\u5747\u4e0d\u540c\u7f16\u7801\u3002\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u4e3a\u5b57\u6bb5\u3001\u8868\u3001\u5e93\u3001\u5b9e\u4f8b\u3002\u6211\u4eec\u4e0d\u63a8\u8350\u6570\u636e\u5e93\u7528\u6237\u8bbe\u7f6e\u5982\u6b64\u6df7\u4e71\u7684\u7f16\u7801\uff0c\u6700\u597d\u5728\u5e93\u7ea7\u522b\u5c31\u7edf\u4e00\u5230UTF-8\u3002 MysqlReader\u5e95\u5c42\u4f7f\u7528JDBC\u8fdb\u884c\u6570\u636e\u62bd\u53d6\uff0cJDBC\u5929\u7136\u9002\u914d\u5404\u7c7b\u7f16\u7801\uff0c\u5e76\u5728\u5e95\u5c42\u8fdb\u884c\u4e86\u7f16\u7801\u8f6c\u6362\u3002\u56e0\u6b64MysqlReader\u4e0d\u9700\u7528\u6237\u6307\u5b9a\u7f16\u7801\uff0c\u53ef\u4ee5\u81ea\u52a8\u83b7\u53d6\u7f16\u7801\u5e76\u8f6c\u7801\u3002 \u5bf9\u4e8eMysql\u5e95\u5c42\u5199\u5165\u7f16\u7801\u548c\u5176\u8bbe\u5b9a\u7684\u7f16\u7801\u4e0d\u4e00\u81f4\u7684\u6df7\u4e71\u60c5\u51b5\uff0cMysqlReader\u5bf9\u6b64\u65e0\u6cd5\u8bc6\u522b\uff0c\u5bf9\u6b64\u4e5f\u65e0\u6cd5\u63d0\u4f9b\u89e3\u51b3\u65b9\u6848\uff0c\u5bf9\u4e8e\u8fd9\u7c7b\u60c5\u51b5\uff0c \u5bfc\u51fa\u6709\u53ef\u80fd\u4e3a\u4e71\u7801 \u3002","title":"\u6570\u636e\u5e93\u7f16\u7801\u95ee\u9898"},{"location":"reader/oraclereader/","text":"Oracle Reader \u00b6 OracleReader \u63d2\u4ef6\u7528\u4e8e\u4eceOracle\u8bfb\u53d6\u6570\u636e \u914d\u7f6e\u6837\u4f8b \u00b6 \u914d\u7f6e\u4e00\u4e2a\u4eceOracle\u6570\u636e\u5e93\u540c\u6b65\u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a: job/oracle2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : 1048576 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"oraclereader\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"id\" , \"name\" ], \"splitPk\" : \"db_id\" , \"connection\" : [ { \"table\" : [ \"table\" ], \"jdbcUrl\" : [ \"jdbc:oracle:thin:@<HOST_NAME>:PORT:<DATABASE_NAME>\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmsreader splitPk \u5426 \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0cAddax\u56e0\u6b64\u4f1a\u542f\u52a8\u5e76\u53d1\u4efb\u52a1\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u63d0\u4f9b\u6570\u636e\u540c\u6b65\u7684\u6548\u80fd autoPk \u5426 false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 fetchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM session \u5426 \u65e0 \u9488\u5bf9\u672c\u5730\u8fde\u63a5,\u4fee\u6539\u4f1a\u8bdd\u914d\u7f6e,\u8be6\u89c1\u4e0b\u6587 session \u00b6 \u63a7\u5236\u5199\u5165\u6570\u636e\u7684\u65f6\u95f4\u683c\u5f0f\uff0c\u65f6\u533a\u7b49\u7684\u914d\u7f6e\uff0c\u5982\u679c\u8868\u4e2d\u6709\u65f6\u95f4\u5b57\u6bb5\uff0c\u914d\u7f6e\u8be5\u503c\u4ee5\u660e\u786e\u544a\u77e5\u5199\u5165 oracle \u7684\u65f6\u95f4\u683c\u5f0f\u3002\u901a\u5e38\u914d\u7f6e\u7684\u53c2\u6570\u4e3a\uff1a NLS_DATE_FORMAT , NLS_TIME_FORMAT \u3002\u5176\u914d\u7f6e\u7684\u503c\u4e3a json \u683c\u5f0f\uff0c\u4f8b\u5982\uff1a { \"session\" : [ \"alter session set NLS_DATE_FORMAT='yyyy-mm-dd hh24:mi:ss'\" , \"alter session set NLS_TIMESTAMP_FORMAT='yyyy-mm-dd hh24:mi:ss'\" , \"alter session set NLS_TIMESTAMP_TZ_FORMAT='yyyy-mm-dd hh24:mi:ss'\" , \"alter session set TIME_ZONE='Asia/Chongqing'\" ] } \u6ce8\u610f &quot; \u662f \" \u7684\u8f6c\u4e49\u5b57\u7b26\u4e32 \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b Oracle \u6570\u636e\u7c7b\u578b Long NUMBER, INTEGER, INT, SMALLINT Double NUMERIC, DECIMAL, FLOAT, DOUBLE PRECISION, REAL String LONG ,CHAR, NCHAR, VARCHAR, VARCHAR2, NVARCHAR2, CLOB, NCLOB, CHARACTER String CHARACTER VARYING, CHAR VARYING, NATIONAL CHARACTER, NATIONAL CHAR, NATIONAL CHARACTER VARYING String NATIONAL CHAR VARYING, NCHAR VARYING Date TIMESTAMP, DATE Boolean bit, bool Bytes BLOB, BFILE, RAW, LONG RAW \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301 \u6570\u636e\u5e93\u7f16\u7801\u95ee\u9898 \u00b6 OracleReader\u5e95\u5c42\u4f7f\u7528JDBC\u8fdb\u884c\u6570\u636e\u62bd\u53d6\uff0cJDBC\u5929\u7136\u9002\u914d\u5404\u7c7b\u7f16\u7801\uff0c\u5e76\u5728\u5e95\u5c42\u8fdb\u884c\u4e86\u7f16\u7801\u8f6c\u6362\u3002\u56e0\u6b64OracleReader\u4e0d\u9700\u7528\u6237\u6307\u5b9a\u7f16\u7801\uff0c\u53ef\u4ee5\u81ea\u52a8\u83b7\u53d6\u7f16\u7801\u5e76\u8f6c\u7801\u3002 \u5bf9\u4e8eOracle\u5e95\u5c42\u5199\u5165\u7f16\u7801\u548c\u5176\u8bbe\u5b9a\u7684\u7f16\u7801\u4e0d\u4e00\u81f4\u7684\u6df7\u4e71\u60c5\u51b5\uff0cOracleReader\u5bf9\u6b64\u65e0\u6cd5\u8bc6\u522b\uff0c\u5bf9\u6b64\u4e5f\u65e0\u6cd5\u63d0\u4f9b\u89e3\u51b3\u65b9\u6848\uff0c\u5bf9\u4e8e\u8fd9\u7c7b\u60c5\u51b5\uff0c \u5bfc\u51fa\u6709\u53ef\u80fd\u4e3a\u4e71\u7801 \u3002","title":"Oracle Reader"},{"location":"reader/oraclereader/#oracle-reader","text":"OracleReader \u63d2\u4ef6\u7528\u4e8e\u4eceOracle\u8bfb\u53d6\u6570\u636e","title":"Oracle Reader"},{"location":"reader/oraclereader/#_1","text":"\u914d\u7f6e\u4e00\u4e2a\u4eceOracle\u6570\u636e\u5e93\u540c\u6b65\u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a: job/oracle2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : 1048576 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"oraclereader\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"id\" , \"name\" ], \"splitPk\" : \"db_id\" , \"connection\" : [ { \"table\" : [ \"table\" ], \"jdbcUrl\" : [ \"jdbc:oracle:thin:@<HOST_NAME>:PORT:<DATABASE_NAME>\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"reader/oraclereader/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmsreader splitPk \u5426 \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0cAddax\u56e0\u6b64\u4f1a\u542f\u52a8\u5e76\u53d1\u4efb\u52a1\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u63d0\u4f9b\u6570\u636e\u540c\u6b65\u7684\u6548\u80fd autoPk \u5426 false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 fetchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM session \u5426 \u65e0 \u9488\u5bf9\u672c\u5730\u8fde\u63a5,\u4fee\u6539\u4f1a\u8bdd\u914d\u7f6e,\u8be6\u89c1\u4e0b\u6587","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/oraclereader/#session","text":"\u63a7\u5236\u5199\u5165\u6570\u636e\u7684\u65f6\u95f4\u683c\u5f0f\uff0c\u65f6\u533a\u7b49\u7684\u914d\u7f6e\uff0c\u5982\u679c\u8868\u4e2d\u6709\u65f6\u95f4\u5b57\u6bb5\uff0c\u914d\u7f6e\u8be5\u503c\u4ee5\u660e\u786e\u544a\u77e5\u5199\u5165 oracle \u7684\u65f6\u95f4\u683c\u5f0f\u3002\u901a\u5e38\u914d\u7f6e\u7684\u53c2\u6570\u4e3a\uff1a NLS_DATE_FORMAT , NLS_TIME_FORMAT \u3002\u5176\u914d\u7f6e\u7684\u503c\u4e3a json \u683c\u5f0f\uff0c\u4f8b\u5982\uff1a { \"session\" : [ \"alter session set NLS_DATE_FORMAT='yyyy-mm-dd hh24:mi:ss'\" , \"alter session set NLS_TIMESTAMP_FORMAT='yyyy-mm-dd hh24:mi:ss'\" , \"alter session set NLS_TIMESTAMP_TZ_FORMAT='yyyy-mm-dd hh24:mi:ss'\" , \"alter session set TIME_ZONE='Asia/Chongqing'\" ] } \u6ce8\u610f &quot; \u662f \" \u7684\u8f6c\u4e49\u5b57\u7b26\u4e32","title":"session"},{"location":"reader/oraclereader/#_3","text":"Addax \u5185\u90e8\u7c7b\u578b Oracle \u6570\u636e\u7c7b\u578b Long NUMBER, INTEGER, INT, SMALLINT Double NUMERIC, DECIMAL, FLOAT, DOUBLE PRECISION, REAL String LONG ,CHAR, NCHAR, VARCHAR, VARCHAR2, NVARCHAR2, CLOB, NCLOB, CHARACTER String CHARACTER VARYING, CHAR VARYING, NATIONAL CHARACTER, NATIONAL CHAR, NATIONAL CHARACTER VARYING String NATIONAL CHAR VARYING, NCHAR VARYING Date TIMESTAMP, DATE Boolean bit, bool Bytes BLOB, BFILE, RAW, LONG RAW \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/oraclereader/#_4","text":"OracleReader\u5e95\u5c42\u4f7f\u7528JDBC\u8fdb\u884c\u6570\u636e\u62bd\u53d6\uff0cJDBC\u5929\u7136\u9002\u914d\u5404\u7c7b\u7f16\u7801\uff0c\u5e76\u5728\u5e95\u5c42\u8fdb\u884c\u4e86\u7f16\u7801\u8f6c\u6362\u3002\u56e0\u6b64OracleReader\u4e0d\u9700\u7528\u6237\u6307\u5b9a\u7f16\u7801\uff0c\u53ef\u4ee5\u81ea\u52a8\u83b7\u53d6\u7f16\u7801\u5e76\u8f6c\u7801\u3002 \u5bf9\u4e8eOracle\u5e95\u5c42\u5199\u5165\u7f16\u7801\u548c\u5176\u8bbe\u5b9a\u7684\u7f16\u7801\u4e0d\u4e00\u81f4\u7684\u6df7\u4e71\u60c5\u51b5\uff0cOracleReader\u5bf9\u6b64\u65e0\u6cd5\u8bc6\u522b\uff0c\u5bf9\u6b64\u4e5f\u65e0\u6cd5\u63d0\u4f9b\u89e3\u51b3\u65b9\u6848\uff0c\u5bf9\u4e8e\u8fd9\u7c7b\u60c5\u51b5\uff0c \u5bfc\u51fa\u6709\u53ef\u80fd\u4e3a\u4e71\u7801 \u3002","title":"\u6570\u636e\u5e93\u7f16\u7801\u95ee\u9898"},{"location":"reader/postgresqlreader/","text":"Postgresql Reader \u00b6 PostgresqlReader \u63d2\u4ef6\u7528\u4e8e\u4ece PostgreSQL \u8bfb\u53d6\u6570\u636e \u793a\u4f8b \u00b6 \u5047\u5b9a\u5efa\u8868\u8bed\u53e5\u4ee5\u53ca\u8f93\u5165\u63d2\u5165\u8bed\u53e5\u5982\u4e0b\uff1a create table if not exists addax_tbl ( c_bigint bigint , c_bit bit ( 3 ), c_bool boolean , c_byte bytea , c_char char ( 10 ), c_varchar varchar ( 20 ), c_date date , c_double float8 , c_int integer , c_json json , c_number decimal ( 8 , 3 ), c_real real , c_small smallint , c_text text , c_ts timestamp , c_uuid uuid , c_xml xml , c_money money , c_inet inet , c_cidr cidr , c_macaddr macaddr ); insert into addax_tbl values ( 999988887777 , b '101' , TRUE , '\\xDEADBEEF' , 'hello' , 'hello, world' , '2021-01-04' , 999888 . 9972 , 9876542 , '{\"bar\": \"baz\", \"balance\": 7.77, \"active\": false}' :: json , 12345 . 123 , 123 . 123 , 126 , 'this is a long text ' , '2020-01-04 12:13:14' , 'A0EEBC99-9C0B-4EF8-BB6D-6BB9BD380A11' :: uuid , '<foo>bar</foo>' :: xml , '52093.89' :: money , '192.168.1.1' :: inet , '192.168.1/24' :: cidr , '08002b:010203' :: macaddr ); \u914d\u7f6e\u4e00\u4e2a\u4ecePostgreSQL\u6570\u636e\u5e93\u540c\u6b65\u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a: job/postgres2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"postgresqlreader\" , \"parameter\" : { \"username\" : \"pgtest\" , \"password\" : \"pgtest\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"addax_tbl\" ], \"jdbcUrl\" : [ \"jdbc:postgresql://127.0.0.1:5432/pgtest\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/postgres2stream.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/postgres2stream.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmsreader splitPk \u5426 \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0cAddax\u56e0\u6b64\u4f1a\u542f\u52a8\u5e76\u53d1\u4efb\u52a1\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u63d0\u4f9b\u6570\u636e\u540c\u6b65\u7684\u6548\u80fd autoPk \u5426 false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 fetchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b PostgreSQL \u6570\u636e\u7c7b\u578b Long bigint, bigserial, integer, smallint, serial Double double precision, money, numeric, real String varchar, char, text, bit(>1), inet, cidr, macaddr, array,uuid,json,xml Date date, time, timestamp Boolean bool,bit(1) Bytes bytea \u5df2\u77e5\u9650\u5236 \u00b6 \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301;","title":"Postgresql Reader"},{"location":"reader/postgresqlreader/#postgresql-reader","text":"PostgresqlReader \u63d2\u4ef6\u7528\u4e8e\u4ece PostgreSQL \u8bfb\u53d6\u6570\u636e","title":"Postgresql Reader"},{"location":"reader/postgresqlreader/#_1","text":"\u5047\u5b9a\u5efa\u8868\u8bed\u53e5\u4ee5\u53ca\u8f93\u5165\u63d2\u5165\u8bed\u53e5\u5982\u4e0b\uff1a create table if not exists addax_tbl ( c_bigint bigint , c_bit bit ( 3 ), c_bool boolean , c_byte bytea , c_char char ( 10 ), c_varchar varchar ( 20 ), c_date date , c_double float8 , c_int integer , c_json json , c_number decimal ( 8 , 3 ), c_real real , c_small smallint , c_text text , c_ts timestamp , c_uuid uuid , c_xml xml , c_money money , c_inet inet , c_cidr cidr , c_macaddr macaddr ); insert into addax_tbl values ( 999988887777 , b '101' , TRUE , '\\xDEADBEEF' , 'hello' , 'hello, world' , '2021-01-04' , 999888 . 9972 , 9876542 , '{\"bar\": \"baz\", \"balance\": 7.77, \"active\": false}' :: json , 12345 . 123 , 123 . 123 , 126 , 'this is a long text ' , '2020-01-04 12:13:14' , 'A0EEBC99-9C0B-4EF8-BB6D-6BB9BD380A11' :: uuid , '<foo>bar</foo>' :: xml , '52093.89' :: money , '192.168.1.1' :: inet , '192.168.1/24' :: cidr , '08002b:010203' :: macaddr ); \u914d\u7f6e\u4e00\u4e2a\u4ecePostgreSQL\u6570\u636e\u5e93\u540c\u6b65\u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a: job/postgres2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"postgresqlreader\" , \"parameter\" : { \"username\" : \"pgtest\" , \"password\" : \"pgtest\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"addax_tbl\" ], \"jdbcUrl\" : [ \"jdbc:postgresql://127.0.0.1:5432/pgtest\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/postgres2stream.json","title":"\u793a\u4f8b"},{"location":"reader/postgresqlreader/#_2","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/postgres2stream.json","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"reader/postgresqlreader/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmsreader splitPk \u5426 \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0cAddax\u56e0\u6b64\u4f1a\u542f\u52a8\u5e76\u53d1\u4efb\u52a1\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u63d0\u4f9b\u6570\u636e\u540c\u6b65\u7684\u6548\u80fd autoPk \u5426 false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 fetchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/postgresqlreader/#_4","text":"Addax \u5185\u90e8\u7c7b\u578b PostgreSQL \u6570\u636e\u7c7b\u578b Long bigint, bigserial, integer, smallint, serial Double double precision, money, numeric, real String varchar, char, text, bit(>1), inet, cidr, macaddr, array,uuid,json,xml Date date, time, timestamp Boolean bool,bit(1) Bytes bytea","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/postgresqlreader/#_5","text":"\u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301;","title":"\u5df2\u77e5\u9650\u5236"},{"location":"reader/rdbmsreader/","text":"RDBMS Reader \u00b6 RDBMSReader \u63d2\u4ef6\u652f\u6301\u4ece\u4f20\u7edf RDBMS \u8bfb\u53d6\u6570\u636e\u3002\u8fd9\u662f\u4e00\u4e2a\u901a\u7528\u5173\u7cfb\u6570\u636e\u5e93\u8bfb\u53d6\u63d2\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8\u7b49\u65b9\u5f0f\u652f\u6301\u66f4\u591a\u5173\u7cfb\u6570\u636e\u5e93\u8bfb\u53d6\u3002 \u540c\u65f6 RDBMS Reader \u53c8\u662f\u5176\u4ed6\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8bfb\u53d6\u63d2\u4ef6\u7684\u7684\u57fa\u7840\u7c7b\u3002\u4ee5\u4e0b\u8bfb\u53d6\u63d2\u4ef6\u5747\u4f9d\u8d56\u8be5\u63d2\u4ef6 Oracle Reader MySQL Reader PostgreSQL Reader ClickHouse Reader SQLServer Reader \u6ce8\u610f\uff0c \u5982\u679c\u5df2\u7ecf\u63d0\u4f9b\u4e86\u4e13\u95e8\u7684\u6570\u636e\u5e93\u8bfb\u53d6\u63d2\u4ef6\u7684\uff0c\u63a8\u8350\u4f7f\u7528\u4e13\u7528\u63d2\u4ef6\uff0c\u5982\u679c\u4f60\u9700\u8981\u8bfb\u53d6\u7684\u6570\u636e\u5e93\u6ca1\u6709\u4e13\u95e8\u63d2\u4ef6\uff0c\u5219\u8003\u8651\u4f7f\u7528\u8be5\u901a\u7528\u63d2\u4ef6\u3002 \u5728\u4f7f\u7528\u4e4b\u524d\uff0c\u8fd8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u624d\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\uff0c\u5426\u5219\u8fd0\u884c\u4f1a\u51fa\u73b0\u5f02\u5e38\u3002 \u914d\u7f6e\u9a71\u52a8 \u00b6 \u5047\u5b9a\u4f60\u9700\u8981\u8bfb\u53d6 IBM DB2 \u7684\u6570\u636e\uff0c\u56e0\u4e3a\u6ca1\u6709\u63d0\u4f9b\u4e13\u95e8\u7684\u8bfb\u53d6\u63d2\u4ef6\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u63d2\u4ef6\u6765\u5b9e\u73b0\uff0c\u5728\u4f7f\u7528\u4e4b\u524d\uff0c\u9700\u8981\u6267\u884c\u4e0b\u9762\u4e24\u4e2a\u64cd\u4f5c\uff1a \u4e0b\u8f7d\u5bf9\u5e94\u7684 JDBC \u9a71\u52a8\uff0c\u5e76\u62f7\u8d1d\u5230 plugin/reader/rdbmsreader/libs \u76ee\u5f55 \u4fee\u6539 plugin/reader/rdbmsreader/plugin.json \u6587\u4ef6\uff0c\u627e\u5230 drivers \u4e00\u9879\uff0c\u586b\u5199\u6b63\u786e\u7684 JDBC \u9a71\u52a8\u540d\uff0c\u6bd4\u5982 DB2 \u7684\u9a71\u52a8\u540d\u4e3a com.ibm.db2.jcc.DB2Driver \uff0c\u7c7b\u4f3c\u8fd9\u6837\uff1a { \"name\" : \"rdbmsreader\" , \"class\" : \"com.wgzhao.addax.plugin.reader.rdbmsreader.RdbmsReader\" , \"description\" : \"\" , \"developer\" : \"wgzhao\" , \"drivers\" : [ \"com.ibm.db2.jcc.DB2Driver\" ] } \u4ee5\u4e0b\u5217\u51fa\u5e38\u89c1\u7684\u6570\u636e\u5e93\u4ee5\u53ca\u5bf9\u5e94\u7684\u9a71\u52a8\u540d\u79f0 Apache Impala : com.cloudera.impala.jdbc41.Driver Enterprise DB : com.edb.Driver PrestoDB : com.facebook.presto.jdbc.PrestoDriver IBM DB2 : com.ibm.db2.jcc.DB2Driver MySQL : com.mysql.cj.jdbc.Driver Sybase Server : com.sybase.jdbc3.jdbc.SybDriver TDengine : com.taosdata.jdbc.TSDBDriver \u8fbe\u68a6\u6570\u636e\u5e93 : dm.jdbc.driver.DmDriver \u661f\u73afInceptor : io.transwarp.jdbc.InceptorDriver TrinoDB : io.trino.jdbc.TrinoDriver PrestoSQL : io.prestosql.jdbc.PrestoDriver Oracle DB : oracle.jdbc.OracleDriver PostgreSQL : org.postgresql.Drive \u914d\u7f6e\u8bf4\u660e \u00b6 \u4ee5\u4e0b\u914d\u7f6e\u5c55\u793a\u4e86\u5982\u4f55\u4ece Presto \u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\u5230\u7ec8\u7aef job/rdbms2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : 1048576 , \"channel\" : 1 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"rdbmsreader\" , \"parameter\" : { \"username\" : \"hive\" , \"password\" : \"\" , \"column\" : [ \"*\" ], \"driver\" : \"\" , \"connection\" : [ { \"table\" : [ \"default.table\" ], \"jdbcUrl\" : [ \"jdbc:presto://127.0.0.1:8080/hive\" ] } ], \"fetchSize\" : 1024 , \"where\" : \"1 = 1\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f array \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f driver \u662f string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f array \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f array \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1\u540e splitPk \u5426 string \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0cAddax\u56e0\u6b64\u4f1a\u542f\u52a8\u5e76\u53d1\u4efb\u52a1\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u63d0\u4f9b\u6570\u636e\u540c\u6b65\u7684\u6548\u80fd\uff0c\u6ce8\u610f\u4e8b\u9879\u89c1\u540e autoPk \u5426 bool false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165\uff0c\u8be6\u89c1\u540e\u9762\u63cf\u8ff0 where \u5426 string \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 string \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 fetchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM jdbcUrl \u00b6 jdbcUrl \u914d\u7f6e\u9664\u4e86\u914d\u7f6e\u5fc5\u8981\u7684\u4fe1\u606f\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u589e\u52a0\u6bcf\u79cd\u7279\u5b9a\u9a71\u52a8\u7684\u7279\u5b9a\u914d\u7f6e\u5c5e\u6027\uff0c\u8fd9\u91cc\u7279\u522b\u63d0\u5230\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u914d\u7f6e\u5c5e\u6027\u5bf9\u4ee3\u7406\u7684\u652f\u6301\u4ece\u800c\u5b9e\u73b0\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u529f\u80fd\u3002 \u6bd4\u5982\u5bf9\u4e8e PrestoSQL \u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u800c\u8a00\uff0c\u652f\u6301 socksProxy \u53c2\u6570\uff0c\u4e8e\u662f\u4e0a\u8ff0\u914d\u7f6e\u7684 jdbcUrl \u53ef\u4ee5\u4fee\u6539\u4e3a jdbc:presto://127.0.0.1:8080/hive?socksProxy=192.168.1.101:1081 \u5927\u90e8\u5206\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u652f\u6301 socksProxyHost,socksProxyPort \u53c2\u6570\u6765\u652f\u6301\u4ee3\u7406\u8bbf\u95ee\u3002\u4e5f\u6709\u4e00\u4e9b\u7279\u522b\u7684\u60c5\u51b5\u3002 \u4ee5\u4e0b\u662f\u5404\u7c7b\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u6240\u652f\u6301\u7684\u4ee3\u7406\u7c7b\u578b\u4ee5\u53ca\u914d\u7f6e\u65b9\u5f0f \u6570\u636e\u5e93 \u4ee3\u7406\u7c7b\u578b \u4ee3\u7406\u914d\u7f6e \u4f8b\u5b50 MySQL socks socksProxyHost,socksProxyPort socksProxyHost=192.168.1.101&socksProxyPort=1081 Presto socks socksProxy socksProxy=192.168.1.101:1081 Presto http httpProxy httpProxy=192.168.1.101:3128 driver \u00b6 \u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u662f\u56fa\u5b9a\u7684\uff0c\u4f46\u6709\u4e9b\u56e0\u4e3a\u7248\u672c\u7684\u4e0d\u540c\uff0c\u6240\u5efa\u8bae\u7684\u9a71\u52a8\u7c7b\u540d\u4e0d\u540c\uff0c\u6bd4\u5982 MySQL\u3002 \u65b0\u7684 MySQL JDBC \u9a71\u52a8\u7c7b\u578b\u63a8\u8350\u4f7f\u7528 com.mysql.cj.jdbc.Driver \u800c\u4e0d\u662f\u4ee5\u524d\u7684 com.mysql.jdbc.Drver \u3002\u5982\u679c\u60f3\u8981\u4f7f\u7528\u5c31\u7684\u9a71\u52a8\u540d\u79f0\uff0c\u5219\u53ef\u4ee5\u914d\u7f6e driver \u914d\u7f6e\u9879\u3002 column \u00b6 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\u3002\u7528\u6237\u4f7f\u7528 * \u4ee3\u8868\u9ed8\u8ba4\u4f7f\u7528\u6240\u6709\u5217\u914d\u7f6e\uff0c\u4f8b\u5982 [\"*\"] \u3002 \u652f\u6301\u5217\u88c1\u526a\uff0c\u5373\u5217\u53ef\u4ee5\u6311\u9009\u90e8\u5206\u5217\u8fdb\u884c\u5bfc\u51fa\u3002 \u652f\u6301\u5217\u6362\u5e8f\uff0c\u5373\u5217\u53ef\u4ee5\u4e0d\u6309\u7167\u8868schema\u4fe1\u606f\u8fdb\u884c\u5bfc\u51fa\u3002 \u652f\u6301\u5e38\u91cf\u914d\u7f6e\uff0c\u7528\u6237\u9700\u8981\u6309\u7167JSON\u683c\u5f0f: [\"id\", \"`table`\", \"1\", \"'bazhen.csy'\", \"null\", \"to_char(a + 1)\", \"2.3\" , \"true\"] id \u4e3a\u666e\u901a\u5217\u540d `table` \u4e3a\u5305\u542b\u4fdd\u7559\u5728\u7684\u5217\u540d\uff0c 1 \u4e3a\u6574\u5f62\u6570\u5b57\u5e38\u91cf\uff0c 'bazhen.csy' \u4e3a\u5b57\u7b26\u4e32\u5e38\u91cf null \u4e3a\u7a7a\u6307\u9488\uff0c\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684 null \u5fc5\u987b\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\u51fa\u73b0\uff0c\u5373\u7528\u53cc\u5f15\u53f7\u5f15\u7528 to_char(a + 1) \u4e3a\u8868\u8fbe\u5f0f\uff0c 2.3 \u4e3a\u6d6e\u70b9\u6570\uff0c true \u4e3a\u5e03\u5c14\u503c\uff0c\u540c\u6837\u7684\uff0c\u8fd9\u91cc\u7684\u5e03\u5c14\u503c\u4e5f\u5fc5\u987b\u7528\u53cc\u5f15\u53f7\u5f15\u7528 Column\u5fc5\u987b\u663e\u793a\u586b\u5199\uff0c\u4e0d\u5141\u8bb8\u4e3a\u7a7a\uff01 splitPk \u00b6 \u5982\u679c\u6307\u5b9a splitPk \uff0c\u8868\u793a\u7528\u6237\u5e0c\u671b\u4f7f\u7528 splitPk \u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u56e0\u6b64\u4f1a\u542f\u52a8\u5e76\u53d1\u4efb\u52a1\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u63d0\u4f9b\u6570\u636e\u540c\u6b65\u7684\u6548\u80fd\u3002 \u63a8\u8350 splitPk \u7528\u6237\u4f7f\u7528\u8868\u4e3b\u952e\uff0c\u56e0\u4e3a\u8868\u4e3b\u952e\u901a\u5e38\u60c5\u51b5\u4e0b\u6bd4\u8f83\u5747\u5300\uff0c\u56e0\u6b64\u5207\u5206\u51fa\u6765\u7684\u5206\u7247\u4e5f\u4e0d\u5bb9\u6613\u51fa\u73b0\u6570\u636e\u70ed\u70b9\u3002 \u76ee\u524d splitPk \u4ec5\u652f\u6301\u6574\u5f62\u3001\u5b57\u7b26\u4e32\u578b\u6570\u636e(ASCII\u7c7b\u578b) \u5207\u5206\uff0c\u4e0d\u652f\u6301\u6d6e\u70b9\u3001\u65e5\u671f\u7b49\u5176\u4ed6\u7c7b\u578b\u3002 \u5982\u679c\u7528\u6237\u6307\u5b9a\u5176\u4ed6\u975e\u652f\u6301\u7c7b\u578b\uff0cRDBMSReader \u5c06\u62a5\u9519\uff01 splitPk \u5982\u679c\u4e0d\u586b\u5199\uff0c\u5c06\u89c6\u4f5c\u7528\u6237\u4e0d\u5bf9\u5355\u8868\u8fdb\u884c\u5207\u5206\uff0c\u800c\u4f7f\u7528\u5355\u901a\u9053\u540c\u6b65\u5168\u91cf\u6570\u636e\u3002 autoPk \u00b6 \u4ece 3.2.6 \u7248\u672c\u5f00\u59cb\uff0c\u652f\u6301\u81ea\u52a8\u83b7\u53d6\u8868\u4e3b\u952e\u6216\u552f\u4e00\u7d22\u5f15\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a true \uff0c\u5c06\u5c1d\u8bd5\u901a\u8fc7\u67e5\u8be2\u6570\u636e\u5e93\u7684\u5143\u6570\u636e\u4fe1\u606f\u83b7\u53d6\u6307\u5b9a\u8868\u7684\u4e3b\u952e\u5b57\u6bb5\u6216\u552f\u4e00\u7d22\u5f15\u5b57\u6bb5\uff0c\u5982\u679c\u83b7\u53d6\u53ef\u7528\u4e8e\u5206\u9694\u7684 \u5b57\u6bb5\u4e0d\u6b62\u4e00\u4e2a\uff0c\u5219\u9ed8\u8ba4\u53d6\u7b2c\u4e00\u4e2a\u3002 \u8be5\u7279\u6027\u76ee\u524d\u652f\u6301\u7684\u6570\u636e\u5e93\u6709\uff1a ClickHouse MySQL Oracle PostgreSQL SQL Server \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b RDBMS \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint, mediumint, int, bigint Double float, double, decimal String varchar, char, tinytext, text, mediumtext, longtext, year,xml Date date, datetime, timestamp, time Boolean bit, bool Bytes tinyblob, mediumblob, blob, longblob, varbinary \u5f53\u524d\u652f\u6301\u7684\u6570\u636e\u5e93 \u00b6 PrestoSQL TDH Inceptor2 IBM DB2 Apache Hive","title":"RDBMS Reader"},{"location":"reader/rdbmsreader/#rdbms-reader","text":"RDBMSReader \u63d2\u4ef6\u652f\u6301\u4ece\u4f20\u7edf RDBMS \u8bfb\u53d6\u6570\u636e\u3002\u8fd9\u662f\u4e00\u4e2a\u901a\u7528\u5173\u7cfb\u6570\u636e\u5e93\u8bfb\u53d6\u63d2\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8\u7b49\u65b9\u5f0f\u652f\u6301\u66f4\u591a\u5173\u7cfb\u6570\u636e\u5e93\u8bfb\u53d6\u3002 \u540c\u65f6 RDBMS Reader \u53c8\u662f\u5176\u4ed6\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8bfb\u53d6\u63d2\u4ef6\u7684\u7684\u57fa\u7840\u7c7b\u3002\u4ee5\u4e0b\u8bfb\u53d6\u63d2\u4ef6\u5747\u4f9d\u8d56\u8be5\u63d2\u4ef6 Oracle Reader MySQL Reader PostgreSQL Reader ClickHouse Reader SQLServer Reader \u6ce8\u610f\uff0c \u5982\u679c\u5df2\u7ecf\u63d0\u4f9b\u4e86\u4e13\u95e8\u7684\u6570\u636e\u5e93\u8bfb\u53d6\u63d2\u4ef6\u7684\uff0c\u63a8\u8350\u4f7f\u7528\u4e13\u7528\u63d2\u4ef6\uff0c\u5982\u679c\u4f60\u9700\u8981\u8bfb\u53d6\u7684\u6570\u636e\u5e93\u6ca1\u6709\u4e13\u95e8\u63d2\u4ef6\uff0c\u5219\u8003\u8651\u4f7f\u7528\u8be5\u901a\u7528\u63d2\u4ef6\u3002 \u5728\u4f7f\u7528\u4e4b\u524d\uff0c\u8fd8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u624d\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\uff0c\u5426\u5219\u8fd0\u884c\u4f1a\u51fa\u73b0\u5f02\u5e38\u3002","title":"RDBMS Reader"},{"location":"reader/rdbmsreader/#_1","text":"\u5047\u5b9a\u4f60\u9700\u8981\u8bfb\u53d6 IBM DB2 \u7684\u6570\u636e\uff0c\u56e0\u4e3a\u6ca1\u6709\u63d0\u4f9b\u4e13\u95e8\u7684\u8bfb\u53d6\u63d2\u4ef6\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u63d2\u4ef6\u6765\u5b9e\u73b0\uff0c\u5728\u4f7f\u7528\u4e4b\u524d\uff0c\u9700\u8981\u6267\u884c\u4e0b\u9762\u4e24\u4e2a\u64cd\u4f5c\uff1a \u4e0b\u8f7d\u5bf9\u5e94\u7684 JDBC \u9a71\u52a8\uff0c\u5e76\u62f7\u8d1d\u5230 plugin/reader/rdbmsreader/libs \u76ee\u5f55 \u4fee\u6539 plugin/reader/rdbmsreader/plugin.json \u6587\u4ef6\uff0c\u627e\u5230 drivers \u4e00\u9879\uff0c\u586b\u5199\u6b63\u786e\u7684 JDBC \u9a71\u52a8\u540d\uff0c\u6bd4\u5982 DB2 \u7684\u9a71\u52a8\u540d\u4e3a com.ibm.db2.jcc.DB2Driver \uff0c\u7c7b\u4f3c\u8fd9\u6837\uff1a { \"name\" : \"rdbmsreader\" , \"class\" : \"com.wgzhao.addax.plugin.reader.rdbmsreader.RdbmsReader\" , \"description\" : \"\" , \"developer\" : \"wgzhao\" , \"drivers\" : [ \"com.ibm.db2.jcc.DB2Driver\" ] } \u4ee5\u4e0b\u5217\u51fa\u5e38\u89c1\u7684\u6570\u636e\u5e93\u4ee5\u53ca\u5bf9\u5e94\u7684\u9a71\u52a8\u540d\u79f0 Apache Impala : com.cloudera.impala.jdbc41.Driver Enterprise DB : com.edb.Driver PrestoDB : com.facebook.presto.jdbc.PrestoDriver IBM DB2 : com.ibm.db2.jcc.DB2Driver MySQL : com.mysql.cj.jdbc.Driver Sybase Server : com.sybase.jdbc3.jdbc.SybDriver TDengine : com.taosdata.jdbc.TSDBDriver \u8fbe\u68a6\u6570\u636e\u5e93 : dm.jdbc.driver.DmDriver \u661f\u73afInceptor : io.transwarp.jdbc.InceptorDriver TrinoDB : io.trino.jdbc.TrinoDriver PrestoSQL : io.prestosql.jdbc.PrestoDriver Oracle DB : oracle.jdbc.OracleDriver PostgreSQL : org.postgresql.Drive","title":"\u914d\u7f6e\u9a71\u52a8"},{"location":"reader/rdbmsreader/#_2","text":"\u4ee5\u4e0b\u914d\u7f6e\u5c55\u793a\u4e86\u5982\u4f55\u4ece Presto \u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\u5230\u7ec8\u7aef job/rdbms2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : 1048576 , \"channel\" : 1 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"rdbmsreader\" , \"parameter\" : { \"username\" : \"hive\" , \"password\" : \"\" , \"column\" : [ \"*\" ], \"driver\" : \"\" , \"connection\" : [ { \"table\" : [ \"default.table\" ], \"jdbcUrl\" : [ \"jdbc:presto://127.0.0.1:8080/hive\" ] } ], \"fetchSize\" : 1024 , \"where\" : \"1 = 1\" } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } }","title":"\u914d\u7f6e\u8bf4\u660e"},{"location":"reader/rdbmsreader/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f array \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f driver \u662f string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f array \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f array \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1\u540e splitPk \u5426 string \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0cAddax\u56e0\u6b64\u4f1a\u542f\u52a8\u5e76\u53d1\u4efb\u52a1\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u63d0\u4f9b\u6570\u636e\u540c\u6b65\u7684\u6548\u80fd\uff0c\u6ce8\u610f\u4e8b\u9879\u89c1\u540e autoPk \u5426 bool false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165\uff0c\u8be6\u89c1\u540e\u9762\u63cf\u8ff0 where \u5426 string \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 string \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 fetchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/rdbmsreader/#jdbcurl","text":"jdbcUrl \u914d\u7f6e\u9664\u4e86\u914d\u7f6e\u5fc5\u8981\u7684\u4fe1\u606f\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u589e\u52a0\u6bcf\u79cd\u7279\u5b9a\u9a71\u52a8\u7684\u7279\u5b9a\u914d\u7f6e\u5c5e\u6027\uff0c\u8fd9\u91cc\u7279\u522b\u63d0\u5230\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u914d\u7f6e\u5c5e\u6027\u5bf9\u4ee3\u7406\u7684\u652f\u6301\u4ece\u800c\u5b9e\u73b0\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u529f\u80fd\u3002 \u6bd4\u5982\u5bf9\u4e8e PrestoSQL \u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u800c\u8a00\uff0c\u652f\u6301 socksProxy \u53c2\u6570\uff0c\u4e8e\u662f\u4e0a\u8ff0\u914d\u7f6e\u7684 jdbcUrl \u53ef\u4ee5\u4fee\u6539\u4e3a jdbc:presto://127.0.0.1:8080/hive?socksProxy=192.168.1.101:1081 \u5927\u90e8\u5206\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u652f\u6301 socksProxyHost,socksProxyPort \u53c2\u6570\u6765\u652f\u6301\u4ee3\u7406\u8bbf\u95ee\u3002\u4e5f\u6709\u4e00\u4e9b\u7279\u522b\u7684\u60c5\u51b5\u3002 \u4ee5\u4e0b\u662f\u5404\u7c7b\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u6240\u652f\u6301\u7684\u4ee3\u7406\u7c7b\u578b\u4ee5\u53ca\u914d\u7f6e\u65b9\u5f0f \u6570\u636e\u5e93 \u4ee3\u7406\u7c7b\u578b \u4ee3\u7406\u914d\u7f6e \u4f8b\u5b50 MySQL socks socksProxyHost,socksProxyPort socksProxyHost=192.168.1.101&socksProxyPort=1081 Presto socks socksProxy socksProxy=192.168.1.101:1081 Presto http httpProxy httpProxy=192.168.1.101:3128","title":"jdbcUrl"},{"location":"reader/rdbmsreader/#driver","text":"\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u662f\u56fa\u5b9a\u7684\uff0c\u4f46\u6709\u4e9b\u56e0\u4e3a\u7248\u672c\u7684\u4e0d\u540c\uff0c\u6240\u5efa\u8bae\u7684\u9a71\u52a8\u7c7b\u540d\u4e0d\u540c\uff0c\u6bd4\u5982 MySQL\u3002 \u65b0\u7684 MySQL JDBC \u9a71\u52a8\u7c7b\u578b\u63a8\u8350\u4f7f\u7528 com.mysql.cj.jdbc.Driver \u800c\u4e0d\u662f\u4ee5\u524d\u7684 com.mysql.jdbc.Drver \u3002\u5982\u679c\u60f3\u8981\u4f7f\u7528\u5c31\u7684\u9a71\u52a8\u540d\u79f0\uff0c\u5219\u53ef\u4ee5\u914d\u7f6e driver \u914d\u7f6e\u9879\u3002","title":"driver"},{"location":"reader/rdbmsreader/#column","text":"\u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\u3002\u7528\u6237\u4f7f\u7528 * \u4ee3\u8868\u9ed8\u8ba4\u4f7f\u7528\u6240\u6709\u5217\u914d\u7f6e\uff0c\u4f8b\u5982 [\"*\"] \u3002 \u652f\u6301\u5217\u88c1\u526a\uff0c\u5373\u5217\u53ef\u4ee5\u6311\u9009\u90e8\u5206\u5217\u8fdb\u884c\u5bfc\u51fa\u3002 \u652f\u6301\u5217\u6362\u5e8f\uff0c\u5373\u5217\u53ef\u4ee5\u4e0d\u6309\u7167\u8868schema\u4fe1\u606f\u8fdb\u884c\u5bfc\u51fa\u3002 \u652f\u6301\u5e38\u91cf\u914d\u7f6e\uff0c\u7528\u6237\u9700\u8981\u6309\u7167JSON\u683c\u5f0f: [\"id\", \"`table`\", \"1\", \"'bazhen.csy'\", \"null\", \"to_char(a + 1)\", \"2.3\" , \"true\"] id \u4e3a\u666e\u901a\u5217\u540d `table` \u4e3a\u5305\u542b\u4fdd\u7559\u5728\u7684\u5217\u540d\uff0c 1 \u4e3a\u6574\u5f62\u6570\u5b57\u5e38\u91cf\uff0c 'bazhen.csy' \u4e3a\u5b57\u7b26\u4e32\u5e38\u91cf null \u4e3a\u7a7a\u6307\u9488\uff0c\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684 null \u5fc5\u987b\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\u51fa\u73b0\uff0c\u5373\u7528\u53cc\u5f15\u53f7\u5f15\u7528 to_char(a + 1) \u4e3a\u8868\u8fbe\u5f0f\uff0c 2.3 \u4e3a\u6d6e\u70b9\u6570\uff0c true \u4e3a\u5e03\u5c14\u503c\uff0c\u540c\u6837\u7684\uff0c\u8fd9\u91cc\u7684\u5e03\u5c14\u503c\u4e5f\u5fc5\u987b\u7528\u53cc\u5f15\u53f7\u5f15\u7528 Column\u5fc5\u987b\u663e\u793a\u586b\u5199\uff0c\u4e0d\u5141\u8bb8\u4e3a\u7a7a\uff01","title":"column"},{"location":"reader/rdbmsreader/#splitpk","text":"\u5982\u679c\u6307\u5b9a splitPk \uff0c\u8868\u793a\u7528\u6237\u5e0c\u671b\u4f7f\u7528 splitPk \u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u56e0\u6b64\u4f1a\u542f\u52a8\u5e76\u53d1\u4efb\u52a1\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u63d0\u4f9b\u6570\u636e\u540c\u6b65\u7684\u6548\u80fd\u3002 \u63a8\u8350 splitPk \u7528\u6237\u4f7f\u7528\u8868\u4e3b\u952e\uff0c\u56e0\u4e3a\u8868\u4e3b\u952e\u901a\u5e38\u60c5\u51b5\u4e0b\u6bd4\u8f83\u5747\u5300\uff0c\u56e0\u6b64\u5207\u5206\u51fa\u6765\u7684\u5206\u7247\u4e5f\u4e0d\u5bb9\u6613\u51fa\u73b0\u6570\u636e\u70ed\u70b9\u3002 \u76ee\u524d splitPk \u4ec5\u652f\u6301\u6574\u5f62\u3001\u5b57\u7b26\u4e32\u578b\u6570\u636e(ASCII\u7c7b\u578b) \u5207\u5206\uff0c\u4e0d\u652f\u6301\u6d6e\u70b9\u3001\u65e5\u671f\u7b49\u5176\u4ed6\u7c7b\u578b\u3002 \u5982\u679c\u7528\u6237\u6307\u5b9a\u5176\u4ed6\u975e\u652f\u6301\u7c7b\u578b\uff0cRDBMSReader \u5c06\u62a5\u9519\uff01 splitPk \u5982\u679c\u4e0d\u586b\u5199\uff0c\u5c06\u89c6\u4f5c\u7528\u6237\u4e0d\u5bf9\u5355\u8868\u8fdb\u884c\u5207\u5206\uff0c\u800c\u4f7f\u7528\u5355\u901a\u9053\u540c\u6b65\u5168\u91cf\u6570\u636e\u3002","title":"splitPk"},{"location":"reader/rdbmsreader/#autopk","text":"\u4ece 3.2.6 \u7248\u672c\u5f00\u59cb\uff0c\u652f\u6301\u81ea\u52a8\u83b7\u53d6\u8868\u4e3b\u952e\u6216\u552f\u4e00\u7d22\u5f15\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a true \uff0c\u5c06\u5c1d\u8bd5\u901a\u8fc7\u67e5\u8be2\u6570\u636e\u5e93\u7684\u5143\u6570\u636e\u4fe1\u606f\u83b7\u53d6\u6307\u5b9a\u8868\u7684\u4e3b\u952e\u5b57\u6bb5\u6216\u552f\u4e00\u7d22\u5f15\u5b57\u6bb5\uff0c\u5982\u679c\u83b7\u53d6\u53ef\u7528\u4e8e\u5206\u9694\u7684 \u5b57\u6bb5\u4e0d\u6b62\u4e00\u4e2a\uff0c\u5219\u9ed8\u8ba4\u53d6\u7b2c\u4e00\u4e2a\u3002 \u8be5\u7279\u6027\u76ee\u524d\u652f\u6301\u7684\u6570\u636e\u5e93\u6709\uff1a ClickHouse MySQL Oracle PostgreSQL SQL Server","title":"autoPk"},{"location":"reader/rdbmsreader/#_4","text":"Addax \u5185\u90e8\u7c7b\u578b RDBMS \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint, mediumint, int, bigint Double float, double, decimal String varchar, char, tinytext, text, mediumtext, longtext, year,xml Date date, datetime, timestamp, time Boolean bit, bool Bytes tinyblob, mediumblob, blob, longblob, varbinary","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/rdbmsreader/#_5","text":"PrestoSQL TDH Inceptor2 IBM DB2 Apache Hive","title":"\u5f53\u524d\u652f\u6301\u7684\u6570\u636e\u5e93"},{"location":"reader/redisreader/","text":"Redis Reader \u00b6 RedisReader \u63d2\u4ef6\u7528\u4e8e\u8bfb\u53d6 Redis RDB \u6570\u636e \u914d\u7f6e\u6837\u4f8b \u00b6 { \"job\" : { \"content\" : { \"reader\" : { \"name\" : \"redisreader\" , \"parameter\" : { \"connection\" : [ { \"uri\" : \"tcp://127.0.0.1:7003\" , \"auth\" : \"password\" } ], \"include\" : [ \"^user\" ], \"exclude\" : [ \"^password\" ], \"db\" : [ 0 , 1 ] } }, \"writer\" : { \"name\" : \"rediswriter\" , \"parameter\" : { \"connection\" : [ { \"uri\" : \"tcp://127.0.0.1:6379\" , \"auth\" : \"123456\" } ], \"timeout\" : 60000 } } }, \"setting\" : { \"speed\" : { \"channel\" : 1 } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 uri \u662f \u5426 redis\u94fe\u63a5,\u652f\u6301\u591a\u4e2a\u672c\u5730rdb\u6587\u4ef6/\u7f51\u7edcrdb\u6587\u4ef6,\u5982\u679c\u662f\u96c6\u7fa4,\u586b\u5199\u6240\u6709master\u8282\u70b9\u5730\u5740 db \u5426 \u65e0 \u9700\u8981\u8bfb\u53d6\u7684db\u7d22\u5f15,\u82e5\u4e0d\u586b\u5199,\u5219\u8bfb\u53d6\u6240\u6709db include \u5426 \u65e0 \u8981\u5305\u542b\u7684 key, \u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f exclude \u5426 \u65e0 \u8981\u6392\u9664\u7684 key,\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f \u7ea6\u675f\u9650\u5236 \u00b6 \u4e0d\u652f\u6301\u76f4\u63a5\u8bfb\u53d6\u4efb\u4f55\u4e0d\u652f\u6301 sync \u547d\u4ee4\u7684 redis server\uff0c\u5982\u679c\u9700\u8981\u8bf7\u5907\u4efd\u7684rdb\u6587\u4ef6\u8fdb\u884c\u8bfb\u53d6\u3002 \u5982\u679c\u662f\u539f\u751fredis cluster\u96c6\u7fa4\uff0c\u8bf7\u586b\u5199\u6240\u6709master\u8282\u70b9\u7684tcp\u5730\u5740\uff0c redisreader \u63d2\u4ef6\u4f1a\u81ea\u52a8dump \u6240\u6709\u8282\u70b9\u7684rdb\u6587\u4ef6\u3002 \u4ec5\u89e3\u6790 String \u6570\u636e\u7c7b\u578b\uff0c\u5176\u4ed6\u590d\u5408\u7c7b\u578b( Sets , List \u7b49\u4f1a\u5ffd\u7565)","title":"Redis Reader"},{"location":"reader/redisreader/#redis-reader","text":"RedisReader \u63d2\u4ef6\u7528\u4e8e\u8bfb\u53d6 Redis RDB \u6570\u636e","title":"Redis Reader"},{"location":"reader/redisreader/#_1","text":"{ \"job\" : { \"content\" : { \"reader\" : { \"name\" : \"redisreader\" , \"parameter\" : { \"connection\" : [ { \"uri\" : \"tcp://127.0.0.1:7003\" , \"auth\" : \"password\" } ], \"include\" : [ \"^user\" ], \"exclude\" : [ \"^password\" ], \"db\" : [ 0 , 1 ] } }, \"writer\" : { \"name\" : \"rediswriter\" , \"parameter\" : { \"connection\" : [ { \"uri\" : \"tcp://127.0.0.1:6379\" , \"auth\" : \"123456\" } ], \"timeout\" : 60000 } } }, \"setting\" : { \"speed\" : { \"channel\" : 1 } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"reader/redisreader/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 uri \u662f \u5426 redis\u94fe\u63a5,\u652f\u6301\u591a\u4e2a\u672c\u5730rdb\u6587\u4ef6/\u7f51\u7edcrdb\u6587\u4ef6,\u5982\u679c\u662f\u96c6\u7fa4,\u586b\u5199\u6240\u6709master\u8282\u70b9\u5730\u5740 db \u5426 \u65e0 \u9700\u8981\u8bfb\u53d6\u7684db\u7d22\u5f15,\u82e5\u4e0d\u586b\u5199,\u5219\u8bfb\u53d6\u6240\u6709db include \u5426 \u65e0 \u8981\u5305\u542b\u7684 key, \u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f exclude \u5426 \u65e0 \u8981\u6392\u9664\u7684 key,\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/redisreader/#_3","text":"\u4e0d\u652f\u6301\u76f4\u63a5\u8bfb\u53d6\u4efb\u4f55\u4e0d\u652f\u6301 sync \u547d\u4ee4\u7684 redis server\uff0c\u5982\u679c\u9700\u8981\u8bf7\u5907\u4efd\u7684rdb\u6587\u4ef6\u8fdb\u884c\u8bfb\u53d6\u3002 \u5982\u679c\u662f\u539f\u751fredis cluster\u96c6\u7fa4\uff0c\u8bf7\u586b\u5199\u6240\u6709master\u8282\u70b9\u7684tcp\u5730\u5740\uff0c redisreader \u63d2\u4ef6\u4f1a\u81ea\u52a8dump \u6240\u6709\u8282\u70b9\u7684rdb\u6587\u4ef6\u3002 \u4ec5\u89e3\u6790 String \u6570\u636e\u7c7b\u578b\uff0c\u5176\u4ed6\u590d\u5408\u7c7b\u578b( Sets , List \u7b49\u4f1a\u5ffd\u7565)","title":"\u7ea6\u675f\u9650\u5236"},{"location":"reader/sqlitereader/","text":"SQLite Reader \u00b6 SQLiteReader \u63d2\u4ef6\u7528\u4e8e\u8bfb\u53d6\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684 sqlite \u6587\u4ef6\uff0c \u4ed6\u7ee7\u627f\u4e8e rdbmsreader \u793a\u4f8b \u00b6 \u6211\u4eec\u521b\u5efa\u793a\u4f8b\u6587\u4ef6\uff1a $ sqlite3 /tmp/test.sqlite3 SQLite version 3 .7.17 2013 -05-20 00 :56:22 Enter \".help\" for instructions Enter SQL statements terminated with a \";\" sqlite> create table test ( id int, name varchar ( 10 ) , salary double ) ; sqlite> insert into test values ( 1 , 'foo' , 12 .13 ) , ( 2 , 'bar' ,202.22 ) ; sqlite> .q \u4e0b\u9762\u7684\u914d\u7f6e\u662f\u8bfb\u53d6\u8be5\u8868\u5230\u7ec8\u7aef\u7684\u4f5c\u4e1a: job/sqlite2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 3 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"sqlitereader\" , \"parameter\" : { \"username\" : \"fakeuser\" , \"password\" : \"\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"jdbcUrl\" : [ \"jdbc:sqlite:/tmp/test.sqlite3\" ], \"table\" : [ \"test\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/sqlite2stream.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/sqlite2stream.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f driver \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d, \u53ef\u968f\u610f\u914d\u7f6e\uff0c\u4f46\u4e0d\u80fd\u7f3a\u5931 password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801\uff0c\u53ef\u4e0d\u914d\u7f6e table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0 rdbmreader splitPk \u5426 string \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmreader autoPk \u5426 bool false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 string \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 list \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b MySQL \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint, mediumint, int, bigint Double float, double, decimal String varchar, char, tinytext, text, mediumtext, longtext, year Date date, datetime, timestamp, time Boolean bit, bool Bytes tinyblob, mediumblob, blob, longblob, varbinary","title":"SQLite Reader"},{"location":"reader/sqlitereader/#sqlite-reader","text":"SQLiteReader \u63d2\u4ef6\u7528\u4e8e\u8bfb\u53d6\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684 sqlite \u6587\u4ef6\uff0c \u4ed6\u7ee7\u627f\u4e8e rdbmsreader","title":"SQLite Reader"},{"location":"reader/sqlitereader/#_1","text":"\u6211\u4eec\u521b\u5efa\u793a\u4f8b\u6587\u4ef6\uff1a $ sqlite3 /tmp/test.sqlite3 SQLite version 3 .7.17 2013 -05-20 00 :56:22 Enter \".help\" for instructions Enter SQL statements terminated with a \";\" sqlite> create table test ( id int, name varchar ( 10 ) , salary double ) ; sqlite> insert into test values ( 1 , 'foo' , 12 .13 ) , ( 2 , 'bar' ,202.22 ) ; sqlite> .q \u4e0b\u9762\u7684\u914d\u7f6e\u662f\u8bfb\u53d6\u8be5\u8868\u5230\u7ec8\u7aef\u7684\u4f5c\u4e1a: job/sqlite2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 3 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"sqlitereader\" , \"parameter\" : { \"username\" : \"fakeuser\" , \"password\" : \"\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"jdbcUrl\" : [ \"jdbc:sqlite:/tmp/test.sqlite3\" ], \"table\" : [ \"test\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/sqlite2stream.json","title":"\u793a\u4f8b"},{"location":"reader/sqlitereader/#_2","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/sqlite2stream.json","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"reader/sqlitereader/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f driver \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d, \u53ef\u968f\u610f\u914d\u7f6e\uff0c\u4f46\u4e0d\u80fd\u7f3a\u5931 password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801\uff0c\u53ef\u4e0d\u914d\u7f6e table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0 rdbmreader splitPk \u5426 string \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmreader autoPk \u5426 bool false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 string \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 list \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/sqlitereader/#_4","text":"Addax \u5185\u90e8\u7c7b\u578b MySQL \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint, mediumint, int, bigint Double float, double, decimal String varchar, char, tinytext, text, mediumtext, longtext, year Date date, datetime, timestamp, time Boolean bit, bool Bytes tinyblob, mediumblob, blob, longblob, varbinary","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/sqlserverreader/","text":"SQLServer Reader \u00b6 SqlServerReader\u63d2\u4ef6\u7528\u4e8e\u4ece\u4eceSqlServer\u8bfb\u53d6\u6570\u636e\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 \u914d\u7f6e\u4e00\u4e2a\u4eceSqlServer\u6570\u636e\u5e93\u540c\u6b65\u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a: job/sqlserver2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"sqlserverreader\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"*\" ], \"splitPk\" : \"db_id\" , \"connection\" : [ { \"table\" : [ \"table\" ], \"jdbcUrl\" : [ \"jdbc:sqlserver://localhost:3433;DatabaseName=dbname\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true , \"encoding\" : \"UTF-8\" } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmsreader splitPk \u5426 \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmsreader autoPk \u5426 false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 fetchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b SqlServer \u6570\u636e\u7c7b\u578b Long bigint, int, smallint, tinyint Double float, decimal, real, numeric String char,nchar,ntext,nvarchar,text,varchar,nvarchar(MAX),varchar(MAX) Date date, datetime, time Boolean bit Bytes binary,varbinary,varbinary(MAX),timestamp, image \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301 timestamp\u7c7b\u578b\u4f5c\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b","title":"SQLServer Reader"},{"location":"reader/sqlserverreader/#sqlserver-reader","text":"SqlServerReader\u63d2\u4ef6\u7528\u4e8e\u4ece\u4eceSqlServer\u8bfb\u53d6\u6570\u636e\u3002","title":"SQLServer Reader"},{"location":"reader/sqlserverreader/#_1","text":"\u914d\u7f6e\u4e00\u4e2a\u4eceSqlServer\u6570\u636e\u5e93\u540c\u6b65\u62bd\u53d6\u6570\u636e\u5230\u672c\u5730\u7684\u4f5c\u4e1a: job/sqlserver2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"sqlserverreader\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"*\" ], \"splitPk\" : \"db_id\" , \"connection\" : [ { \"table\" : [ \"table\" ], \"jdbcUrl\" : [ \"jdbc:sqlserver://localhost:3433;DatabaseName=dbname\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true , \"encoding\" : \"UTF-8\" } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"reader/sqlserverreader/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmsreader splitPk \u5426 \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmsreader autoPk \u5426 false \u662f\u5426\u81ea\u52a8\u731c\u6d4b\u5206\u7247\u4e3b\u952e\uff0c 3.2.6 \u7248\u672c\u5f15\u5165 where \u5426 \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 fetchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/sqlserverreader/#_3","text":"Addax \u5185\u90e8\u7c7b\u578b SqlServer \u6570\u636e\u7c7b\u578b Long bigint, int, smallint, tinyint Double float, decimal, real, numeric String char,nchar,ntext,nvarchar,text,varchar,nvarchar(MAX),varchar(MAX) Date date, datetime, time Boolean bit Bytes binary,varbinary,varbinary(MAX),timestamp, image \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301 timestamp\u7c7b\u578b\u4f5c\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/streamreader/","text":"Stream Reader \u00b6 StreamReader \u662f\u4e00\u4e2a\u4ece\u5185\u5b58\u8bfb\u53d6\u6570\u636e\u7684\u63d2\u4ef6\uff0c \u4ed6\u4e3b\u8981\u7528\u6765\u5feb\u901f\u751f\u6210\u671f\u671b\u7684\u6570\u636e\u5e76\u5bf9\u5199\u5165\u63d2\u4ef6\u8fdb\u884c\u6d4b\u8bd5 \u4e00\u4e2a\u5b8c\u6574\u7684 StreamReader \u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\uff1a { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"unique_id\" , \"type\" : \"string\" }, { \"value\" : \"1989-06-04 08:12:13\" , \"type\" : \"date\" , \"dateFormat\" : \"yyyy-MM-dd HH:mm:ss\" }, { \"value\" : 1984 , \"type\" : \"long\" }, { \"value\" : 1989.64 , \"type\" : \"double\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"a long text\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 10 } } } \u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u5c06\u4f1a\u751f\u6210 10\u6761\u8bb0\u5f55\uff08\u5047\u5b9achannel\u4e3a1\uff09\uff0c\u6bcf\u6761\u8bb0\u5f55\u7684\u5185\u5bb9\u5982\u4e0b\uff1a unique_id,'1989-06-04 08:12:13',1984,1989.64,true,'a long text' \u76ee\u524d StreamReader \u652f\u6301\u7684\u8f93\u51fa\u6570\u636e\u7c7b\u578b\u5168\u90e8\u5217\u5728\u4e0a\u9762\uff0c\u5206\u522b\u662f\uff1a string \u5b57\u7b26\u7c7b\u578b date \u65e5\u671f\u7c7b\u578b long \u6240\u6709\u6574\u578b\u7c7b\u578b double \u6240\u6709\u6d6e\u70b9\u6570 bool \u5e03\u5c14\u7c7b\u578b bytes \u5b57\u8282\u7c7b\u578b \u5176\u4e2d date \u7c7b\u578b\u8fd8\u652f\u6301 dateFormat \u914d\u7f6e\uff0c\u7528\u6765\u6307\u5b9a\u8f93\u5165\u7684\u65e5\u671f\u7684\u683c\u5f0f\uff0c\u9ed8\u8ba4\u4e3a yyyy-MM-dd HH:mm:ss \u3002\u6bd4\u5982\u4f60\u7684\u8f93\u5165\u53ef\u4ee5\u8fd9\u6837\uff1a { \"value\" : \"1989/06/04 12:13:14\" , \"type\" : \"date\" , \"dateFormat\" : \"yyyy/MM/dd HH:mm:ss\" } \u6ce8\u610f\uff0c\u65e5\u671f\u7c7b\u578b\u4e0d\u7ba1\u8f93\u5165\u662f\u4f55\u79cd\u683c\u5f0f\uff0c\u5185\u90e8\u90fd\u8f6c\u4e3a yyyy-MM-dd HH:mm:ss \u683c\u5f0f\u3002 StreamReader \u8fd8\u652f\u6301\u968f\u673a\u8f93\u5165\u529f\u80fd\uff0c\u6bd4\u5982\u6211\u4eec\u8981\u968f\u673a\u5f97\u52300-10\u4e4b\u95f4\u7684\u4efb\u610f\u4e00\u4e2a\u6574\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e\u5217\uff1a { \"random\" : \"0,10\" , \"type\" : \"long\" } \u83b7\u5f97\u4e00\u4e2a 0 \u81f3 100 \u4e4b\u95f4\u7684\u968f\u673a\u6d6e\u70b9\u6570\uff0c\u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e\uff1a { \"random\" : \"0,100\" , \"type\" : \"double\" } \u5982\u679c\u8981\u6307\u5b9a\u6d6e\u70b9\u6570\u7684\u5c0f\u6570\u4f4d\u6570\uff0c\u6bd4\u5982\u6307\u5b9a\u5c0f\u6570\u4f4d\u4e3a2\u4f4d\uff0c\u5219\u53ef\u4ee5\u8fd9\u6837\u8bbe\u5b9a { \"random\" : \"0,100,2\" , \"type\" : \"double\" } \u6ce8\u610f\uff1a \u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6bcf\u6b21\u751f\u6210\u7684\u5c0f\u6570\u6070\u597d\u662f2\u4f4d\uff0c\u5982\u679c\u5c0f\u6570\u4e3a\u6570\u4e3a0 \uff0c\u5219\u5c0f\u6570\u4f4d\u6570\u4f1a\u5c11\u4e8e\u6307\u5b9a\u7684\u4f4d\u6570\u3002 \u8fd9\u91cc\u4f7f\u7528 random \u8fd9\u4e2a\u5173\u952e\u5b57\u6765\u8868\u793a\u5176\u503c\u4e3a\u968f\u673a\u503c\uff0c\u5176\u503c\u7684\u8303\u56f4\u4e3a\u5de6\u53f3\u95ed\u533a\u95f4\u3002 \u5176\u4ed6\u7c7b\u578b\u7684\u968f\u673a\u7c7b\u578b\u914d\u7f6e\u5982\u4e0b\uff1a long : random 0, 10 0\u523010\u4e4b\u95f4\u7684\u968f\u673a\u6570\u5b57 string : random 0, 10 0\u5230 10 \u957f\u5ea6\u4e4b\u95f4\u7684\u968f\u673a\u5b57\u7b26\u4e32 bool : random 0, 10 false \u548c true\u51fa\u73b0\u7684\u6bd4\u7387 double : random 0, 10 0\u523010\u4e4b\u95f4\u7684\u968f\u673a\u6d6e\u70b9\u6570 double : random 0, 10, 2 0\u523010\u4e4b\u95f4\u7684\u968f\u673a\u6d6e\u70b9\u6570\uff0c\u5c0f\u6570\u4f4d\u4e3a2\u4f4d date : random '2014-07-07 00:00:00', '2016-07-07 00:00:00' \u5f00\u59cb\u65f6\u95f4->\u7ed3\u675f\u65f6\u95f4\u4e4b\u95f4\u7684\u968f\u673a\u65f6\u95f4\uff0c\u65e5\u671f\u683c\u5f0f\u9ed8\u8ba4(\u4e0d\u652f\u6301\u9017\u53f7)yyyy-MM-dd HH:mm:ss BYTES : random 0, 10 0\u523010\u957f\u5ea6\u4e4b\u95f4\u7684\u968f\u673a\u5b57\u7b26\u4e32\u83b7\u53d6\u5176UTF-8\u7f16\u7801\u7684\u4e8c\u8fdb\u5236\u4e32 StreamReader \u8fd8\u652f\u6301\u9012\u589e\u51fd\u6570\uff0c\u6bd4\u5982\u6211\u4eec\u8981\u5f97\u5230\u4e00\u4e2a\u4ece1\u5f00\u59cb\uff0c\u6bcf\u6b21\u52a05\u7684\u7b49\u5dee\u6570\u5217\uff0c\u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e\uff1a { \"incr\" : \"1,5\" , \"type\" : \"long\" } \u5982\u679c\u9700\u8981\u83b7\u5f97\u4e00\u4e2a\u9012\u51cf\u7684\u6570\u5217\uff0c\u5219\u628a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u6b65\u957f\uff08\u4e0a\u4f8b\u4e2d\u76845\uff09\u6539\u4e3a\u8d1f\u6570\u5373\u53ef\u3002\u6b65\u957f\u9ed8\u8ba4\u503c\u4e3a1\u3002 \u9012\u589e\u8fd8\u652f\u6301\u65e5\u671f\u7c7b\u578b( 4.0.1 \u7248\u672c\u5f15\u5165)\uff0c\u6bd4\u5982\u4e0b\u9762\u7684\u914d\u7f6e\uff1a { \"incr\" : \"1989-06-04 09:01:02,2,d\" , \"type\" : \"date\" } incr \u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff0c\u5206\u522b\u662f\u5f00\u59cb\u65e5\u671f\uff0c\u6b65\u957f\u4ee5\u53ca\u6b65\u957f\u5355\u4f4d\uff0c\u4e2d\u95f4\u7528\u82f1\u6587\u9017\u53f7(,)\u5206\u9694\u3002 \u5f00\u59cb\u65e5\u671f\uff1a\u6b63\u786e\u7684\u65e5\u671f\u5b57\u7b26\u4e32\uff0c\u9ed8\u8ba4\u683c\u5f0f\u4e3a yyyy-MM-dd hh:mm:ss \uff0c\u5982\u679c\u65f6\u95f4\u683c\u5f0f\u4e0d\u540c\uff0c\u5219\u9700\u8981\u914d\u7f6e dateFormat \u6765\u6307\u5b9a\u65e5\u671f\u683c\u5f0f\uff0c\u8fd9\u662f\u5fc5\u586b\u9879 \u6b65\u957f\uff1a\u6bcf\u6b21\u9700\u8981\u589e\u52a0\u7684\u957f\u5ea6\uff0c\u9ed8\u8ba4\u4e3a1\uff0c\u5982\u679c\u5e0c\u671b\u662f\u9012\u51cf\uff0c\u5219\u586b\u5199\u8d1f\u6570\uff0c\u8fd9\u662f\u53ef\u9009\u9879 \u6b65\u957f\u5355\u4f4d\uff1a\u6309\u4ec0\u4e48\u65f6\u95f4\u5355\u4f4d\u8fdb\u884c\u9012\u589e/\u9012\u51cf\uff0c\u9ed8\u8ba4\u4e3a\u6309\u5929\uff08day\uff09\uff0c\u8fd9\u662f\u53ef\u9009\u9879\uff0c\u53ef\u9009\u7684\u5355\u4f4d\u6709 d/day M/month y/year h/hour m/minute s/second w/week \u914d\u7f6e\u9879 sliceRecordCount \u7528\u6765\u6307\u5b9a\u8981\u751f\u6210\u7684\u6570\u636e\u6761\u6570\uff0c\u5982\u679c\u6307\u5b9a\u7684 channel \uff0c\u5219\u5b9e\u9645\u751f\u6210\u7684\u8bb0\u5f55\u6570\u4e3a sliceRecordCount * channel","title":"Stream Reader"},{"location":"reader/streamreader/#stream-reader","text":"StreamReader \u662f\u4e00\u4e2a\u4ece\u5185\u5b58\u8bfb\u53d6\u6570\u636e\u7684\u63d2\u4ef6\uff0c \u4ed6\u4e3b\u8981\u7528\u6765\u5feb\u901f\u751f\u6210\u671f\u671b\u7684\u6570\u636e\u5e76\u5bf9\u5199\u5165\u63d2\u4ef6\u8fdb\u884c\u6d4b\u8bd5 \u4e00\u4e2a\u5b8c\u6574\u7684 StreamReader \u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\uff1a { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"unique_id\" , \"type\" : \"string\" }, { \"value\" : \"1989-06-04 08:12:13\" , \"type\" : \"date\" , \"dateFormat\" : \"yyyy-MM-dd HH:mm:ss\" }, { \"value\" : 1984 , \"type\" : \"long\" }, { \"value\" : 1989.64 , \"type\" : \"double\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"a long text\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 10 } } } \u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u5c06\u4f1a\u751f\u6210 10\u6761\u8bb0\u5f55\uff08\u5047\u5b9achannel\u4e3a1\uff09\uff0c\u6bcf\u6761\u8bb0\u5f55\u7684\u5185\u5bb9\u5982\u4e0b\uff1a unique_id,'1989-06-04 08:12:13',1984,1989.64,true,'a long text' \u76ee\u524d StreamReader \u652f\u6301\u7684\u8f93\u51fa\u6570\u636e\u7c7b\u578b\u5168\u90e8\u5217\u5728\u4e0a\u9762\uff0c\u5206\u522b\u662f\uff1a string \u5b57\u7b26\u7c7b\u578b date \u65e5\u671f\u7c7b\u578b long \u6240\u6709\u6574\u578b\u7c7b\u578b double \u6240\u6709\u6d6e\u70b9\u6570 bool \u5e03\u5c14\u7c7b\u578b bytes \u5b57\u8282\u7c7b\u578b \u5176\u4e2d date \u7c7b\u578b\u8fd8\u652f\u6301 dateFormat \u914d\u7f6e\uff0c\u7528\u6765\u6307\u5b9a\u8f93\u5165\u7684\u65e5\u671f\u7684\u683c\u5f0f\uff0c\u9ed8\u8ba4\u4e3a yyyy-MM-dd HH:mm:ss \u3002\u6bd4\u5982\u4f60\u7684\u8f93\u5165\u53ef\u4ee5\u8fd9\u6837\uff1a { \"value\" : \"1989/06/04 12:13:14\" , \"type\" : \"date\" , \"dateFormat\" : \"yyyy/MM/dd HH:mm:ss\" } \u6ce8\u610f\uff0c\u65e5\u671f\u7c7b\u578b\u4e0d\u7ba1\u8f93\u5165\u662f\u4f55\u79cd\u683c\u5f0f\uff0c\u5185\u90e8\u90fd\u8f6c\u4e3a yyyy-MM-dd HH:mm:ss \u683c\u5f0f\u3002 StreamReader \u8fd8\u652f\u6301\u968f\u673a\u8f93\u5165\u529f\u80fd\uff0c\u6bd4\u5982\u6211\u4eec\u8981\u968f\u673a\u5f97\u52300-10\u4e4b\u95f4\u7684\u4efb\u610f\u4e00\u4e2a\u6574\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e\u5217\uff1a { \"random\" : \"0,10\" , \"type\" : \"long\" } \u83b7\u5f97\u4e00\u4e2a 0 \u81f3 100 \u4e4b\u95f4\u7684\u968f\u673a\u6d6e\u70b9\u6570\uff0c\u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e\uff1a { \"random\" : \"0,100\" , \"type\" : \"double\" } \u5982\u679c\u8981\u6307\u5b9a\u6d6e\u70b9\u6570\u7684\u5c0f\u6570\u4f4d\u6570\uff0c\u6bd4\u5982\u6307\u5b9a\u5c0f\u6570\u4f4d\u4e3a2\u4f4d\uff0c\u5219\u53ef\u4ee5\u8fd9\u6837\u8bbe\u5b9a { \"random\" : \"0,100,2\" , \"type\" : \"double\" } \u6ce8\u610f\uff1a \u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6bcf\u6b21\u751f\u6210\u7684\u5c0f\u6570\u6070\u597d\u662f2\u4f4d\uff0c\u5982\u679c\u5c0f\u6570\u4e3a\u6570\u4e3a0 \uff0c\u5219\u5c0f\u6570\u4f4d\u6570\u4f1a\u5c11\u4e8e\u6307\u5b9a\u7684\u4f4d\u6570\u3002 \u8fd9\u91cc\u4f7f\u7528 random \u8fd9\u4e2a\u5173\u952e\u5b57\u6765\u8868\u793a\u5176\u503c\u4e3a\u968f\u673a\u503c\uff0c\u5176\u503c\u7684\u8303\u56f4\u4e3a\u5de6\u53f3\u95ed\u533a\u95f4\u3002 \u5176\u4ed6\u7c7b\u578b\u7684\u968f\u673a\u7c7b\u578b\u914d\u7f6e\u5982\u4e0b\uff1a long : random 0, 10 0\u523010\u4e4b\u95f4\u7684\u968f\u673a\u6570\u5b57 string : random 0, 10 0\u5230 10 \u957f\u5ea6\u4e4b\u95f4\u7684\u968f\u673a\u5b57\u7b26\u4e32 bool : random 0, 10 false \u548c true\u51fa\u73b0\u7684\u6bd4\u7387 double : random 0, 10 0\u523010\u4e4b\u95f4\u7684\u968f\u673a\u6d6e\u70b9\u6570 double : random 0, 10, 2 0\u523010\u4e4b\u95f4\u7684\u968f\u673a\u6d6e\u70b9\u6570\uff0c\u5c0f\u6570\u4f4d\u4e3a2\u4f4d date : random '2014-07-07 00:00:00', '2016-07-07 00:00:00' \u5f00\u59cb\u65f6\u95f4->\u7ed3\u675f\u65f6\u95f4\u4e4b\u95f4\u7684\u968f\u673a\u65f6\u95f4\uff0c\u65e5\u671f\u683c\u5f0f\u9ed8\u8ba4(\u4e0d\u652f\u6301\u9017\u53f7)yyyy-MM-dd HH:mm:ss BYTES : random 0, 10 0\u523010\u957f\u5ea6\u4e4b\u95f4\u7684\u968f\u673a\u5b57\u7b26\u4e32\u83b7\u53d6\u5176UTF-8\u7f16\u7801\u7684\u4e8c\u8fdb\u5236\u4e32 StreamReader \u8fd8\u652f\u6301\u9012\u589e\u51fd\u6570\uff0c\u6bd4\u5982\u6211\u4eec\u8981\u5f97\u5230\u4e00\u4e2a\u4ece1\u5f00\u59cb\uff0c\u6bcf\u6b21\u52a05\u7684\u7b49\u5dee\u6570\u5217\uff0c\u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e\uff1a { \"incr\" : \"1,5\" , \"type\" : \"long\" } \u5982\u679c\u9700\u8981\u83b7\u5f97\u4e00\u4e2a\u9012\u51cf\u7684\u6570\u5217\uff0c\u5219\u628a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u6b65\u957f\uff08\u4e0a\u4f8b\u4e2d\u76845\uff09\u6539\u4e3a\u8d1f\u6570\u5373\u53ef\u3002\u6b65\u957f\u9ed8\u8ba4\u503c\u4e3a1\u3002 \u9012\u589e\u8fd8\u652f\u6301\u65e5\u671f\u7c7b\u578b( 4.0.1 \u7248\u672c\u5f15\u5165)\uff0c\u6bd4\u5982\u4e0b\u9762\u7684\u914d\u7f6e\uff1a { \"incr\" : \"1989-06-04 09:01:02,2,d\" , \"type\" : \"date\" } incr \u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff0c\u5206\u522b\u662f\u5f00\u59cb\u65e5\u671f\uff0c\u6b65\u957f\u4ee5\u53ca\u6b65\u957f\u5355\u4f4d\uff0c\u4e2d\u95f4\u7528\u82f1\u6587\u9017\u53f7(,)\u5206\u9694\u3002 \u5f00\u59cb\u65e5\u671f\uff1a\u6b63\u786e\u7684\u65e5\u671f\u5b57\u7b26\u4e32\uff0c\u9ed8\u8ba4\u683c\u5f0f\u4e3a yyyy-MM-dd hh:mm:ss \uff0c\u5982\u679c\u65f6\u95f4\u683c\u5f0f\u4e0d\u540c\uff0c\u5219\u9700\u8981\u914d\u7f6e dateFormat \u6765\u6307\u5b9a\u65e5\u671f\u683c\u5f0f\uff0c\u8fd9\u662f\u5fc5\u586b\u9879 \u6b65\u957f\uff1a\u6bcf\u6b21\u9700\u8981\u589e\u52a0\u7684\u957f\u5ea6\uff0c\u9ed8\u8ba4\u4e3a1\uff0c\u5982\u679c\u5e0c\u671b\u662f\u9012\u51cf\uff0c\u5219\u586b\u5199\u8d1f\u6570\uff0c\u8fd9\u662f\u53ef\u9009\u9879 \u6b65\u957f\u5355\u4f4d\uff1a\u6309\u4ec0\u4e48\u65f6\u95f4\u5355\u4f4d\u8fdb\u884c\u9012\u589e/\u9012\u51cf\uff0c\u9ed8\u8ba4\u4e3a\u6309\u5929\uff08day\uff09\uff0c\u8fd9\u662f\u53ef\u9009\u9879\uff0c\u53ef\u9009\u7684\u5355\u4f4d\u6709 d/day M/month y/year h/hour m/minute s/second w/week \u914d\u7f6e\u9879 sliceRecordCount \u7528\u6765\u6307\u5b9a\u8981\u751f\u6210\u7684\u6570\u636e\u6761\u6570\uff0c\u5982\u679c\u6307\u5b9a\u7684 channel \uff0c\u5219\u5b9e\u9645\u751f\u6210\u7684\u8bb0\u5f55\u6570\u4e3a sliceRecordCount * channel","title":"Stream Reader"},{"location":"reader/tdenginereader/","text":"TDengine Reader \u00b6 TDengineReader \u63d2\u4ef6\u7528\u4e8e\u4ece\u6d9b\u601d\u516c\u53f8\u7684 TDengine \u8bfb\u53d6\u6570\u636e\u3002 \u524d\u7f6e\u6761\u4ef6 \u00b6 \u8003\u8651\u5230\u6027\u80fd\u95ee\u9898\uff0c\u8be5\u63d2\u4ef6\u4f7f\u7528\u4e86 TDengine \u7684 JDBC-JNI \u9a71\u52a8\uff0c \u8be5\u9a71\u52a8\u76f4\u63a5\u8c03\u7528\u5ba2\u6237\u7aef API\uff08 libtaos.so \u6216 taos.dll \uff09\u5c06\u5199\u5165\u548c\u67e5\u8be2\u8bf7\u6c42\u53d1\u9001\u5230 taosd \u5b9e\u4f8b\u3002\u56e0\u6b64\u5728\u4f7f\u7528\u4e4b\u524d\u9700\u8981\u914d\u7f6e\u597d\u52a8\u6001\u5e93\u94fe\u63a5\u6587\u4ef6\u3002 \u9996\u5148\u5c06 plugin/reader/tdenginereader/libs/libtaos.so.2.0.16.0 \u62f7\u8d1d\u5230 /usr/lib64 \u76ee\u5f55\uff0c\u7136\u540e\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u521b\u5efa\u8f6f\u94fe\u63a5 ln -sf /usr/lib64/libtaos.so.2.0.16.0 /usr/lib64/libtaos.so.1 ln -sf /usr/lib64/libtaos.so.1 /usr/lib64/libtaos.so \u793a\u4f8b \u00b6 TDengine \u6570\u636e\u81ea\u5e26\u4e86\u4e00\u4e2a\u6f14\u793a\u6570\u636e\u5e93 taosdemo , \u6211\u4eec\u4ece\u6f14\u793a\u6570\u636e\u5e93\u8bfb\u53d6\u90e8\u5206\u6570\u636e\u5e76\u6253\u5370\u5230\u7ec8\u7aef \u4ee5\u4e0b\u662f\u914d\u7f6e\u6587\u4ef6 job/tdengine2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 3 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"tdenginereader\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"taosdata\" , \"connection\" : [ { \"jdbcUrl\" : [ \"jdbc:TAOS://127.0.0.1:6030/test\" ], \"querySql\" : [ \"select * from test.meters where ts <'2017-07-14 10:40:02' and loc='beijing' limit 10\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/tdengine2stream.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/tdengine2stream.json \u547d\u4ee4\u8f93\u51fa\u7c7b\u4f3c\u5982\u4e0b\uff1a 2021-02-20 15:32:23.161 [main] INFO VMInfo - VMInfo# operatingSystem class => sun.management.OperatingSystemImpl 2021-02-20 15:32:23.229 [main] INFO Engine - { \"content\": { \"reader\":{ \"parameter\":{ \"password\":\"*****\", \"connection\":[ { \"querySql\":[ \"select * from test.meters where ts <'2017-07-14 10:40:02' and loc='beijing' limit 100\" ], \"jdbcUrl\":[ \"jdbc:TAOS://127.0.0.1:6030/test\" ] } ], \"username\":\"root\" }, \"name\":\"tdenginereader\" }, \"writer\":{ \"parameter\":{ \"print\":true }, \"name\":\"streamwriter\" } }, \"setting\":{ \"errorLimit\":{ \"record\":0, \"percentage\":0.02 }, \"speed\":{ \"channel\":3 } } } 2021-02-20 15:32:23.277 [main] INFO PerfTrace - PerfTrace traceId=job_-1, isEnable=false, priority=0 2021-02-20 15:32:23.278 [main] INFO JobContainer - Addax jobContainer starts job. 2021-02-20 15:32:23.281 [main] INFO JobContainer - Set jobId = 0 java.library.path:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib .... 2021-02-20 15:32:23.687 [0-0-0-reader] INFO CommonRdbmsReader$Task - Begin to read record by Sql: [select * from test.meters where ts <'2017-07-14 10:40:02' and loc='beijing' limit 100 ] jdbcUrl:[jdbc:TAOS://127.0.0.1:6030/test]. 2021-02-20 15:32:23.692 [0-0-0-reader] WARN DBUtil - current database does not supoort TYPE_FORWARD_ONLY/CONCUR_READ_ONLY 2021-02-20 15:32:23.740 [0-0-0-reader] INFO CommonRdbmsReader$Task - Finished read record by Sql: [select * from test.meters where ts <'2017-07-14 10:40:02' and loc='beijing' limit 100 ] jdbcUrl:[jdbc:TAOS://127.0.0.1:6030/test]. 1500000001000 5 5 0 1 beijing 1500000001000 0 6 2 1 beijing 1500000001000 7 0 0 1 beijing 1500000001000 8 9 6 1 beijing 1500000001000 9 9 1 1 beijing 1500000001000 8 2 0 1 beijing 1500000001000 4 5 5 3 beijing 1500000001000 3 3 3 3 beijing 1500000001000 5 4 8 3 beijing 1500000001000 9 4 6 3 beijing 2021-02-20 15:32:26.689 [job-0] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-02-20 15:32:23 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-02-20 15:32:26 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 800B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 33rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 100 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684 TAOS \u5fc5\u987b\u5927\u5199 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0 rdbmreader where \u5426 string \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 list \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879 \u4f7f\u7528 JDBC-RESTful \u63a5\u53e3 \u00b6 \u5982\u679c\u4e0d\u60f3\u4f9d\u8d56\u672c\u5730\u5e93\uff0c\u6216\u8005\u6ca1\u6709\u6743\u9650\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 JDBC-RESTful \u63a5\u53e3\u6765\u5199\u5165\u8868\uff0c\u76f8\u6bd4 JDBC-JNI \u800c\u8a00\uff0c\u914d\u7f6e\u533a\u522b\u662f\uff1a driverClass \u6307\u5b9a\u4e3a com.taosdata.jdbc.rs.RestfulDriver jdbcUrl \u4ee5 jdbc:TAOS-RS:// \u5f00\u5934\uff1b \u4f7f\u7528 6041 \u4f5c\u4e3a\u8fde\u63a5\u7aef\u53e3 \u6240\u4ee5\u4e0a\u8ff0\u914d\u7f6e\u4e2d\u7684 connection \u5e94\u8be5\u4fee\u6539\u4e3a\u5982\u4e0b\uff1a { \"connection\" : [ { \"querySql\" : [ \"select * from test.meters where ts <'2017-07-14 10:40:02' and loc='beijing' limit 100\" ], \"jdbcUrl\" : [ \"jdbc:TAOS-RS://127.0.0.1:6041/test\" ], \"driver\" : \"com.taosdata.jdbc.rs.RestfulDriver\" } ] } \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b TDengine \u6570\u636e\u7c7b\u578b Long SMALLINT, TINYINT, INT, BIGINT, TIMESTAMP Double FLOAT, DOUBLE String BINARY, NCHAR Boolean BOOL \u5f53\u524d\u652f\u6301\u7248\u672c \u00b6 TDengine 2.0.16 \u6ce8\u610f\u4e8b\u9879 \u00b6 TDengine JDBC-JNI \u9a71\u52a8\u548c\u52a8\u6001\u5e93\u7248\u672c\u8981\u6c42\u4e00\u4e00\u5339\u914d\uff0c\u56e0\u6b64\u5982\u679c\u4f60\u7684\u6570\u636e\u7248\u672c\u5e76\u4e0d\u662f 2.0.16 \uff0c\u5219\u9700\u8981\u540c\u65f6\u66ff\u6362\u52a8\u6001\u5e93\u548c\u63d2\u4ef6\u76ee\u5f55\u4e2d\u7684JDBC\u9a71\u52a8","title":"TDengine Reader"},{"location":"reader/tdenginereader/#tdengine-reader","text":"TDengineReader \u63d2\u4ef6\u7528\u4e8e\u4ece\u6d9b\u601d\u516c\u53f8\u7684 TDengine \u8bfb\u53d6\u6570\u636e\u3002","title":"TDengine Reader"},{"location":"reader/tdenginereader/#_1","text":"\u8003\u8651\u5230\u6027\u80fd\u95ee\u9898\uff0c\u8be5\u63d2\u4ef6\u4f7f\u7528\u4e86 TDengine \u7684 JDBC-JNI \u9a71\u52a8\uff0c \u8be5\u9a71\u52a8\u76f4\u63a5\u8c03\u7528\u5ba2\u6237\u7aef API\uff08 libtaos.so \u6216 taos.dll \uff09\u5c06\u5199\u5165\u548c\u67e5\u8be2\u8bf7\u6c42\u53d1\u9001\u5230 taosd \u5b9e\u4f8b\u3002\u56e0\u6b64\u5728\u4f7f\u7528\u4e4b\u524d\u9700\u8981\u914d\u7f6e\u597d\u52a8\u6001\u5e93\u94fe\u63a5\u6587\u4ef6\u3002 \u9996\u5148\u5c06 plugin/reader/tdenginereader/libs/libtaos.so.2.0.16.0 \u62f7\u8d1d\u5230 /usr/lib64 \u76ee\u5f55\uff0c\u7136\u540e\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u521b\u5efa\u8f6f\u94fe\u63a5 ln -sf /usr/lib64/libtaos.so.2.0.16.0 /usr/lib64/libtaos.so.1 ln -sf /usr/lib64/libtaos.so.1 /usr/lib64/libtaos.so","title":"\u524d\u7f6e\u6761\u4ef6"},{"location":"reader/tdenginereader/#_2","text":"TDengine \u6570\u636e\u81ea\u5e26\u4e86\u4e00\u4e2a\u6f14\u793a\u6570\u636e\u5e93 taosdemo , \u6211\u4eec\u4ece\u6f14\u793a\u6570\u636e\u5e93\u8bfb\u53d6\u90e8\u5206\u6570\u636e\u5e76\u6253\u5370\u5230\u7ec8\u7aef \u4ee5\u4e0b\u662f\u914d\u7f6e\u6587\u4ef6 job/tdengine2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 3 }, \"errorLimit\" : { \"record\" : 0 , \"percentage\" : 0.02 } }, \"content\" : { \"reader\" : { \"name\" : \"tdenginereader\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"taosdata\" , \"connection\" : [ { \"jdbcUrl\" : [ \"jdbc:TAOS://127.0.0.1:6030/test\" ], \"querySql\" : [ \"select * from test.meters where ts <'2017-07-14 10:40:02' and loc='beijing' limit 10\" ] } ] } }, \"writer\" : { \"name\" : \"streamwriter\" , \"parameter\" : { \"print\" : true } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/tdengine2stream.json","title":"\u793a\u4f8b"},{"location":"reader/tdenginereader/#_3","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/tdengine2stream.json \u547d\u4ee4\u8f93\u51fa\u7c7b\u4f3c\u5982\u4e0b\uff1a 2021-02-20 15:32:23.161 [main] INFO VMInfo - VMInfo# operatingSystem class => sun.management.OperatingSystemImpl 2021-02-20 15:32:23.229 [main] INFO Engine - { \"content\": { \"reader\":{ \"parameter\":{ \"password\":\"*****\", \"connection\":[ { \"querySql\":[ \"select * from test.meters where ts <'2017-07-14 10:40:02' and loc='beijing' limit 100\" ], \"jdbcUrl\":[ \"jdbc:TAOS://127.0.0.1:6030/test\" ] } ], \"username\":\"root\" }, \"name\":\"tdenginereader\" }, \"writer\":{ \"parameter\":{ \"print\":true }, \"name\":\"streamwriter\" } }, \"setting\":{ \"errorLimit\":{ \"record\":0, \"percentage\":0.02 }, \"speed\":{ \"channel\":3 } } } 2021-02-20 15:32:23.277 [main] INFO PerfTrace - PerfTrace traceId=job_-1, isEnable=false, priority=0 2021-02-20 15:32:23.278 [main] INFO JobContainer - Addax jobContainer starts job. 2021-02-20 15:32:23.281 [main] INFO JobContainer - Set jobId = 0 java.library.path:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib .... 2021-02-20 15:32:23.687 [0-0-0-reader] INFO CommonRdbmsReader$Task - Begin to read record by Sql: [select * from test.meters where ts <'2017-07-14 10:40:02' and loc='beijing' limit 100 ] jdbcUrl:[jdbc:TAOS://127.0.0.1:6030/test]. 2021-02-20 15:32:23.692 [0-0-0-reader] WARN DBUtil - current database does not supoort TYPE_FORWARD_ONLY/CONCUR_READ_ONLY 2021-02-20 15:32:23.740 [0-0-0-reader] INFO CommonRdbmsReader$Task - Finished read record by Sql: [select * from test.meters where ts <'2017-07-14 10:40:02' and loc='beijing' limit 100 ] jdbcUrl:[jdbc:TAOS://127.0.0.1:6030/test]. 1500000001000 5 5 0 1 beijing 1500000001000 0 6 2 1 beijing 1500000001000 7 0 0 1 beijing 1500000001000 8 9 6 1 beijing 1500000001000 9 9 1 1 beijing 1500000001000 8 2 0 1 beijing 1500000001000 4 5 5 3 beijing 1500000001000 3 3 3 3 beijing 1500000001000 5 4 8 3 beijing 1500000001000 9 4 6 3 beijing 2021-02-20 15:32:26.689 [job-0] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-02-20 15:32:23 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-02-20 15:32:26 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 800B/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 33rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 100 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"reader/tdenginereader/#_4","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684 TAOS \u5fc5\u987b\u5927\u5199 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0 rdbmreader where \u5426 string \u65e0 \u9488\u5bf9\u8868\u7684\u7b5b\u9009\u6761\u4ef6 querySql \u5426 list \u65e0 \u4f7f\u7528\u81ea\u5b9a\u4e49\u7684SQL\u800c\u4e0d\u662f\u6307\u5b9a\u8868\u6765\u83b7\u53d6\u6570\u636e\uff0c\u5f53\u914d\u7f6e\u4e86\u8fd9\u4e00\u9879\u4e4b\u540e\uff0cAddax\u7cfb\u7edf\u5c31\u4f1a\u5ffd\u7565 table \uff0c column \u8fd9\u4e9b\u914d\u7f6e\u9879","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/tdenginereader/#jdbc-restful","text":"\u5982\u679c\u4e0d\u60f3\u4f9d\u8d56\u672c\u5730\u5e93\uff0c\u6216\u8005\u6ca1\u6709\u6743\u9650\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 JDBC-RESTful \u63a5\u53e3\u6765\u5199\u5165\u8868\uff0c\u76f8\u6bd4 JDBC-JNI \u800c\u8a00\uff0c\u914d\u7f6e\u533a\u522b\u662f\uff1a driverClass \u6307\u5b9a\u4e3a com.taosdata.jdbc.rs.RestfulDriver jdbcUrl \u4ee5 jdbc:TAOS-RS:// \u5f00\u5934\uff1b \u4f7f\u7528 6041 \u4f5c\u4e3a\u8fde\u63a5\u7aef\u53e3 \u6240\u4ee5\u4e0a\u8ff0\u914d\u7f6e\u4e2d\u7684 connection \u5e94\u8be5\u4fee\u6539\u4e3a\u5982\u4e0b\uff1a { \"connection\" : [ { \"querySql\" : [ \"select * from test.meters where ts <'2017-07-14 10:40:02' and loc='beijing' limit 100\" ], \"jdbcUrl\" : [ \"jdbc:TAOS-RS://127.0.0.1:6041/test\" ], \"driver\" : \"com.taosdata.jdbc.rs.RestfulDriver\" } ] }","title":"\u4f7f\u7528 JDBC-RESTful \u63a5\u53e3"},{"location":"reader/tdenginereader/#_5","text":"Addax \u5185\u90e8\u7c7b\u578b TDengine \u6570\u636e\u7c7b\u578b Long SMALLINT, TINYINT, INT, BIGINT, TIMESTAMP Double FLOAT, DOUBLE String BINARY, NCHAR Boolean BOOL","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"reader/tdenginereader/#_6","text":"TDengine 2.0.16","title":"\u5f53\u524d\u652f\u6301\u7248\u672c"},{"location":"reader/tdenginereader/#_7","text":"TDengine JDBC-JNI \u9a71\u52a8\u548c\u52a8\u6001\u5e93\u7248\u672c\u8981\u6c42\u4e00\u4e00\u5339\u914d\uff0c\u56e0\u6b64\u5982\u679c\u4f60\u7684\u6570\u636e\u7248\u672c\u5e76\u4e0d\u662f 2.0.16 \uff0c\u5219\u9700\u8981\u540c\u65f6\u66ff\u6362\u52a8\u6001\u5e93\u548c\u63d2\u4ef6\u76ee\u5f55\u4e2d\u7684JDBC\u9a71\u52a8","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"reader/txtfilereader/","text":"TxtFile Reader \u00b6 TxtFileReader \u63d0\u4f9b\u4e86\u8bfb\u53d6\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u6570\u636e\u5b58\u50a8\u7684\u80fd\u529b\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 job/txtfile2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"txtfilereader\" , \"parameter\" : { \"path\" : [ \"/tmp/data\" ], \"encoding\" : \"UTF-8\" , \"column\" : [ { \"index\" : 0 , \"type\" : \"long\" }, { \"index\" : 1 , \"type\" : \"boolean\" }, { \"index\" : 2 , \"type\" : \"double\" }, { \"index\" : 3 , \"type\" : \"string\" }, { \"index\" : 4 , \"type\" : \"date\" , \"format\" : \"yyyy.MM.dd\" } ], \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/tmp/result\" , \"fileName\" : \"txt_\" , \"writeMode\" : \"truncate\" , \"format\" : \"yyyy-MM-dd\" } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f \u65e0 \u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84,\u8be6\u7ec6\u63cf\u8ff0\u89c1\u4e0b\u6587 column \u662f \u65e0 \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c\u8be6\u89c1\u4e0b\u6587 fieldDelimiter \u662f , \u63cf\u8ff0\uff1a\u8bfb\u53d6\u7684\u5b57\u6bb5\u5206\u9694\u7b26 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e skipHeader \u5426 false \u7c7bCSV\u683c\u5f0f\u6587\u4ef6\u53ef\u80fd\u5b58\u5728\u8868\u5934\u4e3a\u6807\u9898\u60c5\u51b5\uff0c\u9700\u8981\u8df3\u8fc7\u3002\u9ed8\u8ba4\u4e0d\u8df3\u8fc7 csvReaderConfig \u5426 \u65e0 \u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u53c2\u6570\u914d\u7f6e\uff0cMap\u7c7b\u578b\u3002\u4e0d\u914d\u7f6e\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c,\u8be6\u89c1\u4e0b\u6587 path \u00b6 \u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84\u3002 \u5f53\u6307\u5b9a\u5355\u4e2a\u672c\u5730\u6587\u4ef6\uff0cTxtFileReader\u6682\u65f6\u53ea\u80fd\u4f7f\u7528\u5355\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u4e8c\u671f\u8003\u8651\u5728\u975e\u538b\u7f29\u6587\u4ef6\u60c5\u51b5\u4e0b\u9488\u5bf9\u5355\u4e2aFile\u53ef\u4ee5\u8fdb\u884c\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6 \u5f53\u6307\u5b9a\u591a\u4e2a\u672c\u5730\u6587\u4ef6\uff0cTxtFileReader\u652f\u6301\u4f7f\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u7ebf\u7a0b\u5e76\u53d1\u6570\u901a\u8fc7\u901a\u9053\u6570\u6307\u5b9a \u5f53\u6307\u5b9a\u901a\u914d\u7b26\uff0cTxtFileReader\u5c1d\u8bd5\u904d\u5386\u51fa\u591a\u4e2a\u6587\u4ef6\u4fe1\u606f\u3002\u4f8b\u5982: \u6307\u5b9a /* \u4ee3\u8868\u8bfb\u53d6 / \u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\uff0c\u6307\u5b9a /bazhen/* \u4ee3\u8868\u8bfb\u53d6 bazhen \u76ee\u5f55\u4e0b\u6e38\u6240\u6709\u7684\u6587\u4ef6\u3002\u76ee\u524d\u53ea\u652f\u6301 * \u4f5c\u4e3a\u6587\u4ef6\u901a\u914d\u7b26\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cAddax\u4f1a\u5c06\u4e00\u4e2a\u4f5c\u4e1a\u4e0b\u540c\u6b65\u7684\u6240\u6709Text File\u89c6\u4f5c\u540c\u4e00\u5f20\u6570\u636e\u8868\u3002\u7528\u6237\u5fc5\u987b\u81ea\u5df1\u4fdd\u8bc1\u6240\u6709\u7684File\u80fd\u591f\u9002\u914d\u540c\u4e00\u5957schema\u4fe1\u606f\u3002\u8bfb\u53d6\u6587\u4ef6\u7528\u6237\u5fc5\u987b\u4fdd\u8bc1\u4e3a\u7c7bCSV\u683c\u5f0f\uff0c\u5e76\u4e14\u63d0\u4f9b\u7ed9Addax\u6743\u9650\u53ef\u8bfb\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679cPath\u6307\u5b9a\u7684\u8def\u5f84\u4e0b\u6ca1\u6709\u7b26\u5408\u5339\u914d\u7684\u6587\u4ef6\u62bd\u53d6\uff0cAddax\u5c06\u62a5\u9519\u3002 \u4ece 3.2.3 \u7248\u672c\u8d77\uff0c path \u4e0b\u5141\u8bb8\u6df7\u5408\u4e0d\u540c\u538b\u7f29\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u63d2\u4ef6\u4f1a\u5c1d\u8bd5\u81ea\u52a8\u731c\u6d4b\u538b\u7f29\u683c\u5f0f\u5e76\u81ea\u52a8\u89e3\u538b\uff0c\u76ee\u524d\u652f\u6301\u7684\u538b\u7f29\u683c\u5f0f\u6709\uff1a zip bzip2 gzip LZ4 PACK200 XZ Compress column \u00b6 \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0cindex\u6307\u5b9a\u5f53\u524d\u5217\u6765\u81ea\u4e8e\u6587\u672c\u7b2c\u51e0\u5217(\u4ee50\u5f00\u59cb)\uff0cvalue\u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece\u6e90\u5934\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636evalue\u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u53ef\u4ee5\u5168\u90e8\u6309\u7167String\u7c7b\u578b\u8bfb\u53d6\u6570\u636e\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"column\" : [ \"*\" ] } \u7528\u6237\u53ef\u4ee5\u6307\u5b9aColumn\u5b57\u6bb5\u4fe1\u606f\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a [ { \"type\" : \"long\" , \"index\" : 0 }, { \"type\" : \"string\" , \"value\" : \"alibaba\" } ] \u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cindex/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002 \u4ece 4.0.1 \u5f00\u59cb\uff0c\u8868\u793a\u5b57\u6bb5\u9664\u4e86\u4f7f\u7528 index \u6765\u6307\u5b9a\u5b57\u6bb5\u7684\u987a\u5e8f\u5916\uff0c\u8fd8\u652f\u6301 name \u65b9\u5f0f\uff0c\u8fd9\u9700\u8981\u6240\u8bfb\u53d6\u7684\u6587\u4ef6\u7684\u90fd\u5305\u542b\u4e86\u6587\u4ef6\u5934\uff0c\u63d2\u4ef6\u4f1a\u5c1d\u8bd5\u5c06\u6307\u5b9a\u7684 name \u53bb\u5339\u914d\u4ece\u6587\u4ef6\u8bfb\u53d6\u7684\u6587\u4ef6\u5934\uff0c \u7136\u540e\u5f97\u5230\u5bf9\u5e94\u7684 index \u503c\uff0c\u5e76\u56de\u5199\u5230 \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002\u540c\u65f6\uff0c index \u548c name \u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u5217\u4e0a\u8fdb\u884c\u6df7\u5408\u4f7f\u7528\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u6837\uff1a [ { \"type\" : \"long\" , \"index\" : 0 }, { \"name\" : \"region\" , \"type\" : \"string\" }, { \"type\" : \"string\" , \"value\" : \"alibaba\" } ] \u6ce8\uff1a \u8fd9\u79cd\u65b9\u5f0f\u4ee5\u4e3a\u8fd9\u5728\u51c6\u5907\u9636\u6bb5\u5c31\u8981\u5c1d\u8bd5\u8bfb\u53d6\u6587\u4ef6\uff0c\u56e0\u4e3a\u4f1a\u6709\u4e00\u5b9a\u7684\u6027\u80fd\u635f\u5931\uff0c\u5982\u975e\u5fc5\u8981\uff0c\u4e0d\u5efa\u8bae\u914d\u7f6e name \u65b9\u5f0f\u3002 csvReaderConfig \u00b6 \u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u53c2\u6570\u914d\u7f6e\uff0cMap\u7c7b\u578b\u3002\u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u4f7f\u7528\u7684CsvReader\u8fdb\u884c\u8bfb\u53d6\uff0c\u4f1a\u6709\u5f88\u591a\u914d\u7f6e\uff0c\u4e0d\u914d\u7f6e\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 \u5e38\u89c1\u914d\u7f6e\uff1a { \"csvReaderConfig\" : { \"safetySwitch\" : false , \"skipEmptyRecords\" : false , \"useTextQualifier\" : false } } \u6240\u6709\u914d\u7f6e\u9879\u53ca\u9ed8\u8ba4\u503c,\u914d\u7f6e\u65f6 csvReaderConfig \u7684map\u4e2d\u8bf7**\u4e25\u683c\u6309\u7167\u4ee5\u4e0b\u5b57\u6bb5\u540d\u5b57\u8fdb\u884c\u914d\u7f6e**\uff1a boolean caseSensitive = true; char textQualifier = 34; boolean trimWhitespace = true; boolean useTextQualifier = true;//\u662f\u5426\u4f7f\u7528csv\u8f6c\u4e49\u5b57\u7b26 char delimiter = 44;//\u5206\u9694\u7b26 char recordDelimiter = 0; char comment = 35; boolean useComments = false; int escapeMode = 1; boolean safetySwitch = true;//\u5355\u5217\u957f\u5ea6\u662f\u5426\u9650\u5236100000\u5b57\u7b26 boolean skipEmptyRecords = true;//\u662f\u5426\u8df3\u8fc7\u7a7a\u884c boolean captureRawRecord = true; \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b \u672c\u5730\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long Double Double String String Boolean Boolean Date Date","title":"TxtFile Reader"},{"location":"reader/txtfilereader/#txtfile-reader","text":"TxtFileReader \u63d0\u4f9b\u4e86\u8bfb\u53d6\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u6570\u636e\u5b58\u50a8\u7684\u80fd\u529b\u3002","title":"TxtFile Reader"},{"location":"reader/txtfilereader/#_1","text":"job/txtfile2stream.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"txtfilereader\" , \"parameter\" : { \"path\" : [ \"/tmp/data\" ], \"encoding\" : \"UTF-8\" , \"column\" : [ { \"index\" : 0 , \"type\" : \"long\" }, { \"index\" : 1 , \"type\" : \"boolean\" }, { \"index\" : 2 , \"type\" : \"double\" }, { \"index\" : 3 , \"type\" : \"string\" }, { \"index\" : 4 , \"type\" : \"date\" , \"format\" : \"yyyy.MM.dd\" } ], \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/tmp/result\" , \"fileName\" : \"txt_\" , \"writeMode\" : \"truncate\" , \"format\" : \"yyyy-MM-dd\" } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"reader/txtfilereader/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f \u65e0 \u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84,\u8be6\u7ec6\u63cf\u8ff0\u89c1\u4e0b\u6587 column \u662f \u65e0 \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c\u8be6\u89c1\u4e0b\u6587 fieldDelimiter \u662f , \u63cf\u8ff0\uff1a\u8bfb\u53d6\u7684\u5b57\u6bb5\u5206\u9694\u7b26 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e skipHeader \u5426 false \u7c7bCSV\u683c\u5f0f\u6587\u4ef6\u53ef\u80fd\u5b58\u5728\u8868\u5934\u4e3a\u6807\u9898\u60c5\u51b5\uff0c\u9700\u8981\u8df3\u8fc7\u3002\u9ed8\u8ba4\u4e0d\u8df3\u8fc7 csvReaderConfig \u5426 \u65e0 \u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u53c2\u6570\u914d\u7f6e\uff0cMap\u7c7b\u578b\u3002\u4e0d\u914d\u7f6e\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c,\u8be6\u89c1\u4e0b\u6587","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"reader/txtfilereader/#path","text":"\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u6ce8\u610f\u8fd9\u91cc\u53ef\u4ee5\u652f\u6301\u586b\u5199\u591a\u4e2a\u8def\u5f84\u3002 \u5f53\u6307\u5b9a\u5355\u4e2a\u672c\u5730\u6587\u4ef6\uff0cTxtFileReader\u6682\u65f6\u53ea\u80fd\u4f7f\u7528\u5355\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u4e8c\u671f\u8003\u8651\u5728\u975e\u538b\u7f29\u6587\u4ef6\u60c5\u51b5\u4e0b\u9488\u5bf9\u5355\u4e2aFile\u53ef\u4ee5\u8fdb\u884c\u591a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u53d6 \u5f53\u6307\u5b9a\u591a\u4e2a\u672c\u5730\u6587\u4ef6\uff0cTxtFileReader\u652f\u6301\u4f7f\u7528\u591a\u7ebf\u7a0b\u8fdb\u884c\u6570\u636e\u62bd\u53d6\u3002\u7ebf\u7a0b\u5e76\u53d1\u6570\u901a\u8fc7\u901a\u9053\u6570\u6307\u5b9a \u5f53\u6307\u5b9a\u901a\u914d\u7b26\uff0cTxtFileReader\u5c1d\u8bd5\u904d\u5386\u51fa\u591a\u4e2a\u6587\u4ef6\u4fe1\u606f\u3002\u4f8b\u5982: \u6307\u5b9a /* \u4ee3\u8868\u8bfb\u53d6 / \u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\uff0c\u6307\u5b9a /bazhen/* \u4ee3\u8868\u8bfb\u53d6 bazhen \u76ee\u5f55\u4e0b\u6e38\u6240\u6709\u7684\u6587\u4ef6\u3002\u76ee\u524d\u53ea\u652f\u6301 * \u4f5c\u4e3a\u6587\u4ef6\u901a\u914d\u7b26\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cAddax\u4f1a\u5c06\u4e00\u4e2a\u4f5c\u4e1a\u4e0b\u540c\u6b65\u7684\u6240\u6709Text File\u89c6\u4f5c\u540c\u4e00\u5f20\u6570\u636e\u8868\u3002\u7528\u6237\u5fc5\u987b\u81ea\u5df1\u4fdd\u8bc1\u6240\u6709\u7684File\u80fd\u591f\u9002\u914d\u540c\u4e00\u5957schema\u4fe1\u606f\u3002\u8bfb\u53d6\u6587\u4ef6\u7528\u6237\u5fc5\u987b\u4fdd\u8bc1\u4e3a\u7c7bCSV\u683c\u5f0f\uff0c\u5e76\u4e14\u63d0\u4f9b\u7ed9Addax\u6743\u9650\u53ef\u8bfb\u3002 \u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679cPath\u6307\u5b9a\u7684\u8def\u5f84\u4e0b\u6ca1\u6709\u7b26\u5408\u5339\u914d\u7684\u6587\u4ef6\u62bd\u53d6\uff0cAddax\u5c06\u62a5\u9519\u3002 \u4ece 3.2.3 \u7248\u672c\u8d77\uff0c path \u4e0b\u5141\u8bb8\u6df7\u5408\u4e0d\u540c\u538b\u7f29\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u63d2\u4ef6\u4f1a\u5c1d\u8bd5\u81ea\u52a8\u731c\u6d4b\u538b\u7f29\u683c\u5f0f\u5e76\u81ea\u52a8\u89e3\u538b\uff0c\u76ee\u524d\u652f\u6301\u7684\u538b\u7f29\u683c\u5f0f\u6709\uff1a zip bzip2 gzip LZ4 PACK200 XZ Compress","title":"path"},{"location":"reader/txtfilereader/#column","text":"\u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0cindex\u6307\u5b9a\u5f53\u524d\u5217\u6765\u81ea\u4e8e\u6587\u672c\u7b2c\u51e0\u5217(\u4ee50\u5f00\u59cb)\uff0cvalue\u6307\u5b9a\u5f53\u524d\u7c7b\u578b\u4e3a\u5e38\u91cf\uff0c\u4e0d\u4ece\u6e90\u5934\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u662f\u6839\u636evalue\u503c\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u5217\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u53ef\u4ee5\u5168\u90e8\u6309\u7167String\u7c7b\u578b\u8bfb\u53d6\u6570\u636e\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"column\" : [ \"*\" ] } \u7528\u6237\u53ef\u4ee5\u6307\u5b9aColumn\u5b57\u6bb5\u4fe1\u606f\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a [ { \"type\" : \"long\" , \"index\" : 0 }, { \"type\" : \"string\" , \"value\" : \"alibaba\" } ] \u5bf9\u4e8e\u7528\u6237\u6307\u5b9aColumn\u4fe1\u606f\uff0ctype\u5fc5\u987b\u586b\u5199\uff0cindex/value\u5fc5\u987b\u9009\u62e9\u5176\u4e00\u3002 \u4ece 4.0.1 \u5f00\u59cb\uff0c\u8868\u793a\u5b57\u6bb5\u9664\u4e86\u4f7f\u7528 index \u6765\u6307\u5b9a\u5b57\u6bb5\u7684\u987a\u5e8f\u5916\uff0c\u8fd8\u652f\u6301 name \u65b9\u5f0f\uff0c\u8fd9\u9700\u8981\u6240\u8bfb\u53d6\u7684\u6587\u4ef6\u7684\u90fd\u5305\u542b\u4e86\u6587\u4ef6\u5934\uff0c\u63d2\u4ef6\u4f1a\u5c1d\u8bd5\u5c06\u6307\u5b9a\u7684 name \u53bb\u5339\u914d\u4ece\u6587\u4ef6\u8bfb\u53d6\u7684\u6587\u4ef6\u5934\uff0c \u7136\u540e\u5f97\u5230\u5bf9\u5e94\u7684 index \u503c\uff0c\u5e76\u56de\u5199\u5230 \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002\u540c\u65f6\uff0c index \u548c name \u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u5217\u4e0a\u8fdb\u884c\u6df7\u5408\u4f7f\u7528\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u6837\uff1a [ { \"type\" : \"long\" , \"index\" : 0 }, { \"name\" : \"region\" , \"type\" : \"string\" }, { \"type\" : \"string\" , \"value\" : \"alibaba\" } ] \u6ce8\uff1a \u8fd9\u79cd\u65b9\u5f0f\u4ee5\u4e3a\u8fd9\u5728\u51c6\u5907\u9636\u6bb5\u5c31\u8981\u5c1d\u8bd5\u8bfb\u53d6\u6587\u4ef6\uff0c\u56e0\u4e3a\u4f1a\u6709\u4e00\u5b9a\u7684\u6027\u80fd\u635f\u5931\uff0c\u5982\u975e\u5fc5\u8981\uff0c\u4e0d\u5efa\u8bae\u914d\u7f6e name \u65b9\u5f0f\u3002","title":"column"},{"location":"reader/txtfilereader/#csvreaderconfig","text":"\u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u53c2\u6570\u914d\u7f6e\uff0cMap\u7c7b\u578b\u3002\u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u4f7f\u7528\u7684CsvReader\u8fdb\u884c\u8bfb\u53d6\uff0c\u4f1a\u6709\u5f88\u591a\u914d\u7f6e\uff0c\u4e0d\u914d\u7f6e\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002 \u5e38\u89c1\u914d\u7f6e\uff1a { \"csvReaderConfig\" : { \"safetySwitch\" : false , \"skipEmptyRecords\" : false , \"useTextQualifier\" : false } } \u6240\u6709\u914d\u7f6e\u9879\u53ca\u9ed8\u8ba4\u503c,\u914d\u7f6e\u65f6 csvReaderConfig \u7684map\u4e2d\u8bf7**\u4e25\u683c\u6309\u7167\u4ee5\u4e0b\u5b57\u6bb5\u540d\u5b57\u8fdb\u884c\u914d\u7f6e**\uff1a boolean caseSensitive = true; char textQualifier = 34; boolean trimWhitespace = true; boolean useTextQualifier = true;//\u662f\u5426\u4f7f\u7528csv\u8f6c\u4e49\u5b57\u7b26 char delimiter = 44;//\u5206\u9694\u7b26 char recordDelimiter = 0; char comment = 35; boolean useComments = false; int escapeMode = 1; boolean safetySwitch = true;//\u5355\u5217\u957f\u5ea6\u662f\u5426\u9650\u5236100000\u5b57\u7b26 boolean skipEmptyRecords = true;//\u662f\u5426\u8df3\u8fc7\u7a7a\u884c boolean captureRawRecord = true;","title":"csvReaderConfig"},{"location":"reader/txtfilereader/#_3","text":"Addax \u5185\u90e8\u7c7b\u578b \u672c\u5730\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long Double Double String String Boolean Boolean Date Date","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/cassandrawriter/","text":"Cassandra Writer \u00b6 CassandraWriter \u63d2\u4ef6\u7528\u4e8e\u5411 Cassandra \u5199\u5165\u6570\u636e\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 \u914d\u7f6e\u4e00\u4e2a\u4ece\u5185\u5b58\u4ea7\u751f\u5230Cassandra\u5bfc\u5165\u7684\u4f5c\u4e1a: jobs/stream2cassandra.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 5 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"name\" , \"type\" : \"string\" }, { \"value\" : \"false\" , \"type\" : \"bool\" }, { \"value\" : \"1988-08-08 08:08:08\" , \"type\" : \"date\" }, { \"value\" : \"addr\" , \"type\" : \"bytes\" }, { \"value\" : 1.234 , \"type\" : \"double\" }, { \"value\" : 12345678 , \"type\" : \"long\" }, { \"value\" : 2.345 , \"type\" : \"double\" }, { \"value\" : 3456789 , \"type\" : \"long\" }, { \"value\" : \"4a0ef8c0-4d97-11d0-db82-ebecdb03ffa5\" , \"type\" : \"string\" }, { \"value\" : \"value\" , \"type\" : \"bytes\" }, { \"value\" : \"-838383838,37377373,-383883838,27272772,393993939,-38383883,83883838,-1350403181,817650816,1630642337,251398784,-622020148\" , \"type\" : \"string\" } ], \"sliceRecordCount\" : 10000000 } }, \"writer\" : { \"name\" : \"cassandrawriter\" , \"parameter\" : { \"host\" : \"localhost\" , \"port\" : 9042 , \"useSSL\" : false , \"keyspace\" : \"stresscql\" , \"table\" : \"dst\" , \"batchSize\" : 10 , \"column\" : [ \"name\" , \"choice\" , \"date\" , \"address\" , \"dbl\" , \"lval\" , \"fval\" , \"ival\" , \"uid\" , \"value\" , \"listval\" ] } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 host \u662f \u65e0 Cassandra\u8fde\u63a5\u70b9\u7684\u57df\u540d\u6216ip\uff0c\u591a\u4e2anode\u4e4b\u95f4\u7528\u9017\u53f7\u5206\u9694 port \u662f 9042 Cassandra\u7aef\u53e3 username \u5426 \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 useSSL \u5426 false \u662f\u5426\u4f7f\u7528SSL\u8fde\u63a5 connectionsPerHost \u5426 8 \u5ba2\u6237\u7aef\u8fde\u63a5\u6c60\u914d\u7f6e\uff1a\u4e0e\u670d\u52a1\u5668\u6bcf\u4e2a\u8282\u70b9\u5efa\u591a\u5c11\u4e2a\u8fde\u63a5 maxPendingPerConnection \u5426 128 \u5ba2\u6237\u7aef\u8fde\u63a5\u6c60\u914d\u7f6e\uff1a\u6bcf\u4e2a\u8fde\u63a5\u6700\u5927\u8bf7\u6c42\u6570 keyspace \u662f \u65e0 \u9700\u8981\u540c\u6b65\u7684\u8868\u6240\u5728\u7684keyspace table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u96c6\u5408,\u5185\u5bb9\u53ef\u4ee5\u662f\u5217\u7684\u540d\u79f0\u6216 writetime() \u3002\u5982\u679c\u5c06\u5217\u540d\u914d\u7f6e\u4e3a writetime() \uff0c\u4f1a\u5c06\u8fd9\u4e00\u5217\u7684\u5185\u5bb9\u4f5c\u4e3a\u65f6\u95f4\u6233 consistancyLevel \u5426 LOCAL_QUORUM \u6570\u636e\u4e00\u81f4\u6027\u7ea7\u522b, \u53ef\u9009 ONE, QUORUM, LOCAL_QUORUM, EACH_QUORUM, ALL, ANY, TWO, THREE, LOCAL_ONE batchSize \u5426 1 \u4e00\u6b21\u6279\u91cf\u63d0\u4ea4(UNLOGGED BATCH)\u7684\u8bb0\u5f55\u6570\u5927\u5c0f\uff08\u6761\u6570\uff09 \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b Cassandra \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint,varint,bigint,time Double float, double, decimal String ascii,varchar, text,uuid,timeuuid,duration,list,map,set,tuple,udt,inet Date date, timestamp Boolean bool Bytes blob \u8bf7\u6ce8\u610f: \u76ee\u524d\u4e0d\u652f\u6301 counter \u7c7b\u578b\u548c custom \u7c7b\u578b\u3002 \u7ea6\u675f\u9650\u5236 \u00b6 batchSize \u00b6 \u4e0d\u80fd\u8d85\u8fc765535 batch\u4e2d\u7684\u5185\u5bb9\u5927\u5c0f\u53d7\u5230\u670d\u52a1\u5668\u7aef batch_size_fail_threshold_in_kb \u7684\u9650\u5236\u3002 \u5982\u679cbatch\u4e2d\u7684\u5185\u5bb9\u8d85\u8fc7\u4e86 batch_size_warn_threshold_in_kb \u7684\u9650\u5236\uff0c\u4f1a\u6253\u51fawarn\u65e5\u5fd7\uff0c\u4f46\u5e76\u4e0d\u5f71\u54cd\u5199\u5165\uff0c\u5ffd\u7565\u5373\u53ef\u3002 \u5982\u679c\u6279\u91cf\u63d0\u4ea4\u5931\u8d25\uff0c\u4f1a\u628a\u8fd9\u4e2a\u6279\u91cf\u7684\u6240\u6709\u5185\u5bb9\u91cd\u65b0\u9010\u6761\u5199\u5165\u4e00\u904d\u3002","title":"Cassandra Writer"},{"location":"writer/cassandrawriter/#cassandra-writer","text":"CassandraWriter \u63d2\u4ef6\u7528\u4e8e\u5411 Cassandra \u5199\u5165\u6570\u636e\u3002","title":"Cassandra Writer"},{"location":"writer/cassandrawriter/#_1","text":"\u914d\u7f6e\u4e00\u4e2a\u4ece\u5185\u5b58\u4ea7\u751f\u5230Cassandra\u5bfc\u5165\u7684\u4f5c\u4e1a: jobs/stream2cassandra.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 5 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"name\" , \"type\" : \"string\" }, { \"value\" : \"false\" , \"type\" : \"bool\" }, { \"value\" : \"1988-08-08 08:08:08\" , \"type\" : \"date\" }, { \"value\" : \"addr\" , \"type\" : \"bytes\" }, { \"value\" : 1.234 , \"type\" : \"double\" }, { \"value\" : 12345678 , \"type\" : \"long\" }, { \"value\" : 2.345 , \"type\" : \"double\" }, { \"value\" : 3456789 , \"type\" : \"long\" }, { \"value\" : \"4a0ef8c0-4d97-11d0-db82-ebecdb03ffa5\" , \"type\" : \"string\" }, { \"value\" : \"value\" , \"type\" : \"bytes\" }, { \"value\" : \"-838383838,37377373,-383883838,27272772,393993939,-38383883,83883838,-1350403181,817650816,1630642337,251398784,-622020148\" , \"type\" : \"string\" } ], \"sliceRecordCount\" : 10000000 } }, \"writer\" : { \"name\" : \"cassandrawriter\" , \"parameter\" : { \"host\" : \"localhost\" , \"port\" : 9042 , \"useSSL\" : false , \"keyspace\" : \"stresscql\" , \"table\" : \"dst\" , \"batchSize\" : 10 , \"column\" : [ \"name\" , \"choice\" , \"date\" , \"address\" , \"dbl\" , \"lval\" , \"fval\" , \"ival\" , \"uid\" , \"value\" , \"listval\" ] } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/cassandrawriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 host \u662f \u65e0 Cassandra\u8fde\u63a5\u70b9\u7684\u57df\u540d\u6216ip\uff0c\u591a\u4e2anode\u4e4b\u95f4\u7528\u9017\u53f7\u5206\u9694 port \u662f 9042 Cassandra\u7aef\u53e3 username \u5426 \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 useSSL \u5426 false \u662f\u5426\u4f7f\u7528SSL\u8fde\u63a5 connectionsPerHost \u5426 8 \u5ba2\u6237\u7aef\u8fde\u63a5\u6c60\u914d\u7f6e\uff1a\u4e0e\u670d\u52a1\u5668\u6bcf\u4e2a\u8282\u70b9\u5efa\u591a\u5c11\u4e2a\u8fde\u63a5 maxPendingPerConnection \u5426 128 \u5ba2\u6237\u7aef\u8fde\u63a5\u6c60\u914d\u7f6e\uff1a\u6bcf\u4e2a\u8fde\u63a5\u6700\u5927\u8bf7\u6c42\u6570 keyspace \u662f \u65e0 \u9700\u8981\u540c\u6b65\u7684\u8868\u6240\u5728\u7684keyspace table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u96c6\u5408,\u5185\u5bb9\u53ef\u4ee5\u662f\u5217\u7684\u540d\u79f0\u6216 writetime() \u3002\u5982\u679c\u5c06\u5217\u540d\u914d\u7f6e\u4e3a writetime() \uff0c\u4f1a\u5c06\u8fd9\u4e00\u5217\u7684\u5185\u5bb9\u4f5c\u4e3a\u65f6\u95f4\u6233 consistancyLevel \u5426 LOCAL_QUORUM \u6570\u636e\u4e00\u81f4\u6027\u7ea7\u522b, \u53ef\u9009 ONE, QUORUM, LOCAL_QUORUM, EACH_QUORUM, ALL, ANY, TWO, THREE, LOCAL_ONE batchSize \u5426 1 \u4e00\u6b21\u6279\u91cf\u63d0\u4ea4(UNLOGGED BATCH)\u7684\u8bb0\u5f55\u6570\u5927\u5c0f\uff08\u6761\u6570\uff09","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/cassandrawriter/#_3","text":"Addax \u5185\u90e8\u7c7b\u578b Cassandra \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint,varint,bigint,time Double float, double, decimal String ascii,varchar, text,uuid,timeuuid,duration,list,map,set,tuple,udt,inet Date date, timestamp Boolean bool Bytes blob \u8bf7\u6ce8\u610f: \u76ee\u524d\u4e0d\u652f\u6301 counter \u7c7b\u578b\u548c custom \u7c7b\u578b\u3002","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/cassandrawriter/#_4","text":"","title":"\u7ea6\u675f\u9650\u5236"},{"location":"writer/cassandrawriter/#batchsize","text":"\u4e0d\u80fd\u8d85\u8fc765535 batch\u4e2d\u7684\u5185\u5bb9\u5927\u5c0f\u53d7\u5230\u670d\u52a1\u5668\u7aef batch_size_fail_threshold_in_kb \u7684\u9650\u5236\u3002 \u5982\u679cbatch\u4e2d\u7684\u5185\u5bb9\u8d85\u8fc7\u4e86 batch_size_warn_threshold_in_kb \u7684\u9650\u5236\uff0c\u4f1a\u6253\u51fawarn\u65e5\u5fd7\uff0c\u4f46\u5e76\u4e0d\u5f71\u54cd\u5199\u5165\uff0c\u5ffd\u7565\u5373\u53ef\u3002 \u5982\u679c\u6279\u91cf\u63d0\u4ea4\u5931\u8d25\uff0c\u4f1a\u628a\u8fd9\u4e2a\u6279\u91cf\u7684\u6240\u6709\u5185\u5bb9\u91cd\u65b0\u9010\u6761\u5199\u5165\u4e00\u904d\u3002","title":"batchSize"},{"location":"writer/clickhousewriter/","text":"ClickHouse Writer \u00b6 ClickHouseWriter \u63d2\u4ef6\u7528\u4e8e\u4e86\u5411 ClickHouse \u5199\u5165\u6570\u636e\u3002 \u793a\u4f8b \u00b6 \u4ee5\u4e0b\u793a\u4f8b\u6211\u4eec\u6f14\u793a\u4ece clickhouse \u4e2d\u8bfb\u53d6\u4e00\u5f20\u8868\u7684\u5185\u5bb9\uff0c\u5e76\u5199\u5165\u5230\u76f8\u540c\u8868\u7ed3\u6784\u7684\u53e6\u5916\u4e00\u5f20\u8868\u4e2d\uff0c\u7528\u6765\u6d4b\u8bd5\u63d2\u4ef6\u6240\u652f\u6301\u7684\u6570\u636e\u7ed3\u6784 \u8868\u7ed3\u6784\u4ee5\u6570\u636e \u00b6 \u5047\u5b9a\u8981\u8bfb\u53d6\u7684\u8868\u7ed3\u6784\u53ca\u6570\u636e\u5982\u4e0b\uff1a CREATE TABLE ck_addax ( c_int8 Int8 , c_int16 Int16 , c_int32 Int32 , c_int64 Int64 , c_uint8 UInt8 , c_uint16 UInt16 , c_uint32 UInt32 , c_uint64 UInt64 , c_float32 Float32 , c_float64 Float64 , c_decimal Decimal ( 38 , 10 ), c_string String , c_fixstr FixedString ( 36 ), c_uuid UUID , c_date Date , c_datetime DateTime ( 'Asia/Chongqing' ), c_datetime64 DateTime64 ( 3 , 'Asia/Chongqing' ), c_enum Enum ( 'hello' = 1 , 'world' = 2 ) ) ENGINE = MergeTree () ORDER BY ( c_int8 , c_int16 ) SETTINGS index_granularity = 8192 ; insert into ck_addax values ( 127 , - 32768 , 2147483647 , - 9223372036854775808 , 255 , 65535 , 4294967295 , 18446744073709551615 , 0 . 999999999999 , 0 . 99999999999999999 , 1234567891234567891234567891 . 1234567891 , 'Hello String' , '2c:16:db:a3:3a:4f' , '5F042A36-5B0C-4F71-ADFD-4DF4FCA1B863' , '2021-01-01' , '2021-01-01 11:22:33' , '2021-01-01 10:33:23.123' , 'hello' ); \u8981\u5199\u5165\u7684\u8868\u91c7\u53d6\u548c\u8bfb\u53d6\u8868\u7ed3\u6784\u76f8\u540c\uff0c\u5176\u5efa\u8868\u8bed\u53e5\u5982\u4e0b\uff1a create table ck_addax_writer as ck_addax ; \u914d\u7f6e \u00b6 \u4ee5\u4e0b\u4e3a\u914d\u7f6e\u6587\u4ef6 job/clickhouse2clickhouse.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 } }, \"content\" : { \"writer\" : { \"name\" : \"clickhousewriter\" , \"parameter\" : { \"username\" : \"default\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"ck_addax_writer\" ], \"jdbcUrl\" : \"jdbc:clickhouse://127.0.0.1:8123/default\" } ], \"preSql\" : [ \"alter table @table delete where 1=1\" ] } }, \"reader\" : { \"name\" : \"clickhousereader\" , \"parameter\" : { \"username\" : \"default\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"jdbcUrl\" : [ \"jdbc:clickhouse://127.0.0.1:8123/\" ], \"table\" : [ \"ck_addax\" ] } ] } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/clickhouse2clickhouse.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/clickhouse2clickhouse.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 ClickHouse JDBC \u8fde\u63a5\u4fe1\u606f ,\u53ef\u6309\u7167\u5b98\u65b9\u89c4\u8303\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f\u3002\u5177\u4f53\u8bf7\u53c2\u770b ClickHouse\u5b98\u65b9\u6587\u6863 username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868 ,\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00schema\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408, \u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\u3002\u7528\u6237\u4f7f\u7528 * \u4ee3\u8868\u9ed8\u8ba4\u4f7f\u7528\u6240\u6709\u5217\u914d\u7f6e\uff0c\u4f8b\u5982 \"['*']\" batchSize \u5426 2048 \u6bcf\u6b21\u6279\u91cf\u6570\u636e\u7684\u6761\u6570","title":"ClickHouse Writer"},{"location":"writer/clickhousewriter/#clickhouse-writer","text":"ClickHouseWriter \u63d2\u4ef6\u7528\u4e8e\u4e86\u5411 ClickHouse \u5199\u5165\u6570\u636e\u3002","title":"ClickHouse Writer"},{"location":"writer/clickhousewriter/#_1","text":"\u4ee5\u4e0b\u793a\u4f8b\u6211\u4eec\u6f14\u793a\u4ece clickhouse \u4e2d\u8bfb\u53d6\u4e00\u5f20\u8868\u7684\u5185\u5bb9\uff0c\u5e76\u5199\u5165\u5230\u76f8\u540c\u8868\u7ed3\u6784\u7684\u53e6\u5916\u4e00\u5f20\u8868\u4e2d\uff0c\u7528\u6765\u6d4b\u8bd5\u63d2\u4ef6\u6240\u652f\u6301\u7684\u6570\u636e\u7ed3\u6784","title":"\u793a\u4f8b"},{"location":"writer/clickhousewriter/#_2","text":"\u5047\u5b9a\u8981\u8bfb\u53d6\u7684\u8868\u7ed3\u6784\u53ca\u6570\u636e\u5982\u4e0b\uff1a CREATE TABLE ck_addax ( c_int8 Int8 , c_int16 Int16 , c_int32 Int32 , c_int64 Int64 , c_uint8 UInt8 , c_uint16 UInt16 , c_uint32 UInt32 , c_uint64 UInt64 , c_float32 Float32 , c_float64 Float64 , c_decimal Decimal ( 38 , 10 ), c_string String , c_fixstr FixedString ( 36 ), c_uuid UUID , c_date Date , c_datetime DateTime ( 'Asia/Chongqing' ), c_datetime64 DateTime64 ( 3 , 'Asia/Chongqing' ), c_enum Enum ( 'hello' = 1 , 'world' = 2 ) ) ENGINE = MergeTree () ORDER BY ( c_int8 , c_int16 ) SETTINGS index_granularity = 8192 ; insert into ck_addax values ( 127 , - 32768 , 2147483647 , - 9223372036854775808 , 255 , 65535 , 4294967295 , 18446744073709551615 , 0 . 999999999999 , 0 . 99999999999999999 , 1234567891234567891234567891 . 1234567891 , 'Hello String' , '2c:16:db:a3:3a:4f' , '5F042A36-5B0C-4F71-ADFD-4DF4FCA1B863' , '2021-01-01' , '2021-01-01 11:22:33' , '2021-01-01 10:33:23.123' , 'hello' ); \u8981\u5199\u5165\u7684\u8868\u91c7\u53d6\u548c\u8bfb\u53d6\u8868\u7ed3\u6784\u76f8\u540c\uff0c\u5176\u5efa\u8868\u8bed\u53e5\u5982\u4e0b\uff1a create table ck_addax_writer as ck_addax ;","title":"\u8868\u7ed3\u6784\u4ee5\u6570\u636e"},{"location":"writer/clickhousewriter/#_3","text":"\u4ee5\u4e0b\u4e3a\u914d\u7f6e\u6587\u4ef6 job/clickhouse2clickhouse.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 } }, \"content\" : { \"writer\" : { \"name\" : \"clickhousewriter\" , \"parameter\" : { \"username\" : \"default\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"ck_addax_writer\" ], \"jdbcUrl\" : \"jdbc:clickhouse://127.0.0.1:8123/default\" } ], \"preSql\" : [ \"alter table @table delete where 1=1\" ] } }, \"reader\" : { \"name\" : \"clickhousereader\" , \"parameter\" : { \"username\" : \"default\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"jdbcUrl\" : [ \"jdbc:clickhouse://127.0.0.1:8123/\" ], \"table\" : [ \"ck_addax\" ] } ] } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/clickhouse2clickhouse.json","title":"\u914d\u7f6e"},{"location":"writer/clickhousewriter/#_4","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/clickhouse2clickhouse.json","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"writer/clickhousewriter/#_5","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 ClickHouse JDBC \u8fde\u63a5\u4fe1\u606f ,\u53ef\u6309\u7167\u5b98\u65b9\u89c4\u8303\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f\u3002\u5177\u4f53\u8bf7\u53c2\u770b ClickHouse\u5b98\u65b9\u6587\u6863 username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868 ,\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00schema\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408, \u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\u3002\u7528\u6237\u4f7f\u7528 * \u4ee3\u8868\u9ed8\u8ba4\u4f7f\u7528\u6240\u6709\u5217\u914d\u7f6e\uff0c\u4f8b\u5982 \"['*']\" batchSize \u5426 2048 \u6bcf\u6b21\u6279\u91cf\u6570\u636e\u7684\u6761\u6570","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/dbfwriter/","text":"DBF Writer \u00b6 DbfWriter \u63d0\u4f9b\u4e86\u5411\u672c\u5730\u6587\u4ef6\u5199\u5165\u7c7bdbf\u683c\u5f0f\u7684\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u8868\u6587\u4ef6\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 { \"job\" : { \"setting\" : { \"speed\" : { \"bytes\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19880808 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 00:00:00\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"\u4e2d\u6587\u6d4b\u8bd5\" , \"type\" : \"string\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"dbfwriter\" , \"parameter\" : { \"column\" : [ { \"name\" : \"col1\" , \"type\" : \"char\" , \"length\" : 100 }, { \"name\" : \"col2\" , \"type\" : \"numeric\" , \"length\" : 18 , \"scale\" : 0 }, { \"name\" : \"col3\" , \"type\" : \"date\" }, { \"name\" : \"col4\" , \"type\" : \"logical\" }, { \"name\" : \"col5\" , \"type\" : \"char\" , \"length\" : 100 } ], \"fileName\" : \"test.dbf\" , \"path\" : \"/tmp/out\" , \"writeMode\" : \"truncate\" , \"encoding\" : \"GBK\" } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f \u65e0 DBF\u6587\u4ef6\u76ee\u5f55\uff0c\u6ce8\u610f\u8fd9\u91cc\u662f\u6587\u4ef6\u5939\uff0c\u4e0d\u662f\u6587\u4ef6 column \u662f \u7c7b\u578b\u9ed8\u8ba4\u4e3aString \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u96c6\u5408, \u662f {type: value} \u6216 {type: index} \u7684\u96c6\u5408 fileName \u662f \u65e0 DbfFileWriter\u5199\u5165\u7684\u6587\u4ef6\u540d writeMode \u662f \u65e0 DbfFileWriter\u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff0c\u652f\u6301 truncate , append , nonConflict \u4e09\u79cd\u6a21\u5f0f\uff0c\u8be6\u89c1\u5982\u4e0b encoding \u5426 UTF-8 DBF\u6587\u4ef6\u7f16\u7801\uff0c\u6bd4\u5982 GBK , UTF-8 nullFormat \u5426 \\N \u5b9a\u4e49\u54ea\u4e2a\u5b57\u7b26\u4e32\u53ef\u4ee5\u8868\u793a\u4e3anull, dateFormat \u5426 \u65e0 \u65e5\u671f\u7c7b\u578b\u7684\u6570\u636e\u5e8f\u5217\u5316\u5230\u6587\u4ef6\u4e2d\u65f6\u7684\u683c\u5f0f\uff0c\u4f8b\u5982 \"dateFormat\": \"yyyy-MM-dd\" writeMode \u00b6 \u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff1a truncate: \u5199\u5165\u524d\u6e05\u7406\u76ee\u5f55\u4e0b fileName \u524d\u7f00\u7684\u6240\u6709\u6587\u4ef6\u3002 append: \u5199\u5165\u524d\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff0c\u76f4\u63a5\u4f7f\u7528 filename \u5199\u5165\uff0c\u5e76\u4fdd\u8bc1\u6587\u4ef6\u540d\u4e0d\u51b2\u7a81\u3002 nonConflict: \u5982\u679c\u76ee\u5f55\u4e0b\u6709 fileName \u524d\u7f00\u7684\u6587\u4ef6\uff0c\u76f4\u63a5\u62a5\u9519\u3002 \u7c7b\u578b\u8f6c\u6362 \u00b6 \u5f53\u524d\u8be5\u63d2\u4ef6\u652f\u6301\u5199\u5165\u7684\u7c7b\u578b\u4ee5\u53ca\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a XBase Type XBase Symbol Java Type used in JavaDBF Character C java.lang.String Numeric N java.math.BigDecimal Floating Point F java.math.BigDecimal Logical L java.lang.Boolean Date D java.util.Date \u5176\u4e2d\uff1a numeric \u662f\u6307\u672c\u5730\u6587\u4ef6\u4e2d\u4f7f\u7528\u6570\u5b57\u7c7b\u578b\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 19901219 ,\u6574\u5f62\u5c0f\u6570\u4f4d\u6570\u4e3a 0 \u3002 logical \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Boolean\u7684\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 true \u3001 false \u3002 Date \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Date\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 2014-12-31 \uff0cDate \u662fJAVA\u8bed\u8a00\u7684 Date \u7c7b\u578b\u3002","title":"DBF Writer"},{"location":"writer/dbfwriter/#dbf-writer","text":"DbfWriter \u63d0\u4f9b\u4e86\u5411\u672c\u5730\u6587\u4ef6\u5199\u5165\u7c7bdbf\u683c\u5f0f\u7684\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u8868\u6587\u4ef6\u3002","title":"DBF Writer"},{"location":"writer/dbfwriter/#_1","text":"{ \"job\" : { \"setting\" : { \"speed\" : { \"bytes\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19880808 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 00:00:00\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"\u4e2d\u6587\u6d4b\u8bd5\" , \"type\" : \"string\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"dbfwriter\" , \"parameter\" : { \"column\" : [ { \"name\" : \"col1\" , \"type\" : \"char\" , \"length\" : 100 }, { \"name\" : \"col2\" , \"type\" : \"numeric\" , \"length\" : 18 , \"scale\" : 0 }, { \"name\" : \"col3\" , \"type\" : \"date\" }, { \"name\" : \"col4\" , \"type\" : \"logical\" }, { \"name\" : \"col5\" , \"type\" : \"char\" , \"length\" : 100 } ], \"fileName\" : \"test.dbf\" , \"path\" : \"/tmp/out\" , \"writeMode\" : \"truncate\" , \"encoding\" : \"GBK\" } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/dbfwriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f \u65e0 DBF\u6587\u4ef6\u76ee\u5f55\uff0c\u6ce8\u610f\u8fd9\u91cc\u662f\u6587\u4ef6\u5939\uff0c\u4e0d\u662f\u6587\u4ef6 column \u662f \u7c7b\u578b\u9ed8\u8ba4\u4e3aString \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u96c6\u5408, \u662f {type: value} \u6216 {type: index} \u7684\u96c6\u5408 fileName \u662f \u65e0 DbfFileWriter\u5199\u5165\u7684\u6587\u4ef6\u540d writeMode \u662f \u65e0 DbfFileWriter\u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff0c\u652f\u6301 truncate , append , nonConflict \u4e09\u79cd\u6a21\u5f0f\uff0c\u8be6\u89c1\u5982\u4e0b encoding \u5426 UTF-8 DBF\u6587\u4ef6\u7f16\u7801\uff0c\u6bd4\u5982 GBK , UTF-8 nullFormat \u5426 \\N \u5b9a\u4e49\u54ea\u4e2a\u5b57\u7b26\u4e32\u53ef\u4ee5\u8868\u793a\u4e3anull, dateFormat \u5426 \u65e0 \u65e5\u671f\u7c7b\u578b\u7684\u6570\u636e\u5e8f\u5217\u5316\u5230\u6587\u4ef6\u4e2d\u65f6\u7684\u683c\u5f0f\uff0c\u4f8b\u5982 \"dateFormat\": \"yyyy-MM-dd\"","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/dbfwriter/#writemode","text":"\u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff1a truncate: \u5199\u5165\u524d\u6e05\u7406\u76ee\u5f55\u4e0b fileName \u524d\u7f00\u7684\u6240\u6709\u6587\u4ef6\u3002 append: \u5199\u5165\u524d\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff0c\u76f4\u63a5\u4f7f\u7528 filename \u5199\u5165\uff0c\u5e76\u4fdd\u8bc1\u6587\u4ef6\u540d\u4e0d\u51b2\u7a81\u3002 nonConflict: \u5982\u679c\u76ee\u5f55\u4e0b\u6709 fileName \u524d\u7f00\u7684\u6587\u4ef6\uff0c\u76f4\u63a5\u62a5\u9519\u3002","title":"writeMode"},{"location":"writer/dbfwriter/#_3","text":"\u5f53\u524d\u8be5\u63d2\u4ef6\u652f\u6301\u5199\u5165\u7684\u7c7b\u578b\u4ee5\u53ca\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a XBase Type XBase Symbol Java Type used in JavaDBF Character C java.lang.String Numeric N java.math.BigDecimal Floating Point F java.math.BigDecimal Logical L java.lang.Boolean Date D java.util.Date \u5176\u4e2d\uff1a numeric \u662f\u6307\u672c\u5730\u6587\u4ef6\u4e2d\u4f7f\u7528\u6570\u5b57\u7c7b\u578b\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 19901219 ,\u6574\u5f62\u5c0f\u6570\u4f4d\u6570\u4e3a 0 \u3002 logical \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Boolean\u7684\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 true \u3001 false \u3002 Date \u662f\u6307\u672c\u5730\u6587\u4ef6\u6587\u672c\u4e2d\u4f7f\u7528Date\u8868\u793a\u5f62\u5f0f\uff0c\u4f8b\u5982 2014-12-31 \uff0cDate \u662fJAVA\u8bed\u8a00\u7684 Date \u7c7b\u578b\u3002","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/doriswriter/","text":"Doris Writer \u00b6 DorisWriter \u63d2\u4ef6\u7528\u4e8e\u5411 Doris \u6570\u636e\u5e93\u4ee5\u6d41\u5f0f\u65b9\u5f0f\u5199\u5165\u6570\u636e\u3002 \u5176\u5b9e\u73b0\u4e0a\u662f\u901a\u8fc7\u8bbf\u95ee Doris http \u8fde\u63a5(8030) \uff0c\u7136\u540e\u901a\u8fc7 stream load \u52a0\u8f7d\u6570\u636e\u5230\u6570\u636e\u4e2d\uff0c\u76f8\u6bd4 insert into \u65b9\u5f0f\u6548\u7387\u8981\u9ad8\u4e0d\u5c11\uff0c\u4e5f\u662f\u5b98\u65b9\u63a8\u8350\u7684\u751f\u4ea7\u73af\u5883\u4e0b\u7684\u6570\u636e\u52a0\u8f7d\u65b9\u5f0f\u3002 Doris \u662f\u4e00\u4e2a\u517c\u5bb9 MySQL \u534f\u8bae\u7684\u6570\u636e\u5e93\u540e\u7aef\uff0c\u56e0\u6b64 Doris \u8bfb\u53d6\u53ef\u4ee5\u4f7f\u7528 MySQLReader \u8fdb\u884c\u8bbf\u95ee\u3002 \u793a\u4f8b \u00b6 \u5047\u5b9a\u8981\u5199\u5165\u7684\u8868\u7684\u5efa\u8868\u8bed\u53e5\u5982\u4e0b\uff1a CREATE DATABASE example_db ; CREATE TABLE example_db . table1 ( siteid INT DEFAULT '10' , citycode SMALLINT , username VARCHAR ( 32 ) DEFAULT '' , pv BIGINT SUM DEFAULT '0' ) AGGREGATE KEY ( siteid , citycode , username ) DISTRIBUTED BY HASH ( siteid ) BUCKETS 10 PROPERTIES ( \"replication_num\" = \"1\" ); \u4e0b\u9762\u914d\u7f6e\u4e00\u4e2a\u4ece\u5185\u5b58\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5199\u5165\u5230 doris \u8868\u7684\u914d\u7f6e\u6587\u4ef6 { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 } }, \"content\" : { \"writer\" : { \"name\" : \"doriswriter\" , \"parameter\" : { \"username\" : \"test\" , \"password\" : \"123456\" , \"batchSize\" : 1024 , \"connection\" : [ { \"table\" : \"table1\" , \"database\" : \"example_db\" , \"endpoint\" : \"http://127.0.0.1:8030/\" } ], \"loadProps\" : {}, \"lineDelimiter\" : \"\\n\" , \"format\" : \"csv\" } }, \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"random\" : \"1,500\" , \"type\" : \"long\" }, { \"random\" : \"1,127\" , \"type\" : \"long\" }, { \"value\" : \"this is a text\" , \"type\" : \"string\" }, { \"random\" : \"5,200\" , \"type\" : \"long\" } ], \"sliceRecordCount\" : 100 } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/stream2doris.json \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4 bin/addax.sh job/stream2doris.json \u8f93\u51fa\u7c7b\u4f3c\u5982\u4e0b\uff1a 2021-02-23 15:22:57.851 [main] INFO VMInfo - VMInfo# operatingSystem class => sun.management.OperatingSystemImpl 2021-02-23 15:22:57.871 [main] INFO Engine - { \"content\":{ \"reader\":{ \"parameter\":{ \"column\":[ { \"random\":\"1,500\", \"type\":\"long\" }, { \"random\":\"1,127\", \"type\":\"long\" }, { \"type\":\"string\", \"value\":\"username\" } ], \"sliceRecordCount\":100 }, \"name\":\"streamreader\" }, \"writer\":{ \"parameter\":{ \"password\":\"*****\", \"batchSize\":1024, \"connection\":[ { \"database\":\"example_db\", \"endpoint\":\"http://127.0.0.1:8030/\", \"table\":\"table1\" } ], \"username\":\"test\" }, \"name\":\"doriswriter\" } }, \"setting\":{ \"speed\":{ \"channel\":2 } } } 2021-02-23 15:22:57.886 [main] INFO PerfTrace - PerfTrace traceId=job_-1, isEnable=false, priority=0 2021-02-23 15:22:57.886 [main] INFO JobContainer - Addax jobContainer starts job. 2021-02-23 15:22:57.920 [job-0] INFO JobContainer - Scheduler starts [1] taskGroups. 2021-02-23 15:22:57.928 [taskGroup-0] INFO TaskGroupContainer - taskGroupId=[0] start [2] channels for [2] tasks. 2021-02-23 15:22:57.935 [taskGroup-0] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021-02-23 15:22:57.936 [taskGroup-0] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 2021-02-23 15:22:57.970 [0-0-1-writer] INFO DorisWriterTask - connect DorisDB with http://127.0.0.1:8030//api/example_db/table1/_stream_load 2021-02-23 15:22:57.970 [0-0-0-writer] INFO DorisWriterTask - connect DorisDB with http://127.0.0.1:8030//api/example_db/table1/_stream_load 2021-02-23 15:23:00.941 [job-0] INFO JobContainer - PerfTrace not enable! 2021-02-23 15:23:00.946 [job-0] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-02-23 15:22:57 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-02-23 15:23:00 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 1.56KB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 66rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 200 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 Doris \u7684HTTP\u8fde\u63a5\u65b9\u5f0f\uff0c\u53ea\u9700\u8981\u5199\u5230\u4e3b\u673a\u548c\u7aef\u53e3\u5373\u53ef\uff0c\u5177\u4f53\u8def\u5f84\u63d2\u4ef6\u4f1a\u81ea\u52a8\u62fc\u88c5 \uff5c username \u662f string \u65e0 HTTP \u7b7e\u540d\u9a8c\u8bc1\u5e10\u53f7 password \u5426 string \u65e0 HTTP \u7b7e\u540d\u9a8c\u8bc1\u5bc6\u7801 table \u662f string \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d column \u5426 list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter batchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77 lineDelimiter \u5426 string \\n \u6bcf\u884c\u7684\u7684\u5206\u9694\u7b26,\u652f\u6301\u591a\u4e2a\u5b57\u8282, \u4f8b\u5982 \\x02\\x03 format \u5426 string csv \u5bfc\u5165\u6570\u636e\u7684\u683c\u5f0f, \u53ef\u4ee5\u4f7f\u662f json \u6216\u8005 csv loadProps \u5426 map csv streamLoad \u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u8be6\u60c5\u53c2\u7167 StreamLoad\u4ecb\u7ecd\u9875\u9762 connectTimeout \u5426 int -1 StreamLoad\u5355\u6b21\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u6beb\u79d2(ms) endpoint \u00b6 endpoint \u53ea\u662f\u7684\u4efb\u610f\u4e00\u4e2a BE \u7684\u4e3b\u673a\u540d\u53ca webserver_port \u7aef\u53e3\uff0c\u5b98\u65b9\u6587\u6863\u63cf\u8ff0\u4e5f\u53ef\u4ee5\u586b\u5199 FE \u4e3b\u673a\u540d\u548c http_port \u7aef\u53e3\uff0c\u4f46\u5b9e\u9645\u6d4b\u8bd5\u4e00\u76f4\u5904\u4e8e\u8fde\u63a5\u62d2\u7edd\u72b6\u6001\u3002 column \u00b6 \u8be5\u63d2\u4ef6\u4e2d\u7684 column \u4e0d\u662f\u5fc5\u987b\u9879\uff0c\u5982\u679c\u6ca1\u6709\u914d\u7f6e\u8be5\u9879\uff0c\u6216\u8005\u914d\u7f6e\u4e3a [\"*\"] \uff0c \u5219\u6309\u7167 reader \u63d2\u4ef6\u83b7\u53d6\u7684\u5b57\u6bb5\u503c\u8fdb\u884c\u987a\u5e8f\u62fc\u88c5\u3002 \u5426\u5219\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6307\u5b9a\u9700\u8981\u63d2\u5165\u7684\u5b57\u6bb5 { \"column\" : [ \"siteid\" , \"citycode\" , \"username\" ] }","title":"Doris Writer"},{"location":"writer/doriswriter/#doris-writer","text":"DorisWriter \u63d2\u4ef6\u7528\u4e8e\u5411 Doris \u6570\u636e\u5e93\u4ee5\u6d41\u5f0f\u65b9\u5f0f\u5199\u5165\u6570\u636e\u3002 \u5176\u5b9e\u73b0\u4e0a\u662f\u901a\u8fc7\u8bbf\u95ee Doris http \u8fde\u63a5(8030) \uff0c\u7136\u540e\u901a\u8fc7 stream load \u52a0\u8f7d\u6570\u636e\u5230\u6570\u636e\u4e2d\uff0c\u76f8\u6bd4 insert into \u65b9\u5f0f\u6548\u7387\u8981\u9ad8\u4e0d\u5c11\uff0c\u4e5f\u662f\u5b98\u65b9\u63a8\u8350\u7684\u751f\u4ea7\u73af\u5883\u4e0b\u7684\u6570\u636e\u52a0\u8f7d\u65b9\u5f0f\u3002 Doris \u662f\u4e00\u4e2a\u517c\u5bb9 MySQL \u534f\u8bae\u7684\u6570\u636e\u5e93\u540e\u7aef\uff0c\u56e0\u6b64 Doris \u8bfb\u53d6\u53ef\u4ee5\u4f7f\u7528 MySQLReader \u8fdb\u884c\u8bbf\u95ee\u3002","title":"Doris Writer"},{"location":"writer/doriswriter/#_1","text":"\u5047\u5b9a\u8981\u5199\u5165\u7684\u8868\u7684\u5efa\u8868\u8bed\u53e5\u5982\u4e0b\uff1a CREATE DATABASE example_db ; CREATE TABLE example_db . table1 ( siteid INT DEFAULT '10' , citycode SMALLINT , username VARCHAR ( 32 ) DEFAULT '' , pv BIGINT SUM DEFAULT '0' ) AGGREGATE KEY ( siteid , citycode , username ) DISTRIBUTED BY HASH ( siteid ) BUCKETS 10 PROPERTIES ( \"replication_num\" = \"1\" ); \u4e0b\u9762\u914d\u7f6e\u4e00\u4e2a\u4ece\u5185\u5b58\u8bfb\u53d6\u6570\u636e\uff0c\u7136\u540e\u5199\u5165\u5230 doris \u8868\u7684\u914d\u7f6e\u6587\u4ef6 { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 } }, \"content\" : { \"writer\" : { \"name\" : \"doriswriter\" , \"parameter\" : { \"username\" : \"test\" , \"password\" : \"123456\" , \"batchSize\" : 1024 , \"connection\" : [ { \"table\" : \"table1\" , \"database\" : \"example_db\" , \"endpoint\" : \"http://127.0.0.1:8030/\" } ], \"loadProps\" : {}, \"lineDelimiter\" : \"\\n\" , \"format\" : \"csv\" } }, \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"random\" : \"1,500\" , \"type\" : \"long\" }, { \"random\" : \"1,127\" , \"type\" : \"long\" }, { \"value\" : \"this is a text\" , \"type\" : \"string\" }, { \"random\" : \"5,200\" , \"type\" : \"long\" } ], \"sliceRecordCount\" : 100 } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/stream2doris.json \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4 bin/addax.sh job/stream2doris.json \u8f93\u51fa\u7c7b\u4f3c\u5982\u4e0b\uff1a 2021-02-23 15:22:57.851 [main] INFO VMInfo - VMInfo# operatingSystem class => sun.management.OperatingSystemImpl 2021-02-23 15:22:57.871 [main] INFO Engine - { \"content\":{ \"reader\":{ \"parameter\":{ \"column\":[ { \"random\":\"1,500\", \"type\":\"long\" }, { \"random\":\"1,127\", \"type\":\"long\" }, { \"type\":\"string\", \"value\":\"username\" } ], \"sliceRecordCount\":100 }, \"name\":\"streamreader\" }, \"writer\":{ \"parameter\":{ \"password\":\"*****\", \"batchSize\":1024, \"connection\":[ { \"database\":\"example_db\", \"endpoint\":\"http://127.0.0.1:8030/\", \"table\":\"table1\" } ], \"username\":\"test\" }, \"name\":\"doriswriter\" } }, \"setting\":{ \"speed\":{ \"channel\":2 } } } 2021-02-23 15:22:57.886 [main] INFO PerfTrace - PerfTrace traceId=job_-1, isEnable=false, priority=0 2021-02-23 15:22:57.886 [main] INFO JobContainer - Addax jobContainer starts job. 2021-02-23 15:22:57.920 [job-0] INFO JobContainer - Scheduler starts [1] taskGroups. 2021-02-23 15:22:57.928 [taskGroup-0] INFO TaskGroupContainer - taskGroupId=[0] start [2] channels for [2] tasks. 2021-02-23 15:22:57.935 [taskGroup-0] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021-02-23 15:22:57.936 [taskGroup-0] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 2021-02-23 15:22:57.970 [0-0-1-writer] INFO DorisWriterTask - connect DorisDB with http://127.0.0.1:8030//api/example_db/table1/_stream_load 2021-02-23 15:22:57.970 [0-0-0-writer] INFO DorisWriterTask - connect DorisDB with http://127.0.0.1:8030//api/example_db/table1/_stream_load 2021-02-23 15:23:00.941 [job-0] INFO JobContainer - PerfTrace not enable! 2021-02-23 15:23:00.946 [job-0] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-02-23 15:22:57 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-02-23 15:23:00 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 1.56KB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 66rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 200 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0","title":"\u793a\u4f8b"},{"location":"writer/doriswriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 Doris \u7684HTTP\u8fde\u63a5\u65b9\u5f0f\uff0c\u53ea\u9700\u8981\u5199\u5230\u4e3b\u673a\u548c\u7aef\u53e3\u5373\u53ef\uff0c\u5177\u4f53\u8def\u5f84\u63d2\u4ef6\u4f1a\u81ea\u52a8\u62fc\u88c5 \uff5c username \u662f string \u65e0 HTTP \u7b7e\u540d\u9a8c\u8bc1\u5e10\u53f7 password \u5426 string \u65e0 HTTP \u7b7e\u540d\u9a8c\u8bc1\u5bc6\u7801 table \u662f string \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d column \u5426 list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter batchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77 lineDelimiter \u5426 string \\n \u6bcf\u884c\u7684\u7684\u5206\u9694\u7b26,\u652f\u6301\u591a\u4e2a\u5b57\u8282, \u4f8b\u5982 \\x02\\x03 format \u5426 string csv \u5bfc\u5165\u6570\u636e\u7684\u683c\u5f0f, \u53ef\u4ee5\u4f7f\u662f json \u6216\u8005 csv loadProps \u5426 map csv streamLoad \u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u8be6\u60c5\u53c2\u7167 StreamLoad\u4ecb\u7ecd\u9875\u9762 connectTimeout \u5426 int -1 StreamLoad\u5355\u6b21\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u6beb\u79d2(ms)","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/doriswriter/#endpoint","text":"endpoint \u53ea\u662f\u7684\u4efb\u610f\u4e00\u4e2a BE \u7684\u4e3b\u673a\u540d\u53ca webserver_port \u7aef\u53e3\uff0c\u5b98\u65b9\u6587\u6863\u63cf\u8ff0\u4e5f\u53ef\u4ee5\u586b\u5199 FE \u4e3b\u673a\u540d\u548c http_port \u7aef\u53e3\uff0c\u4f46\u5b9e\u9645\u6d4b\u8bd5\u4e00\u76f4\u5904\u4e8e\u8fde\u63a5\u62d2\u7edd\u72b6\u6001\u3002","title":"endpoint"},{"location":"writer/doriswriter/#column","text":"\u8be5\u63d2\u4ef6\u4e2d\u7684 column \u4e0d\u662f\u5fc5\u987b\u9879\uff0c\u5982\u679c\u6ca1\u6709\u914d\u7f6e\u8be5\u9879\uff0c\u6216\u8005\u914d\u7f6e\u4e3a [\"*\"] \uff0c \u5219\u6309\u7167 reader \u63d2\u4ef6\u83b7\u53d6\u7684\u5b57\u6bb5\u503c\u8fdb\u884c\u987a\u5e8f\u62fc\u88c5\u3002 \u5426\u5219\u53ef\u4ee5\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6307\u5b9a\u9700\u8981\u63d2\u5165\u7684\u5b57\u6bb5 { \"column\" : [ \"siteid\" , \"citycode\" , \"username\" ] }","title":"column"},{"location":"writer/elasticsearchwriter/","text":"ElasticSearch Writer \u00b6 elasticsearchWriter \u63d2\u4ef6\u7528\u4e8e\u5411 ElasticSearch \u5199\u5165\u6570\u636e\u3002\u5176\u5b9e\u73b0\u662f\u901a\u8fc7 elasticsearch \u7684rest api\u63a5\u53e3\uff0c \u6279\u91cf\u628a\u636e\u5199\u5165elasticsearch \u914d\u7f6e\u6837\u4f8b \u00b6 job/stream2es.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"random\" : \"10,1000\" , \"type\" : \"long\" }, { \"value\" : \"1.1.1.1\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"double\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"hello world\" , \"type\" : \"string\" }, { \"value\" : \"long text\" , \"type\" : \"string\" }, { \"value\" : \"41.12,-71.34\" , \"type\" : \"string\" }, { \"value\" : \"2017-05-25 11:22:33\" , \"type\" : \"string\" } ], \"sliceRecordCount\" : 100 } }, \"writer\" : { \"name\" : \"elasticsearchwriter\" , \"parameter\" : { \"endpoint\" : \"http://localhost:9200\" , \"index\" : \"test-1\" , \"type\" : \"default\" , \"cleanup\" : true , \"settings\" : { \"index\" : { \"number_of_shards\" : 1 , \"number_of_replicas\" : 0 } }, \"discovery\" : false , \"batchSize\" : 1000 , \"splitter\" : \",\" , \"column\" : [ { \"name\" : \"pk\" , \"type\" : \"id\" }, { \"name\" : \"col_ip\" , \"type\" : \"ip\" }, { \"name\" : \"col_double\" , \"type\" : \"double\" }, { \"name\" : \"col_long\" , \"type\" : \"long\" }, { \"name\" : \"col_integer\" , \"type\" : \"integer\" }, { \"name\" : \"col_keyword\" , \"type\" : \"keyword\" }, { \"name\" : \"col_text\" , \"type\" : \"text\" , \"analyzer\" : \"ik_max_word\" }, { \"name\" : \"col_geo_point\" , \"type\" : \"geo_point\" }, { \"name\" : \"col_date\" , \"type\" : \"date\" , \"format\" : \"yyyy-MM-dd HH:mm:ss\" }, { \"name\" : \"col_nested1\" , \"type\" : \"nested\" }, { \"name\" : \"col_nested2\" , \"type\" : \"nested\" }, { \"name\" : \"col_object1\" , \"type\" : \"object\" }, { \"name\" : \"col_object2\" , \"type\" : \"object\" }, { \"name\" : \"col_integer_array\" , \"type\" : \"integer\" , \"array\" : true }, { \"name\" : \"col_geo_shape\" , \"type\" : \"geo_shape\" , \"tree\" : \"quadtree\" , \"precision\" : \"10m\" } ] } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f \u65e0 ElasticSearch\u7684\u8fde\u63a5\u5730\u5740 accessId \u5426 \u7a7a http auth\u4e2d\u7684user, \u9ed8\u8ba4\u4e3a\u7a7a accessKey \u5426 \u7a7a http auth\u4e2d\u7684password index \u662f \u65e0 index\u540d type \u5426 index\u540d index\u7684type\u540d cleanup \u5426 false \u662f\u5426\u5220\u9664\u539f\u8868 batchSize \u5426 1000 \u6bcf\u6b21\u6279\u91cf\u6570\u636e\u7684\u6761\u6570 trySize \u5426 30 \u5931\u8d25\u540e\u91cd\u8bd5\u7684\u6b21\u6570 timeout \u5426 600000 \u5ba2\u6237\u7aef\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2(ms) discovery \u5426 false \u542f\u7528\u8282\u70b9\u53d1\u73b0\u5c06(\u8f6e\u8be2)\u5e76\u5b9a\u671f\u66f4\u65b0\u5ba2\u6237\u673a\u4e2d\u7684\u670d\u52a1\u5668\u5217\u8868 compression \u5426 true \u5426\u662f\u5f00\u542fhttp\u8bf7\u6c42\u538b\u7f29 multiThread \u5426 true \u662f\u5426\u5f00\u542f\u591a\u7ebf\u7a0bhttp\u8bf7\u6c42 ignoreWriteError \u5426 false \u5199\u5165\u9519\u8bef\u65f6\uff0c\u662f\u5426\u91cd\u8bd5\uff0c\u5982\u679c\u662f true \u5219\u8868\u793a\u4e00\u76f4\u91cd\u8bd5\uff0c\u5426\u5219\u5ffd\u7565\u8be5\u6761\u6570\u636e ignoreParseError \u5426 true \u89e3\u6790\u6570\u636e\u683c\u5f0f\u9519\u8bef\u65f6\uff0c\u662f\u5426\u7ee7\u7eed\u5199\u5165 alias \u5426 \u65e0 \u6570\u636e\u5bfc\u5165\u5b8c\u6210\u540e\u5199\u5165\u522b\u540d aliasMode \u5426 append \u6570\u636e\u5bfc\u5165\u5b8c\u6210\u540e\u589e\u52a0\u522b\u540d\u7684\u6a21\u5f0f\uff0cappend(\u589e\u52a0\u6a21\u5f0f), exclusive(\u53ea\u7559\u8fd9\u4e00\u4e2a) settings \u5426 \u65e0 \u521b\u5efaindex\u65f6\u5019\u7684settings, \u4e0eelasticsearch\u5b98\u65b9\u76f8\u540c splitter \u5426 , \u5982\u679c\u63d2\u5165\u6570\u636e\u662farray\uff0c\u5c31\u4f7f\u7528\u6307\u5b9a\u5206\u9694\u7b26 column \u662f \u65e0 \u5b57\u6bb5\u7c7b\u578b\uff0c\u6587\u6863\u4e2d\u7ed9\u51fa\u7684\u6837\u4f8b\u4e2d\u5305\u542b\u4e86\u5168\u90e8\u652f\u6301\u7684\u5b57\u6bb5\u7c7b\u578b dynamic \u5426 false \u4e0d\u4f7f\u7528addax\u7684mappings\uff0c\u4f7f\u7528es\u81ea\u5df1\u7684\u81ea\u52a8mappings \u7ea6\u675f\u9650\u5236 \u00b6 \u5982\u679c\u5bfc\u5165id\uff0c\u8fd9\u6837\u6570\u636e\u5bfc\u5165\u5931\u8d25\u4e5f\u4f1a\u91cd\u8bd5\uff0c\u91cd\u65b0\u5bfc\u5165\u4e5f\u4ec5\u4ec5\u662f\u8986\u76d6\uff0c\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027 \u5982\u679c\u4e0d\u5bfc\u5165id\uff0c\u5c31\u662fappend_only\u6a21\u5f0f\uff0celasticsearch\u81ea\u52a8\u751f\u6210id\uff0c\u901f\u5ea6\u4f1a\u63d0\u534720%\u5de6\u53f3\uff0c\u4f46\u6570\u636e\u65e0\u6cd5\u4fee\u590d\uff0c\u9002\u5408\u65e5\u5fd7\u578b\u6570\u636e(\u5bf9\u6570\u636e\u7cbe\u5ea6\u8981\u6c42\u4e0d\u9ad8\u7684)","title":"ElasticSearch Writer"},{"location":"writer/elasticsearchwriter/#elasticsearch-writer","text":"elasticsearchWriter \u63d2\u4ef6\u7528\u4e8e\u5411 ElasticSearch \u5199\u5165\u6570\u636e\u3002\u5176\u5b9e\u73b0\u662f\u901a\u8fc7 elasticsearch \u7684rest api\u63a5\u53e3\uff0c \u6279\u91cf\u628a\u636e\u5199\u5165elasticsearch","title":"ElasticSearch Writer"},{"location":"writer/elasticsearchwriter/#_1","text":"job/stream2es.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"random\" : \"10,1000\" , \"type\" : \"long\" }, { \"value\" : \"1.1.1.1\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"double\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"hello world\" , \"type\" : \"string\" }, { \"value\" : \"long text\" , \"type\" : \"string\" }, { \"value\" : \"41.12,-71.34\" , \"type\" : \"string\" }, { \"value\" : \"2017-05-25 11:22:33\" , \"type\" : \"string\" } ], \"sliceRecordCount\" : 100 } }, \"writer\" : { \"name\" : \"elasticsearchwriter\" , \"parameter\" : { \"endpoint\" : \"http://localhost:9200\" , \"index\" : \"test-1\" , \"type\" : \"default\" , \"cleanup\" : true , \"settings\" : { \"index\" : { \"number_of_shards\" : 1 , \"number_of_replicas\" : 0 } }, \"discovery\" : false , \"batchSize\" : 1000 , \"splitter\" : \",\" , \"column\" : [ { \"name\" : \"pk\" , \"type\" : \"id\" }, { \"name\" : \"col_ip\" , \"type\" : \"ip\" }, { \"name\" : \"col_double\" , \"type\" : \"double\" }, { \"name\" : \"col_long\" , \"type\" : \"long\" }, { \"name\" : \"col_integer\" , \"type\" : \"integer\" }, { \"name\" : \"col_keyword\" , \"type\" : \"keyword\" }, { \"name\" : \"col_text\" , \"type\" : \"text\" , \"analyzer\" : \"ik_max_word\" }, { \"name\" : \"col_geo_point\" , \"type\" : \"geo_point\" }, { \"name\" : \"col_date\" , \"type\" : \"date\" , \"format\" : \"yyyy-MM-dd HH:mm:ss\" }, { \"name\" : \"col_nested1\" , \"type\" : \"nested\" }, { \"name\" : \"col_nested2\" , \"type\" : \"nested\" }, { \"name\" : \"col_object1\" , \"type\" : \"object\" }, { \"name\" : \"col_object2\" , \"type\" : \"object\" }, { \"name\" : \"col_integer_array\" , \"type\" : \"integer\" , \"array\" : true }, { \"name\" : \"col_geo_shape\" , \"type\" : \"geo_shape\" , \"tree\" : \"quadtree\" , \"precision\" : \"10m\" } ] } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/elasticsearchwriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f \u65e0 ElasticSearch\u7684\u8fde\u63a5\u5730\u5740 accessId \u5426 \u7a7a http auth\u4e2d\u7684user, \u9ed8\u8ba4\u4e3a\u7a7a accessKey \u5426 \u7a7a http auth\u4e2d\u7684password index \u662f \u65e0 index\u540d type \u5426 index\u540d index\u7684type\u540d cleanup \u5426 false \u662f\u5426\u5220\u9664\u539f\u8868 batchSize \u5426 1000 \u6bcf\u6b21\u6279\u91cf\u6570\u636e\u7684\u6761\u6570 trySize \u5426 30 \u5931\u8d25\u540e\u91cd\u8bd5\u7684\u6b21\u6570 timeout \u5426 600000 \u5ba2\u6237\u7aef\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2(ms) discovery \u5426 false \u542f\u7528\u8282\u70b9\u53d1\u73b0\u5c06(\u8f6e\u8be2)\u5e76\u5b9a\u671f\u66f4\u65b0\u5ba2\u6237\u673a\u4e2d\u7684\u670d\u52a1\u5668\u5217\u8868 compression \u5426 true \u5426\u662f\u5f00\u542fhttp\u8bf7\u6c42\u538b\u7f29 multiThread \u5426 true \u662f\u5426\u5f00\u542f\u591a\u7ebf\u7a0bhttp\u8bf7\u6c42 ignoreWriteError \u5426 false \u5199\u5165\u9519\u8bef\u65f6\uff0c\u662f\u5426\u91cd\u8bd5\uff0c\u5982\u679c\u662f true \u5219\u8868\u793a\u4e00\u76f4\u91cd\u8bd5\uff0c\u5426\u5219\u5ffd\u7565\u8be5\u6761\u6570\u636e ignoreParseError \u5426 true \u89e3\u6790\u6570\u636e\u683c\u5f0f\u9519\u8bef\u65f6\uff0c\u662f\u5426\u7ee7\u7eed\u5199\u5165 alias \u5426 \u65e0 \u6570\u636e\u5bfc\u5165\u5b8c\u6210\u540e\u5199\u5165\u522b\u540d aliasMode \u5426 append \u6570\u636e\u5bfc\u5165\u5b8c\u6210\u540e\u589e\u52a0\u522b\u540d\u7684\u6a21\u5f0f\uff0cappend(\u589e\u52a0\u6a21\u5f0f), exclusive(\u53ea\u7559\u8fd9\u4e00\u4e2a) settings \u5426 \u65e0 \u521b\u5efaindex\u65f6\u5019\u7684settings, \u4e0eelasticsearch\u5b98\u65b9\u76f8\u540c splitter \u5426 , \u5982\u679c\u63d2\u5165\u6570\u636e\u662farray\uff0c\u5c31\u4f7f\u7528\u6307\u5b9a\u5206\u9694\u7b26 column \u662f \u65e0 \u5b57\u6bb5\u7c7b\u578b\uff0c\u6587\u6863\u4e2d\u7ed9\u51fa\u7684\u6837\u4f8b\u4e2d\u5305\u542b\u4e86\u5168\u90e8\u652f\u6301\u7684\u5b57\u6bb5\u7c7b\u578b dynamic \u5426 false \u4e0d\u4f7f\u7528addax\u7684mappings\uff0c\u4f7f\u7528es\u81ea\u5df1\u7684\u81ea\u52a8mappings","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/elasticsearchwriter/#_3","text":"\u5982\u679c\u5bfc\u5165id\uff0c\u8fd9\u6837\u6570\u636e\u5bfc\u5165\u5931\u8d25\u4e5f\u4f1a\u91cd\u8bd5\uff0c\u91cd\u65b0\u5bfc\u5165\u4e5f\u4ec5\u4ec5\u662f\u8986\u76d6\uff0c\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027 \u5982\u679c\u4e0d\u5bfc\u5165id\uff0c\u5c31\u662fappend_only\u6a21\u5f0f\uff0celasticsearch\u81ea\u52a8\u751f\u6210id\uff0c\u901f\u5ea6\u4f1a\u63d0\u534720%\u5de6\u53f3\uff0c\u4f46\u6570\u636e\u65e0\u6cd5\u4fee\u590d\uff0c\u9002\u5408\u65e5\u5fd7\u578b\u6570\u636e(\u5bf9\u6570\u636e\u7cbe\u5ea6\u8981\u6c42\u4e0d\u9ad8\u7684)","title":"\u7ea6\u675f\u9650\u5236"},{"location":"writer/excelwriter/","text":"Excel Writer \u00b6 excelwriter \u5b9e\u73b0\u4e86\u5c06\u6570\u636e\u5199\u5165\u5230 Excel \u6587\u4ef6\u7684\u529f\u80fd \u914d\u7f6e\u793a\u4f8b \u00b6 \u6211\u4eec\u5047\u5b9a\u4ece\u5185\u5b58\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u5199\u5165\u5230 Excel \u6587\u4ef6\u4e2d { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"DataX\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 11:22:33\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"excelwriter\" , \"parameter\" : { \"path\" : \"/tmp/out\" , \"fileName\" : \"test\" , \"header\" : [ \"str\" , \"\u957f\u5ea6\" , \"\u65e5\u671f\" , \"\u662f\u5426\u4e3a\u771f\" , \"\u5b57\u8282\u7c7b\u578b\" ] } } } } } \u8bb2\u4e0a\u8ff0\u5185\u5bb9\u4fdd\u5b58\u4e3a job/stream2excel.json \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a bin/addax.sh job/stream2excel.sh \u5e94\u8be5\u5f97\u5230\u7c7b\u4f3c\u5982\u4e0b\u7684\u8f93\u51fa \u70b9\u51fb\u5c55\u5f00 ___ _ _ / _ \\ | | | | / /_ \\ \\ __ | | __ | | __ ___ __ | _ | / _ ` | / _ ` | / _ ` \\ \\/ / | | | | ( _ | | ( _ | | ( _ | | > < \\_ | | _/ \\_ _,_ | \\_ _,_ | \\_ _,_/_/ \\_\\ :: Addax version :: ( v4.0.3-SNAPSHOT ) 2021 -09-10 22 :16:38.247 [ main ] INFO VMInfo - VMInfo# operatingSystem class = > sun.management.OperatingSystemImpl 2021 -09-10 22 :16:38.269 [ main ] INFO Engine - { \"content\" : { \"reader\" : { \"parameter\" : { \"column\" : [ { \"type\" : \"string\" , \"value\" : \"DataX\" } , { \"type\" : \"long\" , \"value\" :19890604 } , { \"type\" : \"date\" , \"value\" : \"1989-06-04 11:22:33\" } , { \"type\" : \"bool\" , \"value\" :true } , { \"type\" : \"bytes\" , \"value\" : \"test\" } ] , \"sliceRecordCount\" :1000 } , \"name\" : \"streamreader\" } , \"writer\" : { \"parameter\" : { \"path\" : \"/tmp/out\" , \"fileName\" : \"test\" , \"header\" : [ \"str\" , \"\u957f\u5ea6\" , \"\u65e5\u671f\" , \"\u662f\u5426\u4e3a\u771f\" , \"\u5b57\u8282\u7c7b\u578b\" ] , \"writeMode\" : \"truncate\" } , \"name\" : \"excelwriter\" } } , \"setting\" : { \"speed\" : { \"byte\" :-1, \"channel\" :1 } } } 2021 -09-10 22 :16:38.287 [ main ] INFO PerfTrace - PerfTrace traceId = job_-1, isEnable = false, priority = 0 2021 -09-10 22 :16:38.287 [ main ] INFO JobContainer - Addax jobContainer starts job. 2021 -09-10 22 :16:38.289 [ main ] INFO JobContainer - Set jobId = 0 2021 -09-10 22 :16:38.303 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do prepare work . 2021 -09-10 22 :16:38.304 [ job-0 ] INFO JobContainer - Addax Writer.Job [ excelwriter ] do prepare work . 2021 -09-10 22 :16:38.304 [ job-0 ] INFO JobContainer - Job set Channel-Number to 1 channels. 2021 -09-10 22 :16:38.304 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] splits to [ 1 ] tasks. 2021 -09-10 22 :16:38.305 [ job-0 ] INFO JobContainer - Addax Writer.Job [ excelwriter ] splits to [ 1 ] tasks. 2021 -09-10 22 :16:38.325 [ job-0 ] INFO JobContainer - Scheduler starts [ 1 ] taskGroups. 2021 -09-10 22 :16:38.332 [ taskGroup-0 ] INFO TaskGroupContainer - taskGroupId =[ 0 ] start [ 1 ] channels for [ 1 ] tasks. 2021 -09-10 22 :16:38.335 [ taskGroup-0 ] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021 -09-10 22 :16:38.336 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 2021 -09-10 22 :16:41.345 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -09-10 22 :16:41.346 [ job-0 ] INFO JobContainer - Addax Writer.Job [ excelwriter ] do post work. 2021 -09-10 22 :16:41.346 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do post work. 2021 -09-10 22 :16:41.348 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -09-10 22 :16:41.349 [ job-0 ] INFO StandAloneJobContainerCommunicator - Total 1000 records, 26000 bytes | Speed 8 .46KB/s, 333 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0 .528s | All Task WaitReaderTime 0 .000s | Percentage 100 .00% 2021 -09-10 22 :16:41.350 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -09-10 22 :16:38 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -09-10 22 :16:41 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 8 .46KB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 333rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 1000 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f string \u65e0 \u6307\u5b9a\u6587\u4ef6\u4fdd\u5b58\u7684\u76ee\u5f55, \u6307\u5b9a\u7684\u76ee\u5f55\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u5c1d\u8bd5\u521b\u5efa fileName \u662f string \u65e0 \u8981\u751f\u6210\u7684excel \u6587\u4ef6\u540d\uff0c\u8be6\u8ff0\u5982\u4e0b header \u5426 list \u65e0 Excel \u8868\u5934 fileName \u00b6 \u5982\u679c\u914d\u7f6e\u7684 fileName \u6ca1\u6709\u540e\u7f00\uff0c\u5219\u81ea\u52a8\u52a0\u4e0a .xlsx \uff1b \u5982\u679c\u540e\u7f00\u4e3a .xls \uff0c\u5219\u62a5\u9519\uff0c\u56e0\u4e3a\u5f53\u524d\u4ec5\u751f\u6210 Excel 97 \u4ee5\u540e\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u5373 .xlsx \u540e\u7f00\u7684\u6587\u4ef6 header \u00b6 \u5982\u679c\u4e0d\u6307\u5b9a header \uff0c\u5219\u751f\u6210\u7684 Excel \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u53ea\u6709\u6570\u636e\u3002 \u6ce8\u610f\uff0c\u63d2\u4ef6\u4e0d\u5173\u5fc3 header \u7684\u6570\u91cf\u662f\u5426\u5339\u914d\u6570\u636e\u4e2d\u7684\u5217\u6570\uff0c\u4e5f\u5c31\u662f\u8bf4\u8868\u5934\u7684\u5217\u6570\u5e76\u4e0d\u8981\u6c42\u548c\u63a5\u4e0b\u6765\u7684\u6570\u636e\u7684\u5217\u6570\u76f8\u7b49\u3002 \u9650\u5236 \u00b6 \u5f53\u524d\u4ec5\u751f\u6210\u4e00\u4e2a Excel \u6587\u4ef6\uff0c\u4e14\u6ca1\u6709\u8003\u8651\u884c\u6570\u548c\u5217\u6570\u662f\u5426\u8d85\u8fc7\u4e86 Excel \u7684\u9650\u5b9a \u5982\u679c\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u6709\u540c\u540d\u6587\u4ef6\uff0c\u5f53\u524d\u4f1a\u88ab\u8986\u76d6\uff0c\u540e\u7eed\u4f1a\u7edf\u4e00\u5904\u7406\u76ee\u6807\u76ee\u5f55\u7684\u95ee\u9898 \u5f53\u524d\u65e5\u671f\u683c\u5f0f\u7684\u6570\u636e\uff0c\u8bbe\u7f6e\u5355\u5143\u683c\u6837\u5f0f\u4e3a yyyy-MM-dd HH:mm:ss \uff0c\u4e14\u4e0d\u80fd\u5b9a\u5236 \u4e0d\u652f\u6301\u4e8c\u8fdb\u5236\u7c7b\u578b\u7684\u6570\u636e\u5199\u5165","title":"Excel Writer"},{"location":"writer/excelwriter/#excel-writer","text":"excelwriter \u5b9e\u73b0\u4e86\u5c06\u6570\u636e\u5199\u5165\u5230 Excel \u6587\u4ef6\u7684\u529f\u80fd","title":"Excel Writer"},{"location":"writer/excelwriter/#_1","text":"\u6211\u4eec\u5047\u5b9a\u4ece\u5185\u5b58\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u5199\u5165\u5230 Excel \u6587\u4ef6\u4e2d { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"DataX\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 11:22:33\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"excelwriter\" , \"parameter\" : { \"path\" : \"/tmp/out\" , \"fileName\" : \"test\" , \"header\" : [ \"str\" , \"\u957f\u5ea6\" , \"\u65e5\u671f\" , \"\u662f\u5426\u4e3a\u771f\" , \"\u5b57\u8282\u7c7b\u578b\" ] } } } } } \u8bb2\u4e0a\u8ff0\u5185\u5bb9\u4fdd\u5b58\u4e3a job/stream2excel.json \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff1a bin/addax.sh job/stream2excel.sh \u5e94\u8be5\u5f97\u5230\u7c7b\u4f3c\u5982\u4e0b\u7684\u8f93\u51fa \u70b9\u51fb\u5c55\u5f00 ___ _ _ / _ \\ | | | | / /_ \\ \\ __ | | __ | | __ ___ __ | _ | / _ ` | / _ ` | / _ ` \\ \\/ / | | | | ( _ | | ( _ | | ( _ | | > < \\_ | | _/ \\_ _,_ | \\_ _,_ | \\_ _,_/_/ \\_\\ :: Addax version :: ( v4.0.3-SNAPSHOT ) 2021 -09-10 22 :16:38.247 [ main ] INFO VMInfo - VMInfo# operatingSystem class = > sun.management.OperatingSystemImpl 2021 -09-10 22 :16:38.269 [ main ] INFO Engine - { \"content\" : { \"reader\" : { \"parameter\" : { \"column\" : [ { \"type\" : \"string\" , \"value\" : \"DataX\" } , { \"type\" : \"long\" , \"value\" :19890604 } , { \"type\" : \"date\" , \"value\" : \"1989-06-04 11:22:33\" } , { \"type\" : \"bool\" , \"value\" :true } , { \"type\" : \"bytes\" , \"value\" : \"test\" } ] , \"sliceRecordCount\" :1000 } , \"name\" : \"streamreader\" } , \"writer\" : { \"parameter\" : { \"path\" : \"/tmp/out\" , \"fileName\" : \"test\" , \"header\" : [ \"str\" , \"\u957f\u5ea6\" , \"\u65e5\u671f\" , \"\u662f\u5426\u4e3a\u771f\" , \"\u5b57\u8282\u7c7b\u578b\" ] , \"writeMode\" : \"truncate\" } , \"name\" : \"excelwriter\" } } , \"setting\" : { \"speed\" : { \"byte\" :-1, \"channel\" :1 } } } 2021 -09-10 22 :16:38.287 [ main ] INFO PerfTrace - PerfTrace traceId = job_-1, isEnable = false, priority = 0 2021 -09-10 22 :16:38.287 [ main ] INFO JobContainer - Addax jobContainer starts job. 2021 -09-10 22 :16:38.289 [ main ] INFO JobContainer - Set jobId = 0 2021 -09-10 22 :16:38.303 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do prepare work . 2021 -09-10 22 :16:38.304 [ job-0 ] INFO JobContainer - Addax Writer.Job [ excelwriter ] do prepare work . 2021 -09-10 22 :16:38.304 [ job-0 ] INFO JobContainer - Job set Channel-Number to 1 channels. 2021 -09-10 22 :16:38.304 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] splits to [ 1 ] tasks. 2021 -09-10 22 :16:38.305 [ job-0 ] INFO JobContainer - Addax Writer.Job [ excelwriter ] splits to [ 1 ] tasks. 2021 -09-10 22 :16:38.325 [ job-0 ] INFO JobContainer - Scheduler starts [ 1 ] taskGroups. 2021 -09-10 22 :16:38.332 [ taskGroup-0 ] INFO TaskGroupContainer - taskGroupId =[ 0 ] start [ 1 ] channels for [ 1 ] tasks. 2021 -09-10 22 :16:38.335 [ taskGroup-0 ] INFO Channel - Channel set byte_speed_limit to -1, No bps activated. 2021 -09-10 22 :16:38.336 [ taskGroup-0 ] INFO Channel - Channel set record_speed_limit to -1, No tps activated. 2021 -09-10 22 :16:41.345 [ job-0 ] INFO AbstractScheduler - Scheduler accomplished all tasks. 2021 -09-10 22 :16:41.346 [ job-0 ] INFO JobContainer - Addax Writer.Job [ excelwriter ] do post work. 2021 -09-10 22 :16:41.346 [ job-0 ] INFO JobContainer - Addax Reader.Job [ streamreader ] do post work. 2021 -09-10 22 :16:41.348 [ job-0 ] INFO JobContainer - PerfTrace not enable! 2021 -09-10 22 :16:41.349 [ job-0 ] INFO StandAloneJobContainerCommunicator - Total 1000 records, 26000 bytes | Speed 8 .46KB/s, 333 records/s | Error 0 records, 0 bytes | All Task WaitWriterTime 0 .528s | All Task WaitReaderTime 0 .000s | Percentage 100 .00% 2021 -09-10 22 :16:41.350 [ job-0 ] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021 -09-10 22 :16:38 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021 -09-10 22 :16:41 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 8 .46KB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 333rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 1000 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0","title":"\u914d\u7f6e\u793a\u4f8b"},{"location":"writer/excelwriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f string \u65e0 \u6307\u5b9a\u6587\u4ef6\u4fdd\u5b58\u7684\u76ee\u5f55, \u6307\u5b9a\u7684\u76ee\u5f55\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u5c1d\u8bd5\u521b\u5efa fileName \u662f string \u65e0 \u8981\u751f\u6210\u7684excel \u6587\u4ef6\u540d\uff0c\u8be6\u8ff0\u5982\u4e0b header \u5426 list \u65e0 Excel \u8868\u5934","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/excelwriter/#filename","text":"\u5982\u679c\u914d\u7f6e\u7684 fileName \u6ca1\u6709\u540e\u7f00\uff0c\u5219\u81ea\u52a8\u52a0\u4e0a .xlsx \uff1b \u5982\u679c\u540e\u7f00\u4e3a .xls \uff0c\u5219\u62a5\u9519\uff0c\u56e0\u4e3a\u5f53\u524d\u4ec5\u751f\u6210 Excel 97 \u4ee5\u540e\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u5373 .xlsx \u540e\u7f00\u7684\u6587\u4ef6","title":"fileName"},{"location":"writer/excelwriter/#header","text":"\u5982\u679c\u4e0d\u6307\u5b9a header \uff0c\u5219\u751f\u6210\u7684 Excel \u6587\u4ef6\u6ca1\u6709\u8868\u5934\uff0c\u53ea\u6709\u6570\u636e\u3002 \u6ce8\u610f\uff0c\u63d2\u4ef6\u4e0d\u5173\u5fc3 header \u7684\u6570\u91cf\u662f\u5426\u5339\u914d\u6570\u636e\u4e2d\u7684\u5217\u6570\uff0c\u4e5f\u5c31\u662f\u8bf4\u8868\u5934\u7684\u5217\u6570\u5e76\u4e0d\u8981\u6c42\u548c\u63a5\u4e0b\u6765\u7684\u6570\u636e\u7684\u5217\u6570\u76f8\u7b49\u3002","title":"header"},{"location":"writer/excelwriter/#_3","text":"\u5f53\u524d\u4ec5\u751f\u6210\u4e00\u4e2a Excel \u6587\u4ef6\uff0c\u4e14\u6ca1\u6709\u8003\u8651\u884c\u6570\u548c\u5217\u6570\u662f\u5426\u8d85\u8fc7\u4e86 Excel \u7684\u9650\u5b9a \u5982\u679c\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u6709\u540c\u540d\u6587\u4ef6\uff0c\u5f53\u524d\u4f1a\u88ab\u8986\u76d6\uff0c\u540e\u7eed\u4f1a\u7edf\u4e00\u5904\u7406\u76ee\u6807\u76ee\u5f55\u7684\u95ee\u9898 \u5f53\u524d\u65e5\u671f\u683c\u5f0f\u7684\u6570\u636e\uff0c\u8bbe\u7f6e\u5355\u5143\u683c\u6837\u5f0f\u4e3a yyyy-MM-dd HH:mm:ss \uff0c\u4e14\u4e0d\u80fd\u5b9a\u5236 \u4e0d\u652f\u6301\u4e8c\u8fdb\u5236\u7c7b\u578b\u7684\u6570\u636e\u5199\u5165","title":"\u9650\u5236"},{"location":"writer/ftpwriter/","text":"Ftp Writer \u00b6 FtpWriter \u63d0\u4f9b\u4e86\u5411\u8fdc\u7a0b FTP/SFTP \u670d\u52a1\u5199\u5165\u6587\u4ef6\u7684\u80fd\u529b\uff0c\u5f53\u524d\u4ec5\u652f\u6301\u5199\u5165\u6587\u672c\u6587\u4ef6\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 job/stream2ftp.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : {}, \"writer\" : { \"name\" : \"ftpwriter\" , \"parameter\" : { \"protocol\" : \"sftp\" , \"host\" : \"***\" , \"port\" : 22 , \"username\" : \"xxx\" , \"password\" : \"xxx\" , \"timeout\" : \"60000\" , \"connectPattern\" : \"PASV\" , \"path\" : \"/tmp/data/\" , \"fileName\" : \"test\" , \"writeMode\" : \"truncate|append|nonConflict\" , \"fieldDelimiter\" : \",\" , \"encoding\" : \"UTF-8\" , \"nullFormat\" : \"null\" , \"dateFormat\" : \"yyyy-MM-dd\" , \"fileFormat\" : \"csv\" , \"useKey\" : false , \"keyPath\" : \"\" , \"keyPass\" : \"\" , \"header\" : [] } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 protocol \u662f ftp ftp/sftp \u670d\u52a1\u5668\u534f\u8bae\uff0c\u76ee\u524d\u652f\u6301\u4f20\u8f93\u534f\u8bae\u6709ftp\u548csftp host \u662f \u65e0 ftp/sftp \u670d\u52a1\u5668\u5730\u5740 port \u5426 22/21 \u82e5\u4f20\u8f93\u534f\u8bae\u662fsftp\u534f\u8bae\uff0c\u9ed8\u8ba4\u503c\u662f22\uff1b\u82e5\u4f20\u8f93\u534f\u8bae\u662f\u6807\u51c6ftp\u534f\u8bae\uff0c\u9ed8\u8ba4\u503c\u662f21 timeout \u5426 60000 \u8fde\u63a5ftp\u670d\u52a1\u5668\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u6beb\u79d2(ms) connectPattern \u5426 PASV \u8fde\u63a5\u6a21\u5f0f\uff0c\u4ec5\u652f\u6301 PORT , PASV \u6a21\u5f0f\u3002\u8be5\u53c2\u6570\u53ea\u5728\u4f20\u8f93\u534f\u8bae\u662f\u6807\u51c6ftp\u534f\u8bae\u65f6\u4f7f\u7528 \uff5c username \u662f \u65e0 ftp/sftp \u670d\u52a1\u5668\u8bbf\u95ee\u7528\u6237\u540d password \u662f \u65e0 ftp/sftp \u670d\u52a1\u5668\u8bbf\u95ee\u5bc6\u7801 useKey \u5426 false \u662f\u5426\u4f7f\u7528\u79c1\u94a5\u767b\u5f55\uff0c\u4ec5\u9488\u5bf9 sftp \u767b\u5f55\u6709\u6548 keyPath \u5426 ~/.ssh/id_rsa \u79c1\u94a5\u5730\u5740\uff0c\u5982\u4e0d\u586b\u5199\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u79c1\u94a5 ~/.ssh/id_rsa keyPass \u5426 \u65e0 \u79c1\u94a5\u5bc6\u7801\uff0c\u82e5\u6ca1\u6709\u8bbe\u7f6e\u79c1\u94a5\u5bc6\u7801\uff0c\u5219\u65e0\u9700\u914d\u7f6e\u8be5\u9879 path \u662f \u65e0 \u8fdc\u7a0bFTP\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0cFtpWriter\u4f1a\u5199\u5165Path\u76ee\u5f55\u4e0b\u5c5e\u591a\u4e2a\u6587\u4ef6 fileName \u662f \u65e0 FtpWriter\u5199\u5165\u7684\u6587\u4ef6\u540d\uff0c\u8be5\u6587\u4ef6\u540d\u4f1a\u6dfb\u52a0\u968f\u673a\u7684\u540e\u7f00\u4f5c\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u5199\u5165\u5b9e\u9645\u6587\u4ef6\u540d writeMode \u662f \u65e0 FtpWriter\u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff0c\u652f\u6301 truncate , append , nonConflict \uff0c\u8be6\u89c1\u4e0b\u6587 fieldDelimiter \u662f , \u63cf\u8ff0\uff1a\u8bfb\u53d6\u7684\u5b57\u6bb5\u5206\u9694\u7b26 compress \u5426 \u65e0 \u6587\u672c\u538b\u7f29\u7c7b\u578b\uff0c\u6682\u4e0d\u652f\u6301 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e dateFormat \u5426 \u65e0 \u65e5\u671f\u7c7b\u578b\u7684\u6570\u636e\u5e8f\u5217\u5316\u5230\u6587\u4ef6\u4e2d\u65f6\u7684\u683c\u5f0f\uff0c\u4f8b\u5982 \"dateFormat\": \"yyyy-MM-dd\" fileFormat \u5426 text \u6587\u4ef6\u5199\u51fa\u7684\u683c\u5f0f\uff0c\u5305\u62eccsv, text\u4e24\u79cd\uff0c header \u5426 \u65e0 text\u5199\u51fa\u65f6\u7684\u8868\u5934\uff0c\u793a\u4f8b ['id', 'name', 'age'] nullFormat \u5426 \\N \u5b9a\u4e49\u54ea\u4e9b\u5b57\u7b26\u4e32\u53ef\u4ee5\u8868\u793a\u4e3anull maxTraversalLevel \u5426 100 \u5141\u8bb8\u904d\u5386\u6587\u4ef6\u5939\u7684\u6700\u5927\u5c42\u6570 csvReaderConfig \u5426 \u65e0 \u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u53c2\u6570\u914d\u7f6e\uff0cMap\u7c7b\u578b\u3002\u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u4f7f\u7528\u7684CsvReader\u8fdb\u884c\u8bfb\u53d6\uff0c\u4f1a\u6709\u5f88\u591a\u914d\u7f6e\uff0c\u4e0d\u914d\u7f6e\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c,\u8be6\u89c1\u4e0b\u6587 writeMode \u00b6 \u63cf\u8ff0\uff1aFtpWriter\u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff1a truncate \uff0c\u5199\u5165\u524d\u6e05\u7406\u76ee\u5f55\u4e0b\u4e00fileName\u524d\u7f00\u7684\u6240\u6709\u6587\u4ef6\u3002 append \uff0c\u5199\u5165\u524d\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff0cAddax FtpWriter\u76f4\u63a5\u4f7f\u7528filename\u5199\u5165\uff0c\u5e76\u4fdd\u8bc1\u6587\u4ef6\u540d\u4e0d\u51b2\u7a81\u3002 nonConflict \uff0c\u5982\u679c\u76ee\u5f55\u4e0b\u6709fileName\u524d\u7f00\u7684\u6587\u4ef6\uff0c\u76f4\u63a5\u62a5\u9519\u3002 \u8ba4\u8bc1 \u00b6 \u4ece 4.0.2 \u7248\u672c\u5f00\u59cb\uff0c \u652f\u6301\u79c1\u94a5\u8ba4\u8bc1\u65b9\u5f0f\u767b\u5f55 SFTP \u670d\u52a1\u5668\uff0c\u5982\u679c\u5bc6\u7801\u548c\u79c1\u6709\u90fd\u586b\u5199\u4e86\uff0c\u5219\u4e24\u8005\u8ba4\u8bc1\u65b9\u5f0f\u90fd\u4f1a\u5c1d\u8bd5\u3002 \u6ce8\u610f\uff0c\u5982\u679c\u586b\u5199\u4e86 keyPath , keyPass \u9879\uff0c\u4f46 useKey \u8bbe\u7f6e\u4e3a false \uff0c\u63d2\u4ef6\u4f9d\u7136\u4e0d\u4f1a\u5c1d\u8bd5\u7528\u79c1\u94a5\u8fdb\u884c\u767b\u5f55\u3002 \u7c7b\u578b\u8f6c\u6362 \u00b6 FTP\u6587\u4ef6\u672c\u8eab\u4e0d\u63d0\u4f9b\u6570\u636e\u7c7b\u578b\uff0c\u8be5\u7c7b\u578b\u662f Addax FtpWriter \u5b9a\u4e49\uff1a Addax \u5185\u90e8\u7c7b\u578b FTP\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long -> \u5b57\u7b26\u4e32\u5e8f\u5217\u5316\u8868\u793a Double Double -> \u5b57\u7b26\u4e32\u5e8f\u5217\u5316\u8868\u793a String String -> \u5b57\u7b26\u4e32\u5e8f\u5217\u5316\u8868\u793a Boolean Boolean -> \u5b57\u7b26\u4e32\u5e8f\u5217\u5316\u8868\u793a Date Date -> \u5b57\u7b26\u4e32\u5e8f\u5217\u5316\u8868\u793a","title":"Ftp Writer"},{"location":"writer/ftpwriter/#ftp-writer","text":"FtpWriter \u63d0\u4f9b\u4e86\u5411\u8fdc\u7a0b FTP/SFTP \u670d\u52a1\u5199\u5165\u6587\u4ef6\u7684\u80fd\u529b\uff0c\u5f53\u524d\u4ec5\u652f\u6301\u5199\u5165\u6587\u672c\u6587\u4ef6\u3002","title":"Ftp Writer"},{"location":"writer/ftpwriter/#_1","text":"job/stream2ftp.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : {}, \"writer\" : { \"name\" : \"ftpwriter\" , \"parameter\" : { \"protocol\" : \"sftp\" , \"host\" : \"***\" , \"port\" : 22 , \"username\" : \"xxx\" , \"password\" : \"xxx\" , \"timeout\" : \"60000\" , \"connectPattern\" : \"PASV\" , \"path\" : \"/tmp/data/\" , \"fileName\" : \"test\" , \"writeMode\" : \"truncate|append|nonConflict\" , \"fieldDelimiter\" : \",\" , \"encoding\" : \"UTF-8\" , \"nullFormat\" : \"null\" , \"dateFormat\" : \"yyyy-MM-dd\" , \"fileFormat\" : \"csv\" , \"useKey\" : false , \"keyPath\" : \"\" , \"keyPass\" : \"\" , \"header\" : [] } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/ftpwriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 protocol \u662f ftp ftp/sftp \u670d\u52a1\u5668\u534f\u8bae\uff0c\u76ee\u524d\u652f\u6301\u4f20\u8f93\u534f\u8bae\u6709ftp\u548csftp host \u662f \u65e0 ftp/sftp \u670d\u52a1\u5668\u5730\u5740 port \u5426 22/21 \u82e5\u4f20\u8f93\u534f\u8bae\u662fsftp\u534f\u8bae\uff0c\u9ed8\u8ba4\u503c\u662f22\uff1b\u82e5\u4f20\u8f93\u534f\u8bae\u662f\u6807\u51c6ftp\u534f\u8bae\uff0c\u9ed8\u8ba4\u503c\u662f21 timeout \u5426 60000 \u8fde\u63a5ftp\u670d\u52a1\u5668\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u6beb\u79d2(ms) connectPattern \u5426 PASV \u8fde\u63a5\u6a21\u5f0f\uff0c\u4ec5\u652f\u6301 PORT , PASV \u6a21\u5f0f\u3002\u8be5\u53c2\u6570\u53ea\u5728\u4f20\u8f93\u534f\u8bae\u662f\u6807\u51c6ftp\u534f\u8bae\u65f6\u4f7f\u7528 \uff5c username \u662f \u65e0 ftp/sftp \u670d\u52a1\u5668\u8bbf\u95ee\u7528\u6237\u540d password \u662f \u65e0 ftp/sftp \u670d\u52a1\u5668\u8bbf\u95ee\u5bc6\u7801 useKey \u5426 false \u662f\u5426\u4f7f\u7528\u79c1\u94a5\u767b\u5f55\uff0c\u4ec5\u9488\u5bf9 sftp \u767b\u5f55\u6709\u6548 keyPath \u5426 ~/.ssh/id_rsa \u79c1\u94a5\u5730\u5740\uff0c\u5982\u4e0d\u586b\u5199\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u79c1\u94a5 ~/.ssh/id_rsa keyPass \u5426 \u65e0 \u79c1\u94a5\u5bc6\u7801\uff0c\u82e5\u6ca1\u6709\u8bbe\u7f6e\u79c1\u94a5\u5bc6\u7801\uff0c\u5219\u65e0\u9700\u914d\u7f6e\u8be5\u9879 path \u662f \u65e0 \u8fdc\u7a0bFTP\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0cFtpWriter\u4f1a\u5199\u5165Path\u76ee\u5f55\u4e0b\u5c5e\u591a\u4e2a\u6587\u4ef6 fileName \u662f \u65e0 FtpWriter\u5199\u5165\u7684\u6587\u4ef6\u540d\uff0c\u8be5\u6587\u4ef6\u540d\u4f1a\u6dfb\u52a0\u968f\u673a\u7684\u540e\u7f00\u4f5c\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u5199\u5165\u5b9e\u9645\u6587\u4ef6\u540d writeMode \u662f \u65e0 FtpWriter\u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff0c\u652f\u6301 truncate , append , nonConflict \uff0c\u8be6\u89c1\u4e0b\u6587 fieldDelimiter \u662f , \u63cf\u8ff0\uff1a\u8bfb\u53d6\u7684\u5b57\u6bb5\u5206\u9694\u7b26 compress \u5426 \u65e0 \u6587\u672c\u538b\u7f29\u7c7b\u578b\uff0c\u6682\u4e0d\u652f\u6301 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e dateFormat \u5426 \u65e0 \u65e5\u671f\u7c7b\u578b\u7684\u6570\u636e\u5e8f\u5217\u5316\u5230\u6587\u4ef6\u4e2d\u65f6\u7684\u683c\u5f0f\uff0c\u4f8b\u5982 \"dateFormat\": \"yyyy-MM-dd\" fileFormat \u5426 text \u6587\u4ef6\u5199\u51fa\u7684\u683c\u5f0f\uff0c\u5305\u62eccsv, text\u4e24\u79cd\uff0c header \u5426 \u65e0 text\u5199\u51fa\u65f6\u7684\u8868\u5934\uff0c\u793a\u4f8b ['id', 'name', 'age'] nullFormat \u5426 \\N \u5b9a\u4e49\u54ea\u4e9b\u5b57\u7b26\u4e32\u53ef\u4ee5\u8868\u793a\u4e3anull maxTraversalLevel \u5426 100 \u5141\u8bb8\u904d\u5386\u6587\u4ef6\u5939\u7684\u6700\u5927\u5c42\u6570 csvReaderConfig \u5426 \u65e0 \u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u53c2\u6570\u914d\u7f6e\uff0cMap\u7c7b\u578b\u3002\u8bfb\u53d6CSV\u7c7b\u578b\u6587\u4ef6\u4f7f\u7528\u7684CsvReader\u8fdb\u884c\u8bfb\u53d6\uff0c\u4f1a\u6709\u5f88\u591a\u914d\u7f6e\uff0c\u4e0d\u914d\u7f6e\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c,\u8be6\u89c1\u4e0b\u6587","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/ftpwriter/#writemode","text":"\u63cf\u8ff0\uff1aFtpWriter\u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff1a truncate \uff0c\u5199\u5165\u524d\u6e05\u7406\u76ee\u5f55\u4e0b\u4e00fileName\u524d\u7f00\u7684\u6240\u6709\u6587\u4ef6\u3002 append \uff0c\u5199\u5165\u524d\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff0cAddax FtpWriter\u76f4\u63a5\u4f7f\u7528filename\u5199\u5165\uff0c\u5e76\u4fdd\u8bc1\u6587\u4ef6\u540d\u4e0d\u51b2\u7a81\u3002 nonConflict \uff0c\u5982\u679c\u76ee\u5f55\u4e0b\u6709fileName\u524d\u7f00\u7684\u6587\u4ef6\uff0c\u76f4\u63a5\u62a5\u9519\u3002","title":"writeMode"},{"location":"writer/ftpwriter/#_3","text":"\u4ece 4.0.2 \u7248\u672c\u5f00\u59cb\uff0c \u652f\u6301\u79c1\u94a5\u8ba4\u8bc1\u65b9\u5f0f\u767b\u5f55 SFTP \u670d\u52a1\u5668\uff0c\u5982\u679c\u5bc6\u7801\u548c\u79c1\u6709\u90fd\u586b\u5199\u4e86\uff0c\u5219\u4e24\u8005\u8ba4\u8bc1\u65b9\u5f0f\u90fd\u4f1a\u5c1d\u8bd5\u3002 \u6ce8\u610f\uff0c\u5982\u679c\u586b\u5199\u4e86 keyPath , keyPass \u9879\uff0c\u4f46 useKey \u8bbe\u7f6e\u4e3a false \uff0c\u63d2\u4ef6\u4f9d\u7136\u4e0d\u4f1a\u5c1d\u8bd5\u7528\u79c1\u94a5\u8fdb\u884c\u767b\u5f55\u3002","title":"\u8ba4\u8bc1"},{"location":"writer/ftpwriter/#_4","text":"FTP\u6587\u4ef6\u672c\u8eab\u4e0d\u63d0\u4f9b\u6570\u636e\u7c7b\u578b\uff0c\u8be5\u7c7b\u578b\u662f Addax FtpWriter \u5b9a\u4e49\uff1a Addax \u5185\u90e8\u7c7b\u578b FTP\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long -> \u5b57\u7b26\u4e32\u5e8f\u5217\u5316\u8868\u793a Double Double -> \u5b57\u7b26\u4e32\u5e8f\u5217\u5316\u8868\u793a String String -> \u5b57\u7b26\u4e32\u5e8f\u5217\u5316\u8868\u793a Boolean Boolean -> \u5b57\u7b26\u4e32\u5e8f\u5217\u5316\u8868\u793a Date Date -> \u5b57\u7b26\u4e32\u5e8f\u5217\u5316\u8868\u793a","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/greenplumwriter/","text":"Greenplum Writer \u00b6 GreenplumWriter \u63d2\u4ef6\u4f7f\u7528 COPY FROM \u8bed\u6cd5 \u5c06\u6570\u636e\u5199\u5165 Greenplum \u6570\u636e\u5e93\u3002 \u793a\u4f8b \u00b6 \u4ee5\u4e0b\u914d\u7f6e\u6f14\u793a\u4ecepostgresql\u6307\u5b9a\u7684\u8868\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u63d2\u5165\u5230\u5177\u6709\u76f8\u540c\u8868\u7ed3\u6784\u7684\u53e6\u5916\u4e00\u5f20\u8868\u4e2d\uff0c\u7528\u6765\u6d4b\u8bd5\u8be5\u63d2\u4ef6\u6240\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\u3002 create table if not exists addax_tbl ( c_bigint bigint , c_bit bit ( 3 ), c_bool boolean , c_byte bytea , c_char char ( 10 ), c_varchar varchar ( 20 ), c_date date , c_double float8 , c_int integer , c_json json , c_number decimal ( 8 , 3 ), c_real real , c_small smallint , c_text text , c_ts timestamp , c_uuid uuid , c_xml xml , c_money money , c_inet inet , c_cidr cidr , c_macaddr macaddr ); insert into addax_tbl values ( 999988887777 , B '101' , TRUE , '\\xDEADBEEF' , 'hello' , 'hello, world' , '2021-01-04' , 999888 . 9972 , 9876542 , '{\"bar\": \"baz\", \"balance\": 7.77, \"active\": false}' :: json , 12345 . 123 , 123 . 123 , 126 , 'this is a long text ' , '2020-01-04 12:13:14' , 'A0EEBC99-9C0B-4EF8-BB6D-6BB9BD380A11' :: uuid , '<foo>bar</foo>' :: xml , '52093.89' :: money , '192.168.1.1' :: inet , '192.168.1/24' :: cidr , '08002b:010203' :: macaddr ); \u521b\u5efa\u9700\u8981\u63d2\u5165\u7684\u8868\u7684\u8bed\u53e5\u5982\u4e0b: create table gp_test like addax_tbl ; \u4efb\u52a1\u914d\u7f6e \u00b6 \u4ee5\u4e0b\u662f\u914d\u7f6e\u6587\u4ef6 job/pg2gp.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"postgresqlreader\" , \"parameter\" : { \"username\" : \"wgzhao\" , \"password\" : \"wgzhao\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"addax_tbl\" ], \"jdbcUrl\" : [ \"jdbc:postgresql://localhost:5432/wgzhao\" ] } ] } }, \"writer\" : { \"name\" : \"greenplumwriter\" , \"parameter\" : { \"username\" : \"wgzhao\" , \"password\" : \"wgzhao\" , \"column\" : [ \"*\" ], \"preSql\" : [ \"truncate table @table\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:postgresql://localhost:5432/wgzhao\" , \"table\" : [ \"gp_test\" ] } ] } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/pg2gp.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/pg2gp.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter preSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u524d\u7387\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u6d89\u53ca\u5230\u7684\u8868\u53ef\u7528 @table \u8868\u793a postSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 batchSize \u5426 1024 \u4e00\u6b21\u5199\u5165\u7684\u8bb0\u5f55\u6570\uff0c\u8fd9\u91cc\u8868\u793a COPY FROM \u6307\u4ee4\u540e\u63a5\u6536\u7684\u8bb0\u5f55\u6570 \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b Greenplum \u6570\u636e\u7c7b\u578b Long bigint, bigserial, integer, smallint, serial Double double precision, money, numeric, real String varchar, char, text, bit, inet,cidr,macaddr,uuid,xml,json Date date, time, timestamp Boolean bool Bytes bytea","title":"Greenplum Writer"},{"location":"writer/greenplumwriter/#greenplum-writer","text":"GreenplumWriter \u63d2\u4ef6\u4f7f\u7528 COPY FROM \u8bed\u6cd5 \u5c06\u6570\u636e\u5199\u5165 Greenplum \u6570\u636e\u5e93\u3002","title":"Greenplum Writer"},{"location":"writer/greenplumwriter/#_1","text":"\u4ee5\u4e0b\u914d\u7f6e\u6f14\u793a\u4ecepostgresql\u6307\u5b9a\u7684\u8868\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u63d2\u5165\u5230\u5177\u6709\u76f8\u540c\u8868\u7ed3\u6784\u7684\u53e6\u5916\u4e00\u5f20\u8868\u4e2d\uff0c\u7528\u6765\u6d4b\u8bd5\u8be5\u63d2\u4ef6\u6240\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\u3002 create table if not exists addax_tbl ( c_bigint bigint , c_bit bit ( 3 ), c_bool boolean , c_byte bytea , c_char char ( 10 ), c_varchar varchar ( 20 ), c_date date , c_double float8 , c_int integer , c_json json , c_number decimal ( 8 , 3 ), c_real real , c_small smallint , c_text text , c_ts timestamp , c_uuid uuid , c_xml xml , c_money money , c_inet inet , c_cidr cidr , c_macaddr macaddr ); insert into addax_tbl values ( 999988887777 , B '101' , TRUE , '\\xDEADBEEF' , 'hello' , 'hello, world' , '2021-01-04' , 999888 . 9972 , 9876542 , '{\"bar\": \"baz\", \"balance\": 7.77, \"active\": false}' :: json , 12345 . 123 , 123 . 123 , 126 , 'this is a long text ' , '2020-01-04 12:13:14' , 'A0EEBC99-9C0B-4EF8-BB6D-6BB9BD380A11' :: uuid , '<foo>bar</foo>' :: xml , '52093.89' :: money , '192.168.1.1' :: inet , '192.168.1/24' :: cidr , '08002b:010203' :: macaddr ); \u521b\u5efa\u9700\u8981\u63d2\u5165\u7684\u8868\u7684\u8bed\u53e5\u5982\u4e0b: create table gp_test like addax_tbl ;","title":"\u793a\u4f8b"},{"location":"writer/greenplumwriter/#_2","text":"\u4ee5\u4e0b\u662f\u914d\u7f6e\u6587\u4ef6 job/pg2gp.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"postgresqlreader\" , \"parameter\" : { \"username\" : \"wgzhao\" , \"password\" : \"wgzhao\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"addax_tbl\" ], \"jdbcUrl\" : [ \"jdbc:postgresql://localhost:5432/wgzhao\" ] } ] } }, \"writer\" : { \"name\" : \"greenplumwriter\" , \"parameter\" : { \"username\" : \"wgzhao\" , \"password\" : \"wgzhao\" , \"column\" : [ \"*\" ], \"preSql\" : [ \"truncate table @table\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:postgresql://localhost:5432/wgzhao\" , \"table\" : [ \"gp_test\" ] } ] } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/pg2gp.json","title":"\u4efb\u52a1\u914d\u7f6e"},{"location":"writer/greenplumwriter/#_3","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/pg2gp.json","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"writer/greenplumwriter/#_4","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter preSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u524d\u7387\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u6d89\u53ca\u5230\u7684\u8868\u53ef\u7528 @table \u8868\u793a postSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 batchSize \u5426 1024 \u4e00\u6b21\u5199\u5165\u7684\u8bb0\u5f55\u6570\uff0c\u8fd9\u91cc\u8868\u793a COPY FROM \u6307\u4ee4\u540e\u63a5\u6536\u7684\u8bb0\u5f55\u6570","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/greenplumwriter/#_5","text":"Addax \u5185\u90e8\u7c7b\u578b Greenplum \u6570\u636e\u7c7b\u578b Long bigint, bigserial, integer, smallint, serial Double double precision, money, numeric, real String varchar, char, text, bit, inet,cidr,macaddr,uuid,xml,json Date date, time, timestamp Boolean bool Bytes bytea","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/hbase11xsqlwriter/","text":"HBase11xsql Writer \u00b6 HBase11xsqlwriter \u63d2\u4ef6\u5229\u7528 Phoniex \uff0c \u7528\u4e8e\u5411 HBase 1.x \u7248\u672c\u7684\u6570\u636e\u5e93\u5199\u5165\u6570\u636e\u3002 \u5982\u679c\u4f60\u5e0c\u671b\u901a\u8fc7\u8c03\u7528\u539f\u751f\u63a5\u53e3\u5199\u5165\u6570\u636e\uff0c\u5219\u9700\u8981\u4f7f\u7528 HBase11xWriter \u63d2\u4ef6 \u5982\u679c HBase \u662f 2.X \u7248\u672c\uff0c\u5219\u9700\u8981\u4f7f\u7528 HBase20xsqlwriter \u63d2\u4ef6 \u914d\u7f6e\u6837\u4f8b \u00b6 \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 hbaseConfig \u662f \u65e0 hbase\u96c6\u7fa4\u5730\u5740\uff0czk\u4e3a\u5fc5\u586b\u9879\uff0c\u683c\u5f0f\uff1a ip1,ip2,ip3[:port] \uff0c znode \u662f\u53ef\u9009\u7684\uff0c\u9ed8\u8ba4\u503c\u662f /hbase table \u662f \u65e0 \u8981\u5bfc\u5165\u7684\u8868\u540d\uff0c\u5927\u5c0f\u5199\u654f\u611f\uff0c\u901a\u5e38phoenix\u8868\u90fd\u662f \u5927\u5199 \u8868\u540d column \u662f \u65e0 \u5217\u540d\uff0c\u5927\u5c0f\u5199\u654f\u611f\uff0c\u901a\u5e38phoenix\u7684\u5217\u540d\u90fd\u662f \u5927\u5199 ,\u6570\u636e\u7c7b\u578b\u65e0\u9700\u586b\u5199,\u4f1a\u81ea\u52a8\u83b7\u53d6\u5217 batchSize \u5426 256 \u4e00\u6b21\u5199\u5165\u7684\u6700\u5927\u8bb0\u5f55\u6570 nullMode \u5426 skip \u8bfb\u53d6\u5230\u7684\u5217\u503c\u4e3anull\u65f6\uff0c\u5982\u4f55\u5904\u7406\u3002\u652f\u6301 skip , empty ,\u524d\u8005\u8868\u793a\u8df3\u8fc7\u8be5\u5217,\u540e\u8005\u8868\u793a\u63d2\u5165\u7a7a\u503c,\u6570\u503c\u7c7b\u578b\u4e3a0,\u5b57\u7b26\u7c7b\u578b\u4e3a null haveKerberos \u5426 false \u662f\u5426\u542f\u7528Kerberos\u8ba4\u8bc1, true \u8868\u793a\u542f\u7528, false \u8868\u793a\u4e0d\u542f\u7528 kerberosPrincipal \u5426 null kerberos \u51ed\u8bc1\u4fe1\u606f\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548 kerberosKeytabFilePath \u5426 null kerberos \u51ed\u8bc1\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548 \u6ce8\u610f\uff1a\u542f\u7528kerberos\u8ba4\u8bc1\u540e\uff0c\u7a0b\u5e8f\u9700\u8981\u77e5\u9053 hbase-site.xml \u6240\u5728\u7684\u8def\u5f84\uff0c\u4e00\u79cd\u529e\u6cd5\u662f\u8fd0\u884c\u6267\u884c\u5728\u73af\u5883\u53d8\u91cf CLASSPATH \u4e2d\u589e\u52a0\u8be5\u6587\u4ef6\u7684\u6240\u5728\u8def\u5f84\u3002 \u53e6\u5916\u4e00\u4e2a\u89e3\u51b3\u529e\u6cd5\u662f\u5c06 hbase-site.xml \u6587\u4ef6\u62f7\u8d1d\u5230\u63d2\u4ef6\u7684 libs \u76ee\u5f55\u91cc\u3002","title":"HBase11xsql Writer"},{"location":"writer/hbase11xsqlwriter/#hbase11xsql-writer","text":"HBase11xsqlwriter \u63d2\u4ef6\u5229\u7528 Phoniex \uff0c \u7528\u4e8e\u5411 HBase 1.x \u7248\u672c\u7684\u6570\u636e\u5e93\u5199\u5165\u6570\u636e\u3002 \u5982\u679c\u4f60\u5e0c\u671b\u901a\u8fc7\u8c03\u7528\u539f\u751f\u63a5\u53e3\u5199\u5165\u6570\u636e\uff0c\u5219\u9700\u8981\u4f7f\u7528 HBase11xWriter \u63d2\u4ef6 \u5982\u679c HBase \u662f 2.X \u7248\u672c\uff0c\u5219\u9700\u8981\u4f7f\u7528 HBase20xsqlwriter \u63d2\u4ef6","title":"HBase11xsql Writer"},{"location":"writer/hbase11xsqlwriter/#_1","text":"","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/hbase11xsqlwriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 hbaseConfig \u662f \u65e0 hbase\u96c6\u7fa4\u5730\u5740\uff0czk\u4e3a\u5fc5\u586b\u9879\uff0c\u683c\u5f0f\uff1a ip1,ip2,ip3[:port] \uff0c znode \u662f\u53ef\u9009\u7684\uff0c\u9ed8\u8ba4\u503c\u662f /hbase table \u662f \u65e0 \u8981\u5bfc\u5165\u7684\u8868\u540d\uff0c\u5927\u5c0f\u5199\u654f\u611f\uff0c\u901a\u5e38phoenix\u8868\u90fd\u662f \u5927\u5199 \u8868\u540d column \u662f \u65e0 \u5217\u540d\uff0c\u5927\u5c0f\u5199\u654f\u611f\uff0c\u901a\u5e38phoenix\u7684\u5217\u540d\u90fd\u662f \u5927\u5199 ,\u6570\u636e\u7c7b\u578b\u65e0\u9700\u586b\u5199,\u4f1a\u81ea\u52a8\u83b7\u53d6\u5217 batchSize \u5426 256 \u4e00\u6b21\u5199\u5165\u7684\u6700\u5927\u8bb0\u5f55\u6570 nullMode \u5426 skip \u8bfb\u53d6\u5230\u7684\u5217\u503c\u4e3anull\u65f6\uff0c\u5982\u4f55\u5904\u7406\u3002\u652f\u6301 skip , empty ,\u524d\u8005\u8868\u793a\u8df3\u8fc7\u8be5\u5217,\u540e\u8005\u8868\u793a\u63d2\u5165\u7a7a\u503c,\u6570\u503c\u7c7b\u578b\u4e3a0,\u5b57\u7b26\u7c7b\u578b\u4e3a null haveKerberos \u5426 false \u662f\u5426\u542f\u7528Kerberos\u8ba4\u8bc1, true \u8868\u793a\u542f\u7528, false \u8868\u793a\u4e0d\u542f\u7528 kerberosPrincipal \u5426 null kerberos \u51ed\u8bc1\u4fe1\u606f\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548 kerberosKeytabFilePath \u5426 null kerberos \u51ed\u8bc1\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548 \u6ce8\u610f\uff1a\u542f\u7528kerberos\u8ba4\u8bc1\u540e\uff0c\u7a0b\u5e8f\u9700\u8981\u77e5\u9053 hbase-site.xml \u6240\u5728\u7684\u8def\u5f84\uff0c\u4e00\u79cd\u529e\u6cd5\u662f\u8fd0\u884c\u6267\u884c\u5728\u73af\u5883\u53d8\u91cf CLASSPATH \u4e2d\u589e\u52a0\u8be5\u6587\u4ef6\u7684\u6240\u5728\u8def\u5f84\u3002 \u53e6\u5916\u4e00\u4e2a\u89e3\u51b3\u529e\u6cd5\u662f\u5c06 hbase-site.xml \u6587\u4ef6\u62f7\u8d1d\u5230\u63d2\u4ef6\u7684 libs \u76ee\u5f55\u91cc\u3002","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/hbase11xwriter/","text":"HBase11X Writer \u00b6 HbaseWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece\u5411Hbase\u4e2d\u5199\u53d6\u6570\u636e\u3002\u5728\u5e95\u5c42\u5b9e\u73b0\u4e0a\uff0cHbaseWriter \u901a\u8fc7 HBase \u7684 Java \u5ba2\u6237\u7aef\u8fde\u63a5\u8fdc\u7a0b HBase \u670d\u52a1\uff0c\u5e76\u901a\u8fc7 put \u65b9\u5f0f\u5199\u5165Hbase\u3002 \u5982\u679c HBase \u662f 2.X \u7248\u672c\uff0c\u5219\u9700\u8981\u4f7f\u7528 HBase20xsqlwriter \u63d2\u4ef6 \u914d\u7f6e\u6837\u4f8b \u00b6 \u914d\u7f6e\u4e00\u4e2a\u4ece\u672c\u5730\u5199\u5165hbase1.1.x\u7684\u4f5c\u4e1a\uff1a { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 5 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"txtfilereader\" , \"parameter\" : { \"path\" : \"/tmp/normal.txt\" , \"charset\" : \"UTF-8\" , \"column\" : [ { \"index\" : 0 , \"type\" : \"String\" }, { \"index\" : 1 , \"type\" : \"string\" }, { \"index\" : 2 , \"type\" : \"string\" }, { \"index\" : 3 , \"type\" : \"string\" }, { \"index\" : 4 , \"type\" : \"string\" }, { \"index\" : 5 , \"type\" : \"string\" }, { \"index\" : 6 , \"type\" : \"string\" } ], \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"hbase11xwriter\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"***\" }, \"table\" : \"writer\" , \"mode\" : \"normal\" , \"rowkeyColumn\" : [ { \"index\" : 0 , \"type\" : \"string\" }, { \"index\" : -1 , \"type\" : \"string\" , \"value\" : \"_\" } ], \"column\" : [ { \"index\" : 1 , \"name\" : \"cf1:q1\" , \"type\" : \"string\" }, { \"index\" : 2 , \"name\" : \"cf1:q2\" , \"type\" : \"string\" }, { \"index\" : 3 , \"name\" : \"cf1:q3\" , \"type\" : \"string\" }, { \"index\" : 4 , \"name\" : \"cf2:q1\" , \"type\" : \"string\" }, { \"index\" : 5 , \"name\" : \"cf2:q2\" , \"type\" : \"string\" }, { \"index\" : 6 , \"name\" : \"cf2:q3\" , \"type\" : \"string\" } ], \"versionColumn\" : { \"index\" : -1 , \"value\" : \"123456789\" }, \"encoding\" : \"utf-8\" } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 hbaseConfig \u662f \u65e0 \u8fde\u63a5 HBase \u96c6\u7fa4\u9700\u8981\u7684\u914d\u7f6e\u4fe1\u606f,JSON\u683c\u5f0f, hbase.zookeeper.quorum \u4e3a\u5fc5\u586b\u9879\uff0c\u5176\u4ed6 HBase client\u7684\u914d\u7f6e\u4e3a\u53ef\u9009\u9879 mode \u662f \u65e0 \u5199\u5165 HBase \u7684\u6a21\u5f0f\uff0c\u76ee\u524d\u4ec5\u652f\u6301 normal \u6a21\u5f0f table \u662f \u65e0 HBase \u8868\u540d\uff08\u5927\u5c0f\u5199\u654f\u611f\uff09 encoding \u5426 UTF-8 \u7f16\u7801\u65b9\u5f0f\uff0c UTF-8 \u6216\u662f GBK \uff0c\u7528\u4e8e\u5bf9\u4e8c\u8fdb\u5236\u5b58\u50a8\u7684 HBase byte[] \u8f6c\u4e3a String \u65f6\u7684\u7f16\u7801 column \u662f \u65e0 \u8981\u5199\u5165\u7684\u5b57\u6bb5\uff0c normal \u6a21\u5f0f\u4e0e multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b\u9879, \u8be6\u7ec6\u8bf4\u660e\u89c1\u4e0b\u6587 rowkeyColumn \u662f \u65e0 \u8981\u5199\u5165\u7684 rowkey \u5217, \u8be6\u7ec6\u8bf4\u660e\u89c1\u4e0b\u6587 versionColumn \u5426 \u65e0 \u6307\u5b9a\u5199\u5165\u7684\u65f6\u95f4\u6233\u3002\u652f\u6301\uff1a\u5f53\u524d\u65f6\u95f4\u3001\u6307\u5b9a\u65f6\u95f4\u5217\uff0c\u6307\u5b9a\u65f6\u95f4\uff0c\u4e09\u8005\u9009\u4e00,\u8be6\u89c1\u4e0b\u6587 nullMode \u5426 skip \u8bfb\u53d6\u7684null\u503c\u65f6\uff0c\u5982\u4f55\u5904\u7406, skip \u8868\u793a\u4e0d\u5411hbase\u5199\u8fd9\u5217\uff1b empty \uff1a\u5199\u5165 HConstants.EMPTY_BYTE_ARRAY \uff0c\u5373 new byte [0] walFlag \u5426 false \u662f\u5426\u5199 WAL , true \u8868\u793a\u5199\u5165, false \u8868\u793a\u4e0d\u5199 writeBufferSize \u5426 8M \u8bbe\u7f6e\u5199 buffer \u5927\u5c0f\uff0c\u5355\u4f4d\u5b57\u8282 maxVersion \u662f \u65e0 \u6307\u5b9a\u5728\u591a\u7248\u672c\u6a21\u5f0f\u4e0b\u8bfb\u53d6\u7684\u7248\u672c\u6570\uff0c -1 \u8868\u793a\u8bfb\u53d6\u6240\u6709\u7248\u672c, multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b range \u5426 \u65e0 \u6307\u5b9a\u8bfb\u53d6\u7684 rowkey \u8303\u56f4, \u8be6\u89c1\u4e0b\u6587 scanCacheSize \u5426 256 \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u884c\u6570 scanBatchSize \u5426 100 \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u5217\u6570 column \u00b6 \u8981\u5199\u5165\u7684hbase\u5b57\u6bb5\u3002index\uff1a\u6307\u5b9a\u8be5\u5217\u5bf9\u5e94reader\u7aefcolumn\u7684\u7d22\u5f15\uff0c\u4ece0\u5f00\u59cb\uff1bname\uff1a\u6307\u5b9ahbase\u8868\u4e2d\u7684\u5217\uff0c\u5fc5\u987b\u4e3a \u5217\u65cf:\u5217\u540d \u7684\u683c\u5f0f\uff1btype\uff1a\u6307\u5b9a\u5199\u5165\u6570\u636e\u7c7b\u578b\uff0c\u7528\u4e8e\u8f6c\u6362HBase byte[]\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"column\" : [ { \"index\" : 1 , \"name\" : \"cf1:q1\" , \"type\" : \"string\" }, { \"index\" : 2 , \"name\" : \"cf1:q2\" , \"type\" : \"string\" } ] } rowkey \u00b6 \u8981\u5199\u5165\u7684 rowkey \u5217\u3002index\uff1a\u6307\u5b9a\u8be5\u5217\u5bf9\u5e94reader\u7aefcolumn\u7684\u7d22\u5f15\uff0c\u4ece0\u5f00\u59cb\uff0c\u82e5\u4e3a\u5e38\u91cfindex\u4e3a\uff0d1\uff1btype\uff1a\u6307\u5b9a\u5199\u5165\u6570\u636e\u7c7b\u578b\uff0c\u7528\u4e8e\u8f6c\u6362HBase byte[]\uff1bvalue\uff1a\u914d\u7f6e\u5e38\u91cf\uff0c\u5e38\u4f5c\u4e3a\u591a\u4e2a\u5b57\u6bb5\u7684\u62fc\u63a5\u7b26\u3002hbasewriter\u4f1a\u5c06rowkeyColumn\u4e2d\u6240\u6709\u5217\u6309\u7167\u914d\u7f6e\u987a\u5e8f\u8fdb\u884c\u62fc\u63a5\u4f5c\u4e3a\u5199\u5165hbase\u7684rowkey\uff0c\u4e0d\u80fd\u5168\u4e3a\u5e38\u91cf\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"rowkeyColumn\" : [ { \"index\" : 0 , \"type\" : \"string\" }, { \"index\" : -1 , \"type\" : \"string\" , \"value\" : \"_\" } ] } versionColumn \u00b6 \u6307\u5b9a\u5199\u5165\u7684\u65f6\u95f4\u6233\u3002\u652f\u6301\uff1a\u5f53\u524d\u65f6\u95f4\u3001\u6307\u5b9a\u65f6\u95f4\u5217\uff0c\u6307\u5b9a\u65f6\u95f4\uff0c\u4e09\u8005\u9009\u4e00\u3002\u82e5\u4e0d\u914d\u7f6e\u8868\u793a\u7528\u5f53\u524d\u65f6\u95f4\u3002 index\uff1a\u6307\u5b9a\u5bf9\u5e94reader\u7aefcolumn\u7684\u7d22\u5f15\uff0c\u4ece0\u5f00\u59cb\uff0c\u9700\u4fdd\u8bc1\u80fd\u8f6c\u6362\u4e3along,\u82e5\u662fDate\u7c7b\u578b\uff0c \u4f1a\u5c1d\u8bd5\u7528 yyyy-MM-dd HH:mm:ss \u548c yyyy-MM-dd HH:mm:ss SSS \u53bb\u89e3\u6790\uff1b \u82e5\u4e3a\u6307\u5b9a\u65f6\u95f4index\u4e3a \uff0d1 \uff1b value\uff1a\u6307\u5b9a\u65f6\u95f4\u7684\u503c,long\u503c\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"versionColumn\" : { \"index\" : 1 } } \u6216\u8005 { \"versionColumn\" : { \"index\" : -1 , \"value\" : 123456789 } } \u652f\u6301\u7684\u5217\u7c7b\u578b \u00b6 BOOLEAN SHORT INT LONG FLOAT DOUBLE STRING \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301","title":"HBase11X Writer"},{"location":"writer/hbase11xwriter/#hbase11x-writer","text":"HbaseWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u4ece\u5411Hbase\u4e2d\u5199\u53d6\u6570\u636e\u3002\u5728\u5e95\u5c42\u5b9e\u73b0\u4e0a\uff0cHbaseWriter \u901a\u8fc7 HBase \u7684 Java \u5ba2\u6237\u7aef\u8fde\u63a5\u8fdc\u7a0b HBase \u670d\u52a1\uff0c\u5e76\u901a\u8fc7 put \u65b9\u5f0f\u5199\u5165Hbase\u3002 \u5982\u679c HBase \u662f 2.X \u7248\u672c\uff0c\u5219\u9700\u8981\u4f7f\u7528 HBase20xsqlwriter \u63d2\u4ef6","title":"HBase11X Writer"},{"location":"writer/hbase11xwriter/#_1","text":"\u914d\u7f6e\u4e00\u4e2a\u4ece\u672c\u5730\u5199\u5165hbase1.1.x\u7684\u4f5c\u4e1a\uff1a { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 5 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"txtfilereader\" , \"parameter\" : { \"path\" : \"/tmp/normal.txt\" , \"charset\" : \"UTF-8\" , \"column\" : [ { \"index\" : 0 , \"type\" : \"String\" }, { \"index\" : 1 , \"type\" : \"string\" }, { \"index\" : 2 , \"type\" : \"string\" }, { \"index\" : 3 , \"type\" : \"string\" }, { \"index\" : 4 , \"type\" : \"string\" }, { \"index\" : 5 , \"type\" : \"string\" }, { \"index\" : 6 , \"type\" : \"string\" } ], \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"hbase11xwriter\" , \"parameter\" : { \"hbaseConfig\" : { \"hbase.zookeeper.quorum\" : \"***\" }, \"table\" : \"writer\" , \"mode\" : \"normal\" , \"rowkeyColumn\" : [ { \"index\" : 0 , \"type\" : \"string\" }, { \"index\" : -1 , \"type\" : \"string\" , \"value\" : \"_\" } ], \"column\" : [ { \"index\" : 1 , \"name\" : \"cf1:q1\" , \"type\" : \"string\" }, { \"index\" : 2 , \"name\" : \"cf1:q2\" , \"type\" : \"string\" }, { \"index\" : 3 , \"name\" : \"cf1:q3\" , \"type\" : \"string\" }, { \"index\" : 4 , \"name\" : \"cf2:q1\" , \"type\" : \"string\" }, { \"index\" : 5 , \"name\" : \"cf2:q2\" , \"type\" : \"string\" }, { \"index\" : 6 , \"name\" : \"cf2:q3\" , \"type\" : \"string\" } ], \"versionColumn\" : { \"index\" : -1 , \"value\" : \"123456789\" }, \"encoding\" : \"utf-8\" } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/hbase11xwriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 hbaseConfig \u662f \u65e0 \u8fde\u63a5 HBase \u96c6\u7fa4\u9700\u8981\u7684\u914d\u7f6e\u4fe1\u606f,JSON\u683c\u5f0f, hbase.zookeeper.quorum \u4e3a\u5fc5\u586b\u9879\uff0c\u5176\u4ed6 HBase client\u7684\u914d\u7f6e\u4e3a\u53ef\u9009\u9879 mode \u662f \u65e0 \u5199\u5165 HBase \u7684\u6a21\u5f0f\uff0c\u76ee\u524d\u4ec5\u652f\u6301 normal \u6a21\u5f0f table \u662f \u65e0 HBase \u8868\u540d\uff08\u5927\u5c0f\u5199\u654f\u611f\uff09 encoding \u5426 UTF-8 \u7f16\u7801\u65b9\u5f0f\uff0c UTF-8 \u6216\u662f GBK \uff0c\u7528\u4e8e\u5bf9\u4e8c\u8fdb\u5236\u5b58\u50a8\u7684 HBase byte[] \u8f6c\u4e3a String \u65f6\u7684\u7f16\u7801 column \u662f \u65e0 \u8981\u5199\u5165\u7684\u5b57\u6bb5\uff0c normal \u6a21\u5f0f\u4e0e multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b\u9879, \u8be6\u7ec6\u8bf4\u660e\u89c1\u4e0b\u6587 rowkeyColumn \u662f \u65e0 \u8981\u5199\u5165\u7684 rowkey \u5217, \u8be6\u7ec6\u8bf4\u660e\u89c1\u4e0b\u6587 versionColumn \u5426 \u65e0 \u6307\u5b9a\u5199\u5165\u7684\u65f6\u95f4\u6233\u3002\u652f\u6301\uff1a\u5f53\u524d\u65f6\u95f4\u3001\u6307\u5b9a\u65f6\u95f4\u5217\uff0c\u6307\u5b9a\u65f6\u95f4\uff0c\u4e09\u8005\u9009\u4e00,\u8be6\u89c1\u4e0b\u6587 nullMode \u5426 skip \u8bfb\u53d6\u7684null\u503c\u65f6\uff0c\u5982\u4f55\u5904\u7406, skip \u8868\u793a\u4e0d\u5411hbase\u5199\u8fd9\u5217\uff1b empty \uff1a\u5199\u5165 HConstants.EMPTY_BYTE_ARRAY \uff0c\u5373 new byte [0] walFlag \u5426 false \u662f\u5426\u5199 WAL , true \u8868\u793a\u5199\u5165, false \u8868\u793a\u4e0d\u5199 writeBufferSize \u5426 8M \u8bbe\u7f6e\u5199 buffer \u5927\u5c0f\uff0c\u5355\u4f4d\u5b57\u8282 maxVersion \u662f \u65e0 \u6307\u5b9a\u5728\u591a\u7248\u672c\u6a21\u5f0f\u4e0b\u8bfb\u53d6\u7684\u7248\u672c\u6570\uff0c -1 \u8868\u793a\u8bfb\u53d6\u6240\u6709\u7248\u672c, multiVersionFixedColumn \u6a21\u5f0f\u4e0b\u5fc5\u586b range \u5426 \u65e0 \u6307\u5b9a\u8bfb\u53d6\u7684 rowkey \u8303\u56f4, \u8be6\u89c1\u4e0b\u6587 scanCacheSize \u5426 256 \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u884c\u6570 scanBatchSize \u5426 100 \u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u8bfb\u53d6\u7684\u5217\u6570","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/hbase11xwriter/#column","text":"\u8981\u5199\u5165\u7684hbase\u5b57\u6bb5\u3002index\uff1a\u6307\u5b9a\u8be5\u5217\u5bf9\u5e94reader\u7aefcolumn\u7684\u7d22\u5f15\uff0c\u4ece0\u5f00\u59cb\uff1bname\uff1a\u6307\u5b9ahbase\u8868\u4e2d\u7684\u5217\uff0c\u5fc5\u987b\u4e3a \u5217\u65cf:\u5217\u540d \u7684\u683c\u5f0f\uff1btype\uff1a\u6307\u5b9a\u5199\u5165\u6570\u636e\u7c7b\u578b\uff0c\u7528\u4e8e\u8f6c\u6362HBase byte[]\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"column\" : [ { \"index\" : 1 , \"name\" : \"cf1:q1\" , \"type\" : \"string\" }, { \"index\" : 2 , \"name\" : \"cf1:q2\" , \"type\" : \"string\" } ] }","title":"column"},{"location":"writer/hbase11xwriter/#rowkey","text":"\u8981\u5199\u5165\u7684 rowkey \u5217\u3002index\uff1a\u6307\u5b9a\u8be5\u5217\u5bf9\u5e94reader\u7aefcolumn\u7684\u7d22\u5f15\uff0c\u4ece0\u5f00\u59cb\uff0c\u82e5\u4e3a\u5e38\u91cfindex\u4e3a\uff0d1\uff1btype\uff1a\u6307\u5b9a\u5199\u5165\u6570\u636e\u7c7b\u578b\uff0c\u7528\u4e8e\u8f6c\u6362HBase byte[]\uff1bvalue\uff1a\u914d\u7f6e\u5e38\u91cf\uff0c\u5e38\u4f5c\u4e3a\u591a\u4e2a\u5b57\u6bb5\u7684\u62fc\u63a5\u7b26\u3002hbasewriter\u4f1a\u5c06rowkeyColumn\u4e2d\u6240\u6709\u5217\u6309\u7167\u914d\u7f6e\u987a\u5e8f\u8fdb\u884c\u62fc\u63a5\u4f5c\u4e3a\u5199\u5165hbase\u7684rowkey\uff0c\u4e0d\u80fd\u5168\u4e3a\u5e38\u91cf\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"rowkeyColumn\" : [ { \"index\" : 0 , \"type\" : \"string\" }, { \"index\" : -1 , \"type\" : \"string\" , \"value\" : \"_\" } ] }","title":"rowkey"},{"location":"writer/hbase11xwriter/#versioncolumn","text":"\u6307\u5b9a\u5199\u5165\u7684\u65f6\u95f4\u6233\u3002\u652f\u6301\uff1a\u5f53\u524d\u65f6\u95f4\u3001\u6307\u5b9a\u65f6\u95f4\u5217\uff0c\u6307\u5b9a\u65f6\u95f4\uff0c\u4e09\u8005\u9009\u4e00\u3002\u82e5\u4e0d\u914d\u7f6e\u8868\u793a\u7528\u5f53\u524d\u65f6\u95f4\u3002 index\uff1a\u6307\u5b9a\u5bf9\u5e94reader\u7aefcolumn\u7684\u7d22\u5f15\uff0c\u4ece0\u5f00\u59cb\uff0c\u9700\u4fdd\u8bc1\u80fd\u8f6c\u6362\u4e3along,\u82e5\u662fDate\u7c7b\u578b\uff0c \u4f1a\u5c1d\u8bd5\u7528 yyyy-MM-dd HH:mm:ss \u548c yyyy-MM-dd HH:mm:ss SSS \u53bb\u89e3\u6790\uff1b \u82e5\u4e3a\u6307\u5b9a\u65f6\u95f4index\u4e3a \uff0d1 \uff1b value\uff1a\u6307\u5b9a\u65f6\u95f4\u7684\u503c,long\u503c\u3002\u914d\u7f6e\u683c\u5f0f\u5982\u4e0b\uff1a { \"versionColumn\" : { \"index\" : 1 } } \u6216\u8005 { \"versionColumn\" : { \"index\" : -1 , \"value\" : 123456789 } }","title":"versionColumn"},{"location":"writer/hbase11xwriter/#_3","text":"BOOLEAN SHORT INT LONG FLOAT DOUBLE STRING \u8bf7\u6ce8\u610f: \u9664\u4e0a\u8ff0\u7f57\u5217\u5b57\u6bb5\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u7c7b\u578b\u5747\u4e0d\u652f\u6301","title":"\u652f\u6301\u7684\u5217\u7c7b\u578b"},{"location":"writer/hbase20xsqlwriter/","text":"HBase20xsql Writer \u00b6 HBase20xsqlwriter \u63d2\u4ef6\u5229\u7528 Phoenix \u5411 HBase 2.x \u5199\u5165\u6570\u636e\u3002 \u5982\u679c HBase \u662f 1.X \u7248\u672c\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 HBase11xsqlWriter \u6216 HBase11xWriter \u63d2\u4ef6 \u914d\u7f6e\u6837\u4f8b \u00b6 { \"job\" : { \"content\" : { \"reader\" : { \"name\" : \"txtfilereader\" , \"parameter\" : { \"path\" : \"/tmp/normal.txt\" , \"charset\" : \"UTF-8\" , \"column\" : [ { \"index\" : 0 , \"type\" : \"String\" }, { \"index\" : 1 , \"type\" : \"string\" }, { \"index\" : 2 , \"type\" : \"string\" }, { \"index\" : 3 , \"type\" : \"string\" } ], \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"hbase20xsqlwriter\" , \"parameter\" : { \"batchSize\" : \"100\" , \"column\" : [ \"UID\" , \"TS\" , \"EVENTID\" , \"CONTENT\" ], \"queryServerAddress\" : \"http://127.0.0.1:8765\" , \"nullMode\" : \"skip\" , \"table\" : \"TEST_TBL\" } } }, \"setting\" : { \"speed\" : { \"channel\" : 5 , \"bytes\" : -1 } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 Phoenix \u8fde\u63a5\u5730\u5740 table \u662f \u65e0 \u6240\u8981\u8bfb\u53d6\u8868\u540d schema \u5426 \u65e0 \u8868\u6240\u5728\u7684schema batchSize \u5426 256 \u4e00\u6b21\u6279\u91cf\u5199\u5165\u7684\u6700\u5927\u884c\u6570 column \u5426 \u5168\u90e8\u5217 \u5217\u540d\uff0c\u5927\u5c0f\u5199\u654f\u611f\uff0c\u901a\u5e38phoenix\u7684\u5217\u540d\u90fd\u662f**\u5927\u5199**, \u6570\u636e\u7c7b\u578b\u65e0\u9700\u586b\u5199,\u4f1a\u81ea\u52a8\u83b7\u53d6\u5217 nullMode \u5426 skip \u8bfb\u53d6\u7684null\u503c\u65f6\uff0c\u5982\u4f55\u5904\u7406, skip \u8868\u793a\u4e0d\u5411hbase\u5199\u8fd9\u5217\uff1b empty \uff1a\u5199\u5165 HConstants.EMPTY_BYTE_ARRAY \uff0c\u5373 new byte [0] haveKerberos \u5426 false \u662f\u5426\u542f\u7528Kerberos\u8ba4\u8bc1, true \u8868\u793a\u542f\u7528, false \u8868\u793a\u4e0d\u542f\u7528 kerberosPrincipal \u5426 null kerberos \u51ed\u8bc1\u4fe1\u606f\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548 kerberosKeytabFilePath \u5426 null kerberos \u51ed\u8bc1\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548 jdbcUrl \u00b6 queryServerAddress \u662f\u6ee1\u8db3 Phoenix \u94fe\u63a5\u7684\u5730\u5740\uff0c\u5177\u4f53\u683c\u5f0f\u548c\u8981\u6c42\u53ef\u4ee5\u53c2\u8003 \u5b98\u65b9\u6587\u6863 \uff0c\u5176 jdbc \u8fde\u63a5\u4e32\u683c\u5f0f\u5982\u4e0b\uff1a jdbc : phoenix [ : < zookeeper quorum > [ : < port number > [ : < root node > [ : < principal > [ : < keytab file > ] ] ] ] ] zookeeper quorum: zookeeper \u96c6\u7fa4\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u7528\u9017\u53f7\u5206\u9694\uff0c\u5982\uff1a node1,node2,node3 port number: zookeeper \u96c6\u7fa4\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a 2181 root node: zookeeper \u96c6\u7fa4\u6839\u8282\u70b9\uff0c\u9ed8\u8ba4\u4e3a /hbase \uff0c\u542f\u7528 kerberos \u540e\uff0c\u9ed8\u8ba4\u4e3a /hbase-secure principal: kerberos \u51ed\u8bc1\u4fe1\u606f\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548 keytab file: kerberos \u51ed\u8bc1\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548 \u5982\u679c\u4f60\u5e0c\u671b\u901a\u8fc7\u8fde\u63a5 Phoenix Query Server (a.k.a PQS) \uff0c\u5219 JDBC \u8fde\u63a5\u4e32\u5982\u4e0b\uff1a jdbc : phoenix : thin : url =< scheme > : //<server-hostname>:<port>[;option=value...] schema: \u4f20\u8f93\u534f\u8bae\uff0c http \u6216 https \uff0c\u9ed8\u8ba4\u4e3a http server-hostname: Phoenix Query Server \u5730\u5740\uff0c\u5982\uff1a node1 port: Phoenix Query Server \u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a 8765 option: \u53ef\u9009\u53c2\u6570\uff0c\u53ef\u4ee5\u662f\u591a\u4e2a\uff0c\u7528\u9017\u53f7\u5206\u9694\uff0c\u5982\uff1a option1=value1,option2=value2 \u66f4\u8be6\u7ec6\u7684\u63cf\u8ff0\uff0c\u53ef\u4ee5\u53c2\u8003 \u5b98\u65b9\u6587\u6863 \u6ce8\u610f\uff1a\u542f\u7528kerberos\u8ba4\u8bc1\u540e\uff0c\u7a0b\u5e8f\u9700\u8981\u77e5\u9053 hbase-site.xml \u6240\u5728\u7684\u8def\u5f84\uff0c\u4e00\u79cd\u529e\u6cd5\u662f\u8fd0\u884c\u6267\u884c\u5728\u73af\u5883\u53d8\u91cf CLASSPATH \u4e2d\u589e\u52a0\u8be5\u6587\u4ef6\u7684\u6240\u5728\u8def\u5f84\u3002 \u53e6\u5916\u4e00\u4e2a\u89e3\u51b3\u529e\u6cd5\u662f\u5c06 hbase-site.xml \u6587\u4ef6\u62f7\u8d1d\u5230\u63d2\u4ef6\u7684 libs \u76ee\u5f55\u91cc\u3002","title":"HBase20xsql Writer"},{"location":"writer/hbase20xsqlwriter/#hbase20xsql-writer","text":"HBase20xsqlwriter \u63d2\u4ef6\u5229\u7528 Phoenix \u5411 HBase 2.x \u5199\u5165\u6570\u636e\u3002 \u5982\u679c HBase \u662f 1.X \u7248\u672c\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 HBase11xsqlWriter \u6216 HBase11xWriter \u63d2\u4ef6","title":"HBase20xsql Writer"},{"location":"writer/hbase20xsqlwriter/#_1","text":"{ \"job\" : { \"content\" : { \"reader\" : { \"name\" : \"txtfilereader\" , \"parameter\" : { \"path\" : \"/tmp/normal.txt\" , \"charset\" : \"UTF-8\" , \"column\" : [ { \"index\" : 0 , \"type\" : \"String\" }, { \"index\" : 1 , \"type\" : \"string\" }, { \"index\" : 2 , \"type\" : \"string\" }, { \"index\" : 3 , \"type\" : \"string\" } ], \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"hbase20xsqlwriter\" , \"parameter\" : { \"batchSize\" : \"100\" , \"column\" : [ \"UID\" , \"TS\" , \"EVENTID\" , \"CONTENT\" ], \"queryServerAddress\" : \"http://127.0.0.1:8765\" , \"nullMode\" : \"skip\" , \"table\" : \"TEST_TBL\" } } }, \"setting\" : { \"speed\" : { \"channel\" : 5 , \"bytes\" : -1 } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/hbase20xsqlwriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 Phoenix \u8fde\u63a5\u5730\u5740 table \u662f \u65e0 \u6240\u8981\u8bfb\u53d6\u8868\u540d schema \u5426 \u65e0 \u8868\u6240\u5728\u7684schema batchSize \u5426 256 \u4e00\u6b21\u6279\u91cf\u5199\u5165\u7684\u6700\u5927\u884c\u6570 column \u5426 \u5168\u90e8\u5217 \u5217\u540d\uff0c\u5927\u5c0f\u5199\u654f\u611f\uff0c\u901a\u5e38phoenix\u7684\u5217\u540d\u90fd\u662f**\u5927\u5199**, \u6570\u636e\u7c7b\u578b\u65e0\u9700\u586b\u5199,\u4f1a\u81ea\u52a8\u83b7\u53d6\u5217 nullMode \u5426 skip \u8bfb\u53d6\u7684null\u503c\u65f6\uff0c\u5982\u4f55\u5904\u7406, skip \u8868\u793a\u4e0d\u5411hbase\u5199\u8fd9\u5217\uff1b empty \uff1a\u5199\u5165 HConstants.EMPTY_BYTE_ARRAY \uff0c\u5373 new byte [0] haveKerberos \u5426 false \u662f\u5426\u542f\u7528Kerberos\u8ba4\u8bc1, true \u8868\u793a\u542f\u7528, false \u8868\u793a\u4e0d\u542f\u7528 kerberosPrincipal \u5426 null kerberos \u51ed\u8bc1\u4fe1\u606f\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548 kerberosKeytabFilePath \u5426 null kerberos \u51ed\u8bc1\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/hbase20xsqlwriter/#jdbcurl","text":"queryServerAddress \u662f\u6ee1\u8db3 Phoenix \u94fe\u63a5\u7684\u5730\u5740\uff0c\u5177\u4f53\u683c\u5f0f\u548c\u8981\u6c42\u53ef\u4ee5\u53c2\u8003 \u5b98\u65b9\u6587\u6863 \uff0c\u5176 jdbc \u8fde\u63a5\u4e32\u683c\u5f0f\u5982\u4e0b\uff1a jdbc : phoenix [ : < zookeeper quorum > [ : < port number > [ : < root node > [ : < principal > [ : < keytab file > ] ] ] ] ] zookeeper quorum: zookeeper \u96c6\u7fa4\u5730\u5740\uff0c\u591a\u4e2a\u5730\u5740\u7528\u9017\u53f7\u5206\u9694\uff0c\u5982\uff1a node1,node2,node3 port number: zookeeper \u96c6\u7fa4\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a 2181 root node: zookeeper \u96c6\u7fa4\u6839\u8282\u70b9\uff0c\u9ed8\u8ba4\u4e3a /hbase \uff0c\u542f\u7528 kerberos \u540e\uff0c\u9ed8\u8ba4\u4e3a /hbase-secure principal: kerberos \u51ed\u8bc1\u4fe1\u606f\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548 keytab file: kerberos \u51ed\u8bc1\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u4ec5\u5f53 havekerberos \u542f\u7528\u540e\u6709\u6548 \u5982\u679c\u4f60\u5e0c\u671b\u901a\u8fc7\u8fde\u63a5 Phoenix Query Server (a.k.a PQS) \uff0c\u5219 JDBC \u8fde\u63a5\u4e32\u5982\u4e0b\uff1a jdbc : phoenix : thin : url =< scheme > : //<server-hostname>:<port>[;option=value...] schema: \u4f20\u8f93\u534f\u8bae\uff0c http \u6216 https \uff0c\u9ed8\u8ba4\u4e3a http server-hostname: Phoenix Query Server \u5730\u5740\uff0c\u5982\uff1a node1 port: Phoenix Query Server \u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a 8765 option: \u53ef\u9009\u53c2\u6570\uff0c\u53ef\u4ee5\u662f\u591a\u4e2a\uff0c\u7528\u9017\u53f7\u5206\u9694\uff0c\u5982\uff1a option1=value1,option2=value2 \u66f4\u8be6\u7ec6\u7684\u63cf\u8ff0\uff0c\u53ef\u4ee5\u53c2\u8003 \u5b98\u65b9\u6587\u6863 \u6ce8\u610f\uff1a\u542f\u7528kerberos\u8ba4\u8bc1\u540e\uff0c\u7a0b\u5e8f\u9700\u8981\u77e5\u9053 hbase-site.xml \u6240\u5728\u7684\u8def\u5f84\uff0c\u4e00\u79cd\u529e\u6cd5\u662f\u8fd0\u884c\u6267\u884c\u5728\u73af\u5883\u53d8\u91cf CLASSPATH \u4e2d\u589e\u52a0\u8be5\u6587\u4ef6\u7684\u6240\u5728\u8def\u5f84\u3002 \u53e6\u5916\u4e00\u4e2a\u89e3\u51b3\u529e\u6cd5\u662f\u5c06 hbase-site.xml \u6587\u4ef6\u62f7\u8d1d\u5230\u63d2\u4ef6\u7684 libs \u76ee\u5f55\u91cc\u3002","title":"jdbcUrl"},{"location":"writer/hdfswriter/","text":"Hdfs Writer \u00b6 HdfsWriter \u63d0\u4f9b\u5411HDFS\u6587\u4ef6\u7cfb\u7edf\u6307\u5b9a\u8def\u5f84\u4e2d\u5199\u5165 TEXTFile \uff0c ORCFile , PARQUET \u7b49\u683c\u5f0f\u6587\u4ef6\u7684\u80fd\u529b\uff0c \u6587\u4ef6\u5185\u5bb9\u53ef\u4e0e hive \u4e2d\u8868\u5173\u8054\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 00:00:00\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 }, \"writer\" : { \"name\" : \"hdfswriter\" , \"parameter\" : { \"defaultFS\" : \"hdfs://xxx:port\" , \"fileType\" : \"orc\" , \"path\" : \"/user/hive/warehouse/writerorc.db/orcfull\" , \"fileName\" : \"xxxx\" , \"column\" : [ { \"name\" : \"col1\" , \"type\" : \"string\" }, { \"name\" : \"col2\" , \"type\" : \"int\" }, { \"name\" : \"col3\" , \"type\" : \"string\" }, { \"name\" : \"col4\" , \"type\" : \"boolean\" }, { \"name\" : \"col5\" , \"type\" : \"string\" } ], \"writeMode\" : \"overwrite\" , \"fieldDelimiter\" : \"\\u0001\" , \"compress\" : \"SNAPPY\" } } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u8bf4\u660e path \u662f \u65e0 \u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u8def\u5f84 defaultFS \u662f \u65e0 Hadoop hdfs \u6587\u4ef6\u7cfb\u7edf NAMENODE \u8282\u70b9\u5730\u5740\uff0c\u5982\u679c\u914d\u7f6e\u4e86 HA \u6a21\u5f0f\uff0c\u5219\u4e3a defaultFS \u7684\u503c fileType \u662f \u65e0 \u6587\u4ef6\u7684\u7c7b\u578b fileName \u662f \u65e0 \u8981\u5199\u5165\u7684\u6587\u4ef6\u540d\uff0c\u7528\u4e8e\u5f53\u4f5c\u524d\u7f00 column \u662f \u65e0 \u5199\u5165\u7684\u5b57\u6bb5\u5217\u8868 writeMode \u662f \u65e0 \u5199\u5165\u6a21\u5f0f\uff0c\u652f\u6301 append , overwrite , nonConflict fieldDelimiter \u5426 , \u6307\u5b9a\u6587\u672c\u6587\u4ef6\u7684\u5b57\u6bb5\u5206\u9694\u7b26\uff0c\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0d\u9700\u8981\u6307\u5b9a\u8be5\u9879 encoding \u5426 utf-8 \u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e\uff0c \u76ee\u524d\u4ec5\u652f\u6301 utf-8 nullFormat \u5426 \u65e0 \u81ea\u5b9a\u4e49\u54ea\u4e9b\u5b57\u7b26\u53ef\u4ee5\u8868\u793a\u4e3a\u7a7a,\u4f8b\u5982\u5982\u679c\u7528\u6237\u914d\u7f6e: \"\\\\N\" \uff0c\u90a3\u4e48\u5982\u679c\u6e90\u5934\u6570\u636e\u662f \"\\N\" \uff0c\u89c6\u4f5c null \u5b57\u6bb5 haveKerberos \u5426 \u65e0 \u662f\u5426\u542f\u7528 Kerberos \u8ba4\u8bc1\uff0c\u5982\u679c\u542f\u7528\uff0c\u5219\u9700\u8981\u540c\u65f6\u914d\u7f6e kerberosKeytabFilePath \uff0c kerberosPrincipal kerberosKeytabFilePath \u5426 \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u6587\u4ef6\u8def\u5f84, \u6bd4\u5982 /your/path/addax.service.keytab kerberosPrincipal \u5426 \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u4e3b\u4f53, \u6bd4\u5982 addax/node1@WGZHAO.COM compress \u5426 \u65e0 \u6587\u4ef6\u7684\u538b\u7f29\u683c\u5f0f hadoopConfig \u5426 \u65e0 \u91cc\u53ef\u4ee5\u914d\u7f6e\u4e0e Hadoop \u76f8\u5173\u7684\u4e00\u4e9b\u9ad8\u7ea7\u53c2\u6570\uff0c\u6bd4\u5982HA\u7684\u914d\u7f6e path \u00b6 \u5b58\u50a8\u5230 Hadoop hdfs\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0cHdfsWriter \u4f1a\u6839\u636e\u5e76\u53d1\u914d\u7f6e\u5728 Path \u76ee\u5f55\u4e0b\u5199\u5165\u591a\u4e2a\u6587\u4ef6\u3002\u4e3a\u4e0ehive\u8868\u5173\u8054\uff0c\u8bf7\u586b\u5199hive\u8868\u5728hdfs\u4e0a\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u4f8b\uff1aHive\u4e0a\u8bbe\u7f6e\u7684\u6570\u636e\u4ed3\u5e93\u7684\u5b58\u50a8\u8def\u5f84\u4e3a\uff1a /user/hive/warehouse/ \uff0c\u5df2\u5efa\u7acb\u6570\u636e\u5e93\uff1a test \uff0c\u8868\uff1a hello \uff1b \u5219\u5bf9\u5e94\u7684\u5b58\u50a8\u8def\u5f84\u4e3a\uff1a /user/hive/warehouse/test.db/hello (\u5982\u679c\u5efa\u8868\u65f6\u6307\u5b9a\u4e86 location \u5c5e\u6027\uff0c\u5219\u4f9d\u636e\u8be5\u5c5e\u6027\u7684\u8def\u5f84) defaultFS \u00b6 Hadoop hdfs\u6587\u4ef6\u7cfb\u7edf namenode \u8282\u70b9\u5730\u5740\u3002\u683c\u5f0f\uff1a hdfs://ip:port \uff1b\u4f8b\u5982\uff1a hdfs://127.0.0.1:9000 , \u5982\u679c\u542f\u7528\u4e86HA\uff0c\u5219\u4e3a servicename \u6a21\u5f0f\uff0c\u6bd4\u5982 hdfs://sandbox fileType \u00b6 \u63cf\u8ff0\uff1a\u6587\u4ef6\u7684\u7c7b\u578b\uff0c\u76ee\u524d\u53ea\u652f\u6301\u7528\u6237\u914d\u7f6e\u4e3a text \u8868\u793a Text file\u6587\u4ef6\u683c\u5f0f orc \u8868\u793a OrcFile\u6587\u4ef6\u683c\u5f0f parquet \u8868\u793a Parquet \u6587\u4ef6\u683c\u5f0f rc \u8868\u793a Rcfile \u6587\u4ef6\u683c\u5f0f seq \u8868\u793asequence file\u6587\u4ef6\u683c\u5f0f csv \u8868\u793a\u666e\u901ahdfs\u6587\u4ef6\u683c\u5f0f\uff08\u903b\u8f91\u4e8c\u7ef4\u8868\uff09 column \u00b6 \u5199\u5165\u6570\u636e\u7684\u5b57\u6bb5\uff0c\u4e0d\u652f\u6301\u5bf9\u90e8\u5206\u5217\u5199\u5165\u3002\u4e3a\u4e0ehive\u4e2d\u8868\u5173\u8054\uff0c\u9700\u8981\u6307\u5b9a\u8868\u4e2d\u6240\u6709\u5b57\u6bb5\u540d\u548c\u5b57\u6bb5\u7c7b\u578b\uff0c \u5176\u4e2d\uff1a name \u6307\u5b9a\u5b57\u6bb5\u540d\uff0c type \u6307\u5b9a\u5b57\u6bb5\u7c7b\u578b\u3002 \u7528\u6237\u53ef\u4ee5\u6307\u5b9a column \u5b57\u6bb5\u4fe1\u606f\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"column\" : [ { \"name\" : \"userName\" , \"type\" : \"string\" }, { \"name\" : \"age\" , \"type\" : \"long\" }, { \"name\" : \"salary\" , \"type\" : \"decimal(8,2)\" } ] } \u5bf9\u4e8e\u6570\u636e\u7c7b\u578b\u662f decimal \u7c7b\u578b\u7684\uff0c\u9700\u8981\u6ce8\u610f\uff1a \u5982\u679c\u6ca1\u6709\u6307\u5b9a\u7cbe\u5ea6\u548c\u5c0f\u6570\u4f4d\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u7684 decimal(38,10) \u8868\u793a \u5982\u679c\u4ec5\u6307\u5b9a\u4e86\u7cbe\u5ea6\u4f46\u672a\u6307\u5b9a\u5c0f\u6570\u4f4d\uff0c\u5219\u5c0f\u6570\u4f4d\u75280\u8868\u793a\uff0c\u5373 decimal(p,0) \u5982\u679c\u90fd\u6307\u5b9a\uff0c\u5219\u4f7f\u7528\u6307\u5b9a\u7684\u89c4\u683c\uff0c\u5373 decimal(p,s) writeMode \u00b6 \u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff1a append\uff0c\u5199\u5165\u524d\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff0c\u76f4\u63a5\u4f7f\u7528 filename \u5199\u5165\uff0c\u5e76\u4fdd\u8bc1\u6587\u4ef6\u540d\u4e0d\u51b2\u7a81\u3002 overwrite \u5982\u679c\u5199\u5165\u76ee\u5f55\u5b58\u5728\u6570\u636e\uff0c\u5219\u5148\u5220\u9664\uff0c\u540e\u5199\u5165 nonConflict\uff0c\u5982\u679c\u76ee\u5f55\u4e0b\u6709 fileName \u524d\u7f00\u7684\u6587\u4ef6\uff0c\u76f4\u63a5\u62a5\u9519\u3002 compress \u00b6 \u63cf\u8ff0\uff1ahdfs\u6587\u4ef6\u538b\u7f29\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4e0d\u586b\u5199\u610f\u5473\u7740\u6ca1\u6709\u538b\u7f29\u3002\u5176\u4e2d\uff1atext\u7c7b\u578b\u6587\u4ef6\u652f\u6301\u538b\u7f29\u7c7b\u578b\u6709gzip\u3001bzip2;orc\u7c7b\u578b\u6587\u4ef6\u652f\u6301\u7684\u538b\u7f29\u7c7b\u578b\u6709NONE\u3001SNAPPY\uff08\u9700\u8981\u7528\u6237\u5b89\u88c5SnappyCodec\uff09 hadoopConfig \u00b6 hadoopConfig \u91cc\u53ef\u4ee5\u914d\u7f6e\u4e0e Hadoop \u76f8\u5173\u7684\u4e00\u4e9b\u9ad8\u7ea7\u53c2\u6570\uff0c\u6bd4\u5982HA\u7684\u914d\u7f6e { \"hadoopConfig\" : { \"dfs.nameservices\" : \"cluster\" , \"dfs.ha.namenodes.cluster\" : \"nn1,nn2\" , \"dfs.namenode.rpc-address.cluster.nn1\" : \"node1.example.com:8020\" , \"dfs.namenode.rpc-address.cluster.nn2\" : \"node2.example.com:8020\" , \"dfs.client.failover.proxy.provider.cluster\" : \"org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider\" } } \u8fd9\u91cc\u7684 cluster \u8868\u793a HDFS \u914d\u7f6e\u6210HA\u65f6\u7684\u540d\u5b57\uff0c\u4e5f\u662f defaultFS \u914d\u7f6e\u9879\u4e2d\u7684\u540d\u5b57 \u5982\u679c\u5b9e\u9645\u73af\u5883\u4e2d\u7684\u540d\u5b57\u4e0d\u662f cluster \uff0c\u5219\u4e0a\u8ff0\u914d\u7f6e\u4e2d\u6240\u6709\u5199\u6709 cluster \u90fd\u9700\u8981\u66ff\u6362 haveKerberos \u00b6 \u662f\u5426\u6709Kerberos\u8ba4\u8bc1\uff0c\u9ed8\u8ba4 false , \u5982\u679c\u7528\u6237\u914d\u7f6etrue\uff0c\u5219\u914d\u7f6e\u9879 kerberosKeytabFilePath \uff0c kerberosPrincipal \u4e3a\u5fc5\u586b\u3002 kerberosKeytabFilePath \u00b6 Kerberos\u8ba4\u8bc1 keytab\u6587\u4ef6\u8def\u5f84\uff0c\u7edd\u5bf9\u8def\u5f84 kerberosPrincipal \u00b6 \u63cf\u8ff0\uff1aKerberos\u8ba4\u8bc1Principal\u540d\uff0c\u5982 xxxx/hadoopclient@xxx.xxx \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b HIVE \u6570\u636e\u7c7b\u578b Long TINYINT,SMALLINT,INT,INTEGER,BIGINT Double FLOAT,DOUBLE,DECIMAL String STRING,VARCHAR,CHAR Boolean BOOLEAN Date DATE,TIMESTAMP Bytes BINARY \u529f\u80fd\u4e0e\u9650\u5236 \u00b6 \u76ee\u524d\u4e0d\u652f\u6301\uff1a binary \u3001 arrays \u3001 maps \u3001 structs \u3001 union\u7c7b\u578b","title":"Hdfs Writer"},{"location":"writer/hdfswriter/#hdfs-writer","text":"HdfsWriter \u63d0\u4f9b\u5411HDFS\u6587\u4ef6\u7cfb\u7edf\u6307\u5b9a\u8def\u5f84\u4e2d\u5199\u5165 TEXTFile \uff0c ORCFile , PARQUET \u7b49\u683c\u5f0f\u6587\u4ef6\u7684\u80fd\u529b\uff0c \u6587\u4ef6\u5185\u5bb9\u53ef\u4e0e hive \u4e2d\u8868\u5173\u8054\u3002","title":"Hdfs Writer"},{"location":"writer/hdfswriter/#_1","text":"{ \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19890604 , \"type\" : \"long\" }, { \"value\" : \"1989-06-04 00:00:00\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 }, \"writer\" : { \"name\" : \"hdfswriter\" , \"parameter\" : { \"defaultFS\" : \"hdfs://xxx:port\" , \"fileType\" : \"orc\" , \"path\" : \"/user/hive/warehouse/writerorc.db/orcfull\" , \"fileName\" : \"xxxx\" , \"column\" : [ { \"name\" : \"col1\" , \"type\" : \"string\" }, { \"name\" : \"col2\" , \"type\" : \"int\" }, { \"name\" : \"col3\" , \"type\" : \"string\" }, { \"name\" : \"col4\" , \"type\" : \"boolean\" }, { \"name\" : \"col5\" , \"type\" : \"string\" } ], \"writeMode\" : \"overwrite\" , \"fieldDelimiter\" : \"\\u0001\" , \"compress\" : \"SNAPPY\" } } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/hdfswriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u8bf4\u660e path \u662f \u65e0 \u8981\u8bfb\u53d6\u7684\u6587\u4ef6\u8def\u5f84 defaultFS \u662f \u65e0 Hadoop hdfs \u6587\u4ef6\u7cfb\u7edf NAMENODE \u8282\u70b9\u5730\u5740\uff0c\u5982\u679c\u914d\u7f6e\u4e86 HA \u6a21\u5f0f\uff0c\u5219\u4e3a defaultFS \u7684\u503c fileType \u662f \u65e0 \u6587\u4ef6\u7684\u7c7b\u578b fileName \u662f \u65e0 \u8981\u5199\u5165\u7684\u6587\u4ef6\u540d\uff0c\u7528\u4e8e\u5f53\u4f5c\u524d\u7f00 column \u662f \u65e0 \u5199\u5165\u7684\u5b57\u6bb5\u5217\u8868 writeMode \u662f \u65e0 \u5199\u5165\u6a21\u5f0f\uff0c\u652f\u6301 append , overwrite , nonConflict fieldDelimiter \u5426 , \u6307\u5b9a\u6587\u672c\u6587\u4ef6\u7684\u5b57\u6bb5\u5206\u9694\u7b26\uff0c\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0d\u9700\u8981\u6307\u5b9a\u8be5\u9879 encoding \u5426 utf-8 \u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e\uff0c \u76ee\u524d\u4ec5\u652f\u6301 utf-8 nullFormat \u5426 \u65e0 \u81ea\u5b9a\u4e49\u54ea\u4e9b\u5b57\u7b26\u53ef\u4ee5\u8868\u793a\u4e3a\u7a7a,\u4f8b\u5982\u5982\u679c\u7528\u6237\u914d\u7f6e: \"\\\\N\" \uff0c\u90a3\u4e48\u5982\u679c\u6e90\u5934\u6570\u636e\u662f \"\\N\" \uff0c\u89c6\u4f5c null \u5b57\u6bb5 haveKerberos \u5426 \u65e0 \u662f\u5426\u542f\u7528 Kerberos \u8ba4\u8bc1\uff0c\u5982\u679c\u542f\u7528\uff0c\u5219\u9700\u8981\u540c\u65f6\u914d\u7f6e kerberosKeytabFilePath \uff0c kerberosPrincipal kerberosKeytabFilePath \u5426 \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u6587\u4ef6\u8def\u5f84, \u6bd4\u5982 /your/path/addax.service.keytab kerberosPrincipal \u5426 \u65e0 \u7528\u4e8e Kerberos \u8ba4\u8bc1\u7684\u51ed\u8bc1\u4e3b\u4f53, \u6bd4\u5982 addax/node1@WGZHAO.COM compress \u5426 \u65e0 \u6587\u4ef6\u7684\u538b\u7f29\u683c\u5f0f hadoopConfig \u5426 \u65e0 \u91cc\u53ef\u4ee5\u914d\u7f6e\u4e0e Hadoop \u76f8\u5173\u7684\u4e00\u4e9b\u9ad8\u7ea7\u53c2\u6570\uff0c\u6bd4\u5982HA\u7684\u914d\u7f6e","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/hdfswriter/#path","text":"\u5b58\u50a8\u5230 Hadoop hdfs\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0cHdfsWriter \u4f1a\u6839\u636e\u5e76\u53d1\u914d\u7f6e\u5728 Path \u76ee\u5f55\u4e0b\u5199\u5165\u591a\u4e2a\u6587\u4ef6\u3002\u4e3a\u4e0ehive\u8868\u5173\u8054\uff0c\u8bf7\u586b\u5199hive\u8868\u5728hdfs\u4e0a\u7684\u5b58\u50a8\u8def\u5f84\u3002 \u4f8b\uff1aHive\u4e0a\u8bbe\u7f6e\u7684\u6570\u636e\u4ed3\u5e93\u7684\u5b58\u50a8\u8def\u5f84\u4e3a\uff1a /user/hive/warehouse/ \uff0c\u5df2\u5efa\u7acb\u6570\u636e\u5e93\uff1a test \uff0c\u8868\uff1a hello \uff1b \u5219\u5bf9\u5e94\u7684\u5b58\u50a8\u8def\u5f84\u4e3a\uff1a /user/hive/warehouse/test.db/hello (\u5982\u679c\u5efa\u8868\u65f6\u6307\u5b9a\u4e86 location \u5c5e\u6027\uff0c\u5219\u4f9d\u636e\u8be5\u5c5e\u6027\u7684\u8def\u5f84)","title":"path"},{"location":"writer/hdfswriter/#defaultfs","text":"Hadoop hdfs\u6587\u4ef6\u7cfb\u7edf namenode \u8282\u70b9\u5730\u5740\u3002\u683c\u5f0f\uff1a hdfs://ip:port \uff1b\u4f8b\u5982\uff1a hdfs://127.0.0.1:9000 , \u5982\u679c\u542f\u7528\u4e86HA\uff0c\u5219\u4e3a servicename \u6a21\u5f0f\uff0c\u6bd4\u5982 hdfs://sandbox","title":"defaultFS"},{"location":"writer/hdfswriter/#filetype","text":"\u63cf\u8ff0\uff1a\u6587\u4ef6\u7684\u7c7b\u578b\uff0c\u76ee\u524d\u53ea\u652f\u6301\u7528\u6237\u914d\u7f6e\u4e3a text \u8868\u793a Text file\u6587\u4ef6\u683c\u5f0f orc \u8868\u793a OrcFile\u6587\u4ef6\u683c\u5f0f parquet \u8868\u793a Parquet \u6587\u4ef6\u683c\u5f0f rc \u8868\u793a Rcfile \u6587\u4ef6\u683c\u5f0f seq \u8868\u793asequence file\u6587\u4ef6\u683c\u5f0f csv \u8868\u793a\u666e\u901ahdfs\u6587\u4ef6\u683c\u5f0f\uff08\u903b\u8f91\u4e8c\u7ef4\u8868\uff09","title":"fileType"},{"location":"writer/hdfswriter/#column","text":"\u5199\u5165\u6570\u636e\u7684\u5b57\u6bb5\uff0c\u4e0d\u652f\u6301\u5bf9\u90e8\u5206\u5217\u5199\u5165\u3002\u4e3a\u4e0ehive\u4e2d\u8868\u5173\u8054\uff0c\u9700\u8981\u6307\u5b9a\u8868\u4e2d\u6240\u6709\u5b57\u6bb5\u540d\u548c\u5b57\u6bb5\u7c7b\u578b\uff0c \u5176\u4e2d\uff1a name \u6307\u5b9a\u5b57\u6bb5\u540d\uff0c type \u6307\u5b9a\u5b57\u6bb5\u7c7b\u578b\u3002 \u7528\u6237\u53ef\u4ee5\u6307\u5b9a column \u5b57\u6bb5\u4fe1\u606f\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"column\" : [ { \"name\" : \"userName\" , \"type\" : \"string\" }, { \"name\" : \"age\" , \"type\" : \"long\" }, { \"name\" : \"salary\" , \"type\" : \"decimal(8,2)\" } ] } \u5bf9\u4e8e\u6570\u636e\u7c7b\u578b\u662f decimal \u7c7b\u578b\u7684\uff0c\u9700\u8981\u6ce8\u610f\uff1a \u5982\u679c\u6ca1\u6709\u6307\u5b9a\u7cbe\u5ea6\u548c\u5c0f\u6570\u4f4d\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u7684 decimal(38,10) \u8868\u793a \u5982\u679c\u4ec5\u6307\u5b9a\u4e86\u7cbe\u5ea6\u4f46\u672a\u6307\u5b9a\u5c0f\u6570\u4f4d\uff0c\u5219\u5c0f\u6570\u4f4d\u75280\u8868\u793a\uff0c\u5373 decimal(p,0) \u5982\u679c\u90fd\u6307\u5b9a\uff0c\u5219\u4f7f\u7528\u6307\u5b9a\u7684\u89c4\u683c\uff0c\u5373 decimal(p,s)","title":"column"},{"location":"writer/hdfswriter/#writemode","text":"\u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff1a append\uff0c\u5199\u5165\u524d\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff0c\u76f4\u63a5\u4f7f\u7528 filename \u5199\u5165\uff0c\u5e76\u4fdd\u8bc1\u6587\u4ef6\u540d\u4e0d\u51b2\u7a81\u3002 overwrite \u5982\u679c\u5199\u5165\u76ee\u5f55\u5b58\u5728\u6570\u636e\uff0c\u5219\u5148\u5220\u9664\uff0c\u540e\u5199\u5165 nonConflict\uff0c\u5982\u679c\u76ee\u5f55\u4e0b\u6709 fileName \u524d\u7f00\u7684\u6587\u4ef6\uff0c\u76f4\u63a5\u62a5\u9519\u3002","title":"writeMode"},{"location":"writer/hdfswriter/#compress","text":"\u63cf\u8ff0\uff1ahdfs\u6587\u4ef6\u538b\u7f29\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4e0d\u586b\u5199\u610f\u5473\u7740\u6ca1\u6709\u538b\u7f29\u3002\u5176\u4e2d\uff1atext\u7c7b\u578b\u6587\u4ef6\u652f\u6301\u538b\u7f29\u7c7b\u578b\u6709gzip\u3001bzip2;orc\u7c7b\u578b\u6587\u4ef6\u652f\u6301\u7684\u538b\u7f29\u7c7b\u578b\u6709NONE\u3001SNAPPY\uff08\u9700\u8981\u7528\u6237\u5b89\u88c5SnappyCodec\uff09","title":"compress"},{"location":"writer/hdfswriter/#hadoopconfig","text":"hadoopConfig \u91cc\u53ef\u4ee5\u914d\u7f6e\u4e0e Hadoop \u76f8\u5173\u7684\u4e00\u4e9b\u9ad8\u7ea7\u53c2\u6570\uff0c\u6bd4\u5982HA\u7684\u914d\u7f6e { \"hadoopConfig\" : { \"dfs.nameservices\" : \"cluster\" , \"dfs.ha.namenodes.cluster\" : \"nn1,nn2\" , \"dfs.namenode.rpc-address.cluster.nn1\" : \"node1.example.com:8020\" , \"dfs.namenode.rpc-address.cluster.nn2\" : \"node2.example.com:8020\" , \"dfs.client.failover.proxy.provider.cluster\" : \"org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider\" } } \u8fd9\u91cc\u7684 cluster \u8868\u793a HDFS \u914d\u7f6e\u6210HA\u65f6\u7684\u540d\u5b57\uff0c\u4e5f\u662f defaultFS \u914d\u7f6e\u9879\u4e2d\u7684\u540d\u5b57 \u5982\u679c\u5b9e\u9645\u73af\u5883\u4e2d\u7684\u540d\u5b57\u4e0d\u662f cluster \uff0c\u5219\u4e0a\u8ff0\u914d\u7f6e\u4e2d\u6240\u6709\u5199\u6709 cluster \u90fd\u9700\u8981\u66ff\u6362","title":"hadoopConfig"},{"location":"writer/hdfswriter/#havekerberos","text":"\u662f\u5426\u6709Kerberos\u8ba4\u8bc1\uff0c\u9ed8\u8ba4 false , \u5982\u679c\u7528\u6237\u914d\u7f6etrue\uff0c\u5219\u914d\u7f6e\u9879 kerberosKeytabFilePath \uff0c kerberosPrincipal \u4e3a\u5fc5\u586b\u3002","title":"haveKerberos"},{"location":"writer/hdfswriter/#kerberoskeytabfilepath","text":"Kerberos\u8ba4\u8bc1 keytab\u6587\u4ef6\u8def\u5f84\uff0c\u7edd\u5bf9\u8def\u5f84","title":"kerberosKeytabFilePath"},{"location":"writer/hdfswriter/#kerberosprincipal","text":"\u63cf\u8ff0\uff1aKerberos\u8ba4\u8bc1Principal\u540d\uff0c\u5982 xxxx/hadoopclient@xxx.xxx","title":"kerberosPrincipal"},{"location":"writer/hdfswriter/#_3","text":"Addax \u5185\u90e8\u7c7b\u578b HIVE \u6570\u636e\u7c7b\u578b Long TINYINT,SMALLINT,INT,INTEGER,BIGINT Double FLOAT,DOUBLE,DECIMAL String STRING,VARCHAR,CHAR Boolean BOOLEAN Date DATE,TIMESTAMP Bytes BINARY","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/hdfswriter/#_4","text":"\u76ee\u524d\u4e0d\u652f\u6301\uff1a binary \u3001 arrays \u3001 maps \u3001 structs \u3001 union\u7c7b\u578b","title":"\u529f\u80fd\u4e0e\u9650\u5236"},{"location":"writer/influxdb2writer/","text":"InfluxDB2 Writer \u00b6 InfluxDB2Writer \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5c06\u6570\u636e\u5199\u5165 InfluxDB 2.0 \u53ca\u4ee5\u4e0a\u7248\u672c\u7684\u6570\u636e\u5e93\u7684\u529f\u80fd\u3002 \u6ce8\u610f\uff0c\u5982\u679c\u4f60\u7684 InfluxDB \u662f 1.8 \u53ca\u4ee5\u4e0b\u7248\u672c\uff0c\u5219\u5e94\u8be5\u4f7f\u7528 InfluxDBWriter \u63d2\u4ef6 \u793a\u4f8b \u00b6 \u4ee5\u4e0b\u793a\u4f8b\u7528\u6765\u6f14\u793a\u8be5\u63d2\u4ef6\u4ece\u5185\u5b58\u8bfb\u53d6\u6570\u636e\u5e76\u5199\u5165\u5230\u6307\u5b9a\u8868 \u521b\u5efa job \u6587\u4ef6 \u00b6 \u521b\u5efa job/stream2influx2.json \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/stream2influx2.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"incr\" : \"2021-10-17 22:40:00,1,s\" , \"type\" : \"date\" }, { \"random\" : \"1,1000\" , \"type\" : \"long\" }, { \"random\" : \"1,10\" , \"type\" : \"string\" }, { \"random\" : \"1000,50000\" , \"type\" : \"double\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"influxdb2writer\" , \"parameter\" : { \"connection\" : [ { \"endpoint\" : \"http://localhost:8086\" , \"org\" : \"com.wgzhao\" , \"bucket\" : \"test\" , \"table\" : \"datax_tbl\" } ], \"token\" : \"YOUR_SECURE_TOKEN\" , \"tag\" : [ { \"location\" : \"east\" }, { \"lat\" : 23.123445 } ], \"interval\" : \"ms\" , \"column\" : [ \"c_long\" , \"c_string\" , \"c_double\" ], \"batchSize\" : 1024 } } } } } \u8fd0\u884c \u00b6 \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/stream2influx2.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 InfluxDB \u8fde\u63a5\u4e32 table \u662f string \u65e0 \u8981\u5199\u5165\u7684\u8868\uff08\u6307\u6807\uff09 org \u662f string \u65e0 \u6307\u5b9a InfluxDB \u7684 org \u540d\u79f0 bucket \u662f string \u65e0 \u6307\u5b9a InfluxDB \u7684 bucket \u540d\u79f0 token \u662f string \u65e0 \u8bbf\u95ee\u6570\u636e\u5e93\u7684 token column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408 tag \u5426 list \u65e0 \u8981\u6307\u5b9a\u7684 tag interval \u5426 string ms \u6307\u5b9a\u65f6\u95f4\u95f4\u9694\uff0c\u53ef\u4ee5\u6307\u5b9a s , ms , us , ns batchSize \u5426 int 1024 \u6279\u91cf\u5199\u5165\u7684\u5927\u5c0f column \u00b6 InfluxDB \u4f5c\u4e3a\u65f6\u5e8f\u6570\u636e\u5e93\uff0c\u9700\u8981\u6bcf\u6761\u8bb0\u5f55\u90fd\u6709\u65f6\u95f4\u6233\u5b57\u6bb5\uff0c\u56e0\u6b64\u4f1a\u628a\u6bcf\u6761\u7684\u8bb0\u5f55\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u5f53\u4f5c\u65f6\u95f4\u6233\u6765\u5904\u7406\u3002 column \u53ea\u9700\u8981\u6307\u5b9a\u9664\u4e86\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u5916\u7684\u5176\u4ed6\u5b57\u6bb5\u3002 \u6bd4\u5982\u793a\u4f8b\u4e2d\uff0c streamreader \u8bbe\u7f6e\u4e864\u4e2a\u5b57\u6bb5\uff0c\u4f46\u5728 influxdb2writer \u4e2d\u7684 column \u53ea\u6307\u5b9a\u4e86\u4e09\u4e2a\u5b57\u6bb5\uff0c\u5c31\u662f\u56e0\u4e3a\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u5df2\u7ecf\u9ed8\u8ba4\u4f5c\u4e3a\u65f6\u95f4\u6233\u4e86\u3002 tag \u00b6 \u7528\u4e8e\u6307\u5b9a\u6307\u6807\uff08\u8fd9\u91cc\u5f53\u4f5c\u8868\uff09\u7684 \u6807\u7b7e\uff0c\u6bcf\u4e2a tag \u4f7f\u7528 map \u65b9\u5f0f\u6307\u5b9a\uff0c\u6bd4\u5982\u793a\u4f8b\u4e2d\uff1a { \"tag\" : [ { \"location\" : \"east\" }, { \"lat\" : 23.123445 } ] } map\u4e2d\u7684 key \u8868\u793a\u6807\u7b7e\u7684\u540d\u79f0\uff0cvalue \u8868\u793a\u6807\u7b7e\u503c interval \u00b6 \u8bbe\u7f6e\u65f6\u95f4\u6233\u7684\u95f4\u9694\u9891\u7387\uff0c\u8be5\u5b57\u6bb5\u7684\u5b9a\u4e49\u6765\u6e90\u4e8e influxdb-client-java \u4e2d\u7684 WritePrecision.java \u5176\u5b57\u7b26\u4e32\u8868\u8fbe\u7684\u542b\u4e49\u5206\u522b\u4e3a\uff1a s : \u79d2 ms : \u6beb\u79d2 us : \u5fae\u79d2 ns : \u7eb3\u79d2 \u7c7b\u578b\u8f6c\u6362 \u00b6 \u5f53\u524d\u652f\u6301 InfluxDB 2.0 \u7684\u57fa\u672c\u7c7b\u578b","title":"InfluxDB2 Writer"},{"location":"writer/influxdb2writer/#influxdb2-writer","text":"InfluxDB2Writer \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5c06\u6570\u636e\u5199\u5165 InfluxDB 2.0 \u53ca\u4ee5\u4e0a\u7248\u672c\u7684\u6570\u636e\u5e93\u7684\u529f\u80fd\u3002 \u6ce8\u610f\uff0c\u5982\u679c\u4f60\u7684 InfluxDB \u662f 1.8 \u53ca\u4ee5\u4e0b\u7248\u672c\uff0c\u5219\u5e94\u8be5\u4f7f\u7528 InfluxDBWriter \u63d2\u4ef6","title":"InfluxDB2 Writer"},{"location":"writer/influxdb2writer/#_1","text":"\u4ee5\u4e0b\u793a\u4f8b\u7528\u6765\u6f14\u793a\u8be5\u63d2\u4ef6\u4ece\u5185\u5b58\u8bfb\u53d6\u6570\u636e\u5e76\u5199\u5165\u5230\u6307\u5b9a\u8868","title":"\u793a\u4f8b"},{"location":"writer/influxdb2writer/#job","text":"\u521b\u5efa job/stream2influx2.json \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/stream2influx2.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"incr\" : \"2021-10-17 22:40:00,1,s\" , \"type\" : \"date\" }, { \"random\" : \"1,1000\" , \"type\" : \"long\" }, { \"random\" : \"1,10\" , \"type\" : \"string\" }, { \"random\" : \"1000,50000\" , \"type\" : \"double\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"influxdb2writer\" , \"parameter\" : { \"connection\" : [ { \"endpoint\" : \"http://localhost:8086\" , \"org\" : \"com.wgzhao\" , \"bucket\" : \"test\" , \"table\" : \"datax_tbl\" } ], \"token\" : \"YOUR_SECURE_TOKEN\" , \"tag\" : [ { \"location\" : \"east\" }, { \"lat\" : 23.123445 } ], \"interval\" : \"ms\" , \"column\" : [ \"c_long\" , \"c_string\" , \"c_double\" ], \"batchSize\" : 1024 } } } } }","title":"\u521b\u5efa job \u6587\u4ef6"},{"location":"writer/influxdb2writer/#_2","text":"\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/stream2influx2.json","title":"\u8fd0\u884c"},{"location":"writer/influxdb2writer/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 InfluxDB \u8fde\u63a5\u4e32 table \u662f string \u65e0 \u8981\u5199\u5165\u7684\u8868\uff08\u6307\u6807\uff09 org \u662f string \u65e0 \u6307\u5b9a InfluxDB \u7684 org \u540d\u79f0 bucket \u662f string \u65e0 \u6307\u5b9a InfluxDB \u7684 bucket \u540d\u79f0 token \u662f string \u65e0 \u8bbf\u95ee\u6570\u636e\u5e93\u7684 token column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408 tag \u5426 list \u65e0 \u8981\u6307\u5b9a\u7684 tag interval \u5426 string ms \u6307\u5b9a\u65f6\u95f4\u95f4\u9694\uff0c\u53ef\u4ee5\u6307\u5b9a s , ms , us , ns batchSize \u5426 int 1024 \u6279\u91cf\u5199\u5165\u7684\u5927\u5c0f","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/influxdb2writer/#column","text":"InfluxDB \u4f5c\u4e3a\u65f6\u5e8f\u6570\u636e\u5e93\uff0c\u9700\u8981\u6bcf\u6761\u8bb0\u5f55\u90fd\u6709\u65f6\u95f4\u6233\u5b57\u6bb5\uff0c\u56e0\u6b64\u4f1a\u628a\u6bcf\u6761\u7684\u8bb0\u5f55\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u5f53\u4f5c\u65f6\u95f4\u6233\u6765\u5904\u7406\u3002 column \u53ea\u9700\u8981\u6307\u5b9a\u9664\u4e86\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u5916\u7684\u5176\u4ed6\u5b57\u6bb5\u3002 \u6bd4\u5982\u793a\u4f8b\u4e2d\uff0c streamreader \u8bbe\u7f6e\u4e864\u4e2a\u5b57\u6bb5\uff0c\u4f46\u5728 influxdb2writer \u4e2d\u7684 column \u53ea\u6307\u5b9a\u4e86\u4e09\u4e2a\u5b57\u6bb5\uff0c\u5c31\u662f\u56e0\u4e3a\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u5df2\u7ecf\u9ed8\u8ba4\u4f5c\u4e3a\u65f6\u95f4\u6233\u4e86\u3002","title":"column"},{"location":"writer/influxdb2writer/#tag","text":"\u7528\u4e8e\u6307\u5b9a\u6307\u6807\uff08\u8fd9\u91cc\u5f53\u4f5c\u8868\uff09\u7684 \u6807\u7b7e\uff0c\u6bcf\u4e2a tag \u4f7f\u7528 map \u65b9\u5f0f\u6307\u5b9a\uff0c\u6bd4\u5982\u793a\u4f8b\u4e2d\uff1a { \"tag\" : [ { \"location\" : \"east\" }, { \"lat\" : 23.123445 } ] } map\u4e2d\u7684 key \u8868\u793a\u6807\u7b7e\u7684\u540d\u79f0\uff0cvalue \u8868\u793a\u6807\u7b7e\u503c","title":"tag"},{"location":"writer/influxdb2writer/#interval","text":"\u8bbe\u7f6e\u65f6\u95f4\u6233\u7684\u95f4\u9694\u9891\u7387\uff0c\u8be5\u5b57\u6bb5\u7684\u5b9a\u4e49\u6765\u6e90\u4e8e influxdb-client-java \u4e2d\u7684 WritePrecision.java \u5176\u5b57\u7b26\u4e32\u8868\u8fbe\u7684\u542b\u4e49\u5206\u522b\u4e3a\uff1a s : \u79d2 ms : \u6beb\u79d2 us : \u5fae\u79d2 ns : \u7eb3\u79d2","title":"interval"},{"location":"writer/influxdb2writer/#_4","text":"\u5f53\u524d\u652f\u6301 InfluxDB 2.0 \u7684\u57fa\u672c\u7c7b\u578b","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/influxdbwriter/","text":"InfluxDB Writer \u00b6 InfluxDBWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5c06\u6570\u636e\u5199\u5165 InfluxDB \u8bfb\u53d6\u6570\u636e\u7684\u529f\u80fd\u3002 \u5e95\u5c42\u5b9e\u73b0\u4e0a\uff0c\u662f\u901a\u8fc7\u8c03\u7528 InfluQL \u8bed\u8a00\u63a5\u53e3\uff0c\u6784\u5efa\u63d2\u5165\u8bed\u53e5\uff0c\u7136\u540e\u8fdb\u884c\u6570\u636e\u63d2\u5165\u3002 \u793a\u4f8b \u00b6 \u4ee5\u4e0b\u793a\u4f8b\u7528\u6765\u6f14\u793a\u8be5\u63d2\u4ef6\u4ece\u5185\u5b58\u8bfb\u53d6\u6570\u636e\u5e76\u5199\u5165\u5230\u6307\u5b9a\u8868 \u521b\u5efa\u9700\u8981\u7684\u5e93 \u00b6 \u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u6765\u521b\u5efa\u9700\u8981\u5199\u5165\u7684\u5e93 # create database influx --execute \"CREATE DATABASE addax\" \u521b\u5efa job \u6587\u4ef6 \u00b6 \u521b\u5efa job/stream2influxdb.json \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/stream2influxdb.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"random\" : \"2001-01-01 00:00:00, 2016-07-07 23:59:59\" , \"type\" : \"date\" }, { \"random\" : \"1,1000\" , \"type\" : \"long\" }, { \"random\" : \"1,10\" , \"type\" : \"string\" }, { \"random\" : \"1000,50000\" , \"type\" : \"double\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"influxdbwriter\" , \"parameter\" : { \"connection\" : [ { \"endpoint\" : \"http://localhost:8086\" , \"database\" : \"addax\" , \"table\" : \"addax_tbl\" } ], \"connTimeout\" : 15 , \"readTimeout\" : 20 , \"writeTimeout\" : 20 , \"username\" : \"influx\" , \"password\" : \"influx123\" , \"column\" : [ { \"name\" : \"time\" , \"type\" : \"timestamp\" }, { \"name\" : \"user_id\" , \"type\" : \"int\" }, { \"name\" : \"user_name\" , \"type\" : \"string\" }, { \"name\" : \"salary\" , \"type\" : \"double\" } ], \"preSql\" : [ \"delete from addax_tbl\" ], \"batchSize\" : 1024 , \"retentionPolicy\" : { \"name\" : \"one_day_only\" , \"duration\" : \"1d\" , \"replication\" : 1 } } } } } } \u8fd0\u884c \u00b6 \u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/stream2influxdb.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 InfluxDB \u8fde\u63a5\u4e32 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 database \u662f string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7684\u6570\u636e\u5e93 table \u662f string \u65e0 \u8981\u5199\u5165\u7684\u8868\uff08\u6307\u6807\uff09 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408 connTimeout \u5426 int 15 \u8bbe\u7f6e\u8fde\u63a5\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 readTimeout \u5426 int 20 \u8bbe\u7f6e\u8bfb\u53d6\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 writeTimeout \u5426 int 20 \u8bbe\u7f6e\u5199\u5165\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 preSql \u5426 list \u65e0 \u63d2\u5165\u6570\u636e\u524d\u6267\u884c\u7684SQL\u8bed\u53e5 postSql \u5426 list \u65e0 \u6570\u636e\u63d2\u5165\u5b8c\u6bd5\u540e\u9700\u8981\u6267\u884c\u7684\u8bed\u53e5 retentionPolicy \u5426 dict \u65e0 \u8bbe\u7f6e\u6570\u636e\u5e93\u7684 Retention Policy \u7b56\u7565 column \u00b6 InfluxDB \u4f5c\u4e3a\u65f6\u5e8f\u6570\u636e\u5e93\uff0c\u9700\u8981\u6bcf\u6761\u8bb0\u5f55\u90fd\u6709\u65f6\u95f4\u6233\u5b57\u6bb5\uff0c\u56e0\u6b64\u8fd9\u91cc\u4f1a\u628a column \u914d\u7f6e\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u9ed8\u8ba4\u5f53\u4f5c\u65f6\u95f4\u6233 retentionPolicy \u00b6 \u8bbe\u5b9a\u6570\u636e\u5e93\u7684 Retention Policy \u7b56\u7565\uff0c\u4f9d\u636e\u7ed9\u5b9a\u7684\u914d\u7f6e\uff0c\u5728\u6307\u5b9a\u6570\u636e\u5e93\u4e0a\u521b\u5efa\u4e00\u6761 Retention Policy \u4fe1\u606f\u3002 \u6709\u5173 Retention Policy \u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u53c2\u8003 \u5b98\u65b9\u6587\u6863 \u7c7b\u578b\u8f6c\u6362 \u00b6 \u5f53\u524d\u652f\u6301 InfluxDB \u7684\u57fa\u672c\u7c7b\u578b \u9650\u5236 \u00b6 \u5f53\u524d\u63d2\u4ef6\u4ec5\u652f\u6301 1.x \u7248\u672c\uff0c2.0 \u53ca\u4ee5\u4e0a\u5e76\u4e0d\u652f\u6301","title":"InfluxDB Writer"},{"location":"writer/influxdbwriter/#influxdb-writer","text":"InfluxDBWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5c06\u6570\u636e\u5199\u5165 InfluxDB \u8bfb\u53d6\u6570\u636e\u7684\u529f\u80fd\u3002 \u5e95\u5c42\u5b9e\u73b0\u4e0a\uff0c\u662f\u901a\u8fc7\u8c03\u7528 InfluQL \u8bed\u8a00\u63a5\u53e3\uff0c\u6784\u5efa\u63d2\u5165\u8bed\u53e5\uff0c\u7136\u540e\u8fdb\u884c\u6570\u636e\u63d2\u5165\u3002","title":"InfluxDB Writer"},{"location":"writer/influxdbwriter/#_1","text":"\u4ee5\u4e0b\u793a\u4f8b\u7528\u6765\u6f14\u793a\u8be5\u63d2\u4ef6\u4ece\u5185\u5b58\u8bfb\u53d6\u6570\u636e\u5e76\u5199\u5165\u5230\u6307\u5b9a\u8868","title":"\u793a\u4f8b"},{"location":"writer/influxdbwriter/#_2","text":"\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u6765\u521b\u5efa\u9700\u8981\u5199\u5165\u7684\u5e93 # create database influx --execute \"CREATE DATABASE addax\"","title":"\u521b\u5efa\u9700\u8981\u7684\u5e93"},{"location":"writer/influxdbwriter/#job","text":"\u521b\u5efa job/stream2influxdb.json \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/stream2influxdb.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"random\" : \"2001-01-01 00:00:00, 2016-07-07 23:59:59\" , \"type\" : \"date\" }, { \"random\" : \"1,1000\" , \"type\" : \"long\" }, { \"random\" : \"1,10\" , \"type\" : \"string\" }, { \"random\" : \"1000,50000\" , \"type\" : \"double\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"influxdbwriter\" , \"parameter\" : { \"connection\" : [ { \"endpoint\" : \"http://localhost:8086\" , \"database\" : \"addax\" , \"table\" : \"addax_tbl\" } ], \"connTimeout\" : 15 , \"readTimeout\" : 20 , \"writeTimeout\" : 20 , \"username\" : \"influx\" , \"password\" : \"influx123\" , \"column\" : [ { \"name\" : \"time\" , \"type\" : \"timestamp\" }, { \"name\" : \"user_id\" , \"type\" : \"int\" }, { \"name\" : \"user_name\" , \"type\" : \"string\" }, { \"name\" : \"salary\" , \"type\" : \"double\" } ], \"preSql\" : [ \"delete from addax_tbl\" ], \"batchSize\" : 1024 , \"retentionPolicy\" : { \"name\" : \"one_day_only\" , \"duration\" : \"1d\" , \"replication\" : 1 } } } } } }","title":"\u521b\u5efa job \u6587\u4ef6"},{"location":"writer/influxdbwriter/#_3","text":"\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/stream2influxdb.json","title":"\u8fd0\u884c"},{"location":"writer/influxdbwriter/#_4","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 endpoint \u662f string \u65e0 InfluxDB \u8fde\u63a5\u4e32 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 database \u662f string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7684\u6570\u636e\u5e93 table \u662f string \u65e0 \u8981\u5199\u5165\u7684\u8868\uff08\u6307\u6807\uff09 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408 connTimeout \u5426 int 15 \u8bbe\u7f6e\u8fde\u63a5\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 readTimeout \u5426 int 20 \u8bbe\u7f6e\u8bfb\u53d6\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 writeTimeout \u5426 int 20 \u8bbe\u7f6e\u5199\u5165\u8d85\u65f6\u503c\uff0c\u5355\u4f4d\u4e3a\u79d2 preSql \u5426 list \u65e0 \u63d2\u5165\u6570\u636e\u524d\u6267\u884c\u7684SQL\u8bed\u53e5 postSql \u5426 list \u65e0 \u6570\u636e\u63d2\u5165\u5b8c\u6bd5\u540e\u9700\u8981\u6267\u884c\u7684\u8bed\u53e5 retentionPolicy \u5426 dict \u65e0 \u8bbe\u7f6e\u6570\u636e\u5e93\u7684 Retention Policy \u7b56\u7565","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/influxdbwriter/#column","text":"InfluxDB \u4f5c\u4e3a\u65f6\u5e8f\u6570\u636e\u5e93\uff0c\u9700\u8981\u6bcf\u6761\u8bb0\u5f55\u90fd\u6709\u65f6\u95f4\u6233\u5b57\u6bb5\uff0c\u56e0\u6b64\u8fd9\u91cc\u4f1a\u628a column \u914d\u7f6e\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u9ed8\u8ba4\u5f53\u4f5c\u65f6\u95f4\u6233","title":"column"},{"location":"writer/influxdbwriter/#retentionpolicy","text":"\u8bbe\u5b9a\u6570\u636e\u5e93\u7684 Retention Policy \u7b56\u7565\uff0c\u4f9d\u636e\u7ed9\u5b9a\u7684\u914d\u7f6e\uff0c\u5728\u6307\u5b9a\u6570\u636e\u5e93\u4e0a\u521b\u5efa\u4e00\u6761 Retention Policy \u4fe1\u606f\u3002 \u6709\u5173 Retention Policy \u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u53c2\u8003 \u5b98\u65b9\u6587\u6863","title":"retentionPolicy"},{"location":"writer/influxdbwriter/#_5","text":"\u5f53\u524d\u652f\u6301 InfluxDB \u7684\u57fa\u672c\u7c7b\u578b","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/influxdbwriter/#_6","text":"\u5f53\u524d\u63d2\u4ef6\u4ec5\u652f\u6301 1.x \u7248\u672c\uff0c2.0 \u53ca\u4ee5\u4e0a\u5e76\u4e0d\u652f\u6301","title":"\u9650\u5236"},{"location":"writer/kuduwriter/","text":"Kudu Writer \u00b6 KuduWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5c06\u6570\u636e\u5199\u5165\u5230 kudu \u7684\u80fd\u529b\uff0c\u5f53\u524d\u662f\u901a\u8fc7\u8c03\u7528\u539f\u751fRPC\u63a5\u53e3\u6765\u5b9e\u73b0\u7684\u3002 \u540e\u671f\u5e0c\u671b\u901a\u8fc7 impala \u63a5\u53e3\u5b9e\u73b0\uff0c\u4ece\u800c\u589e\u52a0\u66f4\u591a\u7684\u529f\u80fd\u3002 \u793a\u4f8b \u00b6 \u4ee5\u4e0b\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4ece\u5185\u5b58\u8bfb\u53d6\u6837\u4f8b\u6570\u636e\u5e76\u5199\u5165\u5230 kudu \u8868\u4e2d\u7684\u3002 \u8868\u7ed3\u6784 \u00b6 \u6211\u4eec\u7528 trino \u5de5\u5177\u8fde\u63a5\u5230 kudu \u670d\u52a1\uff0c\u7136\u540e\u901a\u8fc7\u4e0b\u9762\u7684 SQL \u8bed\u53e5\u521b\u5efa\u8868 CREATE TABLE kudu . default . users ( user_id int WITH ( primary_key = true ), user_name varchar , salary double ) WITH ( partition_by_hash_columns = ARRAY [ 'user_id' ], partition_by_hash_buckets = 2 ); job \u914d\u7f6e\u6587\u4ef6 \u00b6 \u521b\u5efa job/stream2kudu.json \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/stream2kudu.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"random\" : \"1,1000\" , \"type\" : \"long\" }, { \"random\" : \"1,10\" , \"type\" : \"string\" }, { \"random\" : \"1000,50000\" , \"type\" : \"double\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"kuduwriter\" , \"parameter\" : { \"masterAddress\" : \"127.0.0.1:7051,127.0.0.1:7151,127.0.0.1:7251\" , \"timeout\" : 60 , \"table\" : \"users\" , \"writeMode\" : \"upsert\" , \"column\" : [ \"user_id\" , \"user_name\" , \"salary\" ], \"batchSize\" : 1024 , \"bufferSize\" : 2048 , \"skipFail\" : false , \"encoding\" : \"UTF-8\" } } } } } \u8fd0\u884c \u00b6 \u6267\u884c\u4e0b\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/stream2kudu.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 masterAddress \u5fc5\u987b string \u65e0 Kudu Master\u96c6\u7fa4RPC\u5730\u5740,\u591a\u4e2a\u5730\u5740\u7528\u9017\u53f7(,)\u5206\u9694 table \u5fc5\u987b string \u65e0 kudu \u8868\u540d writeMode \u5426 string upsert \u8868\u6570\u636e\u5199\u5165\u6a21\u5f0f\uff0c\u652f\u6301 upsert, insert \u4e24\u8005 timeout \u5426 int 100 \u5199\u5165\u6570\u636e\u8d85\u65f6\u65f6\u95f4(\u79d2), 0 \u8868\u793a\u4e0d\u53d7\u9650\u5236 column \u662f list \u65e0 \u8981\u5199\u5165\u7684\u8868\u5b57\u6bb5\u53ca\u7c7b\u578b\uff0c\u914d\u7f6e\u65b9\u5f0f\u89c1\u4e0a\u793a\u4f8b skipFail \u5426 boolean false \u662f\u5426\u8df3\u8fc7\u63d2\u5165\u5931\u8d25\u7684\u8bb0\u5f55\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3atrue\uff0c\u5219\u63d2\u4ef6\u4e0d\u4f1a\u628a\u63d2\u5165\u5931\u8d25\u7684\u5f53\u4f5c\u5f02\u5e38 column \u00b6 column \u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a\u8981\u5199\u5165\u7684\u5217\uff0c\u5982\u540c\u4e0a\u8ff0\u4f8b\u5b50\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e [\"*\"] \u6765\u8868\u793a\u5199\u5165\u6240\u6709\u5217\u3002","title":"Kudu Writer"},{"location":"writer/kuduwriter/#kudu-writer","text":"KuduWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5c06\u6570\u636e\u5199\u5165\u5230 kudu \u7684\u80fd\u529b\uff0c\u5f53\u524d\u662f\u901a\u8fc7\u8c03\u7528\u539f\u751fRPC\u63a5\u53e3\u6765\u5b9e\u73b0\u7684\u3002 \u540e\u671f\u5e0c\u671b\u901a\u8fc7 impala \u63a5\u53e3\u5b9e\u73b0\uff0c\u4ece\u800c\u589e\u52a0\u66f4\u591a\u7684\u529f\u80fd\u3002","title":"Kudu Writer"},{"location":"writer/kuduwriter/#_1","text":"\u4ee5\u4e0b\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4ece\u5185\u5b58\u8bfb\u53d6\u6837\u4f8b\u6570\u636e\u5e76\u5199\u5165\u5230 kudu \u8868\u4e2d\u7684\u3002","title":"\u793a\u4f8b"},{"location":"writer/kuduwriter/#_2","text":"\u6211\u4eec\u7528 trino \u5de5\u5177\u8fde\u63a5\u5230 kudu \u670d\u52a1\uff0c\u7136\u540e\u901a\u8fc7\u4e0b\u9762\u7684 SQL \u8bed\u53e5\u521b\u5efa\u8868 CREATE TABLE kudu . default . users ( user_id int WITH ( primary_key = true ), user_name varchar , salary double ) WITH ( partition_by_hash_columns = ARRAY [ 'user_id' ], partition_by_hash_buckets = 2 );","title":"\u8868\u7ed3\u6784"},{"location":"writer/kuduwriter/#job","text":"\u521b\u5efa job/stream2kudu.json \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a job/stream2kudu.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"random\" : \"1,1000\" , \"type\" : \"long\" }, { \"random\" : \"1,10\" , \"type\" : \"string\" }, { \"random\" : \"1000,50000\" , \"type\" : \"double\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"kuduwriter\" , \"parameter\" : { \"masterAddress\" : \"127.0.0.1:7051,127.0.0.1:7151,127.0.0.1:7251\" , \"timeout\" : 60 , \"table\" : \"users\" , \"writeMode\" : \"upsert\" , \"column\" : [ \"user_id\" , \"user_name\" , \"salary\" ], \"batchSize\" : 1024 , \"bufferSize\" : 2048 , \"skipFail\" : false , \"encoding\" : \"UTF-8\" } } } } }","title":"job \u914d\u7f6e\u6587\u4ef6"},{"location":"writer/kuduwriter/#_3","text":"\u6267\u884c\u4e0b\u4e0b\u9762\u7684\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/stream2kudu.json","title":"\u8fd0\u884c"},{"location":"writer/kuduwriter/#_4","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 masterAddress \u5fc5\u987b string \u65e0 Kudu Master\u96c6\u7fa4RPC\u5730\u5740,\u591a\u4e2a\u5730\u5740\u7528\u9017\u53f7(,)\u5206\u9694 table \u5fc5\u987b string \u65e0 kudu \u8868\u540d writeMode \u5426 string upsert \u8868\u6570\u636e\u5199\u5165\u6a21\u5f0f\uff0c\u652f\u6301 upsert, insert \u4e24\u8005 timeout \u5426 int 100 \u5199\u5165\u6570\u636e\u8d85\u65f6\u65f6\u95f4(\u79d2), 0 \u8868\u793a\u4e0d\u53d7\u9650\u5236 column \u662f list \u65e0 \u8981\u5199\u5165\u7684\u8868\u5b57\u6bb5\u53ca\u7c7b\u578b\uff0c\u914d\u7f6e\u65b9\u5f0f\u89c1\u4e0a\u793a\u4f8b skipFail \u5426 boolean false \u662f\u5426\u8df3\u8fc7\u63d2\u5165\u5931\u8d25\u7684\u8bb0\u5f55\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3atrue\uff0c\u5219\u63d2\u4ef6\u4e0d\u4f1a\u628a\u63d2\u5165\u5931\u8d25\u7684\u5f53\u4f5c\u5f02\u5e38","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/kuduwriter/#column","text":"column \u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a\u8981\u5199\u5165\u7684\u5217\uff0c\u5982\u540c\u4e0a\u8ff0\u4f8b\u5b50\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e [\"*\"] \u6765\u8868\u793a\u5199\u5165\u6240\u6709\u5217\u3002","title":"column"},{"location":"writer/mongodbwriter/","text":"MongoDB Writer \u00b6 MongoDBWriter \u63d2\u4ef6\u7528\u4e8e\u5411 MongoDB \u5199\u5165\u6570\u636e\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 \u8be5\u793a\u4f8b\u5c06\u6d41\u5f0f\u6570\u636e\u5199\u5165\u5230 MongoDB \u8868\u4e2d job/stream2mongo.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"unique_id\" , \"type\" : \"string\" }, { \"value\" : \"sid\" , \"type\" : \"string\" }, { \"value\" : \"user_id\" , \"type\" : \"string\" }, { \"value\" : \"auction_id\" , \"type\" : \"string\" }, { \"value\" : \"content_type\" , \"type\" : \"string\" }, { \"value\" : \"pool_type\" , \"type\" : \"string\" }, { \"value\" : \"a1 a2 a3\" , \"type\" : \"string\" }, { \"value\" : \"c1 c2 c3\" , \"type\" : \"string\" }, { \"value\" : \"2020-09-06\" , \"type\" : \"string\" }, { \"value\" : \"tag1 tag2 tag3\" , \"type\" : \"string\" }, { \"value\" : \"property\" , \"type\" : \"string\" }, { \"value\" : 1984 , \"type\" : \"long\" }, { \"value\" : 1900 , \"type\" : \"long\" }, { \"value\" : 75 , \"type\" : \"long\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"mongodbwriter\" , \"parameter\" : { \"connection\" : [ { \"address\" : [ \"127.0.0.1:27017\" ], \"database\" : \"my_database\" , \"collection\" : \"addax_writer\" , \"authDb\" : \"my_database\" } ], \"username\" : \"my_user\" , \"password\" : \"password123\" , \"column\" : [ { \"name\" : \"unique_id\" , \"type\" : \"string\" }, { \"name\" : \"sid\" , \"type\" : \"string\" }, { \"name\" : \"user_id\" , \"type\" : \"string\" }, { \"name\" : \"auction_id\" , \"type\" : \"string\" }, { \"name\" : \"content_type\" , \"type\" : \"string\" }, { \"name\" : \"pool_type\" , \"type\" : \"string\" }, { \"name\" : \"frontcat_id\" , \"type\" : \"Array\" , \"splitter\" : \" \" }, { \"name\" : \"categoryid\" , \"type\" : \"Array\" , \"splitter\" : \" \" }, { \"name\" : \"gmt_create\" , \"type\" : \"string\" }, { \"name\" : \"taglist\" , \"type\" : \"Array\" , \"splitter\" : \" \" }, { \"name\" : \"property\" , \"type\" : \"string\" }, { \"name\" : \"scorea\" , \"type\" : \"int\" }, { \"name\" : \"scoreb\" , \"type\" : \"int\" }, { \"name\" : \"scorec\" , \"type\" : \"int\" } ], \"writeMode\" : \"insert\" } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 address \u662f list \u65e0 MongoDB\u7684\u6570\u636e\u5730\u5740\u4fe1\u606f\uff0c\u56e0\u4e3aMongoDB\u53ef\u80fd\u662f\u4e2a\u96c6\u7fa4\uff0c\u5219ip\u7aef\u53e3\u4fe1\u606f\u9700\u8981\u4ee5Json\u6570\u7ec4\u7684\u5f62\u5f0f\u7ed9\u51fa username \u5426 string \u65e0 MongoDB\u7684\u7528\u6237\u540d password \u5426 string \u65e0 MongoDB\u7684\u5bc6\u7801 collection \u662f string \u65e0 MongoDB\u7684\u96c6\u5408\u540d column \u662f list \u65e0 MongoDB\u7684\u6587\u6863\u5217\u540d splitter \u5426 string \u65e0 \u7279\u6b8a\u5206\u9694\u7b26\uff0c\u5f53\u4e14\u4ec5\u5f53\u8981\u5904\u7406\u7684\u5b57\u7b26\u4e32\u8981\u7528\u5206\u9694\u7b26\u5206\u9694\u4e3a\u5b57\u7b26\u6570\u7ec4\u65f6\uff0c\u624d\u4f7f\u7528\u8fd9\u4e2a\u53c2\u6570\uff0c\u901a\u8fc7\u8fd9\u4e2a\u53c2\u6570\u6307\u5b9a\u7684\u5206\u9694\u7b26\uff0c\u5c06\u5b57\u7b26\u4e32\u5206\u9694\u5b58\u50a8\u5230MongoDB\u7684\u6570\u7ec4\u4e2d writeMode \u5426 string insert \u6307\u5b9a\u4e86\u4f20\u8f93\u6570\u636e\u65f6\u66f4\u65b0\u7684\u4fe1\u606f,\u652f\u6301 insert\uff0c update\u4e24\u79cd batchSize \u5426 2048 int \u6307\u5b9a\u6279\u6b21\u8f93\u5165\u7684\u6570\u91cf isUpsert \u5426 string \u65e0 \u5f53\u8bbe\u7f6e\u4e3atrue\u65f6\uff0c\u8868\u793a\u9488\u5bf9\u76f8\u540c\u7684upsertKey\u505a\u66f4\u65b0\u64cd\u4f5c upsertKey \u5426 string \u65e0 upsertKey\u6307\u5b9a\u4e86\u6ca1\u884c\u8bb0\u5f55\u7684\u4e1a\u52a1\u4e3b\u952e\u3002\u7528\u6765\u505a\u66f4\u65b0\u65f6\u4f7f\u7528 column \u00b6 column \u6307\u5b9a mongo collection \u7684\u5b57\u6bb5\u4ee5\u53ca\u7c7b\u578b\uff0c\u5982\u679c\u662f\u6570\u7ec4\u7c7b\u578b\uff0c\u8fd8\u9700\u8981\u6307\u5b9a\u63a5\u6536\u5230\u7684\u6570\u636e\u6309\u7167\u4ec0\u4e48\u5206\u5272\uff0c\u4e00\u4e2a column \u5b57\u6bb5\u81f3\u5c11\u9700\u8981\u6307\u5b9a name \u4ee5\u53ca type \uff0c\u6bd4\u5982 { \"column\" : [ { \"name\" : \"user_id\" , \"type\" : \"string\" } ] } \u5982\u679c\u662f\u6570\u7ec4\u7c7b\u578b\uff0c\u5219\u9700\u8981\u914d\u7f6e splitter \u6765\u544a\u77e5\u5206\u9694\u7b26\uff0c\u7c7b\u4f3c\u5982\u4e0b\uff1a { \"column\" : { \"name\" : \"taglist\" , \"type\" : \"Array\" , \"splitter\" : \" \" } } writeMode \u00b6 \u4e0d\u914d\u7f6e\u7684\u60c5\u51b5\u4e0b\uff0c\u9ed8\u8ba4\u91c7\u53d6\u76f4\u63a5\u63d2\u5165\u8bb0\u5f55\u7684\u65b9\u5f0f\uff0c\u5982\u679c\u5e0c\u671b\u5b9e\u73b0\u63d2\u5165\u66f4\u65b0\uff08\u5373\u8bb0\u5f55\u5b58\u5728\u5219\u66f4\u65b0\u5426\u5219\u63d2\u5165\uff09\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e3a update \u6a21\u5f0f\uff0c\u8be5\u6a21\u5f0f\u4e0b\uff0c\u5fc5\u987b\u540c\u65f6\u66f4\u65b0\u7684\u5b57\u6bb5\u662f\u54ea\u4e2a\uff0c\u6bd4\u5982\uff1a { \"writeMode\" : \"update(unique_id)\" } \u4e0a\u8ff0\u914d\u7f6e\u8868\u793a\u4f9d\u636e\u5b57\u6bb5 unique_id \u6765\u51b3\u5b9a\u5f53\u524d\u8bb0\u5f55\u662f\u63d2\u5165\u8fd8\u662f\u66f4\u65b0\uff0c\u5f53\u524d\u6682\u4e0d\u652f\u6301\u6307\u5b9a\u591a\u4e2a\u5b57\u6bb5 \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b MongoDB \u6570\u636e\u7c7b\u578b Long int, Long Double double String string, array Date date Boolean boolean Bytes bytes","title":"MongoDB Writer"},{"location":"writer/mongodbwriter/#mongodb-writer","text":"MongoDBWriter \u63d2\u4ef6\u7528\u4e8e\u5411 MongoDB \u5199\u5165\u6570\u636e\u3002","title":"MongoDB Writer"},{"location":"writer/mongodbwriter/#_1","text":"\u8be5\u793a\u4f8b\u5c06\u6d41\u5f0f\u6570\u636e\u5199\u5165\u5230 MongoDB \u8868\u4e2d job/stream2mongo.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"unique_id\" , \"type\" : \"string\" }, { \"value\" : \"sid\" , \"type\" : \"string\" }, { \"value\" : \"user_id\" , \"type\" : \"string\" }, { \"value\" : \"auction_id\" , \"type\" : \"string\" }, { \"value\" : \"content_type\" , \"type\" : \"string\" }, { \"value\" : \"pool_type\" , \"type\" : \"string\" }, { \"value\" : \"a1 a2 a3\" , \"type\" : \"string\" }, { \"value\" : \"c1 c2 c3\" , \"type\" : \"string\" }, { \"value\" : \"2020-09-06\" , \"type\" : \"string\" }, { \"value\" : \"tag1 tag2 tag3\" , \"type\" : \"string\" }, { \"value\" : \"property\" , \"type\" : \"string\" }, { \"value\" : 1984 , \"type\" : \"long\" }, { \"value\" : 1900 , \"type\" : \"long\" }, { \"value\" : 75 , \"type\" : \"long\" } ], \"sliceRecordCount\" : 10 } }, \"writer\" : { \"name\" : \"mongodbwriter\" , \"parameter\" : { \"connection\" : [ { \"address\" : [ \"127.0.0.1:27017\" ], \"database\" : \"my_database\" , \"collection\" : \"addax_writer\" , \"authDb\" : \"my_database\" } ], \"username\" : \"my_user\" , \"password\" : \"password123\" , \"column\" : [ { \"name\" : \"unique_id\" , \"type\" : \"string\" }, { \"name\" : \"sid\" , \"type\" : \"string\" }, { \"name\" : \"user_id\" , \"type\" : \"string\" }, { \"name\" : \"auction_id\" , \"type\" : \"string\" }, { \"name\" : \"content_type\" , \"type\" : \"string\" }, { \"name\" : \"pool_type\" , \"type\" : \"string\" }, { \"name\" : \"frontcat_id\" , \"type\" : \"Array\" , \"splitter\" : \" \" }, { \"name\" : \"categoryid\" , \"type\" : \"Array\" , \"splitter\" : \" \" }, { \"name\" : \"gmt_create\" , \"type\" : \"string\" }, { \"name\" : \"taglist\" , \"type\" : \"Array\" , \"splitter\" : \" \" }, { \"name\" : \"property\" , \"type\" : \"string\" }, { \"name\" : \"scorea\" , \"type\" : \"int\" }, { \"name\" : \"scoreb\" , \"type\" : \"int\" }, { \"name\" : \"scorec\" , \"type\" : \"int\" } ], \"writeMode\" : \"insert\" } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/mongodbwriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 address \u662f list \u65e0 MongoDB\u7684\u6570\u636e\u5730\u5740\u4fe1\u606f\uff0c\u56e0\u4e3aMongoDB\u53ef\u80fd\u662f\u4e2a\u96c6\u7fa4\uff0c\u5219ip\u7aef\u53e3\u4fe1\u606f\u9700\u8981\u4ee5Json\u6570\u7ec4\u7684\u5f62\u5f0f\u7ed9\u51fa username \u5426 string \u65e0 MongoDB\u7684\u7528\u6237\u540d password \u5426 string \u65e0 MongoDB\u7684\u5bc6\u7801 collection \u662f string \u65e0 MongoDB\u7684\u96c6\u5408\u540d column \u662f list \u65e0 MongoDB\u7684\u6587\u6863\u5217\u540d splitter \u5426 string \u65e0 \u7279\u6b8a\u5206\u9694\u7b26\uff0c\u5f53\u4e14\u4ec5\u5f53\u8981\u5904\u7406\u7684\u5b57\u7b26\u4e32\u8981\u7528\u5206\u9694\u7b26\u5206\u9694\u4e3a\u5b57\u7b26\u6570\u7ec4\u65f6\uff0c\u624d\u4f7f\u7528\u8fd9\u4e2a\u53c2\u6570\uff0c\u901a\u8fc7\u8fd9\u4e2a\u53c2\u6570\u6307\u5b9a\u7684\u5206\u9694\u7b26\uff0c\u5c06\u5b57\u7b26\u4e32\u5206\u9694\u5b58\u50a8\u5230MongoDB\u7684\u6570\u7ec4\u4e2d writeMode \u5426 string insert \u6307\u5b9a\u4e86\u4f20\u8f93\u6570\u636e\u65f6\u66f4\u65b0\u7684\u4fe1\u606f,\u652f\u6301 insert\uff0c update\u4e24\u79cd batchSize \u5426 2048 int \u6307\u5b9a\u6279\u6b21\u8f93\u5165\u7684\u6570\u91cf isUpsert \u5426 string \u65e0 \u5f53\u8bbe\u7f6e\u4e3atrue\u65f6\uff0c\u8868\u793a\u9488\u5bf9\u76f8\u540c\u7684upsertKey\u505a\u66f4\u65b0\u64cd\u4f5c upsertKey \u5426 string \u65e0 upsertKey\u6307\u5b9a\u4e86\u6ca1\u884c\u8bb0\u5f55\u7684\u4e1a\u52a1\u4e3b\u952e\u3002\u7528\u6765\u505a\u66f4\u65b0\u65f6\u4f7f\u7528","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/mongodbwriter/#column","text":"column \u6307\u5b9a mongo collection \u7684\u5b57\u6bb5\u4ee5\u53ca\u7c7b\u578b\uff0c\u5982\u679c\u662f\u6570\u7ec4\u7c7b\u578b\uff0c\u8fd8\u9700\u8981\u6307\u5b9a\u63a5\u6536\u5230\u7684\u6570\u636e\u6309\u7167\u4ec0\u4e48\u5206\u5272\uff0c\u4e00\u4e2a column \u5b57\u6bb5\u81f3\u5c11\u9700\u8981\u6307\u5b9a name \u4ee5\u53ca type \uff0c\u6bd4\u5982 { \"column\" : [ { \"name\" : \"user_id\" , \"type\" : \"string\" } ] } \u5982\u679c\u662f\u6570\u7ec4\u7c7b\u578b\uff0c\u5219\u9700\u8981\u914d\u7f6e splitter \u6765\u544a\u77e5\u5206\u9694\u7b26\uff0c\u7c7b\u4f3c\u5982\u4e0b\uff1a { \"column\" : { \"name\" : \"taglist\" , \"type\" : \"Array\" , \"splitter\" : \" \" } }","title":"column"},{"location":"writer/mongodbwriter/#writemode","text":"\u4e0d\u914d\u7f6e\u7684\u60c5\u51b5\u4e0b\uff0c\u9ed8\u8ba4\u91c7\u53d6\u76f4\u63a5\u63d2\u5165\u8bb0\u5f55\u7684\u65b9\u5f0f\uff0c\u5982\u679c\u5e0c\u671b\u5b9e\u73b0\u63d2\u5165\u66f4\u65b0\uff08\u5373\u8bb0\u5f55\u5b58\u5728\u5219\u66f4\u65b0\u5426\u5219\u63d2\u5165\uff09\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e3a update \u6a21\u5f0f\uff0c\u8be5\u6a21\u5f0f\u4e0b\uff0c\u5fc5\u987b\u540c\u65f6\u66f4\u65b0\u7684\u5b57\u6bb5\u662f\u54ea\u4e2a\uff0c\u6bd4\u5982\uff1a { \"writeMode\" : \"update(unique_id)\" } \u4e0a\u8ff0\u914d\u7f6e\u8868\u793a\u4f9d\u636e\u5b57\u6bb5 unique_id \u6765\u51b3\u5b9a\u5f53\u524d\u8bb0\u5f55\u662f\u63d2\u5165\u8fd8\u662f\u66f4\u65b0\uff0c\u5f53\u524d\u6682\u4e0d\u652f\u6301\u6307\u5b9a\u591a\u4e2a\u5b57\u6bb5","title":"writeMode"},{"location":"writer/mongodbwriter/#_3","text":"Addax \u5185\u90e8\u7c7b\u578b MongoDB \u6570\u636e\u7c7b\u578b Long int, Long Double double String string, array Date date Boolean boolean Bytes bytes","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/mysqlwriter/","text":"MySQL Writer \u00b6 MysqlWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5199\u5165\u6570\u636e\u5230 Mysql \u4e3b\u5e93\u7684\u76ee\u7684\u8868\u7684\u529f\u80fd\u3002 \u793a\u4f8b \u00b6 \u5047\u5b9a\u8981\u5199\u5165\u7684 MySQL \u8868\u5efa\u8868\u8bed\u53e5\u5982\u4e0b\uff1a create table test . addax_tbl ( col1 varchar ( 20 ) , col2 int ( 4 ), col3 datetime , col4 boolean , col5 binary ) default charset utf8 ; \u8fd9\u91cc\u4f7f\u7528\u4e00\u4efd\u4ece\u5185\u5b58\u4ea7\u751f\u5230 MySQL \u5bfc\u5165\u7684\u6570\u636e\u3002 job/stream2mysql.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19880808 , \"type\" : \"long\" }, { \"value\" : \"1988-08-08 08:08:08\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"mysqlwriter\" , \"parameter\" : { \"writeMode\" : \"insert\" , \"username\" : \"root\" , \"password\" : \"\" , \"column\" : [ \"*\" ], \"session\" : [ \"set session sql_mode='ANSI'\" ], \"preSql\" : [ \"delete from @table\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:mysql://127.0.0.1:3306/test?useSSL=false\" , \"table\" : [ \"addax_tbl\" ], \"driver\" : \"com.mysql.jdbc.Driver\" } ] } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/stream2mysql.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/stream2mysql.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f driver \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter session \u5426 list \u7a7a Addax\u5728\u83b7\u53d6Mysql\u8fde\u63a5\u65f6\uff0c\u6267\u884csession\u6307\u5b9a\u7684SQL\u8bed\u53e5\uff0c\u4fee\u6539\u5f53\u524dconnection session\u5c5e\u6027 preSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u94b1\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u5982\u679c Sql \u4e2d\u6709\u4f60\u9700\u8981\u64cd\u4f5c\u5230\u7684\u8868\u540d\u79f0\uff0c\u53ef\u7528 @table \u8868\u793a postSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u5b8c\u6210\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 writeMode \u662f string insert \u6570\u636e\u5199\u5165\u8868\u7684\u65b9\u5f0f, insert \u8868\u793a\u91c7\u7528 insert into , replace \u8868\u793a\u91c7\u7528 replace into \u65b9\u5f0f update \u8868\u793a\u91c7\u7528 ON DUPLICATE KEY UPDATE \u8bed\u53e5 batchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77 driver \u00b6 \u5f53\u524d\u91c7\u7528\u7684 MySQL JDBC \u9a71\u52a8\u4e3a 8.0 \u4ee5\u4e0a\u7248\u672c\uff0c\u9a71\u52a8\u7c7b\u540d\u4f7f\u7528\u7684 com.mysql.cj.jdbc.Driver \uff0c\u800c\u4e0d\u662f com.mysql.jdbc.Driver \u3002 \u5982\u679c\u4f60\u9700\u8981\u91c7\u96c6\u7684 MySQL \u670d\u52a1\u4f4e\u4e8e 5.6 \uff0c\u9700\u8981\u4f7f\u7528\u5230 Connector/J 5.1 \u9a71\u52a8\uff0c\u5219\u53ef\u4ee5\u91c7\u53d6\u4e0b\u9762\u7684\u6b65\u9aa4\uff1a \u66ff\u6362\u63d2\u4ef6\u5185\u7f6e\u7684\u9a71\u52a8 rm -f plugin/writer/mysqlwriter/lib/mysql-connector-java-*.jar \u62f7\u8d1d\u8001\u7684\u9a71\u52a8\u5230\u63d2\u4ef6\u76ee\u5f55 cp mysql-connector-java-5.1.48.jar plugin/writer/mysqlwriter/lib/ \u6307\u5b9a\u9a71\u52a8\u7c7b\u540d\u79f0 \u5728\u4f60\u7684 json \u6587\u4ef6\u7c7b\uff0c\u914d\u7f6e \"driver\": \"com.mysql.jdbc.Driver\" \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b Mysql \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint, mediumint, int, bigint, year Double float, double, decimal String varchar, char, tinytext, text, mediumtext, longtext Date date, datetime, timestamp, time Boolean bit, bool Bytes tinyblob, mediumblob, blob, longblob, varbinary bit\u7c7b\u578b\u76ee\u524d\u662f\u672a\u5b9a\u4e49\u7c7b\u578b\u8f6c\u6362","title":"MySQL Writer"},{"location":"writer/mysqlwriter/#mysql-writer","text":"MysqlWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5199\u5165\u6570\u636e\u5230 Mysql \u4e3b\u5e93\u7684\u76ee\u7684\u8868\u7684\u529f\u80fd\u3002","title":"MySQL Writer"},{"location":"writer/mysqlwriter/#_1","text":"\u5047\u5b9a\u8981\u5199\u5165\u7684 MySQL \u8868\u5efa\u8868\u8bed\u53e5\u5982\u4e0b\uff1a create table test . addax_tbl ( col1 varchar ( 20 ) , col2 int ( 4 ), col3 datetime , col4 boolean , col5 binary ) default charset utf8 ; \u8fd9\u91cc\u4f7f\u7528\u4e00\u4efd\u4ece\u5185\u5b58\u4ea7\u751f\u5230 MySQL \u5bfc\u5165\u7684\u6570\u636e\u3002 job/stream2mysql.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19880808 , \"type\" : \"long\" }, { \"value\" : \"1988-08-08 08:08:08\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"mysqlwriter\" , \"parameter\" : { \"writeMode\" : \"insert\" , \"username\" : \"root\" , \"password\" : \"\" , \"column\" : [ \"*\" ], \"session\" : [ \"set session sql_mode='ANSI'\" ], \"preSql\" : [ \"delete from @table\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:mysql://127.0.0.1:3306/test?useSSL=false\" , \"table\" : [ \"addax_tbl\" ], \"driver\" : \"com.mysql.jdbc.Driver\" } ] } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/stream2mysql.json","title":"\u793a\u4f8b"},{"location":"writer/mysqlwriter/#_2","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/stream2mysql.json","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"writer/mysqlwriter/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f driver \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter session \u5426 list \u7a7a Addax\u5728\u83b7\u53d6Mysql\u8fde\u63a5\u65f6\uff0c\u6267\u884csession\u6307\u5b9a\u7684SQL\u8bed\u53e5\uff0c\u4fee\u6539\u5f53\u524dconnection session\u5c5e\u6027 preSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u94b1\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u5982\u679c Sql \u4e2d\u6709\u4f60\u9700\u8981\u64cd\u4f5c\u5230\u7684\u8868\u540d\u79f0\uff0c\u53ef\u7528 @table \u8868\u793a postSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u5b8c\u6210\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 writeMode \u662f string insert \u6570\u636e\u5199\u5165\u8868\u7684\u65b9\u5f0f, insert \u8868\u793a\u91c7\u7528 insert into , replace \u8868\u793a\u91c7\u7528 replace into \u65b9\u5f0f update \u8868\u793a\u91c7\u7528 ON DUPLICATE KEY UPDATE \u8bed\u53e5 batchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/mysqlwriter/#driver","text":"\u5f53\u524d\u91c7\u7528\u7684 MySQL JDBC \u9a71\u52a8\u4e3a 8.0 \u4ee5\u4e0a\u7248\u672c\uff0c\u9a71\u52a8\u7c7b\u540d\u4f7f\u7528\u7684 com.mysql.cj.jdbc.Driver \uff0c\u800c\u4e0d\u662f com.mysql.jdbc.Driver \u3002 \u5982\u679c\u4f60\u9700\u8981\u91c7\u96c6\u7684 MySQL \u670d\u52a1\u4f4e\u4e8e 5.6 \uff0c\u9700\u8981\u4f7f\u7528\u5230 Connector/J 5.1 \u9a71\u52a8\uff0c\u5219\u53ef\u4ee5\u91c7\u53d6\u4e0b\u9762\u7684\u6b65\u9aa4\uff1a \u66ff\u6362\u63d2\u4ef6\u5185\u7f6e\u7684\u9a71\u52a8 rm -f plugin/writer/mysqlwriter/lib/mysql-connector-java-*.jar \u62f7\u8d1d\u8001\u7684\u9a71\u52a8\u5230\u63d2\u4ef6\u76ee\u5f55 cp mysql-connector-java-5.1.48.jar plugin/writer/mysqlwriter/lib/ \u6307\u5b9a\u9a71\u52a8\u7c7b\u540d\u79f0 \u5728\u4f60\u7684 json \u6587\u4ef6\u7c7b\uff0c\u914d\u7f6e \"driver\": \"com.mysql.jdbc.Driver\"","title":"driver"},{"location":"writer/mysqlwriter/#_4","text":"Addax \u5185\u90e8\u7c7b\u578b Mysql \u6570\u636e\u7c7b\u578b Long int, tinyint, smallint, mediumint, int, bigint, year Double float, double, decimal String varchar, char, tinytext, text, mediumtext, longtext Date date, datetime, timestamp, time Boolean bit, bool Bytes tinyblob, mediumblob, blob, longblob, varbinary bit\u7c7b\u578b\u76ee\u524d\u662f\u672a\u5b9a\u4e49\u7c7b\u578b\u8f6c\u6362","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/oraclewriter/","text":"Oracle Writer \u00b6 OracleWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5199\u5165\u6570\u636e\u5230 Oracle \u4e3b\u5e93\u7684\u76ee\u7684\u8868\u7684\u529f\u80fd\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 \u8fd9\u91cc\u4f7f\u7528\u4e00\u4efd\u4ece\u5185\u5b58\u4ea7\u751f\u5230 Oracle \u5bfc\u5165\u7684\u6570\u636e\u3002 job/stream2oracle.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19880808 , \"type\" : \"long\" }, { \"value\" : \"1988-08-08 08:08:08\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"oraclewriter\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"id\" , \"name\" ], \"preSql\" : [ \"delete from test\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:oracle:thin:@[HOST_NAME]:PORT:[DATABASE_NAME]\" , \"table\" : [ \"test\" ] } ] } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 writeMode \u5426 insert \u5199\u5165\u65b9\u5f0f\uff0c\u652f\u6301 insert\uff0c update\uff0c\u8be6\u89c1\u4e0b\u6587 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter preSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u524d\u7387\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u6d89\u53ca\u5230\u7684\u8868\u53ef\u7528 @table \u8868\u793a postSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 batchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77 session \u5426 \u65e0 \u8bbe\u7f6eoracle\u8fde\u63a5\u65f6\u7684session\u4fe1\u606f, \u8be6\u89c1\u4e0b\u6587 writeMode \u00b6 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c \u91c7\u53d6 insert into \u8bed\u6cd5\u5199\u5165 Oracle \u8868\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u91c7\u53d6\u4e3b\u952e\u5b58\u5728\u65f6\u66f4\u65b0\uff0c\u4e0d\u5b58\u5728\u5219\u5199\u5165\u7684\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f Oracle \u7684 merge into \u8bed\u6cd5\uff0c \u53ef\u4ee5\u4f7f\u7528 update \u6a21\u5f0f\u3002\u5047\u5b9a\u8868\u7684\u4e3b\u952e\u4e3a id ,\u5219 writeMode \u914d\u7f6e\u65b9\u6cd5\u5982\u4e0b\uff1a \"writeMode\" : \"update(id)\" \u5982\u679c\u662f\u8054\u5408\u552f\u4e00\u7d22\u5f15\uff0c\u5219\u914d\u7f6e\u65b9\u6cd5\u5982\u4e0b\uff1a \"writeMode\" : \"update(col1, col2)\" \u6ce8\uff1a update \u6a21\u5f0f\u5728 3.1.6 \u7248\u672c\u9996\u6b21\u589e\u52a0\uff0c\u4e4b\u524d\u7248\u672c\u5e76\u4e0d\u652f\u6301\u3002 session \u00b6 \u63cf\u8ff0\uff1a\u8bbe\u7f6eoracle\u8fde\u63a5\u65f6\u7684session\u4fe1\u606f\uff0c\u683c\u5f0f\u793a\u4f8b\u5982\u4e0b\uff1a { \"session\" : [ \"alter session set nls_date_format = 'dd.mm.yyyy hh24:mi:ss';\" , \"alter session set NLS_LANG = 'AMERICAN';\" ] } \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b Oracle \u6570\u636e\u7c7b\u578b Long NUMBER,INTEGER,INT,SMALLINT Double NUMERIC,DECIMAL,FLOAT,DOUBLE PRECISION,REAL String LONG,CHAR,NCHAR,VARCHAR,VARCHAR2,NVARCHAR2,CLOB,NCLOB,CHARACTER,CHARACTER VARYING,CHAR VARYING String NATIONAL CHARACTER,NATIONAL CHAR,NATIONAL CHARACTER VARYING,NATIONAL CHAR VARYING,NCHAR VARYING Date TIMESTAMP,DATE Boolean BIT, BOOL Bytes BLOB,BFILE,RAW,LONG RAW","title":"Oracle Writer"},{"location":"writer/oraclewriter/#oracle-writer","text":"OracleWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5199\u5165\u6570\u636e\u5230 Oracle \u4e3b\u5e93\u7684\u76ee\u7684\u8868\u7684\u529f\u80fd\u3002","title":"Oracle Writer"},{"location":"writer/oraclewriter/#_1","text":"\u8fd9\u91cc\u4f7f\u7528\u4e00\u4efd\u4ece\u5185\u5b58\u4ea7\u751f\u5230 Oracle \u5bfc\u5165\u7684\u6570\u636e\u3002 job/stream2oracle.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19880808 , \"type\" : \"long\" }, { \"value\" : \"1988-08-08 08:08:08\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"oraclewriter\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"id\" , \"name\" ], \"preSql\" : [ \"delete from test\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:oracle:thin:@[HOST_NAME]:PORT:[DATABASE_NAME]\" , \"table\" : [ \"test\" ] } ] } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/oraclewriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 writeMode \u5426 insert \u5199\u5165\u65b9\u5f0f\uff0c\u652f\u6301 insert\uff0c update\uff0c\u8be6\u89c1\u4e0b\u6587 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter preSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u524d\u7387\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u6d89\u53ca\u5230\u7684\u8868\u53ef\u7528 @table \u8868\u793a postSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 batchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77 session \u5426 \u65e0 \u8bbe\u7f6eoracle\u8fde\u63a5\u65f6\u7684session\u4fe1\u606f, \u8be6\u89c1\u4e0b\u6587","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/oraclewriter/#writemode","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c \u91c7\u53d6 insert into \u8bed\u6cd5\u5199\u5165 Oracle \u8868\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u91c7\u53d6\u4e3b\u952e\u5b58\u5728\u65f6\u66f4\u65b0\uff0c\u4e0d\u5b58\u5728\u5219\u5199\u5165\u7684\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f Oracle \u7684 merge into \u8bed\u6cd5\uff0c \u53ef\u4ee5\u4f7f\u7528 update \u6a21\u5f0f\u3002\u5047\u5b9a\u8868\u7684\u4e3b\u952e\u4e3a id ,\u5219 writeMode \u914d\u7f6e\u65b9\u6cd5\u5982\u4e0b\uff1a \"writeMode\" : \"update(id)\" \u5982\u679c\u662f\u8054\u5408\u552f\u4e00\u7d22\u5f15\uff0c\u5219\u914d\u7f6e\u65b9\u6cd5\u5982\u4e0b\uff1a \"writeMode\" : \"update(col1, col2)\" \u6ce8\uff1a update \u6a21\u5f0f\u5728 3.1.6 \u7248\u672c\u9996\u6b21\u589e\u52a0\uff0c\u4e4b\u524d\u7248\u672c\u5e76\u4e0d\u652f\u6301\u3002","title":"writeMode"},{"location":"writer/oraclewriter/#session","text":"\u63cf\u8ff0\uff1a\u8bbe\u7f6eoracle\u8fde\u63a5\u65f6\u7684session\u4fe1\u606f\uff0c\u683c\u5f0f\u793a\u4f8b\u5982\u4e0b\uff1a { \"session\" : [ \"alter session set nls_date_format = 'dd.mm.yyyy hh24:mi:ss';\" , \"alter session set NLS_LANG = 'AMERICAN';\" ] }","title":"session"},{"location":"writer/oraclewriter/#_3","text":"Addax \u5185\u90e8\u7c7b\u578b Oracle \u6570\u636e\u7c7b\u578b Long NUMBER,INTEGER,INT,SMALLINT Double NUMERIC,DECIMAL,FLOAT,DOUBLE PRECISION,REAL String LONG,CHAR,NCHAR,VARCHAR,VARCHAR2,NVARCHAR2,CLOB,NCLOB,CHARACTER,CHARACTER VARYING,CHAR VARYING String NATIONAL CHARACTER,NATIONAL CHAR,NATIONAL CHARACTER VARYING,NATIONAL CHAR VARYING,NCHAR VARYING Date TIMESTAMP,DATE Boolean BIT, BOOL Bytes BLOB,BFILE,RAW,LONG RAW","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/postgresqlwriter/","text":"Postgresql Writer \u00b6 PostgresqlWriter\u63d2\u4ef6\u5b9e\u73b0\u4e86\u5199\u5165\u6570\u636e\u5230 PostgreSQL \u6570\u636e\u5e93\u5e93\u8868\u7684\u529f\u80fd\u3002 \u793a\u4f8b \u00b6 \u4ee5\u4e0b\u914d\u7f6e\u6f14\u793a\u4ecepostgresql\u6307\u5b9a\u7684\u8868\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u63d2\u5165\u5230\u5177\u6709\u76f8\u540c\u8868\u7ed3\u6784\u7684\u53e6\u5916\u4e00\u5f20\u8868\u4e2d\uff0c\u7528\u6765\u6d4b\u8bd5\u8be5\u63d2\u4ef6\u6240\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\u3002 \u8868\u7ed3\u6784\u4fe1\u606f \u00b6 \u5047\u5b9a\u5efa\u8868\u8bed\u53e5\u4ee5\u53ca\u8f93\u5165\u63d2\u5165\u8bed\u53e5\u5982\u4e0b\uff1a create table if not exists addax_tbl ( c_bigint bigint , c_bit bit ( 3 ), c_bool boolean , c_byte bytea , c_char char ( 10 ), c_varchar varchar ( 20 ), c_date date , c_double float8 , c_int integer , c_json json , c_number decimal ( 8 , 3 ), c_real real , c_small smallint , c_text text , c_ts timestamp , c_uuid uuid , c_xml xml , c_money money , c_inet inet , c_cidr cidr , c_macaddr macaddr ); insert into addax_tbl values ( 999988887777 , b '101' , TRUE , '\\xDEADBEEF' , 'hello' , 'hello, world' , '2021-01-04' , 999888 . 9972 , 9876542 , '{\"bar\": \"baz\", \"balance\": 7.77, \"active\": false}' :: json , 12345 . 123 , 123 . 123 , 126 , 'this is a long text ' , '2020-01-04 12:13:14' , 'A0EEBC99-9C0B-4EF8-BB6D-6BB9BD380A11' :: uuid , '<foo>bar</foo>' :: xml , '52093.89' :: money , '192.168.1.1' :: inet , '192.168.1/24' :: cidr , '08002b:010203' :: macaddr ); \u521b\u5efa\u9700\u8981\u63d2\u5165\u7684\u8868\u7684\u8bed\u53e5\u5982\u4e0b: create table addax_tbl1 like addax_tbl ; \u4efb\u52a1\u914d\u7f6e \u00b6 \u4ee5\u4e0b\u662f\u914d\u7f6e\u6587\u4ef6 job/pg2pg.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"postgresqlreader\" , \"parameter\" : { \"username\" : \"pgtest\" , \"password\" : \"pgtest\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"addax_tbl\" ], \"jdbcUrl\" : [ \"jdbc:postgresql://localhost:5432/pgtest\" ] } ] } }, \"writer\" : { \"name\" : \"postgresqlwriter\" , \"parameter\" : { \"column\" : [ \"*\" ], \"preSql\" : [ \"truncate table @table\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:postgresql://127.0.0.1:5432/pgtest\" , \"table\" : [ \"addax_tbl1\" ] } ], \"username\" : \"pgtest\" , \"password\" : \"pgtest\" , \"writeMode\" : \"insert\" } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/pg2pg.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/pg2pg.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 writeMode \u5426 insert \u5199\u5165\u6a21\u5f0f\uff0c\u652f\u6301insert, update \u8be6\u89c1\u5982\u4e0b table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter preSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u524d\u7387\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u6d89\u53ca\u5230\u7684\u8868\u53ef\u7528 @table \u8868\u793a postSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 batchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77 writeMode \u00b6 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c \u91c7\u53d6 insert into \u8bed\u6cd5\u5199\u5165 postgresql \u8868\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u91c7\u53d6\u4e3b\u952e\u5b58\u5728\u65f6\u66f4\u65b0\uff0c\u4e0d\u5b58\u5728\u5219\u5199\u5165\u7684\u65b9\u5f0f\uff0c \u53ef\u4ee5\u4f7f\u7528 update \u6a21\u5f0f\u3002\u5047\u5b9a\u8868\u7684\u4e3b\u952e\u4e3a id ,\u5219 writeMode \u914d\u7f6e\u65b9\u6cd5\u5982\u4e0b\uff1a \"writeMode\" : \"update(id)\" \u5982\u679c\u662f\u8054\u5408\u552f\u4e00\u7d22\u5f15\uff0c\u5219\u914d\u7f6e\u65b9\u6cd5\u5982\u4e0b\uff1a \"writeMode\" : \"update(col1, col2)\" \u6ce8\uff1a update \u6a21\u5f0f\u5728 3.1.6 \u7248\u672c\u9996\u6b21\u589e\u52a0\uff0c\u4e4b\u524d\u7248\u672c\u5e76\u4e0d\u652f\u6301\u3002 \u7c7b\u578b\u8f6c\u6362 \u00b6 \u76ee\u524d PostgresqlWriter\u652f\u6301\u5927\u90e8\u5206 PostgreSQL\u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51fa PostgresqlWriter\u9488\u5bf9 PostgreSQL\u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b PostgreSQL \u6570\u636e\u7c7b\u578b Long bigint, bigserial, integer, smallint, serial Double double precision, money, numeric, real String varchar, char, text, bit, inet,cidr,macaddr,uuid,xml,json Date date, time, timestamp Boolean bool Bytes bytea \u5df2\u77e5\u9650\u5236 \u00b6 \u9664\u4ee5\u4e0a\u5217\u51fa\u7684\u6570\u636e\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u7406\u8bba\u4e0a\u5747\u4e3a\u8f6c\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u4f46\u4e0d\u786e\u4fdd\u51c6\u786e\u6027","title":"Postgresql Writer"},{"location":"writer/postgresqlwriter/#postgresql-writer","text":"PostgresqlWriter\u63d2\u4ef6\u5b9e\u73b0\u4e86\u5199\u5165\u6570\u636e\u5230 PostgreSQL \u6570\u636e\u5e93\u5e93\u8868\u7684\u529f\u80fd\u3002","title":"Postgresql Writer"},{"location":"writer/postgresqlwriter/#_1","text":"\u4ee5\u4e0b\u914d\u7f6e\u6f14\u793a\u4ecepostgresql\u6307\u5b9a\u7684\u8868\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u63d2\u5165\u5230\u5177\u6709\u76f8\u540c\u8868\u7ed3\u6784\u7684\u53e6\u5916\u4e00\u5f20\u8868\u4e2d\uff0c\u7528\u6765\u6d4b\u8bd5\u8be5\u63d2\u4ef6\u6240\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\u3002","title":"\u793a\u4f8b"},{"location":"writer/postgresqlwriter/#_2","text":"\u5047\u5b9a\u5efa\u8868\u8bed\u53e5\u4ee5\u53ca\u8f93\u5165\u63d2\u5165\u8bed\u53e5\u5982\u4e0b\uff1a create table if not exists addax_tbl ( c_bigint bigint , c_bit bit ( 3 ), c_bool boolean , c_byte bytea , c_char char ( 10 ), c_varchar varchar ( 20 ), c_date date , c_double float8 , c_int integer , c_json json , c_number decimal ( 8 , 3 ), c_real real , c_small smallint , c_text text , c_ts timestamp , c_uuid uuid , c_xml xml , c_money money , c_inet inet , c_cidr cidr , c_macaddr macaddr ); insert into addax_tbl values ( 999988887777 , b '101' , TRUE , '\\xDEADBEEF' , 'hello' , 'hello, world' , '2021-01-04' , 999888 . 9972 , 9876542 , '{\"bar\": \"baz\", \"balance\": 7.77, \"active\": false}' :: json , 12345 . 123 , 123 . 123 , 126 , 'this is a long text ' , '2020-01-04 12:13:14' , 'A0EEBC99-9C0B-4EF8-BB6D-6BB9BD380A11' :: uuid , '<foo>bar</foo>' :: xml , '52093.89' :: money , '192.168.1.1' :: inet , '192.168.1/24' :: cidr , '08002b:010203' :: macaddr ); \u521b\u5efa\u9700\u8981\u63d2\u5165\u7684\u8868\u7684\u8bed\u53e5\u5982\u4e0b: create table addax_tbl1 like addax_tbl ;","title":"\u8868\u7ed3\u6784\u4fe1\u606f"},{"location":"writer/postgresqlwriter/#_3","text":"\u4ee5\u4e0b\u662f\u914d\u7f6e\u6587\u4ef6 job/pg2pg.json { \"job\" : { \"setting\" : { \"speed\" : { \"byte\" : -1 , \"channel\" : 1 } }, \"content\" : { \"reader\" : { \"name\" : \"postgresqlreader\" , \"parameter\" : { \"username\" : \"pgtest\" , \"password\" : \"pgtest\" , \"column\" : [ \"*\" ], \"connection\" : [ { \"table\" : [ \"addax_tbl\" ], \"jdbcUrl\" : [ \"jdbc:postgresql://localhost:5432/pgtest\" ] } ] } }, \"writer\" : { \"name\" : \"postgresqlwriter\" , \"parameter\" : { \"column\" : [ \"*\" ], \"preSql\" : [ \"truncate table @table\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:postgresql://127.0.0.1:5432/pgtest\" , \"table\" : [ \"addax_tbl1\" ] } ], \"username\" : \"pgtest\" , \"password\" : \"pgtest\" , \"writeMode\" : \"insert\" } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/pg2pg.json","title":"\u4efb\u52a1\u914d\u7f6e"},{"location":"writer/postgresqlwriter/#_4","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/pg2pg.json","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"writer/postgresqlwriter/#_5","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5 \u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 writeMode \u5426 insert \u5199\u5165\u6a21\u5f0f\uff0c\u652f\u6301insert, update \u8be6\u89c1\u5982\u4e0b table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter preSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u524d\u7387\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u6d89\u53ca\u5230\u7684\u8868\u53ef\u7528 @table \u8868\u793a postSql \u5426 \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 batchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/postgresqlwriter/#writemode","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c \u91c7\u53d6 insert into \u8bed\u6cd5\u5199\u5165 postgresql \u8868\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u91c7\u53d6\u4e3b\u952e\u5b58\u5728\u65f6\u66f4\u65b0\uff0c\u4e0d\u5b58\u5728\u5219\u5199\u5165\u7684\u65b9\u5f0f\uff0c \u53ef\u4ee5\u4f7f\u7528 update \u6a21\u5f0f\u3002\u5047\u5b9a\u8868\u7684\u4e3b\u952e\u4e3a id ,\u5219 writeMode \u914d\u7f6e\u65b9\u6cd5\u5982\u4e0b\uff1a \"writeMode\" : \"update(id)\" \u5982\u679c\u662f\u8054\u5408\u552f\u4e00\u7d22\u5f15\uff0c\u5219\u914d\u7f6e\u65b9\u6cd5\u5982\u4e0b\uff1a \"writeMode\" : \"update(col1, col2)\" \u6ce8\uff1a update \u6a21\u5f0f\u5728 3.1.6 \u7248\u672c\u9996\u6b21\u589e\u52a0\uff0c\u4e4b\u524d\u7248\u672c\u5e76\u4e0d\u652f\u6301\u3002","title":"writeMode"},{"location":"writer/postgresqlwriter/#_6","text":"\u76ee\u524d PostgresqlWriter\u652f\u6301\u5927\u90e8\u5206 PostgreSQL\u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002 \u4e0b\u9762\u5217\u51fa PostgresqlWriter\u9488\u5bf9 PostgreSQL\u7c7b\u578b\u8f6c\u6362\u5217\u8868: Addax \u5185\u90e8\u7c7b\u578b PostgreSQL \u6570\u636e\u7c7b\u578b Long bigint, bigserial, integer, smallint, serial Double double precision, money, numeric, real String varchar, char, text, bit, inet,cidr,macaddr,uuid,xml,json Date date, time, timestamp Boolean bool Bytes bytea","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/postgresqlwriter/#_7","text":"\u9664\u4ee5\u4e0a\u5217\u51fa\u7684\u6570\u636e\u7c7b\u578b\u5916\uff0c\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u7406\u8bba\u4e0a\u5747\u4e3a\u8f6c\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u4f46\u4e0d\u786e\u4fdd\u51c6\u786e\u6027","title":"\u5df2\u77e5\u9650\u5236"},{"location":"writer/rdbmswriter/","text":"RDBMS Writer \u00b6 RDBMSWriter \u63d2\u4ef6\u652f\u6301\u4ece\u4f20\u7edf RDBMS \u8bfb\u53d6\u6570\u636e\u3002\u8fd9\u662f\u4e00\u4e2a\u901a\u7528\u5173\u7cfb\u6570\u636e\u5e93\u8bfb\u53d6\u63d2\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8\u7b49\u65b9\u5f0f\u652f\u6301\u66f4\u591a\u5173\u7cfb\u6570\u636e\u5e93\u8bfb\u53d6\u3002 \u540c\u65f6 RDBMS Writer \u53c8\u662f\u5176\u4ed6\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8bfb\u53d6\u63d2\u4ef6\u7684\u7684\u57fa\u7840\u7c7b\u3002\u4ee5\u4e0b\u8bfb\u53d6\u63d2\u4ef6\u5747\u4f9d\u8d56\u8be5\u63d2\u4ef6 Oracle Writer MySQL Writer PostgreSQL Writer ClickHouse Writer SQLServer Writer \u6ce8\u610f, \u5982\u679c\u5df2\u7ecf\u63d0\u4f9b\u4e86\u4e13\u95e8\u7684\u6570\u636e\u5e93\u5199\u5165\u63d2\u4ef6\u7684\uff0c\u63a8\u8350\u4f7f\u7528\u4e13\u7528\u63d2\u4ef6\uff0c\u5982\u679c\u4f60\u9700\u8981\u5199\u5165\u7684\u6570\u636e\u5e93\u6ca1\u6709\u4e13\u95e8\u63d2\u4ef6\uff0c\u5219\u8003\u8651\u4f7f\u7528\u8be5\u901a\u7528\u63d2\u4ef6\u3002 \u5728\u4f7f\u7528\u4e4b\u524d\uff0c\u8fd8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u624d\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\uff0c\u5426\u5219\u8fd0\u884c\u4f1a\u51fa\u73b0\u5f02\u5e38\u3002 \u914d\u7f6e\u9a71\u52a8 \u00b6 \u5047\u5b9a\u4f60\u9700\u8981\u5199\u5165 IBM DB2 \u7684\u6570\u636e\uff0c\u56e0\u4e3a\u6ca1\u6709\u63d0\u4f9b\u4e13\u95e8\u7684\u8bfb\u53d6\u63d2\u4ef6\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u63d2\u4ef6\u6765\u5b9e\u73b0\uff0c\u5728\u4f7f\u7528\u4e4b\u524d\uff0c\u9700\u8981\u6267\u884c\u4e0b\u9762\u4e24\u4e2a\u64cd\u4f5c\uff1a \u4e0b\u8f7d\u5bf9\u5e94\u7684 JDBC \u9a71\u52a8\uff0c\u5e76\u62f7\u8d1d\u5230 plugin/writer/rdbmswriter/libs \u76ee\u5f55 \u4fee\u6539 plugin/writer/rdbmswriter/plugin.json \u6587\u4ef6\uff0c\u627e\u5230 drivers \u4e00\u9879\uff0c\u586b\u5199\u6b63\u786e\u7684 JDBC \u9a71\u52a8\u540d\uff0c\u6bd4\u5982 DB2 \u7684\u9a71\u52a8\u540d\u4e3a com.ibm.db2.jcc.DB2Driver \uff0c\u7c7b\u4f3c\u8fd9\u6837\uff1a { \"name\" : \"rdbmswriter\" , \"class\" : \"com.wgzhao.addax.plugin.reader.rdbmswriter.RdbmsWriter\" , \"description\" : \"\" , \"developer\" : \"alibaba\" , \"drivers\" : [ \"com.ibm.db2.jcc.DB2Driver\" ] } \u4ee5\u4e0b\u5217\u51fa\u5e38\u89c1\u7684\u6570\u636e\u5e93\u4ee5\u53ca\u5bf9\u5e94\u7684\u9a71\u52a8\u540d\u79f0 Apache Impala : com.cloudera.impala.jdbc41.Driver Enterprise DB : com.edb.Driver PrestoDB : com.facebook.presto.jdbc.PrestoDriver IBM DB2 : com.ibm.db2.jcc.DB2Driver MySQL : com.mysql.cj.jdbc.Driver Sybase Server : com.sybase.jdbc3.jdbc.SybDriver TDengine : com.taosdata.jdbc.TSDBDriver \u8fbe\u68a6\u6570\u636e\u5e93 : dm.jdbc.driver.DmDriver \u661f\u73afInceptor : io.transwarp.jdbc.InceptorDriver TrinoDB : io.trino.jdbc.TrinoDriver PrestoSQL : io.prestosql.jdbc.PrestoDriver Oracle DB : oracle.jdbc.OracleDriver PostgreSQL : org.postgresql.Drive \u914d\u7f6e\u8bf4\u660e \u00b6 \u914d\u7f6e\u4e00\u4e2a\u5199\u5165RDBMS\u7684\u4f5c\u4e1a\u3002 \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f string \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f \uff5c driver \u662f string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f array \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f array \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1\u540e preSql \u5426 array \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u524d\u7387\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u6d89\u53ca\u5230\u7684\u8868\u53ef\u7528 @table \u8868\u793a postSql \u5426 array \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 batchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77 column \u00b6 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\u3002\u7528\u6237\u4f7f\u7528 * \u4ee3\u8868\u9ed8\u8ba4\u4f7f\u7528\u6240\u6709\u5217\u914d\u7f6e\uff0c\u4f8b\u5982 [\"*\"] \u3002 \u652f\u6301\u5217\u88c1\u526a\uff0c\u5373\u5217\u53ef\u4ee5\u6311\u9009\u90e8\u5206\u5217\u8fdb\u884c\u5bfc\u51fa\u3002 \u652f\u6301\u5217\u6362\u5e8f\uff0c\u5373\u5217\u53ef\u4ee5\u4e0d\u6309\u7167\u8868schema\u4fe1\u606f\u8fdb\u884c\u5bfc\u51fa\u3002 \u652f\u6301\u5e38\u91cf\u914d\u7f6e\uff0c\u7528\u6237\u9700\u8981\u6309\u7167JSON\u683c\u5f0f: [\"id\", \"`table`\", \"1\", \"'bazhen.csy'\", \"null\", \"to_char(a + 1)\", \"2.3\" , \"true\"] id \u4e3a\u666e\u901a\u5217\u540d `table` \u4e3a\u5305\u542b\u4fdd\u7559\u5728\u7684\u5217\u540d\uff0c 1 \u4e3a\u6574\u5f62\u6570\u5b57\u5e38\u91cf\uff0c 'bazhen.csy' \u4e3a\u5b57\u7b26\u4e32\u5e38\u91cf null \u4e3a\u7a7a\u6307\u9488\uff0c\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684 null \u5fc5\u987b\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\u51fa\u73b0\uff0c\u5373\u7528\u53cc\u5f15\u53f7\u5f15\u7528 to_char(a + 1) \u4e3a\u8868\u8fbe\u5f0f\uff0c 2.3 \u4e3a\u6d6e\u70b9\u6570\uff0c true \u4e3a\u5e03\u5c14\u503c\uff0c\u540c\u6837\u7684\uff0c\u8fd9\u91cc\u7684\u5e03\u5c14\u503c\u4e5f\u5fc5\u987b\u7528\u53cc\u5f15\u53f7\u5f15\u7528 Column\u5fc5\u987b\u663e\u793a\u586b\u5199\uff0c\u4e0d\u5141\u8bb8\u4e3a\u7a7a\uff01 jdbcUrl \u00b6 jdbcUrl \u914d\u7f6e\u9664\u4e86\u914d\u7f6e\u5fc5\u8981\u7684\u4fe1\u606f\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u589e\u52a0\u6bcf\u79cd\u7279\u5b9a\u9a71\u52a8\u7684\u7279\u5b9a\u914d\u7f6e\u5c5e\u6027\uff0c\u8fd9\u91cc\u7279\u522b\u63d0\u5230\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u914d\u7f6e\u5c5e\u6027\u5bf9\u4ee3\u7406\u7684\u652f\u6301\u4ece\u800c\u5b9e\u73b0\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u529f\u80fd\u3002 \u6bd4\u5982\u5bf9\u4e8e PrestoSQL \u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u800c\u8a00\uff0c\u652f\u6301 socksProxy \u53c2\u6570\uff0c\u6bd4\u5982\u4e00\u4e2a\u53ef\u80fd\u7684 jdbcUrl \u4e3a jdbc:presto://127.0.0.1:8080/hive?socksProxy=192.168.1.101:1081 \u5927\u90e8\u5206\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u652f\u6301 socksProxyHost,socksProxyPort \u53c2\u6570\u6765\u652f\u6301\u4ee3\u7406\u8bbf\u95ee\u3002\u4e5f\u6709\u4e00\u4e9b\u7279\u522b\u7684\u60c5\u51b5\u3002 \u4ee5\u4e0b\u662f\u5404\u7c7b\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u6240\u652f\u6301\u7684\u4ee3\u7406\u7c7b\u578b\u4ee5\u53ca\u914d\u7f6e\u65b9\u5f0f \u6570\u636e\u5e93 \u4ee3\u7406\u7c7b\u578b \u4ee3\u7406\u914d\u7f6e \u4f8b\u5b50 MySQL socks socksProxyHost,socksProxyPort socksProxyHost=192.168.1.101&socksProxyPort=1081 Presto socks socksProxy socksProxy=192.168.1.101:1081 Presto http httpProxy httpProxy=192.168.1.101:3128 driver \u00b6 \u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u662f\u56fa\u5b9a\u7684\uff0c\u4f46\u6709\u4e9b\u56e0\u4e3a\u7248\u672c\u7684\u4e0d\u540c\uff0c\u6240\u5efa\u8bae\u7684\u9a71\u52a8\u7c7b\u540d\u4e0d\u540c\uff0c\u6bd4\u5982 MySQL\u3002 \u65b0\u7684 MySQL JDBC \u9a71\u52a8\u7c7b\u578b\u63a8\u8350\u4f7f\u7528 com.mysql.cj.jdbc.Driver \u800c\u4e0d\u662f\u4ee5\u524d\u7684 com.mysql.jdbc.Drver \u3002\u5982\u679c\u60f3\u8981\u4f7f\u7528\u5c31\u7684\u9a71\u52a8\u540d\u79f0\uff0c\u5219\u53ef\u4ee5\u914d\u7f6e driver \u914d\u7f6e\u9879\u3002","title":"RDBMS Writer"},{"location":"writer/rdbmswriter/#rdbms-writer","text":"RDBMSWriter \u63d2\u4ef6\u652f\u6301\u4ece\u4f20\u7edf RDBMS \u8bfb\u53d6\u6570\u636e\u3002\u8fd9\u662f\u4e00\u4e2a\u901a\u7528\u5173\u7cfb\u6570\u636e\u5e93\u8bfb\u53d6\u63d2\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8\u7b49\u65b9\u5f0f\u652f\u6301\u66f4\u591a\u5173\u7cfb\u6570\u636e\u5e93\u8bfb\u53d6\u3002 \u540c\u65f6 RDBMS Writer \u53c8\u662f\u5176\u4ed6\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8bfb\u53d6\u63d2\u4ef6\u7684\u7684\u57fa\u7840\u7c7b\u3002\u4ee5\u4e0b\u8bfb\u53d6\u63d2\u4ef6\u5747\u4f9d\u8d56\u8be5\u63d2\u4ef6 Oracle Writer MySQL Writer PostgreSQL Writer ClickHouse Writer SQLServer Writer \u6ce8\u610f, \u5982\u679c\u5df2\u7ecf\u63d0\u4f9b\u4e86\u4e13\u95e8\u7684\u6570\u636e\u5e93\u5199\u5165\u63d2\u4ef6\u7684\uff0c\u63a8\u8350\u4f7f\u7528\u4e13\u7528\u63d2\u4ef6\uff0c\u5982\u679c\u4f60\u9700\u8981\u5199\u5165\u7684\u6570\u636e\u5e93\u6ca1\u6709\u4e13\u95e8\u63d2\u4ef6\uff0c\u5219\u8003\u8651\u4f7f\u7528\u8be5\u901a\u7528\u63d2\u4ef6\u3002 \u5728\u4f7f\u7528\u4e4b\u524d\uff0c\u8fd8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u624d\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\uff0c\u5426\u5219\u8fd0\u884c\u4f1a\u51fa\u73b0\u5f02\u5e38\u3002","title":"RDBMS Writer"},{"location":"writer/rdbmswriter/#_1","text":"\u5047\u5b9a\u4f60\u9700\u8981\u5199\u5165 IBM DB2 \u7684\u6570\u636e\uff0c\u56e0\u4e3a\u6ca1\u6709\u63d0\u4f9b\u4e13\u95e8\u7684\u8bfb\u53d6\u63d2\u4ef6\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u63d2\u4ef6\u6765\u5b9e\u73b0\uff0c\u5728\u4f7f\u7528\u4e4b\u524d\uff0c\u9700\u8981\u6267\u884c\u4e0b\u9762\u4e24\u4e2a\u64cd\u4f5c\uff1a \u4e0b\u8f7d\u5bf9\u5e94\u7684 JDBC \u9a71\u52a8\uff0c\u5e76\u62f7\u8d1d\u5230 plugin/writer/rdbmswriter/libs \u76ee\u5f55 \u4fee\u6539 plugin/writer/rdbmswriter/plugin.json \u6587\u4ef6\uff0c\u627e\u5230 drivers \u4e00\u9879\uff0c\u586b\u5199\u6b63\u786e\u7684 JDBC \u9a71\u52a8\u540d\uff0c\u6bd4\u5982 DB2 \u7684\u9a71\u52a8\u540d\u4e3a com.ibm.db2.jcc.DB2Driver \uff0c\u7c7b\u4f3c\u8fd9\u6837\uff1a { \"name\" : \"rdbmswriter\" , \"class\" : \"com.wgzhao.addax.plugin.reader.rdbmswriter.RdbmsWriter\" , \"description\" : \"\" , \"developer\" : \"alibaba\" , \"drivers\" : [ \"com.ibm.db2.jcc.DB2Driver\" ] } \u4ee5\u4e0b\u5217\u51fa\u5e38\u89c1\u7684\u6570\u636e\u5e93\u4ee5\u53ca\u5bf9\u5e94\u7684\u9a71\u52a8\u540d\u79f0 Apache Impala : com.cloudera.impala.jdbc41.Driver Enterprise DB : com.edb.Driver PrestoDB : com.facebook.presto.jdbc.PrestoDriver IBM DB2 : com.ibm.db2.jcc.DB2Driver MySQL : com.mysql.cj.jdbc.Driver Sybase Server : com.sybase.jdbc3.jdbc.SybDriver TDengine : com.taosdata.jdbc.TSDBDriver \u8fbe\u68a6\u6570\u636e\u5e93 : dm.jdbc.driver.DmDriver \u661f\u73afInceptor : io.transwarp.jdbc.InceptorDriver TrinoDB : io.trino.jdbc.TrinoDriver PrestoSQL : io.prestosql.jdbc.PrestoDriver Oracle DB : oracle.jdbc.OracleDriver PostgreSQL : org.postgresql.Drive","title":"\u914d\u7f6e\u9a71\u52a8"},{"location":"writer/rdbmswriter/#_2","text":"\u914d\u7f6e\u4e00\u4e2a\u5199\u5165RDBMS\u7684\u4f5c\u4e1a\u3002","title":"\u914d\u7f6e\u8bf4\u660e"},{"location":"writer/rdbmswriter/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u6570\u636e\u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f string \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f \uff5c driver \u662f string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f array \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f array \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1\u540e preSql \u5426 array \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u524d\u7387\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u6d89\u53ca\u5230\u7684\u8868\u53ef\u7528 @table \u8868\u793a postSql \u5426 array \u65e0 \u6267\u884c\u6570\u636e\u540c\u6b65\u4efb\u52a1\u4e4b\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u6267\u884c\u4e00\u6761SQL\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 batchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/rdbmswriter/#column","text":"\u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u4f7f\u7528JSON\u7684\u6570\u7ec4\u63cf\u8ff0\u5b57\u6bb5\u4fe1\u606f\u3002\u7528\u6237\u4f7f\u7528 * \u4ee3\u8868\u9ed8\u8ba4\u4f7f\u7528\u6240\u6709\u5217\u914d\u7f6e\uff0c\u4f8b\u5982 [\"*\"] \u3002 \u652f\u6301\u5217\u88c1\u526a\uff0c\u5373\u5217\u53ef\u4ee5\u6311\u9009\u90e8\u5206\u5217\u8fdb\u884c\u5bfc\u51fa\u3002 \u652f\u6301\u5217\u6362\u5e8f\uff0c\u5373\u5217\u53ef\u4ee5\u4e0d\u6309\u7167\u8868schema\u4fe1\u606f\u8fdb\u884c\u5bfc\u51fa\u3002 \u652f\u6301\u5e38\u91cf\u914d\u7f6e\uff0c\u7528\u6237\u9700\u8981\u6309\u7167JSON\u683c\u5f0f: [\"id\", \"`table`\", \"1\", \"'bazhen.csy'\", \"null\", \"to_char(a + 1)\", \"2.3\" , \"true\"] id \u4e3a\u666e\u901a\u5217\u540d `table` \u4e3a\u5305\u542b\u4fdd\u7559\u5728\u7684\u5217\u540d\uff0c 1 \u4e3a\u6574\u5f62\u6570\u5b57\u5e38\u91cf\uff0c 'bazhen.csy' \u4e3a\u5b57\u7b26\u4e32\u5e38\u91cf null \u4e3a\u7a7a\u6307\u9488\uff0c\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684 null \u5fc5\u987b\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\u51fa\u73b0\uff0c\u5373\u7528\u53cc\u5f15\u53f7\u5f15\u7528 to_char(a + 1) \u4e3a\u8868\u8fbe\u5f0f\uff0c 2.3 \u4e3a\u6d6e\u70b9\u6570\uff0c true \u4e3a\u5e03\u5c14\u503c\uff0c\u540c\u6837\u7684\uff0c\u8fd9\u91cc\u7684\u5e03\u5c14\u503c\u4e5f\u5fc5\u987b\u7528\u53cc\u5f15\u53f7\u5f15\u7528 Column\u5fc5\u987b\u663e\u793a\u586b\u5199\uff0c\u4e0d\u5141\u8bb8\u4e3a\u7a7a\uff01","title":"column"},{"location":"writer/rdbmswriter/#jdbcurl","text":"jdbcUrl \u914d\u7f6e\u9664\u4e86\u914d\u7f6e\u5fc5\u8981\u7684\u4fe1\u606f\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u589e\u52a0\u6bcf\u79cd\u7279\u5b9a\u9a71\u52a8\u7684\u7279\u5b9a\u914d\u7f6e\u5c5e\u6027\uff0c\u8fd9\u91cc\u7279\u522b\u63d0\u5230\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u914d\u7f6e\u5c5e\u6027\u5bf9\u4ee3\u7406\u7684\u652f\u6301\u4ece\u800c\u5b9e\u73b0\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u529f\u80fd\u3002 \u6bd4\u5982\u5bf9\u4e8e PrestoSQL \u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u800c\u8a00\uff0c\u652f\u6301 socksProxy \u53c2\u6570\uff0c\u6bd4\u5982\u4e00\u4e2a\u53ef\u80fd\u7684 jdbcUrl \u4e3a jdbc:presto://127.0.0.1:8080/hive?socksProxy=192.168.1.101:1081 \u5927\u90e8\u5206\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u652f\u6301 socksProxyHost,socksProxyPort \u53c2\u6570\u6765\u652f\u6301\u4ee3\u7406\u8bbf\u95ee\u3002\u4e5f\u6709\u4e00\u4e9b\u7279\u522b\u7684\u60c5\u51b5\u3002 \u4ee5\u4e0b\u662f\u5404\u7c7b\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u6240\u652f\u6301\u7684\u4ee3\u7406\u7c7b\u578b\u4ee5\u53ca\u914d\u7f6e\u65b9\u5f0f \u6570\u636e\u5e93 \u4ee3\u7406\u7c7b\u578b \u4ee3\u7406\u914d\u7f6e \u4f8b\u5b50 MySQL socks socksProxyHost,socksProxyPort socksProxyHost=192.168.1.101&socksProxyPort=1081 Presto socks socksProxy socksProxy=192.168.1.101:1081 Presto http httpProxy httpProxy=192.168.1.101:3128","title":"jdbcUrl"},{"location":"writer/rdbmswriter/#driver","text":"\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u662f\u56fa\u5b9a\u7684\uff0c\u4f46\u6709\u4e9b\u56e0\u4e3a\u7248\u672c\u7684\u4e0d\u540c\uff0c\u6240\u5efa\u8bae\u7684\u9a71\u52a8\u7c7b\u540d\u4e0d\u540c\uff0c\u6bd4\u5982 MySQL\u3002 \u65b0\u7684 MySQL JDBC \u9a71\u52a8\u7c7b\u578b\u63a8\u8350\u4f7f\u7528 com.mysql.cj.jdbc.Driver \u800c\u4e0d\u662f\u4ee5\u524d\u7684 com.mysql.jdbc.Drver \u3002\u5982\u679c\u60f3\u8981\u4f7f\u7528\u5c31\u7684\u9a71\u52a8\u540d\u79f0\uff0c\u5219\u53ef\u4ee5\u914d\u7f6e driver \u914d\u7f6e\u9879\u3002","title":"driver"},{"location":"writer/rediswriter/","text":"Redis Writer \u00b6 RedisWrite \u63d0\u4f9b\u4e86\u8fd8\u539fRedis dump\u547d\u4ee4\u7684\u80fd\u529b\uff0c\u5e76\u5199\u5165\u5230\u76ee\u6807Redis\u3002\u652f\u6301redis cluster\u96c6\u7fa4\u3001proxy\u3001\u4ee5\u53ca\u5355\u673a \u914d\u7f6e\u6837\u4f8b \u00b6 { \"job\" : { \"content\" : { \"reader\" : { \"name\" : \"redisreader\" , \"parameter\" : { \"connection\" : [ { \"uri\" : \"tcp://127.0.0.1:7003\" } ] } }, \"writer\" : { \"name\" : \"rediswriter\" , \"parameter\" : { \"connection\" : [ { \"uri\" : \"tcp://127.0.0.1:6379\" , \"auth\" : \"123456\" } ], \"redisCluster\" : false , \"flushDB\" : false } } }, \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 uri \u662f \u5426 redis\u94fe\u63a5,,\u5982\u679c\u662f\u96c6\u7fa4,\u5355\u673a/proxy/redis cluster\u96c6\u7fa4\u53ea\u9700\u586b\u5199\u4e00\u4e2a\u5730\u5740\u5373\u53ef, \u7a0b\u5e8f\u4f1a\u81ea\u52a8\u83b7\u53d6\u96c6\u7fa4\u91cc\u7684\u6240\u6709master redisCluster \u5426 false redis cluster\u96c6\u7fa4\u8bf7\u52a1\u5fc5\u586b\u5199\u6b64\u9879\uff0c\u5426\u8005\u65e0\u6cd5\u5b9a\u4f4dslot\u69fd\u3002\u5982\u679c\u662fproxy\u6216\u5355\u673a\u5ffd\u7565\u8be5\u9879 flushDB \u5426 false \u8fc1\u79fb\u524d\u683c\u5f0f\u5316\u76ee\u6807Redis batchSize \u5426 1000 \u6bcf\u6b21\u6279\u91cf\u5904\u7406\u6570\u91cf\u3002\u5982\u679ckey\u8fc7\u5927/\u5c0f,\u53ef\u4ee5\u76f8\u5e94\u7684\u8c03\u6574 timeout \u5426 60000 \u6bcf\u6b21\u6267\u884c\u6700\u5927\u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u6beb\u79d2(ms) include \u5426 \u65e0 \u8981\u5305\u542b\u7684 key, \u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f exclude \u5426 \u65e0 \u8981\u6392\u9664\u7684 key,\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f","title":"Redis Writer"},{"location":"writer/rediswriter/#redis-writer","text":"RedisWrite \u63d0\u4f9b\u4e86\u8fd8\u539fRedis dump\u547d\u4ee4\u7684\u80fd\u529b\uff0c\u5e76\u5199\u5165\u5230\u76ee\u6807Redis\u3002\u652f\u6301redis cluster\u96c6\u7fa4\u3001proxy\u3001\u4ee5\u53ca\u5355\u673a","title":"Redis Writer"},{"location":"writer/rediswriter/#_1","text":"{ \"job\" : { \"content\" : { \"reader\" : { \"name\" : \"redisreader\" , \"parameter\" : { \"connection\" : [ { \"uri\" : \"tcp://127.0.0.1:7003\" } ] } }, \"writer\" : { \"name\" : \"rediswriter\" , \"parameter\" : { \"connection\" : [ { \"uri\" : \"tcp://127.0.0.1:6379\" , \"auth\" : \"123456\" } ], \"redisCluster\" : false , \"flushDB\" : false } } }, \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/rediswriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 uri \u662f \u5426 redis\u94fe\u63a5,,\u5982\u679c\u662f\u96c6\u7fa4,\u5355\u673a/proxy/redis cluster\u96c6\u7fa4\u53ea\u9700\u586b\u5199\u4e00\u4e2a\u5730\u5740\u5373\u53ef, \u7a0b\u5e8f\u4f1a\u81ea\u52a8\u83b7\u53d6\u96c6\u7fa4\u91cc\u7684\u6240\u6709master redisCluster \u5426 false redis cluster\u96c6\u7fa4\u8bf7\u52a1\u5fc5\u586b\u5199\u6b64\u9879\uff0c\u5426\u8005\u65e0\u6cd5\u5b9a\u4f4dslot\u69fd\u3002\u5982\u679c\u662fproxy\u6216\u5355\u673a\u5ffd\u7565\u8be5\u9879 flushDB \u5426 false \u8fc1\u79fb\u524d\u683c\u5f0f\u5316\u76ee\u6807Redis batchSize \u5426 1000 \u6bcf\u6b21\u6279\u91cf\u5904\u7406\u6570\u91cf\u3002\u5982\u679ckey\u8fc7\u5927/\u5c0f,\u53ef\u4ee5\u76f8\u5e94\u7684\u8c03\u6574 timeout \u5426 60000 \u6bcf\u6b21\u6267\u884c\u6700\u5927\u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u6beb\u79d2(ms) include \u5426 \u65e0 \u8981\u5305\u542b\u7684 key, \u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f exclude \u5426 \u65e0 \u8981\u6392\u9664\u7684 key,\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/sqlitewriter/","text":"SQLite Writer \u00b6 SQLiteWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5199\u5165\u6570\u636e\u5230 SQLite \u6570\u636e\u5e93\u7684\u529f\u80fd\u3002 \u793a\u4f8b \u00b6 \u5047\u5b9a\u8981\u5199\u5165\u7684\u8868\u5982\u4e0b\uff1a create table addax_tbl ( col1 varchar ( 20 ) , col2 int ( 4 ), col3 datetime , col4 boolean , col5 binary ); \u8fd9\u91cc\u4f7f\u7528\u4e00\u4efd\u4ece\u5185\u5b58\u4ea7\u751f\u5230 SQLite \u7684\u6570\u636e\u3002 job/stream2sqlite.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19880808 , \"type\" : \"long\" }, { \"value\" : \"1988-08-08 08:08:08\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"sqlitewriter\" , \"parameter\" : { \"writeMode\" : \"insert\" , \"column\" : [ \"*\" ], \"preSql\" : [ \"delete from @table\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:sqlite://tmp/writer.sqlite3\" , \"table\" : [ \"addax_tbl\" ] } ] } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/stream2sqlite.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/stream2sqlite.json \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303 driver \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter session \u5426 list \u7a7a Addax\u5728\u83b7\u53d6\u8fde\u63a5\u65f6\uff0c\u6267\u884csession\u6307\u5b9a\u7684SQL\u8bed\u53e5\uff0c\u4fee\u6539\u5f53\u524dconnection session\u5c5e\u6027 preSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u94b1\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u5982\u679c Sql \u4e2d\u6709\u4f60\u9700\u8981\u64cd\u4f5c\u5230\u7684\u8868\u540d\u79f0\uff0c\u53ef\u7528 @table \u8868\u793a postSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u5b8c\u6210\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 writeMode \u662f string insert \u6570\u636e\u5199\u5165\u8868\u7684\u65b9\u5f0f, insert \u8868\u793a\u91c7\u7528 insert into , replace \u8868\u793a\u91c7\u7528 replace into \u65b9\u5f0f update \u8868\u793a\u91c7\u7528 ON DUPLICATE KEY UPDATE \u8bed\u53e5 batchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77 \u6ce8\uff1a \u56e0\u4e3a SQLite \u8fde\u63a5\u65e0\u9700\u8d26\u53f7\u5bc6\u7801\uff0c\u56e0\u6b64\u5176\u4ed6\u6570\u636e\u5e93\u5199\u5165\u63d2\u4ef6\u9700\u8981\u914d\u7f6e\u7684 username , password \u5728\u8fd9\u91cc\u4e0d\u9700\u8981\u3002 \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b SQLite \u6570\u636e\u7c7b\u578b Long integer Double real String varchar Date datetime Boolean bool Bytes blob, binary","title":"SQLite Writer"},{"location":"writer/sqlitewriter/#sqlite-writer","text":"SQLiteWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5199\u5165\u6570\u636e\u5230 SQLite \u6570\u636e\u5e93\u7684\u529f\u80fd\u3002","title":"SQLite Writer"},{"location":"writer/sqlitewriter/#_1","text":"\u5047\u5b9a\u8981\u5199\u5165\u7684\u8868\u5982\u4e0b\uff1a create table addax_tbl ( col1 varchar ( 20 ) , col2 int ( 4 ), col3 datetime , col4 boolean , col5 binary ); \u8fd9\u91cc\u4f7f\u7528\u4e00\u4efd\u4ece\u5185\u5b58\u4ea7\u751f\u5230 SQLite \u7684\u6570\u636e\u3002 job/stream2sqlite.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19880808 , \"type\" : \"long\" }, { \"value\" : \"1988-08-08 08:08:08\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"sqlitewriter\" , \"parameter\" : { \"writeMode\" : \"insert\" , \"column\" : [ \"*\" ], \"preSql\" : [ \"delete from @table\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:sqlite://tmp/writer.sqlite3\" , \"table\" : [ \"addax_tbl\" ] } ] } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/stream2sqlite.json","title":"\u793a\u4f8b"},{"location":"writer/sqlitewriter/#_2","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/stream2sqlite.json","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"writer/sqlitewriter/#_3","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303 driver \u5426 string \u65e0 \u81ea\u5b9a\u4e49\u9a71\u52a8\u7c7b\u540d\uff0c\u89e3\u51b3\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8be6\u89c1\u4e0b\u9762\u63cf\u8ff0 table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter session \u5426 list \u7a7a Addax\u5728\u83b7\u53d6\u8fde\u63a5\u65f6\uff0c\u6267\u884csession\u6307\u5b9a\u7684SQL\u8bed\u53e5\uff0c\u4fee\u6539\u5f53\u524dconnection session\u5c5e\u6027 preSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u94b1\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u5982\u679c Sql \u4e2d\u6709\u4f60\u9700\u8981\u64cd\u4f5c\u5230\u7684\u8868\u540d\u79f0\uff0c\u53ef\u7528 @table \u8868\u793a postSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u5b8c\u6210\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 writeMode \u662f string insert \u6570\u636e\u5199\u5165\u8868\u7684\u65b9\u5f0f, insert \u8868\u793a\u91c7\u7528 insert into , replace \u8868\u793a\u91c7\u7528 replace into \u65b9\u5f0f update \u8868\u793a\u91c7\u7528 ON DUPLICATE KEY UPDATE \u8bed\u53e5 batchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77 \u6ce8\uff1a \u56e0\u4e3a SQLite \u8fde\u63a5\u65e0\u9700\u8d26\u53f7\u5bc6\u7801\uff0c\u56e0\u6b64\u5176\u4ed6\u6570\u636e\u5e93\u5199\u5165\u63d2\u4ef6\u9700\u8981\u914d\u7f6e\u7684 username , password \u5728\u8fd9\u91cc\u4e0d\u9700\u8981\u3002","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/sqlitewriter/#_4","text":"Addax \u5185\u90e8\u7c7b\u578b SQLite \u6570\u636e\u7c7b\u578b Long integer Double real String varchar Date datetime Boolean bool Bytes blob, binary","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/sqlserverwriter/","text":"SQLServer Writer \u00b6 SqlServerWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5199\u5165\u6570\u636e\u5230 SQL Server \u5e93\u8868\u7684\u529f\u80fd\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 \u8fd9\u91cc\u4f7f\u7528\u4e00\u4efd\u4ece\u5185\u5b58\u4ea7\u751f\u5230 SQL Server \u5bfc\u5165\u7684\u6570\u636e\u3002 { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : {}, \"writer\" : { \"name\" : \"sqlserverwriter\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"db_id\" , \"db_type\" , \"db_ip\" , \"db_port\" , \"db_role\" , \"db_name\" , \"db_username\" , \"db_password\" , \"db_modify_time\" , \"db_modify_user\" , \"db_description\" , \"db_tddl_info\" ], \"connection\" : [ { \"table\" : [ \"db_info_for_writer\" ], \"jdbcUrl\" : \"jdbc:sqlserver://[HOST_NAME]:PORT;DatabaseName=[DATABASE_NAME]\" } ], \"preSql\" : [ \"delete from @table where db_id = -1;\" ], \"postSql\" : [ \"update @table set db_modify_time = now() where db_id = 1;\" ] } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter splitPk \u5426 \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmsreader preSql \u5426 \u65e0 \u6570\u636e\u5199\u5165\u524d\u5148\u6267\u884c\u7684sql\u8bed\u53e5 postSql \u5426 \u65e0 \u6570\u636e\u5199\u5165\u5b8c\u6210\u540e,\u518d\u6267\u884c\u7684SQL\u8bed\u53e5 batchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM \u7c7b\u578b\u8f6c\u6362 \u00b6 \u7c7b\u4f3c SqlServerReader \uff0c\u76ee\u524d SqlServerWriter \u652f\u6301\u5927\u90e8\u5206 SqlServer \u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002","title":"SQLServer Writer"},{"location":"writer/sqlserverwriter/#sqlserver-writer","text":"SqlServerWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5199\u5165\u6570\u636e\u5230 SQL Server \u5e93\u8868\u7684\u529f\u80fd\u3002","title":"SQLServer Writer"},{"location":"writer/sqlserverwriter/#_1","text":"\u8fd9\u91cc\u4f7f\u7528\u4e00\u4efd\u4ece\u5185\u5b58\u4ea7\u751f\u5230 SQL Server \u5bfc\u5165\u7684\u6570\u636e\u3002 { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : {}, \"writer\" : { \"name\" : \"sqlserverwriter\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"root\" , \"column\" : [ \"db_id\" , \"db_type\" , \"db_ip\" , \"db_port\" , \"db_role\" , \"db_name\" , \"db_username\" , \"db_password\" , \"db_modify_time\" , \"db_modify_user\" , \"db_description\" , \"db_tddl_info\" ], \"connection\" : [ { \"table\" : [ \"db_info_for_writer\" ], \"jdbcUrl\" : \"jdbc:sqlserver://[HOST_NAME]:PORT;DatabaseName=[DATABASE_NAME]\" } ], \"preSql\" : [ \"delete from @table where db_id = -1;\" ], \"postSql\" : [ \"update @table set db_modify_time = now() where db_id = 1;\" ] } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/sqlserverwriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0cjdbcUrl\u6309\u7167RDBMS\u5b98\u65b9\u89c4\u8303\uff0c\u5e76\u53ef\u4ee5\u586b\u5199\u8fde\u63a5\u9644\u4ef6\u63a7\u5236\u4fe1\u606f username \u662f \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter splitPk \u5426 \u65e0 \u4f7f\u7528splitPk\u4ee3\u8868\u7684\u5b57\u6bb5\u8fdb\u884c\u6570\u636e\u5206\u7247\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmsreader preSql \u5426 \u65e0 \u6570\u636e\u5199\u5165\u524d\u5148\u6267\u884c\u7684sql\u8bed\u53e5 postSql \u5426 \u65e0 \u6570\u636e\u5199\u5165\u5b8c\u6210\u540e,\u518d\u6267\u884c\u7684SQL\u8bed\u53e5 batchSize \u5426 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/sqlserverwriter/#_3","text":"\u7c7b\u4f3c SqlServerReader \uff0c\u76ee\u524d SqlServerWriter \u652f\u6301\u5927\u90e8\u5206 SqlServer \u7c7b\u578b\uff0c\u4f46\u4e5f\u5b58\u5728\u90e8\u5206\u4e2a\u522b\u7c7b\u578b\u6ca1\u6709\u652f\u6301\u7684\u60c5\u51b5\uff0c\u8bf7\u6ce8\u610f\u68c0\u67e5\u4f60\u7684\u7c7b\u578b\u3002","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/streamwriter/","text":"Stream Writer \u00b6 StreamWriter \u662f\u4e00\u4e2a\u5c06\u6570\u636e\u5199\u5165\u5185\u5b58\u7684\u63d2\u4ef6\uff0c\u4e00\u822c\u7528\u6765\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u5199\u5230\u7ec8\u7aef\uff0c\u7528\u6765\u8c03\u8bd5\u8bfb\u53d6\u63d2\u4ef6\u7684\u6570\u636e\u5904\u7406\u60c5\u51b5\u3002 \u4e00\u4e2a\u5178\u578b\u7684 streamwriter \u914d\u7f6e\u5982\u4e0b\uff1a { \"name\" : \"streamwriter\" , \"parameter\" : { \"encoding\" : \"UTF-8\" , \"print\" : true , \"nullFormat\" : \"NULL\" } } \u4e0a\u8ff0\u914d\u7f6e\u4f1a\u5c06\u83b7\u53d6\u7684\u6570\u636e\u76f4\u63a5\u6253\u5370\u5230\u7ec8\u7aef\u3002 \u5176\u4e2d nullFormat \u7528\u6765\u6307\u5b9a\u5f53\u503c\u4e3a\u7a7a\u65f6\uff0c\u5982\u4f55\u5728\u7ec8\u7aef\u8868\u793a\uff0c\u9ed8\u8ba4\u662f\u5b57\u7b26\u4e32 NULL , \u5982\u679c\u4e0d\u60f3\u6253\u5370\u7a7a\u503c\uff0c\u53ef\u4ee5\u5c06\u5176\u8bbe\u7f6e\u4e3a \"\" \u3002 \u8be5\u63d2\u4ef6\u4e5f\u652f\u6301\u5c06\u6570\u636e\u5199\u5165\u5230\u6587\u4ef6\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"name\" : \"streamwriter\" , \"parameter\" : { \"encoding\" : \"UTF-8\" , \"path\" : \"/tmp/out\" , \"fileName\" : \"out.txt\" , \"fieldDelimiter\" : \",\" , \"recordNumBeforeSleep\" : \"100\" , \"sleepTime\" : \"5\" } } \u4e0a\u8ff0\u914d\u7f6e\u4e2d: fieldDelimiter \u8868\u793a\u5b57\u6bb5\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u4e3a\u5236\u8868\u7b26( \\t ) recordNumBeforeSleep \u8868\u793a\u83b7\u53d6\u591a\u5c11\u6761\u8bb0\u5f55\u540e\uff0c\u6267\u884c\u4f11\u7720\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u4e0d\u542f\u7528\u8be5\u529f\u80fd sleepTime \u5219\u8868\u793a\u4f11\u7720\u591a\u957f\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u4e0d\u542f\u7528\u8be5\u529f\u80fd\u3002 \u4e0a\u8ff0\u914d\u7f6e\u7684\u542b\u4e49\u662f\u5c06\u6570\u636e\u5199\u5165\u5230 /tmp/out/out.txt \u6587\u4ef6\uff0c \u6bcf\u83b7\u53d6100\u6761\u8bb0\u5f55\u540e\uff0c\u4f11\u77205\u79d2\u3002","title":"Stream Writer"},{"location":"writer/streamwriter/#stream-writer","text":"StreamWriter \u662f\u4e00\u4e2a\u5c06\u6570\u636e\u5199\u5165\u5185\u5b58\u7684\u63d2\u4ef6\uff0c\u4e00\u822c\u7528\u6765\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u5199\u5230\u7ec8\u7aef\uff0c\u7528\u6765\u8c03\u8bd5\u8bfb\u53d6\u63d2\u4ef6\u7684\u6570\u636e\u5904\u7406\u60c5\u51b5\u3002 \u4e00\u4e2a\u5178\u578b\u7684 streamwriter \u914d\u7f6e\u5982\u4e0b\uff1a { \"name\" : \"streamwriter\" , \"parameter\" : { \"encoding\" : \"UTF-8\" , \"print\" : true , \"nullFormat\" : \"NULL\" } } \u4e0a\u8ff0\u914d\u7f6e\u4f1a\u5c06\u83b7\u53d6\u7684\u6570\u636e\u76f4\u63a5\u6253\u5370\u5230\u7ec8\u7aef\u3002 \u5176\u4e2d nullFormat \u7528\u6765\u6307\u5b9a\u5f53\u503c\u4e3a\u7a7a\u65f6\uff0c\u5982\u4f55\u5728\u7ec8\u7aef\u8868\u793a\uff0c\u9ed8\u8ba4\u662f\u5b57\u7b26\u4e32 NULL , \u5982\u679c\u4e0d\u60f3\u6253\u5370\u7a7a\u503c\uff0c\u53ef\u4ee5\u5c06\u5176\u8bbe\u7f6e\u4e3a \"\" \u3002 \u8be5\u63d2\u4ef6\u4e5f\u652f\u6301\u5c06\u6570\u636e\u5199\u5165\u5230\u6587\u4ef6\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a { \"name\" : \"streamwriter\" , \"parameter\" : { \"encoding\" : \"UTF-8\" , \"path\" : \"/tmp/out\" , \"fileName\" : \"out.txt\" , \"fieldDelimiter\" : \",\" , \"recordNumBeforeSleep\" : \"100\" , \"sleepTime\" : \"5\" } } \u4e0a\u8ff0\u914d\u7f6e\u4e2d: fieldDelimiter \u8868\u793a\u5b57\u6bb5\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u4e3a\u5236\u8868\u7b26( \\t ) recordNumBeforeSleep \u8868\u793a\u83b7\u53d6\u591a\u5c11\u6761\u8bb0\u5f55\u540e\uff0c\u6267\u884c\u4f11\u7720\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u4e0d\u542f\u7528\u8be5\u529f\u80fd sleepTime \u5219\u8868\u793a\u4f11\u7720\u591a\u957f\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u8868\u793a\u4e0d\u542f\u7528\u8be5\u529f\u80fd\u3002 \u4e0a\u8ff0\u914d\u7f6e\u7684\u542b\u4e49\u662f\u5c06\u6570\u636e\u5199\u5165\u5230 /tmp/out/out.txt \u6587\u4ef6\uff0c \u6bcf\u83b7\u53d6100\u6761\u8bb0\u5f55\u540e\uff0c\u4f11\u77205\u79d2\u3002","title":"Stream Writer"},{"location":"writer/tdenginewriter/","text":"TDengine Writer \u00b6 TDengineWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5c06\u6570\u636e\u5199\u5165\u5230\u6d9b\u601d\u516c\u53f8\u7684 TDengine \u6570\u636e\u5e93\u7cfb\u7edf\u3002\u5728\u5e95\u5c42\u5b9e\u73b0\u4e0a\uff0cTDengineWriter \u901a\u8fc7JDBC JNI \u9a71\u52a8\u8fde\u63a5\u8fdc\u7a0b TDengine \u6570\u636e\u5e93\uff0c \u5e76\u6267\u884c\u76f8\u5e94\u7684sql\u8bed\u53e5\u5c06\u6570\u636e\u6279\u91cf\u5199\u5165 TDengine \u5e93\u4e2d\u3002 \u524d\u7f6e\u6761\u4ef6 \u00b6 \u8003\u8651\u5230\u6027\u80fd\u95ee\u9898\uff0c\u8be5\u63d2\u4ef6\u4f7f\u7528\u4e86 TDengine \u7684 JDBC-JNI \u9a71\u52a8\uff0c \u8be5\u9a71\u52a8\u76f4\u63a5\u8c03\u7528\u5ba2\u6237\u7aef API\uff08 libtaos.so \u6216 taos.dll \uff09\u5c06\u5199\u5165\u548c\u67e5\u8be2\u8bf7\u6c42\u53d1\u9001\u5230 taosd \u5b9e\u4f8b\u3002 \u56e0\u6b64\u5728\u4f7f\u7528\u4e4b\u524d\u9700\u8981\u914d\u7f6e\u597d\u52a8\u6001\u5e93\u94fe\u63a5\u6587\u4ef6\u3002 \u9996\u5148\u5c06 plugin/writer/tdenginewriter/libs/libtaos.so.2.0.16.0 \u62f7\u8d1d\u5230 /usr/lib64 \u76ee\u5f55\uff0c\u7136\u540e\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u521b\u5efa\u8f6f\u94fe\u63a5 ln -sf /usr/lib64/libtaos.so.2.0.16.0 /usr/lib64/libtaos.so.1 ln -sf /usr/lib64/libtaos.so.1 /usr/lib64/libtaos.so \u793a\u4f8b \u00b6 \u5047\u5b9a\u8981\u5199\u5165\u7684\u8868\u5982\u4e0b\uff1a create table test . addax_test ( ts timestamp , name nchar ( 100 ), file_size int , file_date timestamp , flag_open bool , memo nchar ( 100 ) ); \u4ee5\u4e0b\u662f\u914d\u7f6e\u6587\u4ef6 job/stream2tdengine.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"random\" : \"2017-08-01 00:01:02,2020-01-01 12:13:14\" , \"type\" : \"date\" }, { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19880808 , \"type\" : \"long\" }, { \"value\" : \"1988-08-08 08:08:08\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"tdenginewriter\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"taosdata\" , \"column\" : [ \"ts\" , \"name\" , \"file_size\" , \"file_date\" , \"flag_open\" , \"memo\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:TAOS://127.0.0.1:6030/test\" , \"table\" : [ \"addax_test\" ] } ] } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/stream2tdengine.json \u6267\u884c\u91c7\u96c6\u547d\u4ee4 \u00b6 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/tdengine2stream.json \u547d\u4ee4\u8f93\u51fa\u7c7b\u4f3c\u5982\u4e0b\uff1a 2021-02-20 15:52:07.691 [main] INFO VMInfo - VMInfo# operatingSystem class => sun.management.OperatingSystemImpl 2021-02-20 15:52:07.748 [main] INFO Engine - { \"content\": { \"reader\":{ \"parameter\":{ \"column\":[ { \"random\":\"2017-08-01 00:01:02,2020-01-01 12:13:14\", \"type\":\"date\" }, { \"type\":\"string\", \"value\":\"Addax\" }, { \"type\":\"long\", \"value\":19880808 }, { \"type\":\"date\", \"value\":\"1988-08-08 08:08:08\" }, { \"type\":\"bool\", \"value\":true }, { \"type\":\"bytes\", \"value\":\"test\" } ], \"sliceRecordCount\":1000 }, \"name\":\"streamreader\" }, \"writer\":{ \"parameter\":{ \"password\":\"*****\", \"column\":[ \"ts\", \"name\", \"file_size\", \"file_date\", \"flag_open\", \"memo\" ], \"connection\":[ { \"jdbcUrl\":\"jdbc:TAOS://127.0.0.1:6030/test\", \"table\":[ \"addax_test\" ] } ], \"username\":\"root\", \"preSql\":[] }, \"name\":\"tdenginewriter\" } }, \"setting\":{ \"speed\":{ \"bytes\":-1, \"channel\":1 } } } 2021-02-20 15:52:07.786 [main] INFO PerfTrace - PerfTrace traceId=job_-1, isEnable=false, priority=0 2021-02-20 15:52:07.787 [main] INFO JobContainer - Addax jobContainer starts job. 2021-02-20 15:52:07.789 [main] INFO JobContainer - Set jobId = 0 java.library.path:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib 2021-02-20 15:52:08.048 [job-0] INFO OriginalConfPretreatmentUtil - table:[addax_test] all columns:[ts,name,file_size,file_date,flag_open,memo]. 2021-02-20 15:52:08.056 [job-0] INFO OriginalConfPretreatmentUtil - Write data [ INSERT INTO %s (ts,name,file_size,file_date,flag_open,memo) VALUES(?,?,?,?,?,?) ], which jdbcUrl like:[jdbc:TAOS://127.0.0.1:6030/test] 2021-02-20 15:52:11.158 [job-0] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-02-20 15:52:07 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-02-20 15:52:11 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 11.07KB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 333rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 1000 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0 \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0c\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684 TAOS \u5fc5\u987b\u5927\u5199 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter preSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u94b1\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u5982\u679c Sql \u4e2d\u6709\u4f60\u9700\u8981\u64cd\u4f5c\u5230\u7684\u8868\u540d\u79f0\uff0c\u53ef\u7528 @table \u8868\u793a postSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u5b8c\u6210\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 batchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77 \u4f7f\u7528 JDBC-RESTful \u63a5\u53e3 \u00b6 \u5982\u679c\u4e0d\u60f3\u4f9d\u8d56\u672c\u5730\u5e93\uff0c\u6216\u8005\u6ca1\u6709\u6743\u9650\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 JDBC-RESTful \u63a5\u53e3\u6765\u5199\u5165\u8868\uff0c\u76f8\u6bd4 JDBC-JNI \u800c\u8a00\uff0c\u914d\u7f6e\u533a\u522b\u662f\uff1a driverClass \u6307\u5b9a\u4e3a com.taosdata.jdbc.rs.RestfulDriver jdbcUrl \u4ee5 jdbc:TAOS-RS:// \u5f00\u5934\uff1b \u4f7f\u7528 6041 \u4f5c\u4e3a\u8fde\u63a5\u7aef\u53e3 \u6240\u4ee5\u4e0a\u8ff0\u914d\u7f6e\u4e2d\u7684 connection \u5e94\u8be5\u4fee\u6539\u4e3a\u5982\u4e0b\uff1a { \"connection\" : [ { \"jdbcUrl\" : \"jdbc:TAOS-RS://127.0.0.1:6041/test\" , \"table\" : [ \"addax_test\" ], \"driver\" : \"com.taosdata.jdbc.rs.RestfulDriver\" } ] } \u7c7b\u578b\u8f6c\u6362 \u00b6 \u76ee\u524d TDenginereader \u652f\u6301 TDengine \u6240\u6709\u7c7b\u578b\uff0c\u5177\u4f53\u5982\u4e0b Addax \u5185\u90e8\u7c7b\u578b TDengine \u6570\u636e\u7c7b\u578b Long SMALLINT, TINYINT, INT, BIGINT, TIMESTAMP Double FLOAT, DOUBLE String BINARY, NCHAR Boolean BOOL \u5f53\u524d\u652f\u6301\u7248\u672c \u00b6 TDengine 2.0.16 \u6ce8\u610f\u4e8b\u9879 \u00b6 TDengine JDBC-JNI \u9a71\u52a8\u548c\u52a8\u6001\u5e93\u7248\u672c\u8981\u6c42\u4e00\u4e00\u5339\u914d\uff0c\u56e0\u6b64\u5982\u679c\u4f60\u7684\u6570\u636e\u7248\u672c\u5e76\u4e0d\u662f 2.0.16 \uff0c\u5219\u9700\u8981\u540c\u65f6\u66ff\u6362\u52a8\u6001\u5e93\u548c\u63d2\u4ef6\u76ee\u5f55\u4e2d\u7684JDBC\u9a71\u52a8 TDengine \u7684\u65f6\u5e8f\u5b57\u6bb5\uff08timestamp\uff09\u9ed8\u8ba4\u6700\u5c0f\u503c\u4e3a 1500000000000 \uff0c\u5373 2017-07-14 10:40:00.0 \uff0c\u5982\u679c\u4f60\u5199\u5165\u7684\u65f6\u8bb8\u65f6\u95f4\u6233\u5c0f\u4e8e\u8be5\u503c\uff0c\u5219\u4f1a\u62a5\u9519","title":"TDengine Writer"},{"location":"writer/tdenginewriter/#tdengine-writer","text":"TDengineWriter \u63d2\u4ef6\u5b9e\u73b0\u4e86\u5c06\u6570\u636e\u5199\u5165\u5230\u6d9b\u601d\u516c\u53f8\u7684 TDengine \u6570\u636e\u5e93\u7cfb\u7edf\u3002\u5728\u5e95\u5c42\u5b9e\u73b0\u4e0a\uff0cTDengineWriter \u901a\u8fc7JDBC JNI \u9a71\u52a8\u8fde\u63a5\u8fdc\u7a0b TDengine \u6570\u636e\u5e93\uff0c \u5e76\u6267\u884c\u76f8\u5e94\u7684sql\u8bed\u53e5\u5c06\u6570\u636e\u6279\u91cf\u5199\u5165 TDengine \u5e93\u4e2d\u3002","title":"TDengine Writer"},{"location":"writer/tdenginewriter/#_1","text":"\u8003\u8651\u5230\u6027\u80fd\u95ee\u9898\uff0c\u8be5\u63d2\u4ef6\u4f7f\u7528\u4e86 TDengine \u7684 JDBC-JNI \u9a71\u52a8\uff0c \u8be5\u9a71\u52a8\u76f4\u63a5\u8c03\u7528\u5ba2\u6237\u7aef API\uff08 libtaos.so \u6216 taos.dll \uff09\u5c06\u5199\u5165\u548c\u67e5\u8be2\u8bf7\u6c42\u53d1\u9001\u5230 taosd \u5b9e\u4f8b\u3002 \u56e0\u6b64\u5728\u4f7f\u7528\u4e4b\u524d\u9700\u8981\u914d\u7f6e\u597d\u52a8\u6001\u5e93\u94fe\u63a5\u6587\u4ef6\u3002 \u9996\u5148\u5c06 plugin/writer/tdenginewriter/libs/libtaos.so.2.0.16.0 \u62f7\u8d1d\u5230 /usr/lib64 \u76ee\u5f55\uff0c\u7136\u540e\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u521b\u5efa\u8f6f\u94fe\u63a5 ln -sf /usr/lib64/libtaos.so.2.0.16.0 /usr/lib64/libtaos.so.1 ln -sf /usr/lib64/libtaos.so.1 /usr/lib64/libtaos.so","title":"\u524d\u7f6e\u6761\u4ef6"},{"location":"writer/tdenginewriter/#_2","text":"\u5047\u5b9a\u8981\u5199\u5165\u7684\u8868\u5982\u4e0b\uff1a create table test . addax_test ( ts timestamp , name nchar ( 100 ), file_size int , file_date timestamp , flag_open bool , memo nchar ( 100 ) ); \u4ee5\u4e0b\u662f\u914d\u7f6e\u6587\u4ef6 job/stream2tdengine.json { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 1 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"streamreader\" , \"parameter\" : { \"column\" : [ { \"random\" : \"2017-08-01 00:01:02,2020-01-01 12:13:14\" , \"type\" : \"date\" }, { \"value\" : \"Addax\" , \"type\" : \"string\" }, { \"value\" : 19880808 , \"type\" : \"long\" }, { \"value\" : \"1988-08-08 08:08:08\" , \"type\" : \"date\" }, { \"value\" : true , \"type\" : \"bool\" }, { \"value\" : \"test\" , \"type\" : \"bytes\" } ], \"sliceRecordCount\" : 1000 } }, \"writer\" : { \"name\" : \"tdenginewriter\" , \"parameter\" : { \"username\" : \"root\" , \"password\" : \"taosdata\" , \"column\" : [ \"ts\" , \"name\" , \"file_size\" , \"file_date\" , \"flag_open\" , \"memo\" ], \"connection\" : [ { \"jdbcUrl\" : \"jdbc:TAOS://127.0.0.1:6030/test\" , \"table\" : [ \"addax_test\" ] } ] } } } } } \u5c06\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u4e3a job/stream2tdengine.json","title":"\u793a\u4f8b"},{"location":"writer/tdenginewriter/#_3","text":"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u6570\u636e\u91c7\u96c6 bin/addax.sh job/tdengine2stream.json \u547d\u4ee4\u8f93\u51fa\u7c7b\u4f3c\u5982\u4e0b\uff1a 2021-02-20 15:52:07.691 [main] INFO VMInfo - VMInfo# operatingSystem class => sun.management.OperatingSystemImpl 2021-02-20 15:52:07.748 [main] INFO Engine - { \"content\": { \"reader\":{ \"parameter\":{ \"column\":[ { \"random\":\"2017-08-01 00:01:02,2020-01-01 12:13:14\", \"type\":\"date\" }, { \"type\":\"string\", \"value\":\"Addax\" }, { \"type\":\"long\", \"value\":19880808 }, { \"type\":\"date\", \"value\":\"1988-08-08 08:08:08\" }, { \"type\":\"bool\", \"value\":true }, { \"type\":\"bytes\", \"value\":\"test\" } ], \"sliceRecordCount\":1000 }, \"name\":\"streamreader\" }, \"writer\":{ \"parameter\":{ \"password\":\"*****\", \"column\":[ \"ts\", \"name\", \"file_size\", \"file_date\", \"flag_open\", \"memo\" ], \"connection\":[ { \"jdbcUrl\":\"jdbc:TAOS://127.0.0.1:6030/test\", \"table\":[ \"addax_test\" ] } ], \"username\":\"root\", \"preSql\":[] }, \"name\":\"tdenginewriter\" } }, \"setting\":{ \"speed\":{ \"bytes\":-1, \"channel\":1 } } } 2021-02-20 15:52:07.786 [main] INFO PerfTrace - PerfTrace traceId=job_-1, isEnable=false, priority=0 2021-02-20 15:52:07.787 [main] INFO JobContainer - Addax jobContainer starts job. 2021-02-20 15:52:07.789 [main] INFO JobContainer - Set jobId = 0 java.library.path:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib 2021-02-20 15:52:08.048 [job-0] INFO OriginalConfPretreatmentUtil - table:[addax_test] all columns:[ts,name,file_size,file_date,flag_open,memo]. 2021-02-20 15:52:08.056 [job-0] INFO OriginalConfPretreatmentUtil - Write data [ INSERT INTO %s (ts,name,file_size,file_date,flag_open,memo) VALUES(?,?,?,?,?,?) ], which jdbcUrl like:[jdbc:TAOS://127.0.0.1:6030/test] 2021-02-20 15:52:11.158 [job-0] INFO JobContainer - \u4efb\u52a1\u542f\u52a8\u65f6\u523b : 2021-02-20 15:52:07 \u4efb\u52a1\u7ed3\u675f\u65f6\u523b : 2021-02-20 15:52:11 \u4efb\u52a1\u603b\u8ba1\u8017\u65f6 : 3s \u4efb\u52a1\u5e73\u5747\u6d41\u91cf : 11.07KB/s \u8bb0\u5f55\u5199\u5165\u901f\u5ea6 : 333rec/s \u8bfb\u51fa\u8bb0\u5f55\u603b\u6570 : 1000 \u8bfb\u5199\u5931\u8d25\u603b\u6570 : 0","title":"\u6267\u884c\u91c7\u96c6\u547d\u4ee4"},{"location":"writer/tdenginewriter/#_4","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 jdbcUrl \u662f list \u65e0 \u5bf9\u7aef\u6570\u636e\u5e93\u7684JDBC\u8fde\u63a5\u4fe1\u606f\uff0c\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684 TAOS \u5fc5\u987b\u5927\u5199 username \u662f string \u65e0 \u6570\u636e\u6e90\u7684\u7528\u6237\u540d password \u5426 string \u65e0 \u6570\u636e\u6e90\u6307\u5b9a\u7528\u6237\u540d\u7684\u5bc6\u7801 table \u662f list \u65e0 \u6240\u9009\u53d6\u7684\u9700\u8981\u540c\u6b65\u7684\u8868\u540d,\u4f7f\u7528JSON\u6570\u636e\u683c\u5f0f\uff0c\u5f53\u914d\u7f6e\u4e3a\u591a\u5f20\u8868\u65f6\uff0c\u7528\u6237\u81ea\u5df1\u9700\u4fdd\u8bc1\u591a\u5f20\u8868\u662f\u540c\u4e00\u8868\u7ed3\u6784 column \u662f list \u65e0 \u6240\u914d\u7f6e\u7684\u8868\u4e2d\u9700\u8981\u540c\u6b65\u7684\u5217\u540d\u96c6\u5408\uff0c\u8be6\u7ec6\u63cf\u8ff0\u89c1 rdbmswriter preSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u94b1\u5148\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u6e05\u9664\u65e7\u6570\u636e,\u5982\u679c Sql \u4e2d\u6709\u4f60\u9700\u8981\u64cd\u4f5c\u5230\u7684\u8868\u540d\u79f0\uff0c\u53ef\u7528 @table \u8868\u793a postSql \u5426 list \u65e0 \u6570\u636e\u5199\u5165\u5b8c\u6210\u540e\u6267\u884c\u7684sql\u8bed\u53e5\uff0c\u4f8b\u5982\u52a0\u4e0a\u67d0\u4e00\u4e2a\u65f6\u95f4\u6233 batchSize \u5426 int 1024 \u5b9a\u4e49\u4e86\u63d2\u4ef6\u548c\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6bcf\u6b21\u6279\u91cf\u6570\u636e\u83b7\u53d6\u6761\u6570\uff0c\u8c03\u9ad8\u8be5\u503c\u53ef\u80fd\u5bfc\u81f4 Addax \u51fa\u73b0OOM\u6216\u8005\u76ee\u6807\u6570\u636e\u5e93\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u5bfc\u81f4\u6302\u8d77","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/tdenginewriter/#jdbc-restful","text":"\u5982\u679c\u4e0d\u60f3\u4f9d\u8d56\u672c\u5730\u5e93\uff0c\u6216\u8005\u6ca1\u6709\u6743\u9650\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 JDBC-RESTful \u63a5\u53e3\u6765\u5199\u5165\u8868\uff0c\u76f8\u6bd4 JDBC-JNI \u800c\u8a00\uff0c\u914d\u7f6e\u533a\u522b\u662f\uff1a driverClass \u6307\u5b9a\u4e3a com.taosdata.jdbc.rs.RestfulDriver jdbcUrl \u4ee5 jdbc:TAOS-RS:// \u5f00\u5934\uff1b \u4f7f\u7528 6041 \u4f5c\u4e3a\u8fde\u63a5\u7aef\u53e3 \u6240\u4ee5\u4e0a\u8ff0\u914d\u7f6e\u4e2d\u7684 connection \u5e94\u8be5\u4fee\u6539\u4e3a\u5982\u4e0b\uff1a { \"connection\" : [ { \"jdbcUrl\" : \"jdbc:TAOS-RS://127.0.0.1:6041/test\" , \"table\" : [ \"addax_test\" ], \"driver\" : \"com.taosdata.jdbc.rs.RestfulDriver\" } ] }","title":"\u4f7f\u7528 JDBC-RESTful \u63a5\u53e3"},{"location":"writer/tdenginewriter/#_5","text":"\u76ee\u524d TDenginereader \u652f\u6301 TDengine \u6240\u6709\u7c7b\u578b\uff0c\u5177\u4f53\u5982\u4e0b Addax \u5185\u90e8\u7c7b\u578b TDengine \u6570\u636e\u7c7b\u578b Long SMALLINT, TINYINT, INT, BIGINT, TIMESTAMP Double FLOAT, DOUBLE String BINARY, NCHAR Boolean BOOL","title":"\u7c7b\u578b\u8f6c\u6362"},{"location":"writer/tdenginewriter/#_6","text":"TDengine 2.0.16","title":"\u5f53\u524d\u652f\u6301\u7248\u672c"},{"location":"writer/tdenginewriter/#_7","text":"TDengine JDBC-JNI \u9a71\u52a8\u548c\u52a8\u6001\u5e93\u7248\u672c\u8981\u6c42\u4e00\u4e00\u5339\u914d\uff0c\u56e0\u6b64\u5982\u679c\u4f60\u7684\u6570\u636e\u7248\u672c\u5e76\u4e0d\u662f 2.0.16 \uff0c\u5219\u9700\u8981\u540c\u65f6\u66ff\u6362\u52a8\u6001\u5e93\u548c\u63d2\u4ef6\u76ee\u5f55\u4e2d\u7684JDBC\u9a71\u52a8 TDengine \u7684\u65f6\u5e8f\u5b57\u6bb5\uff08timestamp\uff09\u9ed8\u8ba4\u6700\u5c0f\u503c\u4e3a 1500000000000 \uff0c\u5373 2017-07-14 10:40:00.0 \uff0c\u5982\u679c\u4f60\u5199\u5165\u7684\u65f6\u8bb8\u65f6\u95f4\u6233\u5c0f\u4e8e\u8be5\u503c\uff0c\u5219\u4f1a\u62a5\u9519","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"writer/txtfilewriter/","text":"TxtFile Writer \u00b6 TxtFileWriter\u63d0\u4f9b\u4e86\u5411\u672c\u5730\u6587\u4ef6\u5199\u5165\u7c7bCSV\u683c\u5f0f\u7684\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u8868\u6587\u4ef6\u3002 \u914d\u7f6e\u6837\u4f8b \u00b6 { \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"txtfilereader\" , \"parameter\" : { \"path\" : [ \"/tmp/data\" ], \"encoding\" : \"UTF-8\" , \"column\" : [ { \"index\" : 0 , \"type\" : \"long\" }, { \"index\" : 1 , \"type\" : \"boolean\" }, { \"index\" : 2 , \"type\" : \"double\" }, { \"index\" : 3 , \"type\" : \"string\" }, { \"index\" : 4 , \"type\" : \"date\" , \"format\" : \"yyyy.MM.dd\" } ], \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/tmp/result\" , \"fileName\" : \"luohw\" , \"writeMode\" : \"truncate\" , \"dateFormat\" : \"yyyy-MM-dd\" } } } } } \u53c2\u6570\u8bf4\u660e \u00b6 \u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f \u65e0 \u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u5199\u5165Path\u76ee\u5f55\u4e0b\u5c5e\u591a\u4e2a\u6587\u4ef6 fileName \u662f \u65e0 \u5199\u5165\u7684\u6587\u4ef6\u540d\uff0c\u8be5\u6587\u4ef6\u540d\u4f1a\u6dfb\u52a0\u968f\u673a\u7684\u540e\u7f00\u4f5c\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u5199\u5165\u5b9e\u9645\u6587\u4ef6\u540d writeMode \u662f \u65e0 FtpWriter\u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff0c\u652f\u6301 truncate , append , nonConflict \uff0c\u8be6\u89c1\u4e0b\u6587 column \u662f \u9ed8\u8ba4String\u7c7b\u578b \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c\u8be6\u89c1\u4e0b\u6587 fieldDelimiter \u662f , \u63cf\u8ff0\uff1a\u8bfb\u53d6\u7684\u5b57\u6bb5\u5206\u9694\u7b26 compress \u5426 \u65e0 \u6587\u672c\u538b\u7f29\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4e0d\u538b\u7f29,\u652f\u6301\u538b\u7f29\u7c7b\u578b\u4e3a zip\u3001lzo\u3001lzop\u3001tgz\u3001bzip2 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e nullFormat \u5426 \\N \u5b9a\u4e49\u54ea\u4e9b\u5b57\u7b26\u4e32\u53ef\u4ee5\u8868\u793a\u4e3anull dateFormat \u5426 \u65e0 \u65e5\u671f\u7c7b\u578b\u7684\u6570\u636e\u5e8f\u5217\u5316\u5230\u6587\u4ef6\u4e2d\u65f6\u7684\u683c\u5f0f\uff0c\u4f8b\u5982 \"dateFormat\": \"yyyy-MM-dd\" fileFormat \u5426 text \u6587\u4ef6\u5199\u51fa\u7684\u683c\u5f0f\uff0c\u5305\u62eccsv, text\u4e24\u79cd, \u8be6\u89c1\u4e0b\u6587 header \u5426 \u65e0 text\u5199\u51fa\u65f6\u7684\u8868\u5934\uff0c\u793a\u4f8b ['id', 'name', 'age'] writeMode \u00b6 \u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff1a truncate\uff0c\u5199\u5165\u524d\u6e05\u7406\u76ee\u5f55\u4e0b\u4e00fileName\u524d\u7f00\u7684\u6240\u6709\u6587\u4ef6\u3002 append\uff0c\u5199\u5165\u524d\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff0c\u76f4\u63a5\u4f7f\u7528filename\u5199\u5165\uff0c\u5e76\u4fdd\u8bc1\u6587\u4ef6\u540d\u4e0d\u51b2\u7a81\u3002 nonConflict\uff0c\u5982\u679c\u76ee\u5f55\u4e0b\u6709fileName\u524d\u7f00\u7684\u6587\u4ef6\uff0c\u76f4\u63a5\u62a5\u9519\u3002 fileFormat \u00b6 \u6587\u4ef6\u5199\u51fa\u7684\u683c\u5f0f\uff0c\u5305\u62ec csv \u548c text \u4e24\u79cd\uff0ccsv\u662f\u4e25\u683c\u7684csv\u683c\u5f0f\uff0c\u5982\u679c\u5f85\u5199\u6570\u636e\u5305\u62ec\u5217\u5206\u9694\u7b26\uff0c\u5219\u4f1a\u6309\u7167csv\u7684\u8f6c\u4e49\u8bed\u6cd5\u8f6c\u4e49\uff0c\u8f6c\u4e49\u7b26\u53f7\u4e3a\u53cc\u5f15\u53f7 \" \uff1b text\u683c\u5f0f\u662f\u7528\u5217\u5206\u9694\u7b26\u7b80\u5355\u5206\u5272\u5f85\u5199\u6570\u636e\uff0c\u5bf9\u4e8e\u5f85\u5199\u6570\u636e\u5305\u62ec\u5217\u5206\u9694\u7b26\u60c5\u51b5\u4e0b\u4e0d\u505a\u8f6c\u4e49\u3002 \u7c7b\u578b\u8f6c\u6362 \u00b6 Addax \u5185\u90e8\u7c7b\u578b \u672c\u5730\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long Double Double String String Boolean Boolean Date Date","title":"TxtFile Writer"},{"location":"writer/txtfilewriter/#txtfile-writer","text":"TxtFileWriter\u63d0\u4f9b\u4e86\u5411\u672c\u5730\u6587\u4ef6\u5199\u5165\u7c7bCSV\u683c\u5f0f\u7684\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u8868\u6587\u4ef6\u3002","title":"TxtFile Writer"},{"location":"writer/txtfilewriter/#_1","text":"{ \"job\" : { \"setting\" : { \"speed\" : { \"channel\" : 2 , \"bytes\" : -1 } }, \"content\" : { \"reader\" : { \"name\" : \"txtfilereader\" , \"parameter\" : { \"path\" : [ \"/tmp/data\" ], \"encoding\" : \"UTF-8\" , \"column\" : [ { \"index\" : 0 , \"type\" : \"long\" }, { \"index\" : 1 , \"type\" : \"boolean\" }, { \"index\" : 2 , \"type\" : \"double\" }, { \"index\" : 3 , \"type\" : \"string\" }, { \"index\" : 4 , \"type\" : \"date\" , \"format\" : \"yyyy.MM.dd\" } ], \"fieldDelimiter\" : \",\" } }, \"writer\" : { \"name\" : \"txtfilewriter\" , \"parameter\" : { \"path\" : \"/tmp/result\" , \"fileName\" : \"luohw\" , \"writeMode\" : \"truncate\" , \"dateFormat\" : \"yyyy-MM-dd\" } } } } }","title":"\u914d\u7f6e\u6837\u4f8b"},{"location":"writer/txtfilewriter/#_2","text":"\u914d\u7f6e\u9879 \u662f\u5426\u5fc5\u987b \u9ed8\u8ba4\u503c \u63cf\u8ff0 path \u662f \u65e0 \u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u8def\u5f84\u4fe1\u606f\uff0c\u5199\u5165Path\u76ee\u5f55\u4e0b\u5c5e\u591a\u4e2a\u6587\u4ef6 fileName \u662f \u65e0 \u5199\u5165\u7684\u6587\u4ef6\u540d\uff0c\u8be5\u6587\u4ef6\u540d\u4f1a\u6dfb\u52a0\u968f\u673a\u7684\u540e\u7f00\u4f5c\u4e3a\u6bcf\u4e2a\u7ebf\u7a0b\u5199\u5165\u5b9e\u9645\u6587\u4ef6\u540d writeMode \u662f \u65e0 FtpWriter\u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff0c\u652f\u6301 truncate , append , nonConflict \uff0c\u8be6\u89c1\u4e0b\u6587 column \u662f \u9ed8\u8ba4String\u7c7b\u578b \u8bfb\u53d6\u5b57\u6bb5\u5217\u8868\uff0ctype\u6307\u5b9a\u6e90\u6570\u636e\u7684\u7c7b\u578b\uff0c\u8be6\u89c1\u4e0b\u6587 fieldDelimiter \u662f , \u63cf\u8ff0\uff1a\u8bfb\u53d6\u7684\u5b57\u6bb5\u5206\u9694\u7b26 compress \u5426 \u65e0 \u6587\u672c\u538b\u7f29\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4e0d\u538b\u7f29,\u652f\u6301\u538b\u7f29\u7c7b\u578b\u4e3a zip\u3001lzo\u3001lzop\u3001tgz\u3001bzip2 encoding \u5426 utf-8 \u8bfb\u53d6\u6587\u4ef6\u7684\u7f16\u7801\u914d\u7f6e nullFormat \u5426 \\N \u5b9a\u4e49\u54ea\u4e9b\u5b57\u7b26\u4e32\u53ef\u4ee5\u8868\u793a\u4e3anull dateFormat \u5426 \u65e0 \u65e5\u671f\u7c7b\u578b\u7684\u6570\u636e\u5e8f\u5217\u5316\u5230\u6587\u4ef6\u4e2d\u65f6\u7684\u683c\u5f0f\uff0c\u4f8b\u5982 \"dateFormat\": \"yyyy-MM-dd\" fileFormat \u5426 text \u6587\u4ef6\u5199\u51fa\u7684\u683c\u5f0f\uff0c\u5305\u62eccsv, text\u4e24\u79cd, \u8be6\u89c1\u4e0b\u6587 header \u5426 \u65e0 text\u5199\u51fa\u65f6\u7684\u8868\u5934\uff0c\u793a\u4f8b ['id', 'name', 'age']","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"writer/txtfilewriter/#writemode","text":"\u5199\u5165\u524d\u6570\u636e\u6e05\u7406\u5904\u7406\u6a21\u5f0f\uff1a truncate\uff0c\u5199\u5165\u524d\u6e05\u7406\u76ee\u5f55\u4e0b\u4e00fileName\u524d\u7f00\u7684\u6240\u6709\u6587\u4ef6\u3002 append\uff0c\u5199\u5165\u524d\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff0c\u76f4\u63a5\u4f7f\u7528filename\u5199\u5165\uff0c\u5e76\u4fdd\u8bc1\u6587\u4ef6\u540d\u4e0d\u51b2\u7a81\u3002 nonConflict\uff0c\u5982\u679c\u76ee\u5f55\u4e0b\u6709fileName\u524d\u7f00\u7684\u6587\u4ef6\uff0c\u76f4\u63a5\u62a5\u9519\u3002","title":"writeMode"},{"location":"writer/txtfilewriter/#fileformat","text":"\u6587\u4ef6\u5199\u51fa\u7684\u683c\u5f0f\uff0c\u5305\u62ec csv \u548c text \u4e24\u79cd\uff0ccsv\u662f\u4e25\u683c\u7684csv\u683c\u5f0f\uff0c\u5982\u679c\u5f85\u5199\u6570\u636e\u5305\u62ec\u5217\u5206\u9694\u7b26\uff0c\u5219\u4f1a\u6309\u7167csv\u7684\u8f6c\u4e49\u8bed\u6cd5\u8f6c\u4e49\uff0c\u8f6c\u4e49\u7b26\u53f7\u4e3a\u53cc\u5f15\u53f7 \" \uff1b text\u683c\u5f0f\u662f\u7528\u5217\u5206\u9694\u7b26\u7b80\u5355\u5206\u5272\u5f85\u5199\u6570\u636e\uff0c\u5bf9\u4e8e\u5f85\u5199\u6570\u636e\u5305\u62ec\u5217\u5206\u9694\u7b26\u60c5\u51b5\u4e0b\u4e0d\u505a\u8f6c\u4e49\u3002","title":"fileFormat"},{"location":"writer/txtfilewriter/#_3","text":"Addax \u5185\u90e8\u7c7b\u578b \u672c\u5730\u6587\u4ef6 \u6570\u636e\u7c7b\u578b Long Long Double Double String String Boolean Boolean Date Date","title":"\u7c7b\u578b\u8f6c\u6362"}]}